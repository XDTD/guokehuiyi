"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _chai = require("chai");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _uiIcons = require("@instructure/ui-icons");

var _index = _interopRequireDefault(require("../index"));

var _checkA11y = _interopRequireDefault(require("../../../../test/checkA11y"));

describe('OutcomesPerStudent/Score', function () {
  function makeProps() {
    return {
      score: {
        percentScore: 0.5,
        points: 5,
        pointsPossible: 10
      },
      outcome: {
        scoring_method: {
          mastery_percent: 0.4
        }
      }
    };
  }

  it('includes the score', function () {
    var wrapper = (0, _enzyme.mount)(_react.default.createElement(_index.default, makeProps()));
    (0, _chai.expect)(wrapper.text()).to.match(/5\/10/);
  });
  it('does not include the score if no score provided', function () {
    var noPoints = {
      score: null,
      outcome: {
        scoring_method: {
          mastery_percent: 0.4
        }
      }
    };
    var wrapper = (0, _enzyme.mount)(_react.default.createElement(_index.default, noPoints));
    (0, _chai.expect)(wrapper.children()).to.have.length(0);
  });
  it('includes a star if percentScore is greater than mastery', function () {
    var wrapper = (0, _enzyme.shallow)(_react.default.createElement(_index.default, makeProps()), {
      disableLifecycleMethods: true
    });
    (0, _chai.expect)(wrapper.find(_uiIcons.IconStarSolid)).to.have.length(1);
  });
  it('includes a star if percentScore is equal to mastery', function () {
    var props = makeProps();
    props.score.percentScore = 0.4; // eslint-disable-line immutable/no-mutation

    var wrapper = (0, _enzyme.shallow)(_react.default.createElement(_index.default, makeProps()), {
      disableLifecycleMethods: true
    });
    (0, _chai.expect)(wrapper.find(_uiIcons.IconStarSolid)).to.have.length(1);
  });
  it('does not include a star if percentScore is less than mastery', function () {
    var props = makeProps();
    props.score.percentScore = 0.1; // eslint-disable-line immutable/no-mutation

    var wrapper = (0, _enzyme.shallow)(_react.default.createElement(_index.default, props), {
      disableLifecycleMethods: true
    });
    (0, _chai.expect)(wrapper.find(_uiIcons.IconStarSolid)).to.have.length(0);
  });
  it('meets a11y standards', function () {
    return (0, _checkA11y.default)(_react.default.createElement(_index.default, makeProps()));
  });
});