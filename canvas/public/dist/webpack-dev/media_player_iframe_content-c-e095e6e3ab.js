(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([["media_player_iframe_content"],{

/***/ "dKDz":
/*!*******************************************!*\
  !*** ./node_modules/escape-html/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n\n\n//# sourceURL=webpack:///./node_modules/escape-html/index.js?");

/***/ }),

/***/ "qPm6":
/*!**********************************************************!*\
  !*** ./ui/features/media_player_iframe_content/index.js ***!
  \**********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"CxY0\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _instructure_ready__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/ready */ \"3lLS\");\n/* harmony import */ var _instructure_ready__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_instructure_ready__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _react_CanvasMediaPlayer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./react/CanvasMediaPlayer */ \"jofb\");\n/* harmony import */ var _canvas_util_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/util/closedCaptionLanguages */ \"stQK\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n_instructure_ready__WEBPACK_IMPORTED_MODULE_3___default()(() => {\n  var _media_object$media_t;\n\n  // get the media_id from something like\n  //  `http://canvas.example.com/media_objects_iframe/m-48jGWTHdvcV5YPdZ9CKsqbtRzu1jURgu?type=video`\n  // or\n  //  `http://canvas.example.com/media_objects_iframe/?type=video&mediahref=url/to/file.mov`\n  const media_id = window.location.pathname.split('media_objects_iframe/').pop();\n  const media_href_match = window.location.search.match(/mediahref=([^&]+)/);\n  const media_object = ENV.media_object || {};\n  const parsed_loc = Object(url__WEBPACK_IMPORTED_MODULE_2__[\"parse\"])(window.location.href, true);\n  const is_video = /video/.test(media_object === null || media_object === void 0 ? void 0 : media_object.media_type) || /type=video/.test(window.location.search);\n  let href_source;\n\n  if (media_href_match) {\n    href_source = decodeURIComponent(media_href_match[1]);\n\n    if (parsed_loc.query.verifier) {\n      const delim = href_source.indexOf('?') > 0 ? '&' : '?';\n      href_source = `${href_source}${delim}verifier=${parsed_loc.query.verifier}`;\n    }\n\n    if (is_video) {\n      href_source = [href_source];\n    }\n  }\n\n  document.body.setAttribute('style', 'margin: 0; padding: 0; border-style: none'); // if the user takes the video fullscreen and back, the documentElement winds up\n  // with scrollbars, even though everything is the right size.\n\n  document.documentElement.setAttribute('style', 'overflow: hidden;');\n  const div = document.body.firstElementChild;\n\n  if (!window.frameElement) {\n    // we're standalone\n    if (is_video) {\n      // CanvasMediaPlayer leaves room for the 16px vertical margin.\n      div.setAttribute('style', 'width: 640px; max-width: 100%; margin: 16px auto;');\n    } else {\n      div.setAttribute('style', 'width: 320px; height: 14.25rem; margin: 1rem auto;');\n    }\n  }\n\n  const mediaTracks = media_object === null || media_object === void 0 ? void 0 : (_media_object$media_t = media_object.media_tracks) === null || _media_object$media_t === void 0 ? void 0 : _media_object$media_t.map(track => {\n    return {\n      id: track.id,\n      src: `/media_objects/${media_object.media_id}/media_tracks/${track.id}`,\n      label: _canvas_util_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_5__[\"default\"][track.locale] || track.locale,\n      type: track.kind,\n      language: track.locale\n    };\n  });\n  react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_react_CanvasMediaPlayer__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    media_id: media_id,\n    media_sources: href_source || media_object.media_sources,\n    media_tracks: mediaTracks,\n    type: is_video ? 'video' : 'audio'\n  }), document.getElementById('player_container'));\n});\n\n//# sourceURL=webpack:///./ui/features/media_player_iframe_content/index.js?");

/***/ })

}]);