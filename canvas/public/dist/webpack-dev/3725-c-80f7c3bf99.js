(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3725],{

/***/ "2JUV":
/*!*************************************************************************!*\
  !*** ./ui/features/course_settings/react/components/CSPSelectionBox.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CSPSelectionBox; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_course_settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!course_settings */ \"3n31\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/ui-checkbox */ \"Kdwl\");\n/* harmony import */ var _instructure_ui_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-spinner */ \"cPO5\");\n/* harmony import */ var _instructure_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-tooltip */ \"HU+D\");\n/* harmony import */ var _canvas_alerts_react_FlashAlert__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/alerts/react/FlashAlert */ \"uloQ\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nclass CSPSelectionBox extends react__WEBPACK_IMPORTED_MODULE_0__[\"Component\"] {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      disabled: false,\n      loading: true,\n      failedToLoad: false\n    };\n\n    this.handleChange = e => {\n      const initialState = this.state.disabled;\n      const checked = e.currentTarget.checked;\n      this.setState({\n        disabled: checked\n      }, () => {\n        this.props.apiLibrary.put(`/api/v1/courses/${this.props.courseId}/csp_settings`, {\n          status: checked ? 'disabled' : 'enabled'\n        }).then(response => {\n          this.setState({\n            disabled: !response.data.enabled\n          });\n        }).catch(() => {\n          // Something bad happened, revert to the original value\n          this.setState({\n            disabled: initialState\n          }, Object(_canvas_alerts_react_FlashAlert__WEBPACK_IMPORTED_MODULE_6__[\"showFlashError\"])(i18n_course_settings__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Saving the CSP status failed, please try again.')));\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.apiLibrary.get(`/api/v1/courses/${this.props.courseId}/csp_settings`).then(response => {\n      this.setState({\n        disabled: !response.data.enabled,\n        loading: false\n      });\n    }).catch(() => {\n      this.setState({\n        failedToLoad: true,\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    if (!this.state.loading && this.state.failedToLoad) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, i18n_course_settings__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Failed to load CSP information, try refreshing the page.'));\n    }\n\n    const checkbox = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_3__[\"Checkbox\"], {\n      label: i18n_course_settings__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Disable Content Security Policy'),\n      checked: this.state.disabled,\n      onChange: this.handleChange,\n      disabled: !this.props.canManage\n    });\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, this.state.loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_spinner__WEBPACK_IMPORTED_MODULE_4__[\"Spinner\"], {\n      renderTitle: i18n_course_settings__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Loading'),\n      size: \"x-small\"\n    }) : this.props.canManage ? checkbox : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__[\"Tooltip\"], {\n      variant: \"inverse\",\n      tip: i18n_course_settings__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Only account administrators can change this setting.'),\n      placement: \"start\"\n    }, checkbox));\n  }\n\n}\nCSPSelectionBox.propTypes = {\n  apiLibrary: Object(prop_types__WEBPACK_IMPORTED_MODULE_2__[\"shape\"])({\n    get: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"].isRequired,\n    put: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"].isRequired\n  }).isRequired,\n  courseId: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"string\"].isRequired,\n  canManage: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"bool\"]\n};\nCSPSelectionBox.defaultProps = {\n  canManage: false\n};\n\n//# sourceURL=webpack:///./ui/features/course_settings/react/components/CSPSelectionBox.js?");

/***/ }),

/***/ "RMir":
/*!********************************************************************!*\
  !*** ./ui/features/course_settings/react/renderCSPSelectionBox.js ***!
  \********************************************************************/
/*! exports provided: renderCSPSelectionBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"renderCSPSelectionBox\", function() { return renderCSPSelectionBox; });\n/* harmony import */ var _canvas_axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/axios */ \"BrAc\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_CSPSelectionBox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/CSPSelectionBox */ \"2JUV\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction renderCSPSelectionBox(containerElement) {\n  react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components_CSPSelectionBox__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    courseId: ENV.COURSE_ID,\n    canManage: ENV.PERMISSIONS.manage_account_settings,\n    apiLibrary: _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"]\n  }), containerElement);\n}\n\n//# sourceURL=webpack:///./ui/features/course_settings/react/renderCSPSelectionBox.js?");

/***/ })

}]);