(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3735],{

/***/ "0k/6":
/*!***************************************************************************************!*\
  !*** ./packages/canvas-rce/es/rce/plugins/instructure_buttons/registerEditToolbar.js ***!
  \***************************************************************************************/
/*! exports provided: BTN_AND_ICON_ATTRIBUTE, shouldShowEditButton, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BTN_AND_ICON_ATTRIBUTE\", function() { return BTN_AND_ICON_ATTRIBUTE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shouldShowEditButton\", function() { return shouldShowEditButton; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return registerEditToolbar; });\n/* harmony import */ var _format_message_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../format-message.js */ \"NFDp\");\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst BUTTON_ID = 'inst-button-and-icons-edit';\nconst TOOLBAR_ID = 'inst-button-and-icons-edit-toolbar';\nconst BTN_AND_ICON_ATTRIBUTE = 'data-inst-buttons-and-icons';\nconst shouldShowEditButton = node => !!(node !== null && node !== void 0 && node.getAttribute(BTN_AND_ICON_ATTRIBUTE));\nfunction registerEditToolbar(editor, onAction) {\n  addButton(editor, onAction);\n  addContextToolbar(editor);\n}\n\nfunction addButton(editor, onAction) {\n  editor.ui.registry.addButton(BUTTON_ID, {\n    onAction,\n    text: Object(_format_message_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('Edit'),\n    tooltip: Object(_format_message_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('Edit Existing Button / Icon')\n  });\n}\n\nfunction addContextToolbar(editor) {\n  editor.ui.registry.addContextToolbar(TOOLBAR_ID, {\n    items: BUTTON_ID,\n    position: 'node',\n    scope: 'node',\n    predicate: shouldShowEditButton\n  });\n}\n\n//# sourceURL=webpack:///./packages/canvas-rce/es/rce/plugins/instructure_buttons/registerEditToolbar.js?");

/***/ }),

/***/ "F/nJ":
/*!**********************************************************************************************!*\
  !*** ./packages/canvas-rce/es/rce/plugins/instructure_buttons/components/SavedButtonList.js ***!
  \**********************************************************************************************/
/*! exports provided: rceToFile, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rceToFile\", function() { return rceToFile; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _instructure_buttons_registerEditToolbar_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../instructure_buttons/registerEditToolbar.js */ \"0k/6\");\n/* harmony import */ var _instructure_image_Images_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../instructure_image/Images/index.js */ \"ZXxL\");\n\n\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction rceToFile({\n  createdAt,\n  id,\n  name,\n  thumbnailUrl,\n  type,\n  url\n}) {\n  return {\n    content_type: type,\n    date: createdAt,\n    display_name: name,\n    filename: name,\n    href: url,\n    id,\n    thumbnail_url: thumbnailUrl,\n    [_instructure_buttons_registerEditToolbar_js__WEBPACK_IMPORTED_MODULE_3__[\"BTN_AND_ICON_ATTRIBUTE\"]]: true\n  };\n}\n\nconst SavedButtonList = ({\n  context,\n  onImageEmbed,\n  searchString,\n  sortBy,\n  source\n}) => {\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(null),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        buttonsAndIconsBookmark = _useState2[0],\n        setButtonsAndIconsBookmark = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])([]),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        buttonsAndIcons = _useState4[0],\n        setButtonsAndIcons = _useState4[1];\n\n  const _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(true),\n        _useState6 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n        hasMore = _useState6[0],\n        setHasMore = _useState6[1];\n\n  const _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(true),\n        _useState8 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState7, 2),\n        isLoading = _useState8[0],\n        setIsLoading = _useState8[1];\n\n  const resetState = () => {\n    setButtonsAndIconsBookmark(null);\n    setButtonsAndIcons([]);\n    setHasMore(true);\n    setIsLoading(true);\n  };\n\n  const onLoadedImages = ({\n    bookmark,\n    files\n  }) => {\n    setButtonsAndIconsBookmark(bookmark);\n    setHasMore(bookmark !== null);\n    setIsLoading(false);\n    setButtonsAndIcons(prevButtonsAndIcons => [...prevButtonsAndIcons, ...files.filter(({\n      type\n    }) => type === 'image/svg+xml').map(rceToFile)]);\n  };\n\n  const fetchButtonsAndIcons = bookmark => {\n    setIsLoading(true);\n    source.fetchButtonsAndIcons({\n      contextId: context.id,\n      contextType: context.type\n    }, bookmark, searchString, sortBy, onLoadedImages);\n  };\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(() => {\n    resetState();\n  }, [searchString, sortBy.order, sortBy.sort]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_image_Images_index_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    contextType: context.type,\n    fetchInitialImages: () => {\n      fetchButtonsAndIcons();\n    },\n    fetchNextImages: () => {\n      fetchButtonsAndIcons(buttonsAndIconsBookmark);\n    },\n    images: {\n      [context.type]: {\n        error: null,\n        files: buttonsAndIcons,\n        hasMore,\n        isLoading\n      }\n    },\n    onImageEmbed: onImageEmbed,\n    searchString: searchString,\n    sortBy: sortBy\n  });\n};\n\nSavedButtonList.propTypes = {\n  context: Object(prop_types__WEBPACK_IMPORTED_MODULE_2__[\"shape\"])({\n    id: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"string\"].isRequired,\n    type: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"string\"].isRequired\n  }),\n  onImageEmbed: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"].isRequired,\n  searchString: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"string\"],\n  sortBy: Object(prop_types__WEBPACK_IMPORTED_MODULE_2__[\"shape\"])({\n    order: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"string\"],\n    sort: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"string\"]\n  }),\n  source: Object(prop_types__WEBPACK_IMPORTED_MODULE_2__[\"shape\"])({\n    fetchButtonsAndIcons: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"].isRequired\n  })\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (SavedButtonList);\n\n//# sourceURL=webpack:///./packages/canvas-rce/es/rce/plugins/instructure_buttons/components/SavedButtonList.js?");

/***/ })

}]);