(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[100],{

/***/ "6NVu":
/*!***********************************!*\
  !*** ./packages/deparam/index.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return deparam; });\n/* harmony import */ var obj_unflatten__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! obj-unflatten */ \"IxAH\");\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n// an extraction of the deparam method from Ben Alman's jQuery BBQ\n// http://benalman.com/projects/jquery-bbq-plugin/\n\n\n\nconst coerceTypes = {\n  true: true,\n  false: false,\n  null: null\n}\n\nfunction deparam(params, coerce) {\n  // shortcut for just deparam'ing the current querystring\n  if (!params || typeof params === 'boolean') {\n    const currentQueryString = window.location.search\n    if (!currentQueryString) return {}\n    return deparam(currentQueryString, ...arguments)\n  }\n\n  const obj = {}\n  params\n    .replace(/\\+/g, ' ')\n    .split('&')\n    .forEach(param => {\n      let [key, val] = param.split('=')\n      key = decodeURIComponent(key)\n      val = decodeURIComponent(val)\n\n      // coerce values.\n      if (coerce) {\n        val =\n          val && !isNaN(val)\n            ? +val // number\n            : val === 'undefined'\n            ? undefined // undefined\n            : coerceTypes[val] !== undefined\n            ? coerceTypes[val] // true, false, null\n            : val // string\n      }\n\n      obj[key] = val\n    })\n\n  return Object(obj_unflatten__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(obj)\n}\n\n\n//# sourceURL=webpack:///./packages/deparam/index.js?");

/***/ }),

/***/ "IxAH":
/*!*****************************************!*\
  !*** ./packages/obj-unflatten/index.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return unflatten; });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n// turns {'foo[bar]': 1} into {foo: {bar: 1}}\nfunction unflatten(obj) {\n  return underscore__WEBPACK_IMPORTED_MODULE_0___default()(obj).reduce((newObj, val, key) => {\n    let keys = key.split('][')\n    let lastKey = keys.length - 1\n\n    // If the first keys part contains [ and the last ends with ], then []\n    // are correctly balanced.\n    if (/\\[/.test(keys[0]) && /\\]$/.test(keys[lastKey])) {\n      // Remove the trailing ] from the last keys part.\n      keys[lastKey] = keys[lastKey].replace(/\\]$/, '')\n\n      // Split first keys part into two parts on the [ and add them back onto\n      // the beginning of the keys array.\n      keys = keys\n        .shift()\n        .split('[')\n        .concat(keys)\n      lastKey = keys.length - 1\n    } else {\n      // Basic 'foo' style key.\n      lastKey = 0\n    }\n\n    if (lastKey) {\n      // Complex key, build deep object structure based on a few rules:\n      // * The 'cur' pointer starts at the object top-level.\n      // * [] = array push (n is set to array length), [n] = array if n is\n      //   numeric, otherwise object.\n      // * If at the last keys part, set the value.\n      // * For each keys part, if the current level is undefined create an\n      //   object or array based on the type of the next keys part.\n      // * Move the 'cur' pointer to the next level.\n      // * Rinse & repeat.\n      let i = 0\n      let cur = newObj\n      while (i <= lastKey) {\n        key = keys[i] === '' ? cur.length : keys[i]\n\n        cur = cur[key] =\n          i < lastKey ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : []) : val\n        i++\n      }\n    } else {\n      // Simple key, even simpler rules, since only scalars and shallow\n      // arrays are allowed.\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(newObj[key])) {\n        // val is already an array, so push on the next value.\n        newObj[key].push(val)\n      } else if (newObj[key] != null) {\n        // val isn't an array, but since a second value has been specified,\n        // convert val into an array.\n        newObj[key] = [newObj[key], val]\n      } else {\n        // val is a scalar.\n        newObj[key] = val\n      }\n    }\n\n    return newObj\n  }, Object.create(null))\n}\n\n\n//# sourceURL=webpack:///./packages/obj-unflatten/index.js?");

/***/ }),

/***/ "TvTI":
/*!****************************************!*\
  !*** ./ui/shared/util/templateData.js ***!
  \****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_helpers */ \"8JEM\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n/* replaceTags */\n// Fills the selected object(s) with data values as specified.  Plaintext values should be specified in the\n//  data: data used to fill template.\n//  id: set the id attribute of the template object\n//  textValues: a list of strings, which values should be plaintext\n//  htmlValues: a list of strings, which values should be html\n//  hrefValues: List of string.  Searches for all anchor tags in the template\n//    and globally replaces \"{{ value }}\" with data[value].  Useful for adding\n//    new elements asynchronously, when you don't know what their URL will be\n//    until they're created.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData = function (options) {\n  if (this.length && options) {\n    if (options.iterator) {\n      //  todo: replace .andSelf with .addBack when JQuery is upgraded.\n      this.find('*').andSelf().each(function () {\n        const $el = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n        jquery__WEBPACK_IMPORTED_MODULE_0___default.a.each(['name', 'id', 'class'], (i, attr) => {\n          if ($el.attr(attr)) {\n            $el.attr(attr, $el.attr(attr).replace(/-iterator-/, options.iterator));\n          }\n        });\n      });\n    }\n\n    if (options.id) {\n      this.attr('id', options.id);\n    }\n\n    let contentChange = false;\n\n    if (options.data) {\n      for (var item in options.data) {\n        if (options.except && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.except) != -1) {\n          continue;\n        }\n\n        if (options.data[item] && options.dataValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.dataValues) != -1) {\n          this.data(item, options.data[item].toString());\n        }\n\n        const $found_all = this.find('.' + item);\n        var avoid = options.avoid || '';\n        $found_all.each(function () {\n          const $found = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n\n          if ($found.length > 0 && $found.closest(avoid).length === 0) {\n            if (typeof options.data[item] === 'undefined' || options.data[item] === null) {\n              options.data[item] = '';\n            }\n\n            if (options.htmlValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.htmlValues) != -1) {\n              $found.html(jquery__WEBPACK_IMPORTED_MODULE_0___default.a.raw(options.data[item].toString()));\n\n              if ($found.hasClass('user_content')) {\n                contentChange = true;\n                $found.removeClass('enhanced');\n                $found.data('unenhanced_content_html', options.data[item].toString());\n              }\n            } else if ($found[0].tagName.toUpperCase() == 'INPUT') {\n              $found.val(options.data[item]);\n            } else {\n              try {\n                const str = options.data[item].toString();\n                $found.html(Object(html_escape__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(str));\n              } catch (e) {}\n            }\n          }\n        });\n      }\n    }\n\n    if (options.hrefValues && options.data) {\n      this.find('a,span[rel]').each(function () {\n        let $obj = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this),\n            oldHref,\n            oldRel,\n            oldName;\n\n        for (const i in options.hrefValues) {\n          if (!options.hrefValues.hasOwnProperty(i)) {\n            continue;\n          }\n\n          const name = options.hrefValues[i];\n\n          if (oldHref = $obj.attr('href')) {\n            const newHref = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldHref, name, encodeURIComponent(options.data[name]));\n            const orig = $obj.text() === $obj.html() ? $obj.text() : null;\n\n            if (oldHref !== newHref) {\n              $obj.attr('href', newHref);\n\n              if (orig) {\n                $obj.text(orig);\n              }\n            }\n          }\n\n          if (oldRel = $obj.attr('rel')) {\n            $obj.attr('rel', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldRel, name, options.data[name]));\n          }\n\n          if (oldName = $obj.attr('name')) {\n            $obj.attr('name', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldName, name, options.data[name]));\n          }\n        }\n      });\n    }\n\n    if (contentChange) {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).triggerHandler('user_content_change');\n    }\n  }\n\n  return this;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData.defaults = {\n  htmlValues: null,\n  hrefValues: null\n}; // Reverse version of fillTemplateData.  Lets you pull out the string versions of values held in divs, spans, etc.\n// Based on the usage of class names within an object to specify an object's sub-parts.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateData = function (options) {\n  if (!this.length || !options) {\n    return {};\n  }\n\n  var result = {},\n      item,\n      val;\n\n  if (options.textValues) {\n    const _this = this;\n\n    options.textValues.forEach(item => {\n      const $item = _this.find('.' + item.replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n\n      val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($item.text());\n\n      if ($item.html() === '&nbsp;') {\n        val = '';\n      }\n\n      if (val.length === 1 && val.charCodeAt(0) === 160) {\n        val = '';\n      }\n\n      result[item] = val;\n    });\n  }\n\n  if (options.dataValues) {\n    for (item in options.dataValues) {\n      var val = this.data(options.dataValues[item]);\n\n      if (val) {\n        result[options.dataValues[item]] = val;\n      }\n    }\n  }\n\n  if (options.htmlValues) {\n    for (item in options.htmlValues) {\n      const $elem = this.find('.' + options.htmlValues[item].replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n      val = null;\n\n      if ($elem.hasClass('user_content') && $elem.data('unenhanced_content_html')) {\n        val = $elem.data('unenhanced_content_html');\n      } else {\n        val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($elem.html());\n      }\n\n      result[options.htmlValues[item]] = val;\n    }\n  }\n\n  return result;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateValue = function (value, options) {\n  const opts = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, options, {\n    textValues: [value]\n  });\n  return this.getTemplateData(opts)[value];\n};\n\n//# sourceURL=webpack:///./ui/shared/util/templateData.js?");

/***/ }),

/***/ "VqOX":
/*!**************************************************************************************!*\
  !*** ./frontend_build/i18n.js?mediaCommentThumbnail!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('mediaCommentThumbnail'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?mediaCommentThumbnail");

/***/ }),

/***/ "bbn0":
/*!******************************************************************!*\
  !*** ./ui/shared/media-comments/jquery/mediaCommentThumbnail.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_mediaCommentThumbnail__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!mediaCommentThumbnail */ \"VqOX\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var deparam__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! deparam */ \"6NVu\");\n//\n// Copyright (C) 2011 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\nconst MEDIA_COMMENT_THUMBNAIL_SIZES = {\n  normal: {\n    width: 140,\n    height: 100\n  },\n  small: {\n    width: 70,\n    height: 50\n  }\n};\n\nfunction createMediaCommentThumbnail(elem, size, keepOriginalText) {\n  if (!INST.kalturaSettings) return console.log('Kaltura has not been enabled for this account');\n  let idAttr, url;\n  const $link = jquery__WEBPACK_IMPORTED_MODULE_3___default()(elem);\n\n  try {\n    const a = document.createElement('a');\n    a.href = $link.attr('href');\n    url = a;\n  } catch (error) {}\n\n  if (url && Object(deparam__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(url.search).no_preview) return;\n  const dimensions = MEDIA_COMMENT_THUMBNAIL_SIZES[size] || MEDIA_COMMENT_THUMBNAIL_SIZES.normal;\n  const id = $link.data('media_comment_id') || jquery__WEBPACK_IMPORTED_MODULE_3___default.a.trim($link.find('.media_comment_id:first').text()) || (idAttr = $link.attr('id')) && idAttr.match(/^media_comment_/) && idAttr.substring(14) || jquery__WEBPACK_IMPORTED_MODULE_3___default.a.trim($link.parent().find('.media_comment_id:first').text());\n  const authorName = $link.data('author');\n  const createdAt = $link.data('created_at');\n  let altText;\n\n  if (authorName && createdAt) {\n    altText = i18n_mediaCommentThumbnail__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Play media comment by %{name} from %{createdAt}.', {\n      name: authorName,\n      createdAt\n    });\n  } else {\n    altText = i18n_mediaCommentThumbnail__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Play media comment.');\n  }\n\n  if (id) {\n    const domain = `https://${INST.kalturaSettings.resource_domain}`;\n    const backgroundUrl = `${domain}/p/${INST.kalturaSettings.partner_id}/thumbnail/entry_id/${id}/width/` + `${dimensions.width}/height/${dimensions.height}/bgcolor/000000/type/2/vid_sec/5`;\n    const $thumbnail = jquery__WEBPACK_IMPORTED_MODULE_3___default()(`<span\n        style='background-image: url(${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(backgroundUrl)});'\n        class='media_comment_thumbnail media_comment_thumbnail-${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(size)}'\n      >\n        <span class='media_comment_thumbnail_play_button'>\n          <span class='screenreader-only'>\n            ${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(altText)}\n          </span>\n        </span>\n      </span>`);\n    const $p = $link.closest('p');\n\n    if (!$p.attr('title')) {\n      $p.attr('title', Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(altText));\n    }\n\n    let $a = $link;\n\n    if (keepOriginalText) {\n      $a = $link.clone().empty().removeClass('instructure_file_link');\n      const $holder = $link.parent('.instructure_file_link_holder');\n\n      if ($holder.length) {\n        $a.appendTo($holder);\n      } else {\n        $link.after($a);\n      }\n    } else {\n      $link.empty();\n    }\n\n    $a.data('download', $a.attr('href')).prop('href', '#').addClass('instructure_inline_media_comment').append($thumbnail).css({\n      backgroundImage: '',\n      padding: 0\n    });\n  }\n} // public API\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (jquery__WEBPACK_IMPORTED_MODULE_3___default.a.fn.mediaCommentThumbnail = function (size = 'normal', keepOriginalText) {\n  return this.each(function () {\n    // defer each thumbnail generation till the next time through the event loop to not kill browser rendering,\n    // has the effect of saying \"only work on thumbnailing these while the browser is not doing something else\"\n    underscore__WEBPACK_IMPORTED_MODULE_1___default.a.defer(createMediaCommentThumbnail, this, size, keepOriginalText);\n  });\n});\n\n//# sourceURL=webpack:///./ui/shared/media-comments/jquery/mediaCommentThumbnail.js?");

/***/ })

}]);