(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[83],{

/***/ "+VxH":
/*!**********************************************************!*\
  !*** ./ui/shared/deep-linking/models/LinkContentItem.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return LinkContentItem; });\n/* harmony import */ var _ContentItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ContentItem */ \"D1L3\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n // Base content item type\n\nclass LinkContentItem extends _ContentItem__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(json, ltiEndpoint, selection) {\n    super(json);\n    this.type = LinkContentItem.type;\n\n    if (selection && selection !== '') {\n      this.text = selection;\n    }\n  }\n\n  get properties() {\n    return Object.freeze(['url', 'title', 'text', 'icon', 'thumbnail', 'iframe', 'custom', 'lookup_uuid']);\n  }\n\n  toHtmlString() {\n    if (this.iframe && this.iframe.src) {\n      return this.iframeTag();\n    }\n\n    return this.anchorTag(this.linkBody());\n  }\n\n  linkText() {\n    return this.text && this.text.trim() || this.title && this.title.trim();\n  }\n\n  linkBody() {\n    if (this.thumbnail) {\n      return this.linkThumbnail();\n    }\n\n    return this.linkText();\n  }\n\n}\nLinkContentItem.type = 'link';\n\n//# sourceURL=webpack:///./ui/shared/deep-linking/models/LinkContentItem.js?");

/***/ }),

/***/ "D1L3":
/*!******************************************************!*\
  !*** ./ui/shared/deep-linking/models/ContentItem.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ContentItem; });\n/* harmony import */ var _canvas_external_apps_iframeAllowances__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/external-apps/iframeAllowances */ \"dDTa\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nclass ContentItem {\n  constructor(json) {\n    this.assignProperties(json);\n  }\n\n  toHtmlString() {// override in sub classes\n  }\n\n  assignProperties(json) {\n    this.properties.forEach(property => {\n      this[property] = json[property];\n    });\n  }\n\n  linkThumbnail() {\n    return this.imageTag(this.thumbnail);\n  }\n\n  iframeTag() {\n    const iframe = this.iframe;\n\n    if (iframe) {\n      const iframeTag = document.createElement('iframe');\n      iframeTag.setAttribute('src', iframe.src);\n      iframeTag.setAttribute('title', this.title || '');\n      iframeTag.setAttribute('allowfullscreen', 'true');\n      iframeTag.setAttribute('allow', Object(_canvas_external_apps_iframeAllowances__WEBPACK_IMPORTED_MODULE_0__[\"default\"])());\n\n      if (iframe.width) {\n        iframeTag.style.width = `${iframe.width}px`;\n      }\n\n      if (iframe.height) {\n        iframeTag.style.height = `${iframe.height}px`;\n      }\n\n      return iframeTag.outerHTML;\n    }\n  }\n\n  imageTag(src, width, height) {\n    const imgTag = document.createElement('img');\n    imgTag.setAttribute('src', src);\n\n    if (this.text) {\n      imgTag.setAttribute('alt', this.text);\n    }\n\n    if (width) {\n      imgTag.setAttribute('width', width);\n    }\n\n    if (height) {\n      imgTag.setAttribute('height', height);\n    }\n\n    return imgTag.outerHTML;\n  }\n\n  anchorTag(innerHTML) {\n    const anchorTag = document.createElement('a');\n    anchorTag.setAttribute('href', this.safeUrl());\n    anchorTag.setAttribute('title', this.title);\n    anchorTag.setAttribute('target', '_blank');\n    anchorTag.innerHTML = innerHTML;\n    return anchorTag.outerHTML;\n  }\n\n  safeUrl() {\n    return this.url.replace(/^(data:text\\/html|javascript:)/, '#$1');\n  }\n\n}\n\n//# sourceURL=webpack:///./ui/shared/deep-linking/models/ContentItem.js?");

/***/ }),

/***/ "DfdI":
/*!******************************************************************!*\
  !*** ./ui/shared/deep-linking/models/ResourceLinkContentItem.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ResourceLinkContentItem; });\n/* harmony import */ var _LinkContentItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LinkContentItem */ \"+VxH\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nclass ResourceLinkContentItem extends _LinkContentItem__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(json, ltiEndpoint, selection) {\n    super(json, ltiEndpoint, selection);\n    this.url = `${ltiEndpoint}?${this.ltiEndpointParams(json.url, json.lookup_uuid)}`;\n  }\n\n  ltiEndpointParams(url, lookupUuid) {\n    let endpointParams = 'display=borderless';\n\n    if (lookupUuid !== null && lookupUuid !== void 0) {\n      endpointParams += `&resource_link_lookup_uuid=${lookupUuid}`;\n    }\n\n    return `${endpointParams}&url=${encodeURIComponent(url)}`;\n  }\n\n  toHtmlString() {\n    if (this.iframe) {\n      // The iframe src must always be the Canvas launch endpoint\n      this.iframe.src = this.safeUrl();\n      return this.iframeTag();\n    }\n\n    return this.anchorTag(this.linkBody());\n  }\n\n}\n\n//# sourceURL=webpack:///./ui/shared/deep-linking/models/ResourceLinkContentItem.js?");

/***/ }),

/***/ "G4i8":
/*!**************************************************************************!*\
  !*** ./ui/shared/lti/jquery/subjects lazy ^\.\/.*\.js$ namespace object ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var map = {\n\t\"./__tests__/lti.resourceImported.test.js\": [\n\t\t\"LFe7\",\n\t\t3726\n\t],\n\t\"./__tests__/lti.screenReaderAlert.test.js\": [\n\t\t\"0Guc\",\n\t\t3727\n\t],\n\t\"./__tests__/requestFullWindowLaunch.test.js\": [\n\t\t\"o6ta\",\n\t\t3728\n\t],\n\t\"./lti.enableScrollEvents.js\": [\n\t\t\"HVU3\",\n\t\t3770\n\t],\n\t\"./lti.fetchWindowSize.js\": [\n\t\t\"OANa\",\n\t\t3771\n\t],\n\t\"./lti.frameResize.js\": [\n\t\t\"bSyB\",\n\t\t3709\n\t],\n\t\"./lti.removeUnloadMessage.js\": [\n\t\t\"tjuu\",\n\t\t3729\n\t],\n\t\"./lti.resourceImported.js\": [\n\t\t\"FC2N\",\n\t\t3772\n\t],\n\t\"./lti.screenReaderAlert.js\": [\n\t\t\"YYEg\",\n\t\t3773\n\t],\n\t\"./lti.scrollToTop.js\": [\n\t\t\"W/R1\",\n\t\t3774\n\t],\n\t\"./lti.setUnloadMessage.js\": [\n\t\t\"6fDN\",\n\t\t3730\n\t],\n\t\"./lti.showModuleNavigation.js\": [\n\t\t\"NSTA\",\n\t\t3775\n\t],\n\t\"./requestFullWindowLaunch.js\": [\n\t\t\"8IHO\",\n\t\t3776\n\t],\n\t\"./toggleCourseNavigationMenu.js\": [\n\t\t\"ECMy\",\n\t\t3699\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"G4i8\";\nmodule.exports = webpackAsyncContext;\n\n//# sourceURL=webpack:///./ui/shared/lti/jquery/subjects_lazy_^\\.\\/.*\\.js$_namespace_object?");

/***/ }),

/***/ "SIa4":
/*!******************************************************************!*\
  !*** ./ui/shared/deep-linking/models/HtmlFragmentContentItem.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return HtmlFragmentContentItem; });\n/* harmony import */ var _ContentItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ContentItem */ \"D1L3\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nclass HtmlFragmentContentItem extends _ContentItem__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(json) {\n    super(json);\n    this.type = HtmlFragmentContentItem.type;\n  }\n\n  get properties() {\n    return Object.freeze(['html', 'title', 'text']);\n  }\n\n  toHtmlString() {\n    // TinyMCE takes care of sanitizing this HTML string.\n    // If using a target other than TinyMCE be sure to sanitize.\n    return this.html;\n  }\n\n}\nHtmlFragmentContentItem.type = 'html';\n\n//# sourceURL=webpack:///./ui/shared/deep-linking/models/HtmlFragmentContentItem.js?");

/***/ }),

/***/ "fhP7":
/*!************************************************************!*\
  !*** ./ui/shared/rce/plugins/canvas_mentions/constants.js ***!
  \************************************************************/
/*! exports provided: TRIGGER_CHAR, MARKER_ID, MARKER_SELECTOR, MENTION_MENU_ID, MENTION_MENU_SELECTOR, TRUSTED_MESSAGE_ORIGIN, NAVIGATION_MESSAGE, INPUT_CHANGE_MESSAGE, SELECTION_MESSAGE, KEY_CODES, KEY_NAMES, ARIA_ID_TEMPLATES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TRIGGER_CHAR\", function() { return TRIGGER_CHAR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MARKER_ID\", function() { return MARKER_ID; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MARKER_SELECTOR\", function() { return MARKER_SELECTOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MENTION_MENU_ID\", function() { return MENTION_MENU_ID; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MENTION_MENU_SELECTOR\", function() { return MENTION_MENU_SELECTOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TRUSTED_MESSAGE_ORIGIN\", function() { return TRUSTED_MESSAGE_ORIGIN; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NAVIGATION_MESSAGE\", function() { return NAVIGATION_MESSAGE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"INPUT_CHANGE_MESSAGE\", function() { return INPUT_CHANGE_MESSAGE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SELECTION_MESSAGE\", function() { return SELECTION_MESSAGE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KEY_CODES\", function() { return KEY_CODES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KEY_NAMES\", function() { return KEY_NAMES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ARIA_ID_TEMPLATES\", function() { return ARIA_ID_TEMPLATES; });\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst TRIGGER_CHAR = '@';\nconst MARKER_ID = 'mentions-marker';\nconst MARKER_SELECTOR = `span#${MARKER_ID}`;\nconst MENTION_MENU_ID = 'mention-menu';\nconst MENTION_MENU_SELECTOR = 'span#mention-menu';\nconst TRUSTED_MESSAGE_ORIGIN = ENV.DEEP_LINKING_POST_MESSAGE_ORIGIN;\nconst NAVIGATION_MESSAGE = 'mentions.NavigationEvent';\nconst INPUT_CHANGE_MESSAGE = 'mentions.InputChangeEvent';\nconst SELECTION_MESSAGE = 'mentions.SelectionEvent';\nconst KEY_CODES = {\n  backspace: 8,\n  enter: 13,\n  up: 38,\n  down: 40,\n  escape: 27,\n  tab: 9\n};\nconst KEY_NAMES = {\n  [KEY_CODES.up]: 'UpArrow',\n  [KEY_CODES.down]: 'DownArrow',\n  [KEY_CODES.enter]: 'Enter'\n};\nconst ARIA_ID_TEMPLATES = {\n  ariaControlTemplate: instanceId => {\n    return `${instanceId}-mention-popup`;\n  },\n  activeDescendant: (instanceId, itemId) => {\n    return `${instanceId}-mention-popup-item-${itemId}`;\n  }\n};\n\n//# sourceURL=webpack:///./ui/shared/rce/plugins/canvas_mentions/constants.js?");

/***/ }),

/***/ "hK1/":
/*!********************************************************!*\
  !*** ./ui/shared/deep-linking/ContentItemProcessor.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ContentItemProcessor; });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_LinkContentItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./models/LinkContentItem */ \"+VxH\");\n/* harmony import */ var _models_ResourceLinkContentItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./models/ResourceLinkContentItem */ \"DfdI\");\n/* harmony import */ var _models_ImageContentItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./models/ImageContentItem */ \"pWRM\");\n/* harmony import */ var _models_HtmlFragmentContentItem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./models/HtmlFragmentContentItem */ \"SIa4\");\n/* harmony import */ var _canvas_lti_jquery_messages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/lti/jquery/messages */ \"jFoo\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\nclass ContentItemProcessor {\n  constructor(contentItems, messages, logs, ltiEndpoint, processHandler) {\n    this.contentItems = contentItems;\n    this.messages = messages;\n    this.logs = logs;\n    this.ltiEndpoint = ltiEndpoint;\n    this.processHandler = processHandler;\n    this.showMessages();\n    this.showLogs();\n  }\n\n  get loggingEnabled() {\n    return ENV && ENV.DEEP_LINKING_LOGGING;\n  }\n\n  get typeMap() {\n    return {\n      link: _models_LinkContentItem__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n      ltiResourceLink: _models_ResourceLinkContentItem__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n      image: _models_ImageContentItem__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n      html: _models_HtmlFragmentContentItem__WEBPACK_IMPORTED_MODULE_4__[\"default\"]\n    };\n  }\n\n  static fromEvent(event, processHandler) {\n    const _event$data = event.data,\n          content_items = _event$data.content_items,\n          msg = _event$data.msg,\n          log = _event$data.log,\n          errormsg = _event$data.errormsg,\n          errorlog = _event$data.errorlog,\n          ltiEndpoint = _event$data.ltiEndpoint,\n          messageType = _event$data.messageType;\n\n    if (messageType !== 'LtiDeepLinkingResponse') {\n      return;\n    }\n\n    return new this(content_items, {\n      msg,\n      errormsg\n    }, {\n      log,\n      errorlog\n    }, ltiEndpoint, processHandler);\n  }\n\n  process() {\n    // close any new tabs/popups that were created by a full window launch\n    if (_canvas_lti_jquery_messages__WEBPACK_IMPORTED_MODULE_5__[\"ltiState\"] !== null && _canvas_lti_jquery_messages__WEBPACK_IMPORTED_MODULE_5__[\"ltiState\"] !== void 0 && _canvas_lti_jquery_messages__WEBPACK_IMPORTED_MODULE_5__[\"ltiState\"].fullWindowProxy) {\n      _canvas_lti_jquery_messages__WEBPACK_IMPORTED_MODULE_5__[\"ltiState\"].fullWindowProxy.close();\n    }\n\n    return this.processHandler(...arguments);\n  }\n\n  showMessages() {\n    if (this.messages.errormsg) {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default.a.flashError(this.messages.errormsg);\n    }\n\n    if (this.messages.msg) {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default.a.flashMessage(this.messages.msg);\n    }\n  }\n\n  showLogs() {\n    if (this.loggingEnabled) {\n      if (this.logs.errorlog) {\n        console.error(this.logs.errorlog);\n      }\n\n      if (this.logs.log) {\n        console.log(this.logs.log);\n      }\n    }\n  }\n\n}\n\n//# sourceURL=webpack:///./ui/shared/deep-linking/ContentItemProcessor.js?");

/***/ }),

/***/ "iO0t":
/*!***************************************************!*\
  !*** ./ui/shared/lti/jquery/response_messages.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"VTBJ\");\n\n\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst GENERIC_ERROR_CODE = 'error';\nconst UNSUPPORTED_SUBJECT_ERROR_CODE = 'unsupported_subject';\nconst WRONG_ORIGIN_ERROR_CODE = 'wrong_origin';\nconst BAD_REQUEST_ERROR_CODE = 'bad_request';\n\nconst buildResponseMessages = ({\n  targetWindow,\n  origin,\n  subject,\n  message_id\n}) => {\n  const sendResponse = (contents = {}) => {\n    const message = {\n      subject: `${subject}.response`\n    };\n\n    if (message_id) {\n      message.message_id = message_id;\n    }\n\n    if (targetWindow) {\n      targetWindow.postMessage(Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, message), contents), origin);\n    } else {\n      // eslint-disable-next-line no-console\n      console.error('Error sending response postMessage: target window does not exist');\n    }\n  };\n\n  const sendSuccess = () => {\n    sendResponse({});\n  };\n\n  const sendError = (code, message) => {\n    const error = {\n      code\n    };\n\n    if (message) {\n      error.message = message;\n    }\n\n    sendResponse({\n      error\n    });\n  };\n\n  const sendGenericError = message => {\n    sendError(GENERIC_ERROR_CODE, message);\n  };\n\n  const sendBadRequestError = message => {\n    sendError(BAD_REQUEST_ERROR_CODE, message);\n  };\n\n  const sendWrongOriginError = () => {\n    sendError(WRONG_ORIGIN_ERROR_CODE);\n  };\n\n  const sendUnsupportedSubjectError = () => {\n    sendError(UNSUPPORTED_SUBJECT_ERROR_CODE);\n  };\n\n  return {\n    sendResponse,\n    sendSuccess,\n    sendError,\n    sendGenericError,\n    sendBadRequestError,\n    sendWrongOriginError,\n    sendUnsupportedSubjectError\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (buildResponseMessages);\n\n//# sourceURL=webpack:///./ui/shared/lti/jquery/response_messages.js?");

/***/ }),

/***/ "jFoo":
/*!******************************************!*\
  !*** ./ui/shared/lti/jquery/messages.js ***!
  \******************************************/
/*! exports provided: ltiState, SUBJECT_ALLOW_LIST, SUBJECT_IGNORE_LIST, ltiMessageHandler, monitorLtiMessages */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ltiState\", function() { return ltiState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SUBJECT_ALLOW_LIST\", function() { return SUBJECT_ALLOW_LIST; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SUBJECT_IGNORE_LIST\", function() { return SUBJECT_IGNORE_LIST; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ltiMessageHandler\", function() { return ltiMessageHandler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"monitorLtiMessages\", function() { return monitorLtiMessages; });\n/* harmony import */ var _rce_plugins_canvas_mentions_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../rce/plugins/canvas_mentions/constants */ \"fhP7\");\n/* harmony import */ var _response_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./response_messages */ \"iO0t\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/* eslint no-console: 0 */\n\n // page-global storage for data relevant to LTI postMessage events\n\nconst ltiState = {};\nconst SUBJECT_ALLOW_LIST = ['lti.enableScrollEvents', 'lti.fetchWindowSize', 'lti.frameResize', 'lti.removeUnloadMessage', 'lti.resourceImported', 'lti.screenReaderAlert', 'lti.scrollToTop', 'lti.setUnloadMessage', 'lti.showModuleNavigation', 'requestFullWindowLaunch', 'toggleCourseNavigationMenu']; // These are handled elsewhere so ignore them\n\nconst SUBJECT_IGNORE_LIST = ['A2ExternalContentReady', 'LtiDeepLinkingResponse', _rce_plugins_canvas_mentions_constants__WEBPACK_IMPORTED_MODULE_0__[\"NAVIGATION_MESSAGE\"], _rce_plugins_canvas_mentions_constants__WEBPACK_IMPORTED_MODULE_0__[\"INPUT_CHANGE_MESSAGE\"], _rce_plugins_canvas_mentions_constants__WEBPACK_IMPORTED_MODULE_0__[\"SELECTION_MESSAGE\"]];\n\nasync function ltiMessageHandler(e, platformStorageFeatureFlag = false) {\n  if (e.data.source && e.data.source.includes('react-devtools')) {\n    return false;\n  }\n\n  let message;\n\n  try {\n    message = typeof e.data === 'string' ? JSON.parse(e.data) : e.data;\n  } catch (err) {\n    // unparseable message may not be meant for our handlers\n    return false;\n  } // look at messageType for backwards compatibility\n\n\n  const subject = message.subject || message.messageType;\n  const responseMessages = Object(_response_messages__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n    targetWindow: e.source,\n    origin: e.origin,\n    subject,\n    message_id: message.message_id\n  });\n\n  if (SUBJECT_IGNORE_LIST.includes(subject)) {\n    // These messages are handled elsewhere\n    return false;\n  } else if (!SUBJECT_ALLOW_LIST.includes(subject)) {\n    // Enforce subject allowlist -- unknown type\n    if (platformStorageFeatureFlag) {\n      responseMessages.sendUnsupportedSubjectError();\n    }\n\n    return false;\n  }\n\n  try {\n    const handlerModule = await __webpack_require__(\"G4i8\")(`./${subject}.js`);\n    const hasSentResponse = handlerModule.default({\n      message,\n      event: e,\n      responseMessages\n    });\n\n    if (!hasSentResponse && platformStorageFeatureFlag) {\n      responseMessages.sendSuccess();\n    }\n\n    return true;\n  } catch (error) {\n    console.error(`Error loading or executing message handler for \"${subject}\": ${error}`);\n\n    if (platformStorageFeatureFlag) {\n      responseMessages.sendGenericError(error.message);\n    }\n\n    return false;\n  }\n}\n\nfunction monitorLtiMessages() {\n  var _ENV, _ENV$FEATURES;\n\n  const platformStorageFeatureFlag = (_ENV = ENV) === null || _ENV === void 0 ? void 0 : (_ENV$FEATURES = _ENV.FEATURES) === null || _ENV$FEATURES === void 0 ? void 0 : _ENV$FEATURES.lti_platform_storage;\n  window.addEventListener('message', e => {\n    if (e.data !== '') ltiMessageHandler(e, platformStorageFeatureFlag);\n  });\n}\n\n\n\n//# sourceURL=webpack:///./ui/shared/lti/jquery/messages.js?");

/***/ }),

/***/ "pWRM":
/*!***********************************************************!*\
  !*** ./ui/shared/deep-linking/models/ImageContentItem.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ImageContentItem; });\n/* harmony import */ var _ContentItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ContentItem */ \"D1L3\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nclass ImageContentItem extends _ContentItem__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(json) {\n    super(json);\n    this.type = ImageContentItem.type;\n  }\n\n  get properties() {\n    return Object.freeze(['url', 'title', 'thumbnail', 'text', 'width', 'height']);\n  }\n\n  toHtmlString() {\n    if (this.thumbnail) {\n      return this.anchorTag(this.linkThumbnail());\n    }\n\n    return this.imageTag(this.safeUrl(), this.width, this.height);\n  }\n\n}\nImageContentItem.type = 'image';\n\n//# sourceURL=webpack:///./ui/shared/deep-linking/models/ImageContentItem.js?");

/***/ })

}]);