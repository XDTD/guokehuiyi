(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[101],{

/***/ "Imk7":
/*!***********************************************************************!*\
  !*** ./frontend_build/i18n.js?avatar!./ui/shims/dummyI18nResource.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('avatar'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?avatar");

/***/ }),

/***/ "XvUM":
/*!*************************************************!*\
  !*** ./ui/shared/avatar/jst/_avatar.handlebars ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_avatar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!avatar */ \"Imk7\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/shared/avatar/jst/-avatar';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.anonymous), {hash:{},inverse:self.program(4, program4, data),fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n<a class=\\\"avatar\\\" style=\\\"background-image: url(/images/messages/avatar-50.png)\\\">\\n  <span class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"student_5da6bfd1\", \"Student\", options) : helperMissing.call(depth0, \"t\", \"student_5da6bfd1\", \"Student\", options)))\n    + \"</span>\\n</a>\\n\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n\";\n  stack1 = (helper = helpers.ifAny || (depth0 && depth0.ifAny),options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.avatar_url), (depth0 && depth0.avatar_image_url), options) : helperMissing.call(depth0, \"ifAny\", (depth0 && depth0.avatar_url), (depth0 && depth0.avatar_image_url), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.alreadyEscaped), {hash:{},inverse:self.program(9, program9, data),fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<a \";\n  stack1 = (helper = helpers.ifAny || (depth0 && depth0.ifAny),options={hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.url), (depth0 && depth0.html_url), options) : helperMissing.call(depth0, \"ifAny\", (depth0 && depth0.url), (depth0 && depth0.html_url), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" class=\\\"fs-exclude avatar\\\"\\n  style=\\\"background-image: url(\";\n  stack1 = (helper = helpers.or || (depth0 && depth0.or),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.avatar_url), (depth0 && depth0.avatar_image_url), options) : helperMissing.call(depth0, \"or\", (depth0 && depth0.avatar_url), (depth0 && depth0.avatar_image_url), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \")\\\">\\n  <span class=\\\"screenreader-only\\\">\";\n  stack1 = (helper = helpers.or || (depth0 && depth0.or),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.display_name), (depth0 && depth0.short_name), options) : helperMissing.call(depth0, \"or\", (depth0 && depth0.display_name), (depth0 && depth0.short_name), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span></a>\\n\";\n  return buffer;\n  }\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"href=\\\"\";\n  stack1 = (helper = helpers.or || (depth0 && depth0.or),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.url), (depth0 && depth0.html_url), options) : helperMissing.call(depth0, \"or\", (depth0 && depth0.url), (depth0 && depth0.html_url), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" \";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<a \";\n  stack1 = (helper = helpers.ifAny || (depth0 && depth0.ifAny),options={hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.url), (depth0 && depth0.html_url), options) : helperMissing.call(depth0, \"ifAny\", (depth0 && depth0.url), (depth0 && depth0.html_url), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" class=\\\"fs-exclude avatar\\\"\\n  style=\\\"background-image: url(\"\n    + escapeExpression((helper = helpers.or || (depth0 && depth0.or),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.avatar_url), (depth0 && depth0.avatar_image_url), options) : helperMissing.call(depth0, \"or\", (depth0 && depth0.avatar_url), (depth0 && depth0.avatar_image_url), options)))\n    + \")\\\"><span\\n    class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.or || (depth0 && depth0.or),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.display_name), (depth0 && depth0.short_name), options) : helperMissing.call(depth0, \"or\", (depth0 && depth0.display_name), (depth0 && depth0.short_name), options)))\n    + \"</span></a>\\n\";\n  return buffer;\n  }\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"href=\\\"\"\n    + escapeExpression((helper = helpers.or || (depth0 && depth0.or),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.url), (depth0 && depth0.html_url), options) : helperMissing.call(depth0, \"or\", (depth0 && depth0.url), (depth0 && depth0.html_url), options)))\n    + \"\\\" \";\n  return buffer;\n  }\n\n  buffer += \"\\n\";\n  stack1 = helpers['if'].call(depth0, depth0, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  });\n    \n      Handlebars.registerPartial('ui/shared/avatar/jst/_avatar.handlebars', templates['/home/td/workspace/guokehuiyi/canvas/ui/shared/avatar/jst/-avatar']);\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/shared/avatar/jst/_avatar.handlebars?");

/***/ }),

/***/ "hI1R":
/*!*****************************************************************************!*\
  !*** ./frontend_build/i18n.js?user_content!./ui/shims/dummyI18nResource.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('user_content'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?user_content");

/***/ }),

/***/ "msTH":
/*!*************************************************!*\
  !*** ./ui/shared/util/jquery/apiUserContent.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var i18n_user_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!user_content */ \"hI1R\");\n//\n// Copyright (C) 2015 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\nconst apiUserContent = {\n  /*\n  xsslint safeString.identifier mathml\n  */\n  translateMathmlForScreenreaders($equationImage) {\n    var _ENV, _ENV$FEATURES;\n\n    if (!((_ENV = ENV) !== null && _ENV !== void 0 && (_ENV$FEATURES = _ENV.FEATURES) !== null && _ENV$FEATURES !== void 0 && _ENV$FEATURES.new_math_equation_handling)) {\n      // note, it is safe to treat the x-canvaslms-safe-mathml as html because it\n      // only ever gets put there by us (in Api::Html::Content::apply_mathml).\n      // Any user content that gets sent to the server will have the\n      // x-canvaslms-safe-mathml attribute stripped out.\n      const mathml = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div/>').html($equationImage.attr('x-canvaslms-safe-mathml')).html();\n      const mathmlSpan = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span class=\"hidden-readable\"></span>');\n      mathmlSpan.html(mathml);\n      return mathmlSpan;\n    }\n  },\n\n  toMediaCommentLink(node) {\n    const $link = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`<a\n        id='media_comment_${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(jquery__WEBPACK_IMPORTED_MODULE_0___default()(node).data('media_comment_id'))}'\n        data-media_comment_type='${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(jquery__WEBPACK_IMPORTED_MODULE_0___default()(node).data('media_comment_type'))}'\n        class='instructure_inline_media_comment ${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(node.nodeName.toLowerCase())}_comment'\n        data-alt='${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(jquery__WEBPACK_IMPORTED_MODULE_0___default()(node).attr('data-alt'))}'\n      />`);\n    $link.html(jquery__WEBPACK_IMPORTED_MODULE_0___default()(node).html());\n    return $link;\n  },\n\n  /*\n  xsslint safeString.identifier mathmlSpan\n  */\n  // use this method to process any user content fields returned in api responses\n  // this is important to handle object/embed tags safely, and to properly display audio/video tags\n  convert(html, options = {}) {\n    const $dummy = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div />').html(html); // finds any <video/audio class=\"instructure_inline_media_comment\"> and turns them into media comment thumbnails\n\n    $dummy.find('video.instructure_inline_media_comment,audio.instructure_inline_media_comment').replaceWith(function () {\n      return apiUserContent.toMediaCommentLink(this);\n    }); // remove any embed tags inside an object tag, to avoid repeated translations\n\n    $dummy.find('object.instructure_user_content:not(#kaltura_player) embed').remove(); // if we aren't actually displaying this content but are instead putting\n    // it into a RTE, we want to preserve the object/embed tags\n\n    if (!options.forEditing) {\n      // find all object/embed tags and convert them into an iframe that posts\n      // to safefiles to display the content (to avoid javascript attacks)\n      //\n      // see the corresponding code in lib/user_content.rb for non-api user\n      // content handling\n      $dummy.find('object.instructure_user_content,embed.instructure_user_content').replaceWith(function () {\n        const $this = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n\n        if (!$this.data('uc_snippet') || !$this.data('uc_sig')) {\n          return this;\n        }\n\n        const uuid = underscore__WEBPACK_IMPORTED_MODULE_1___default.a.uniqueId('uc_');\n\n        let action = '/object_snippet';\n\n        if (ENV.files_domain) {\n          action = `//${ENV.files_domain}${action}`;\n        }\n\n        const $form = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`<form\n            action='${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(action)}'\n            method='post'\n            class='user_content_post_form'\n            target='${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(uuid)}'\n            id='form-${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(uuid)}'\n          />`);\n        $form.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()(\"<input type='hidden'/>\").attr({\n          name: 'object_data',\n          value: $this.data('uc_snippet')\n        }));\n        $form.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()(\"<input type='hidden'/>\").attr({\n          name: 's',\n          value: $this.data('uc_sig')\n        }));\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($form);\n        setTimeout(() => $form.submit(), 0);\n        return jquery__WEBPACK_IMPORTED_MODULE_0___default()(`<iframe\n            class='user_content_iframe'\n            name='${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(uuid)}'\n            style='width: ${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])($this.data('uc_width'))}; height: ${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])($this.data('uc_height'))};'\n            frameborder='0'\n            title='${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_user_content__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('User Content'))}'\n          />`);\n      });\n      $dummy.find('img.equation_image').each((index, equationImage) => {\n        const $equationImage = jquery__WEBPACK_IMPORTED_MODULE_0___default()(equationImage);\n        const mathmlSpan = apiUserContent.translateMathmlForScreenreaders($equationImage);\n        $equationImage.removeAttr('x-canvaslms-safe-mathml');\n        $equationImage.after(mathmlSpan);\n      });\n    }\n\n    return $dummy.html();\n  }\n\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (apiUserContent);\n\n//# sourceURL=webpack:///./ui/shared/util/jquery/apiUserContent.js?");

/***/ })

}]);