(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[158],{

/***/ "3NTQ":
/*!***********************************************!*\
  !*** ./ui/shared/multi-select/react/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ \"Ff2n\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var i18n_app_shared_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!app_shared_components */ \"HQFi\");\n/* harmony import */ var keycode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! keycode */ \"3zPy\");\n/* harmony import */ var keycode__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(keycode__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _instructure_ui_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-select */ \"U+cR\");\n/* harmony import */ var _instructure_ui_tag__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-tag */ \"Pab6\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _instructure_ui_react_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-react-utils */ \"e2P+\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! lodash */ \"LvDl\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @instructure/ui-alerts */ \"spba\");\n\n\nconst _excluded = [\"id\", \"label\", \"onChange\", \"children\", \"selectedOptionIds\", \"noOptionsLabel\", \"disabled\", \"customRenderBeforeInput\", \"matchStrategy\"],\n      _excluded2 = [\"id\", \"children\"];\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\nconst CanvasMultiSelectOption = () => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null);\n\nCanvasMultiSelectOption.propTypes = {\n  id: prop_types__WEBPACK_IMPORTED_MODULE_7__[\"string\"].isRequired,\n  // eslint-disable-line react/no-unused-prop-types\n  value: prop_types__WEBPACK_IMPORTED_MODULE_7__[\"string\"].isRequired // eslint-disable-line react/no-unused-prop-types\n\n};\n\nfunction alwaysArray(scalarOrArray) {\n  if (!scalarOrArray) return null;\n  return Array.isArray(scalarOrArray) ? scalarOrArray : [scalarOrArray];\n}\n\nfunction liveRegion() {\n  return document.getElementById('flash_screenreader_holder');\n}\n\nconst NO_OPTIONS_OPTION_ID = '__no_option-';\n\nfunction CanvasMultiSelect(props) {\n  const selectId = props.id,\n        renderLabel = props.label,\n        onChange = props.onChange,\n        children = props.children,\n        selectedOptionIds = props.selectedOptionIds,\n        noOptionsLabel = props.noOptionsLabel,\n        disabled = props.disabled,\n        customRenderBeforeInput = props.customRenderBeforeInput,\n        matchStrategy = props.matchStrategy,\n        otherProps = Object(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(props, _excluded);\n\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(''),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        inputValue = _useState2[0],\n        setInputValue = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(false),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        isShowingOptions = _useState4[0],\n        setIsShowingOptions = _useState4[1];\n\n  const _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(null),\n        _useState6 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n        highlightedOptionId = _useState6[0],\n        setHighlightedOptionId = _useState6[1];\n\n  const _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(null),\n        _useState8 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState7, 2),\n        announcement = _useState8[0],\n        setAnnouncement = _useState8[1];\n\n  const inputRef = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(null);\n  const noOptionId = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(Object(lodash__WEBPACK_IMPORTED_MODULE_9__[\"uniqueId\"])(NO_OPTIONS_OPTION_ID));\n  const childProps = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useMemo\"])(() => react__WEBPACK_IMPORTED_MODULE_2___default.a.Children.map(children, n => ({\n    id: n.props.id,\n    value: n.props.value,\n    label: n.props.children\n  })), [children]);\n\n  const _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(null),\n        _useState10 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState9, 2),\n        filteredOptionIds = _useState10[0],\n        setFilteredOptionIds = _useState10[1];\n\n  function getChildById(id) {\n    return childProps.find(c => c.id === id);\n  }\n\n  function renderChildren() {\n    function renderOption(child) {\n      // eslint-disable-next-line no-shadow\n      const _child$props = child.props,\n            id = _child$props.id,\n            children = _child$props.children,\n            optionProps = Object(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_child$props, _excluded2);\n\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_select__WEBPACK_IMPORTED_MODULE_5__[\"Select\"].Option, Object.assign({\n        id: id,\n        key: child.key || id || Object(lodash__WEBPACK_IMPORTED_MODULE_9__[\"uniqueId\"])('multi-select-'),\n        isHighlighted: id === highlightedOptionId\n      }, optionProps), children);\n    }\n\n    function renderNoOptionsOption() {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_select__WEBPACK_IMPORTED_MODULE_5__[\"Select\"].Option, {\n        id: noOptionId.current,\n        isHighlighted: false,\n        isSelected: false\n      }, noOptionsLabel);\n    }\n\n    const filteredChildren = Object(lodash__WEBPACK_IMPORTED_MODULE_9__[\"compact\"])(alwaysArray(children).map(child => {\n      if (Object(_instructure_ui_react_utils__WEBPACK_IMPORTED_MODULE_8__[\"matchComponentTypes\"])(child, [CanvasMultiSelectOption]) && (!filteredOptionIds || filteredOptionIds.includes(child.props.id)) && !selectedOptionIds.includes(child.props.id)) {\n        return renderOption(child);\n      }\n\n      return null;\n    }));\n    return filteredChildren.length === 0 ? renderNoOptionsOption() : filteredChildren;\n  }\n\n  function dismissTag(e, id) {\n    e.stopPropagation();\n    e.preventDefault();\n    onChange(selectedOptionIds.filter(x => x !== id));\n  }\n\n  function renderTags() {\n    const options = alwaysArray(children);\n    if (!options) return null;\n    return Object(lodash__WEBPACK_IMPORTED_MODULE_9__[\"compact\"])(selectedOptionIds.map(id => {\n      const opt = options.find(c => c.props.id === id);\n      if (!opt) return null;\n      const tagText = opt.props.children || opt.props.label;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_tag__WEBPACK_IMPORTED_MODULE_6__[\"Tag\"], {\n        dismissible: true,\n        key: opt.key,\n        text: tagText,\n        title: i18n_app_shared_components__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Remove %{label}', {\n          label: tagText\n        }),\n        margin: \"0 xxx-small\",\n        onClick: e => dismissTag(e, id)\n      });\n    }));\n  }\n\n  function contentBeforeInput() {\n    const tags = selectedOptionIds.length > 0 ? renderTags() : null;\n    return customRenderBeforeInput ? customRenderBeforeInput(tags) : tags;\n  }\n\n  function onInputChange(e) {\n    const value = e.target.value;\n    const matcher = new RegExp(`${matchStrategy === 'stringStart' ? '^' : ''}${value.trim()}`, 'i');\n    const filtered = childProps.filter(x => x.label.match(matcher));\n    let message = // if number of options has changed, announce the new total.\n    filtered.length !== (filteredOptionIds === null || filteredOptionIds === void 0 ? void 0 : filteredOptionIds.length) ? i18n_app_shared_components__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t({\n      one: 'One option available.',\n      other: '%{count} options available.'\n    }, {\n      count: filtered.length\n    }) : null;\n\n    if (message && filtered.length > 0 && highlightedOptionId !== filtered[0].id) {\n      message = getChildById(filtered[0].id).label + '. ' + message;\n    }\n\n    setInputValue(value);\n    setFilteredOptionIds(filtered.map(f => f.id));\n    if (filtered.length > 0) setHighlightedOptionId(filtered[0].id);\n    setIsShowingOptions(true);\n    setAnnouncement(message);\n  }\n\n  function onRequestShowOptions() {\n    setIsShowingOptions(true);\n  }\n\n  function onRequestHideOptions() {\n    setIsShowingOptions(false);\n    if (!highlightedOptionId) return;\n    setInputValue('');\n\n    if ((filteredOptionIds === null || filteredOptionIds === void 0 ? void 0 : filteredOptionIds.length) === 1) {\n      const option = getChildById(filteredOptionIds[0]);\n      setAnnouncement(i18n_app_shared_components__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('%{label} selected. List collapsed.', {\n        label: option.label\n      }));\n      onChange([...selectedOptionIds, filteredOptionIds[0]]);\n    }\n\n    setFilteredOptionIds(null);\n  }\n\n  function onRequestHighlightOption(e, {\n    id\n  }) {\n    e.persist();\n    const option = getChildById(id);\n    if (typeof option === 'undefined') return;\n    if (e.type === 'keydown') setInputValue(option.label);\n    setHighlightedOptionId(id);\n    setAnnouncement(option.label);\n  }\n\n  function onRequestSelectOption(_e, {\n    id\n  }) {\n    const option = getChildById(id);\n    setInputValue('');\n    setFilteredOptionIds(null);\n    setIsShowingOptions(false);\n    if (typeof option === 'undefined') return;\n    setAnnouncement(i18n_app_shared_components__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('%{label} selected. List collapsed.', {\n      label: option.label\n    }));\n    onChange([...selectedOptionIds, id]);\n  } // if backspace is pressed and there's no input to backspace over, remove the\n  // last selected option if there is one\n\n\n  function onKeyDown(e) {\n    if (e.keyCode === keycode__WEBPACK_IMPORTED_MODULE_4___default.a.codes.backspace && inputValue.length === 0 && selectedOptionIds.length > 0) {\n      const option = getChildById(selectedOptionIds.slice(-1)[0]);\n      setAnnouncement(i18n_app_shared_components__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('%{label} removed.', {\n        label: option.label\n      }));\n      onChange(selectedOptionIds.slice(0, -1));\n    }\n  }\n\n  function onBlur() {\n    setHighlightedOptionId(null);\n  }\n\n  const selectProps = {\n    id: selectId,\n    disabled,\n    renderLabel,\n    inputValue,\n    inputRef: ref => {\n      inputRef.current = ref;\n    },\n    onInputChange,\n    onRequestShowOptions,\n    onRequestHideOptions,\n    isShowingOptions,\n    onRequestHighlightOption,\n    onRequestSelectOption,\n    onKeyDown,\n    onBlur,\n    assistiveText: i18n_app_shared_components__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Type or use arrow keys to navigate. Multiple selections are allowed.'),\n    renderBeforeInput: contentBeforeInput()\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_select__WEBPACK_IMPORTED_MODULE_5__[\"Select\"], Object.assign({}, selectProps, otherProps), renderChildren()), announcement && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_10__[\"Alert\"], {\n    liveRegion: liveRegion,\n    liveRegionPoliteness: \"assertive\",\n    screenReaderOnly: true\n  }, announcement));\n}\n\nCanvasMultiSelect.propTypes = {\n  id: prop_types__WEBPACK_IMPORTED_MODULE_7__[\"string\"],\n  customRenderBeforeInput: prop_types__WEBPACK_IMPORTED_MODULE_7__[\"func\"],\n  disabled: prop_types__WEBPACK_IMPORTED_MODULE_7__[\"bool\"],\n  label: Object(prop_types__WEBPACK_IMPORTED_MODULE_7__[\"oneOfType\"])([prop_types__WEBPACK_IMPORTED_MODULE_7__[\"node\"], prop_types__WEBPACK_IMPORTED_MODULE_7__[\"func\"]]).isRequired,\n  onChange: prop_types__WEBPACK_IMPORTED_MODULE_7__[\"func\"].isRequired,\n  children: prop_types__WEBPACK_IMPORTED_MODULE_7__[\"node\"].isRequired,\n  selectedOptionIds: Object(prop_types__WEBPACK_IMPORTED_MODULE_7__[\"arrayOf\"])(prop_types__WEBPACK_IMPORTED_MODULE_7__[\"string\"]).isRequired,\n  noOptionsLabel: prop_types__WEBPACK_IMPORTED_MODULE_7__[\"string\"],\n  matchStrategy: Object(prop_types__WEBPACK_IMPORTED_MODULE_7__[\"oneOf\"])(['stringStart', 'substring'])\n};\nCanvasMultiSelect.defaultProps = {\n  customRenderBeforeInput: null,\n  noOptionsLabel: '---',\n  selectedOptionIds: [],\n  disabled: false,\n  matchStrategy: 'stringStart'\n};\nCanvasMultiSelect.Option = CanvasMultiSelectOption;\n/* harmony default export */ __webpack_exports__[\"default\"] = (CanvasMultiSelect);\n\n//# sourceURL=webpack:///./ui/shared/multi-select/react/index.js?");

/***/ }),

/***/ "HQFi":
/*!**************************************************************************************!*\
  !*** ./frontend_build/i18n.js?app_shared_components!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('app_shared_components'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?app_shared_components");

/***/ })

}]);