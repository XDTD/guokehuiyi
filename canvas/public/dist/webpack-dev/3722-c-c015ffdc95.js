(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3722],{

/***/ "rHne":
/*!****************************************************************************************!*\
  !*** ./frontend_build/i18n.js?course_template_details!./ui/shims/dummyI18nResource.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('course_template_details'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?course_template_details");

/***/ }),

/***/ "wTrh":
/*!*******************************************************************************!*\
  !*** ./ui/features/course_settings/react/components/CourseTemplateDetails.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/do-fetch-api-effect */ \"Ipg6\");\n/* harmony import */ var i18n_course_template_details__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!course_template_details */ \"rHne\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-checkbox */ \"Kdwl\");\n/* harmony import */ var _instructure_ui_spinner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-spinner */ \"cPO5\");\n/* harmony import */ var _instructure_ui_view__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-view */ \"OkHH\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_link__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @instructure/ui-link */ \"dlTp\");\n/* harmony import */ var _instructure_ui_modal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @instructure/ui-modal */ \"7I2A\");\n/* harmony import */ var _instructure_ui_list__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @instructure/ui-list */ \"dbzd\");\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_heading__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @instructure/ui-heading */ \"nwNI\");\n/* harmony import */ var _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @instructure/ui-icons */ \"oMAr\");\n\n\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst getLiveRegion = () => document.getElementById('flash_screenreader_holder');\n\nconst AssociatedText = ({\n  count,\n  onClick\n}) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_link__WEBPACK_IMPORTED_MODULE_9__[\"Link\"], {\n  \"data-testid\": \"result-n-assoc\",\n  onClick: count > 0 ? onClick : void 0\n}, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_8__[\"Text\"], {\n  size: \"small\"\n}, count > 10 ? i18n_course_template_details__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Associated with 10+ accounts') : i18n_course_template_details__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t({\n  zero: 'Not associated with any accounts',\n  one: 'Associated with one account',\n  other: 'Associated with %{count} accounts'\n}, {\n  count\n})), count > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_7__[\"View\"], {\n  margin: \"none none none x-small\"\n}, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_icons__WEBPACK_IMPORTED_MODULE_14__[\"IconInfoLine\"], {\n  size: \"x-small\"\n})));\n\nAssociatedText.propTypes = {\n  count: prop_types__WEBPACK_IMPORTED_MODULE_4__[\"number\"].isRequired,\n  onClick: prop_types__WEBPACK_IMPORTED_MODULE_4__[\"func\"].isRequired\n}; // Return a list of the names of the given accounts.\n// Truncate the list at 10\n\nconst AssociatedAccounts = ({\n  accounts\n}) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_list__WEBPACK_IMPORTED_MODULE_11__[\"List\"], {\n  margin: \"none none small none\"\n}, accounts.slice(0, 10).map(a => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_list__WEBPACK_IMPORTED_MODULE_11__[\"List\"].Item, {\n  key: a.name\n}, a.name)));\n\nAssociatedAccounts.propTypes = {\n  accounts: Object(prop_types__WEBPACK_IMPORTED_MODULE_4__[\"arrayOf\"])(Object(prop_types__WEBPACK_IMPORTED_MODULE_4__[\"shape\"])({\n    id: prop_types__WEBPACK_IMPORTED_MODULE_4__[\"string\"],\n    name: prop_types__WEBPACK_IMPORTED_MODULE_4__[\"string\"]\n  }).isRequired)\n};\n\nconst CourseTemplateDetails = ({\n  isEditable\n}) => {\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        checked = _useState2[0],\n        setChecked = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(true),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        loading = _useState4[0],\n        setLoading = _useState4[1];\n\n  const _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(null),\n        _useState6 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n        error = _useState6[0],\n        setError = _useState6[1];\n\n  const _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false),\n        _useState8 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState7, 2),\n        modalVisible = _useState8[0],\n        setModalVisible = _useState8[1];\n\n  const dataRequested = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(false);\n\n  const _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(void 0),\n        _useState10 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState9, 2),\n        templatedAccounts = _useState10[0],\n        setTemplatedAccounts = _useState10[1];\n\n  async function getCourseSettings() {\n    try {\n      const _await$doFetchApi = await Object(_canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n        path: `/api/v1${ENV.CONTEXT_BASE_URL}?include[]=templated_accounts`\n      }),\n            json = _await$doFetchApi.json;\n\n      setChecked(json.template);\n      setTemplatedAccounts(json.templated_accounts);\n    } catch (err) {\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function toggleEnabled() {\n    setChecked(!checked);\n  }\n\n  function showModal() {\n    setModalVisible(true);\n  }\n\n  function hideModal() {\n    setModalVisible(false);\n  } // It's safe to call getCourseSettings immediately because it does\n  // not need any part of the rendered component, it only sets state.\n  // Be sure to do it exactly once, though.\n\n\n  if (!dataRequested.current) {\n    dataRequested.current = true;\n    getCourseSettings();\n  }\n\n  if (loading) return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_spinner__WEBPACK_IMPORTED_MODULE_6__[\"Spinner\"], {\n    \"data-testid\": \"loading-spinner\",\n    size: \"x-small\",\n    renderTitle: i18n_course_template_details__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Loading')\n  });\n  if (error) throw new Error(error);\n  const modalLabel = i18n_course_template_details__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Associated Accounts');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n    className: \"bcs_check-box\",\n    \"data-testid\": \"result-div\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"course[template]\",\n    value: \"off\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_5__[\"Checkbox\"], {\n    name: \"course[template]\",\n    \"data-testid\": \"result-checkbox\",\n    checked: checked,\n    disabled: !isEditable,\n    onChange: toggleEnabled,\n    label: i18n_course_template_details__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Enable course as a Course Template'),\n    size: \"small\",\n    value: checked ? 'on' : 'false'\n  }), Array.isArray(templatedAccounts) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(AssociatedText, {\n    count: templatedAccounts.length,\n    onClick: showModal\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_modal__WEBPACK_IMPORTED_MODULE_10__[\"Modal\"], {\n    \"data-testid\": \"result-modal\",\n    liveRegion: getLiveRegion,\n    open: modalVisible,\n    onDismiss: hideModal,\n    label: modalLabel,\n    size: \"auto\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_modal__WEBPACK_IMPORTED_MODULE_10__[\"Modal\"].Header, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_12__[\"CloseButton\"], {\n    placement: \"end\",\n    offset: \"medium\",\n    onClick: hideModal,\n    screenReaderLabel: i18n_course_template_details__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Close')\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_heading__WEBPACK_IMPORTED_MODULE_13__[\"Heading\"], {\n    level: \"h3\",\n    as: \"h2\"\n  }, modalLabel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_modal__WEBPACK_IMPORTED_MODULE_10__[\"Modal\"].Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(AssociatedAccounts, {\n    accounts: templatedAccounts\n  }), (templatedAccounts === null || templatedAccounts === void 0 ? void 0 : templatedAccounts.length) > 10 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_8__[\"Text\"], {\n    size: \"small\"\n  }, \"(more not shown)\"))));\n};\n\nCourseTemplateDetails.propTypes = {\n  isEditable: prop_types__WEBPACK_IMPORTED_MODULE_4__[\"bool\"]\n};\nCourseTemplateDetails.defaultProps = {\n  isEditable: false\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (CourseTemplateDetails);\n\n//# sourceURL=webpack:///./ui/features/course_settings/react/components/CourseTemplateDetails.js?");

/***/ })

}]);