(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3720],{

/***/ "0LNw":
/*!*******************************************************************************************************!*\
  !*** ./ui/features/assignments_show_student/react/components/AttemptType/StudentAnnotationAttempt.js ***!
  \*******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return StudentAnnotationAttempt; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var i18n_assignments_2_student_annotation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! i18n!assignments_2_student_annotation */ \"oIYC\");\n/* harmony import */ var _canvas_loading_indicator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/loading-indicator */ \"7hyl\");\n/* harmony import */ var _canvas_axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/axios */ \"BrAc\");\n\n\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction StudentAnnotationAttempt(props) {\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(null),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        iframeURL = _useState2[0],\n        setIframeURL = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(true),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        fetchingCanvadocSession = _useState4[0],\n        setFetchingCanvadocSession = _useState4[1];\n\n  const _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(true),\n        _useState6 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n        validResponse = _useState6[0],\n        setValidResponse = _useState6[1];\n\n  const isSubmitted = ['graded', 'submitted'].includes(props.submission.state);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(() => {\n    _canvas_axios__WEBPACK_IMPORTED_MODULE_4__[\"default\"].post('/api/v1/canvadoc_session', {\n      submission_attempt: isSubmitted ? props.submission.attempt : 'draft',\n      submission_id: props.submission._id\n    }).then(result => {\n      setIframeURL(result.data.canvadocs_session_url);\n      setFetchingCanvadocSession(false);\n      setValidResponse(true);\n\n      if (!isSubmitted) {\n        props.createSubmissionDraft({\n          variables: {\n            id: props.submission.id,\n            activeSubmissionType: 'student_annotation',\n            attempt: props.submission.attempt || 1\n          }\n        });\n      }\n    }).catch(_error => {\n      setFetchingCanvadocSession(false);\n      setValidResponse(false);\n    });\n  }, [isSubmitted, props.submission.attempt]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n    \"data-testid\": \"canvadocs-pane\"\n  }, fetchingCanvadocSession && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_canvas_loading_indicator__WEBPACK_IMPORTED_MODULE_3__[\"default\"], null), validResponse ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n    className: \"ef-file-preview-stretch\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"iframe\", {\n    src: iframeURL,\n    \"data-testid\": \"canvadocs-iframe\",\n    allowFullScreen: true,\n    title: i18n_assignments_2_student_annotation__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Document to annotate'),\n    className: \"ef-file-preview-frame annotated-document-submission\",\n    style: {\n      width: '100%'\n    }\n  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, i18n_assignments_2_student_annotation__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('There was an error loading the document.')));\n}\n\n//# sourceURL=webpack:///./ui/features/assignments_show_student/react/components/AttemptType/StudentAnnotationAttempt.js?");

/***/ }),

/***/ "oIYC":
/*!*************************************************************************************************!*\
  !*** ./frontend_build/i18n.js?assignments_2_student_annotation!./ui/shims/dummyI18nResource.js ***!
  \*************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('assignments_2_student_annotation'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?assignments_2_student_annotation");

/***/ })

}]);