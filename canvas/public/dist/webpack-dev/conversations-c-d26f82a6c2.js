(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([["conversations"],{

/***/ "/m1n":
/*!*********************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.message_detail!./ui/shims/dummyI18nResource.js ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.message_detail'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.message_detail");

/***/ }),

/***/ "07wU":
/*!************************************************************************************!*\
  !*** ./ui/features/conversations/backbone/collections/FavoriteCourseCollection.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FavoriteCourseCollection; });\n/* harmony import */ var _canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/pagination/backbone/collections/PaginatedCollection.coffee */ \"TnsN\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\nclass FavoriteCourseCollection extends _canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {}\nFavoriteCourseCollection.prototype.url = '/api/v1/users/self/favorites/courses/';\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/collections/FavoriteCourseCollection.js?");

/***/ }),

/***/ "0HZp":
/*!*********************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/MessageItemView.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MessageItemView; });\n/* harmony import */ var i18n_conversations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!conversations */ \"mD3o\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_timezone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/timezone */ \"3H9/\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _jst_messageItem_handlebars__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../jst/messageItem.handlebars */ \"ls3Z\");\n/* harmony import */ var _canvas_avatar_jst_avatar_handlebars__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/avatar/jst/_avatar.handlebars */ \"XvUM\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\n\n\nclass MessageItemView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_4__[\"View\"] {\n  static initClass() {\n    this.prototype.tagName = 'li';\n    this.prototype.className = 'message-item-view';\n    this.prototype.template = _jst_messageItem_handlebars__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n    this.prototype.els = {\n      '.message-participants-toggle': '$toggle',\n      '.message-participants': '$participants',\n      '.summarized-message-participants': '$summarized',\n      '.full-message-participants': '$full',\n      '.message-metadata': '$metadata'\n    };\n    this.prototype.events = {\n      'blur .actions a': 'onActionBlur',\n      'click .al-trigger': 'onMenuOpen',\n      'click .delete-btn': 'onDelete',\n      'click .forward-btn': 'onForward',\n      'click .message-participants-toggle': 'onToggle',\n      'click .reply-btn': 'onReply',\n      'click .reply-all-btn': 'onReplyAll',\n      'focus .actions a': 'onActionFocus'\n    };\n    this.prototype.messages = {\n      confirmDelete: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('confirm.delete_message', 'Are you sure you want to delete your copy of this message? This action cannot be undone.')\n    };\n  }\n\n  initialize() {\n    super.initialize(...arguments);\n    return this.summarized = this.model.get('summarizedParticipantNames');\n  } // Internal: Serialize the model for the view.\n  //\n  // Returns the model's \"conversation\" key object.\n\n\n  toJSON() {\n    const json = this.model.toJSON();\n    const fudged = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.fudgeDateForProfileTimezone(_canvas_timezone__WEBPACK_IMPORTED_MODULE_3__[\"default\"].parse(json.created_at));\n    return underscore__WEBPACK_IMPORTED_MODULE_2___default.a.extend(json, {\n      created_at: fudged\n    });\n  } // Internal: Update participant lists after render.\n  //\n  // Returns nothing.\n\n\n  afterRender() {\n    super.afterRender(...arguments);\n    this.updateParticipants(this.summarized);\n    return this.$el.attr('data-id', this.model.id);\n  } // Public: Update participant and toggle link text\n  //\n  // summarized - A boolean that, if true, will display a summarized list.\n  //\n  // Returns nothing.\n\n\n  updateParticipants(summarized) {\n    const element = summarized ? this.$summarized : this.$full;\n    this.$participants.text(element.text());\n    return this.$toggle.text(summarized ? i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('more_participants', '+%{total} more', {\n      total: this.model.get('hiddenParticipantCount')\n    }) : i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('hide', 'Hide'));\n  } // Internal: Handle toggle events between the full and summarized lists.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  onToggle(e) {\n    e.preventDefault();\n    return this.updateParticipants(this.summarized = !this.summarized);\n  } // Internal: Reply to this message.\n  //\n  // e - Event Object.\n  //\n  // Returns nothing.\n\n\n  onReply(e) {\n    e.preventDefault();\n    return this.trigger('reply');\n  } // Internal: Reply all to this message.\n  //\n  // e - Event Object.\n  //\n  // Returns nothing.\n\n\n  onReplyAll(e) {\n    e.preventDefault();\n    return this.trigger('reply-all');\n  } // Internal: Delete this message.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  onDelete(e) {\n    let $toFocus;\n    e.preventDefault();\n\n    if (!confirm(this.messages.confirmDelete)) {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()(`.message-item-view[data-id=${this.model.id}] .al-trigger`).focus();\n      return;\n    }\n\n    const prevId = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this.el).prev().data('id');\n    const url = `/api/v1/conversations/${this.model.get('conversation_id')}/remove_messages`;\n    jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(url, 'POST', {\n      remove: [this.model.id]\n    });\n    this.remove();\n    if (prevId) $toFocus = jquery__WEBPACK_IMPORTED_MODULE_1___default()(`.message-item-view[data-id=${prevId}] .al-trigger`);\n    if (!($toFocus != null ? $toFocus.length : void 0)) $toFocus = jquery__WEBPACK_IMPORTED_MODULE_1___default()('.message-detail-actions .al-trigger');\n    if (!$toFocus.length) $toFocus = jquery__WEBPACK_IMPORTED_MODULE_1___default()('.conversations .message-actions:last .star-btn');\n    if (!$toFocus.length) $toFocus = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#compose-message-recipients');\n    return $toFocus.focus();\n  } // Internal: Forward this message.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  onForward(e) {\n    e.preventDefault();\n    return this.trigger('forward');\n  } // Internal: Stop any route changes when opening a message's menu.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  onMenuOpen(e) {\n    return e.preventDefault();\n  } // Internal: Manage visibility of date/message actions when using keyboard.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  onActionFocus(e) {\n    return this.$metadata.addClass('hover');\n  } // Internal: Manage visibility of date/message actions when using keyboard.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  onActionBlur(e) {\n    return this.$metadata.removeClass('hover');\n  }\n\n}\nMessageItemView.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/MessageItemView.js?");

/***/ }),

/***/ "24y9":
/*!*********************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.course_options!./ui/shims/dummyI18nResource.js ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.course_options'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.course_options");

/***/ }),

/***/ "2oez":
/*!**************************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.autocomplete_result!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.autocomplete_result'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.autocomplete_result");

/***/ }),

/***/ "395I":
/*!****************************************************************!*\
  !*** ./ui/features/conversations/jst/courseOptions.handlebars ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _home_td_workspace_guokehuiyi_canvas_ui_features_conversations_jst_courseOption_handlebars__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui/features/conversations/jst/_courseOption.handlebars */ \"sXQ3\");\n/* harmony import */ var _home_td_workspace_guokehuiyi_canvas_ui_features_conversations_jst_groupOption_handlebars__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui/features/conversations/jst/_groupOption.handlebars */ \"oaNm\");\n/* harmony import */ var i18n_conversations_course_options__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!conversations.course_options */ \"24y9\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/courseOptions';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var buffer = \"\", stack1, helper, options, self=this, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    \";\n  stack1 = self.invokePartial(partials['ui/features/conversations/jst/_courseOption.handlebars'], 'ui/features/conversations/jst/_courseOption.handlebars', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    \";\n  stack1 = self.invokePartial(partials['ui/features/conversations/jst/_groupOption.handlebars'], 'ui/features/conversations/jst/_groupOption.handlebars', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  \";\n  return buffer;\n  }\n\n  buffer += \"<option value=\\\"\\\">\";\n  if (helper = helpers.defaultOption) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.defaultOption); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n<optgroup data-content-type=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.course_options\")\n  },data:data},helper ? helper.call(depth0, \"Favorite Courses\", options) : helperMissing.call(depth0, \"t\", \"Favorite Courses\", options)))\n    + \"\\\" label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.course_options\")\n  },data:data},helper ? helper.call(depth0, \"course_options.favorite\", \"Favorite Courses\", options) : helperMissing.call(depth0, \"t\", \"course_options.favorite\", \"Favorite Courses\", options)))\n    + \"\\\">\\n  \";\n  options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}\n  if (helper = helpers.favorites) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.favorites); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.favorites) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</optgroup>\\n<optgroup data-content-type=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.course_options\")\n  },data:data},helper ? helper.call(depth0, \"More Courses\", options) : helperMissing.call(depth0, \"t\", \"More Courses\", options)))\n    + \"\\\" label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.course_options\")\n  },data:data},helper ? helper.call(depth0, \"course_options.more_courses\", \"More Courses\", options) : helperMissing.call(depth0, \"t\", \"course_options.more_courses\", \"More Courses\", options)))\n    + \"\\\">\\n  \";\n  options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}\n  if (helper = helpers.more) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.more); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.more) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</optgroup>\\n<optgroup data-content-type=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.course_options\")\n  },data:data},helper ? helper.call(depth0, \"Concluded Courses\", options) : helperMissing.call(depth0, \"t\", \"Concluded Courses\", options)))\n    + \"\\\" label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.course_options\")\n  },data:data},helper ? helper.call(depth0, \"course_options.concluded\", \"Concluded\", options) : helperMissing.call(depth0, \"t\", \"course_options.concluded\", \"Concluded\", options)))\n    + \"\\\">\\n  \";\n  options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}\n  if (helper = helpers.concluded) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.concluded); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.concluded) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</optgroup>\\n<optgroup data-content-type=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.course_options\")\n  },data:data},helper ? helper.call(depth0, \"Groups\", options) : helperMissing.call(depth0, \"t\", \"Groups\", options)))\n    + \"\\\" label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.course_options\")\n  },data:data},helper ? helper.call(depth0, \"course_options.groups\", \"Groups\", options) : helperMissing.call(depth0, \"t\", \"course_options.groups\", \"Groups\", options)))\n    + \"\\\">\\n  \";\n  options={hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}\n  if (helper = helpers.groups) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.groups); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.groups) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</optgroup>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/courseOptions.handlebars?");

/***/ }),

/***/ "3NPa":
/*!************************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.compose_title_bar!./ui/shims/dummyI18nResource.js ***!
  \************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.compose_title_bar'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.compose_title_bar");

/***/ }),

/***/ "4M30":
/*!******************************************************!*\
  !*** ./ui/shared/util/legacyCoffeesScriptHelpers.js ***!
  \******************************************************/
/*! exports provided: extend, shimGetterShorthand */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"extend\", function() { return extend; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetterShorthand\", function() { return shimGetterShorthand; });\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst hasProp = {}.hasOwnProperty;\nfunction extend(child, parent) {\n  for (const key in parent) {\n    if (hasProp.call(parent, key)) child[key] = parent[key];\n  }\n\n  function ctor() {\n    this.constructor = child;\n  }\n\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n  child.__super__ = parent.prototype;\n  return child;\n}\n/**\n * since you can't use es6 Object initializer getter shorthand (eg: {get foo(){ return 'bar'}})\n * in coffeescript, this is a helper to do it the manual way using Object.defineProperty\n * @param {Object} [hostObject] the object that you want to define the getters onto\n * @param {Object} getters key/value pairs of \"propertyName\" and getter functions. eg: {foo: () => \"bar\"}\n * @returns {Object} hostObject\n */\n\nfunction shimGetterShorthand(hostObject, getters) {\n  Object.keys(getters).forEach(key => Object.defineProperty(hostObject, key, {\n    get: getters[key],\n    enumerable: true,\n    configurable: true\n  }));\n  return hostObject;\n}\n\n//# sourceURL=webpack:///./ui/shared/util/legacyCoffeesScriptHelpers.js?");

/***/ }),

/***/ "4b23":
/*!**********************************************!*\
  !*** ./node_modules/nanoid/index.browser.js ***!
  \**********************************************/
/*! exports provided: nanoid, customAlphabet, customRandom, urlAlphabet, random */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"nanoid\", function() { return nanoid; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"customAlphabet\", function() { return customAlphabet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"customRandom\", function() { return customRandom; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"random\", function() { return random; });\n/* harmony import */ var _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./url-alphabet/index.js */ \"evf3\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"urlAlphabet\", function() { return _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_0__[\"urlAlphabet\"]; });\n\n// This file replaces `index.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\n\n\nif (true) {\n  // All bundlers will remove this block in the production bundle.\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator.product === 'ReactNative' &&\n    typeof crypto === 'undefined'\n  ) {\n    throw new Error(\n      'React Native does not have a built-in secure random generator. ' +\n        'If you don’t need unpredictable IDs use `nanoid/non-secure`. ' +\n        'For secure IDs, import `react-native-get-random-values` ' +\n        'before Nano ID.'\n    )\n  }\n  if (typeof msCrypto !== 'undefined' && typeof crypto === 'undefined') {\n    throw new Error(\n      'Import file with `if (!window.crypto) window.crypto = window.msCrypto`' +\n        ' before importing Nano ID to fix IE 11 support'\n    )\n  }\n  if (typeof crypto === 'undefined') {\n    throw new Error(\n      'Your browser does not have secure random generator. ' +\n        'If you don’t need unpredictable IDs, you can use nanoid/non-secure.'\n    )\n  }\n}\n\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\n\nlet customRandom = (alphabet, size, getRandom) => {\n  // First, a bitmask is necessary to generate the ID. The bitmask makes bytes\n  // values closer to the alphabet size. The bitmask calculates the closest\n  // `2^31 - 1` number, which exceeds the alphabet size.\n  // For example, the bitmask for the alphabet size 30 is 31 (00011111).\n  // `Math.clz32` is not used, because it is not available in browsers.\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  // Though, the bitmask solution is not perfect since the bytes exceeding\n  // the alphabet size are refused. Therefore, to reliably generate the ID,\n  // the random bytes redundancy has to be satisfied.\n\n  // Note: every hardware random generator call is performance expensive,\n  // because the system call for entropy collection takes a lot of time.\n  // So, to avoid additional system calls, extra bytes are requested in advance.\n\n  // Next, a step determines how many random bytes to generate.\n  // The number of random bytes gets decided upon the ID size, mask,\n  // alphabet size, and magic number 1.6 (using 1.6 peaks at performance\n  // according to benchmarks).\n\n  // `-~f => Math.ceil(f)` if f is a float\n  // `-~i => i + 1` if i is an integer\n  let step = -~((1.6 * mask * size) / alphabet.length)\n\n  return () => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      // A compact alternative for `for (var i = 0; i < step; i++)`.\n      let j = step\n      while (j--) {\n        // Adding `|| ''` refuses a random byte that exceeds the alphabet size.\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\n\nlet customAlphabet = (alphabet, size) => customRandom(alphabet, size, random)\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  while (size--) {\n    // It is incorrect to use bytes exceeding the alphabet size.\n    // The following mask reduces the random byte in the 0-255 value\n    // range to the 0-63 value range. Therefore, adding hacks, such\n    // as empty string fallback or magic numbers, is unneccessary because\n    // the bitmask trims bytes down to the alphabet size.\n    let byte = bytes[size] & 63\n    if (byte < 36) {\n      // `0-9a-z`\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      // `A-Z`\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte < 63) {\n      id += '_'\n    } else {\n      id += '-'\n    }\n  }\n  return id\n}\n\n\n\n\n//# sourceURL=webpack:///./node_modules/nanoid/index.browser.js?");

/***/ }),

/***/ "4j8k":
/*!********************************************!*\
  !*** ./ui/features/conversations/index.js ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_conversations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!conversations */ \"mD3o\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _backbone_collections_MessageCollection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./backbone/collections/MessageCollection */ \"jme5\");\n/* harmony import */ var _backbone_views_MessageListView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./backbone/views/MessageListView */ \"MmV5\");\n/* harmony import */ var _backbone_views_MessageDetailView__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./backbone/views/MessageDetailView */ \"cY2H\");\n/* harmony import */ var _backbone_views_MessageFormDialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./backbone/views/MessageFormDialog */ \"warL\");\n/* harmony import */ var _backbone_views_SubmissionCommentFormDialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./backbone/views/SubmissionCommentFormDialog */ \"saHx\");\n/* harmony import */ var _backbone_views_InboxHeaderView__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./backbone/views/InboxHeaderView */ \"U64V\");\n/* harmony import */ var deparam__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! deparam */ \"6NVu\");\n/* harmony import */ var _backbone_collections_CourseCollection__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./backbone/collections/CourseCollection */ \"RjDh\");\n/* harmony import */ var _backbone_collections_FavoriteCourseCollection__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./backbone/collections/FavoriteCourseCollection */ \"07wU\");\n/* harmony import */ var _canvas_groups_backbone_collections_GroupCollection_coffee__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @canvas/groups/backbone/collections/GroupCollection.coffee */ \"R1PX\");\n/* harmony import */ var _canvas_jquery_jquery_disableWhileLoading__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @canvas/jquery/jquery.disableWhileLoading */ \"sXof\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var query_string_encoding__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! query-string-encoding */ \"qbUT\");\n/* harmony import */ var _react_ConversationStatusFilter__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./react/ConversationStatusFilter */ \"a9vR\");\n/*\n * Copyright (C) 2013 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst ConversationsRouter = _canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default.a.Router.extend({\n  routes: {\n    '': 'index',\n    'filter=:state': 'filter'\n  },\n  sendingCount: 0,\n\n  initialize() {\n    ;\n    ['onSelected', 'selectConversation', 'onSubmissionReply', 'onReply', 'onReplyAll', 'onArchive', 'onDelete', 'onCompose', 'onMarkUnread', 'onMarkRead', 'onForward', 'onStarToggle', 'onFilter', 'onCourse', '_replyFromRemote', '_initViews', 'onSubmit', 'onAddMessage', 'onSubmissionAddMessage', 'onSearch', 'onKeyDown'].forEach(method => this[method] = this[method].bind(this));\n\n    const dfd = this._initCollections();\n\n    this._initViews();\n\n    this._attachEvents();\n\n    if (this._isRemoteLaunch()) return dfd.then(this._replyFromRemote);\n  },\n\n  // Public: Pull a value from the query string.\n  //\n  // name - The name of the query string param.\n  //\n  // Returns a string value or null.\n  param(name) {\n    const regex = new RegExp(`${name}=([^&]+)`);\n    const value = window.location.search.match(regex);\n    if (value) return decodeURIComponent(value[1]);\n    return null;\n  },\n\n  // Internal: Perform a batch update of all selected messages.\n  //\n  // event - The event to batch (e.g. 'star' or 'destroy').\n  // fn - A function called with each selected message. Used for side-effecting.\n  //\n  // Returns an array of impacted message IDs.\n  batchUpdate(event, fn = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.noop) {\n    const messages = underscore__WEBPACK_IMPORTED_MODULE_2___default.a.map(this.list.selectedMessages, message => {\n      fn.call(this, message);\n      return message.get('id');\n    });\n\n    jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON('/api/v1/conversations', 'PUT', {\n      'conversation_ids[]': messages,\n      event\n    });\n    if (event === 'destroy') this.list.selectedMessages = [];\n    if (event === 'archive' && this.filters.type !== 'sent') this.list.selectedMessages = [];\n    if (event === 'mark_as_read' && this.filters.type === 'archived') this.list.selectedMessages = [];\n    if (event === 'unstar' && this.filters.type === 'starred') this.list.selectedMessages = [];\n    return messages;\n  },\n\n  lastFetch: null,\n\n  onSelected(model) {\n    if (this.lastFetch) this.lastFetch.abort();\n    this.header.onModelChange(null, this.model);\n    this.detail.onModelChange(null, this.model);\n    this.model = model;\n    const messages = this.list.selectedMessages;\n\n    if (messages.length === 0) {\n      delete this.detail.model;\n      return this.detail.render();\n    } else if (messages.length > 1) {\n      delete this.detail.model;\n      messages[0].set('canArchive', this.filters.type !== 'sent');\n      this.detail.onModelChange(messages[0], null);\n      this.detail.render({\n        batch: true\n      });\n      this.header.onModelChange(messages[0], null);\n      this.header.toggleReplyBtn(true);\n      this.header.toggleReplyAllBtn(true);\n      this.header.hideForwardBtn(true);\n    } else {\n      model = this.list.selectedMessage();\n\n      if (model.get('messages')) {\n        this.selectConversation(model);\n      } else {\n        this.lastFetch = model.fetch({\n          data: {\n            include_participant_contexts: false,\n            include_private_conversation_enrollments: false\n          },\n          success: this.selectConversation\n        });\n        this.detail.$el.disableWhileLoading(this.lastFetch);\n      }\n    }\n  },\n\n  selectConversation(model) {\n    if (model) model.set('canArchive', this.filters.type !== 'sent');\n    this.header.onModelChange(model, null);\n    this.detail.onModelChange(model, null);\n    this.detail.render();\n  },\n\n  onSubmissionReply() {\n    this.submissionReply.show(this.detail.model, {\n      trigger: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#submission-reply-btn')\n    });\n  },\n\n  onReply(message, trigger) {\n    if (this.detail.model.get('for_submission')) {\n      this.onSubmissionReply();\n    } else {\n      this._delegateReply(message, 'reply', trigger);\n    }\n  },\n\n  onReplyAll(message, trigger) {\n    this._delegateReply(message, 'replyAll', trigger);\n  },\n\n  _delegateReply(message, type, trigger) {\n    this.compose.show(this.detail.model, {\n      to: type,\n      trigger,\n      message\n    });\n  },\n\n  onArchive(focusNext, trigger) {\n    const action = this.list.selectedMessage().get('workflow_state') === 'archived' ? 'mark_as_read' : 'archive';\n    const confirmMessage = action === 'archive' ? i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t({\n      one: 'Are you sure you want to archive your copy of this conversation?',\n      other: 'Are you sure you want to archive your copies of these conversations?'\n    }, {\n      count: this.list.selectedMessages.length\n    }) : i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t({\n      one: 'Are you sure you want to unarchive this conversation?',\n      other: 'Are you sure you want to unarchive these conversations?'\n    }, {\n      count: this.list.selectedMessages.length\n    });\n\n    if (!confirm(confirmMessage)) {\n      // eslint-disable-line no-alert\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()(trigger).focus();\n      return;\n    }\n\n    const messages = this.batchUpdate(action, function (m) {\n      const newState = action === 'mark_as_read' ? 'read' : 'archived';\n      m.set('workflow_state', newState);\n      this.header.onArchivedStateChange(m);\n    });\n\n    if (['inbox', 'archived'].includes(this.filters.type)) {\n      this.list.collection.remove(messages);\n      this.header.onModelChange(null, null);\n      this.detail.onModelChange(null, null);\n      this.detail.renderEmpty();\n    }\n\n    let $focusNext = jquery__WEBPACK_IMPORTED_MODULE_1___default()(focusNext);\n\n    if ($focusNext.length === 0) {\n      $focusNext = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#compose-message-recipients');\n    }\n\n    $focusNext.focus();\n  },\n\n  onDelete(focusNext, trigger) {\n    const confirmMsg = i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t({\n      one: 'Are you sure you want to delete your copy of this conversation? This action cannot be undone.',\n      other: 'Are you sure you want to delete your copy of these conversations? This action cannot be undone.'\n    }, {\n      count: this.list.selectedMessages.length\n    });\n\n    if (!confirm(confirmMsg)) {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()(trigger).focus();\n      return;\n    }\n\n    const delmsg = i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t({\n      one: 'Message Deleted!',\n      other: 'Messages Deleted!'\n    }, {\n      count: this.list.selectedMessages.length\n    });\n    const messages = this.batchUpdate('destroy');\n    delete this.detail.model;\n    this.list.collection.remove(messages);\n    this.header.updateUi(null);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default.a.flashMessage(delmsg);\n    this.detail.renderEmpty();\n    let $focusNext = jquery__WEBPACK_IMPORTED_MODULE_1___default()(focusNext);\n\n    if ($focusNext.length === 0) {\n      $focusNext = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#compose-message-recipients');\n    }\n\n    $focusNext.focus();\n  },\n\n  onCompose(e) {\n    this.compose.show(null, {\n      trigger: '#compose-btn'\n    });\n  },\n\n  index() {\n    return this.filter('');\n  },\n\n  filter(state) {\n    const filters = this.filters = Object(deparam__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(state);\n    this.header.displayState(filters);\n    this.selectConversation(null);\n    this.list.selectedMessages = [];\n    this.list.collection.reset();\n\n    if (filters.type === 'submission_comments') {\n      ;\n      ['scope', 'filter', 'filter_mode', 'include_private_conversation_enrollments'].forEach(this.list.collection.deleteParam.bind(this.list.collection));\n      this.list.collection.url = '/api/v1/users/self/activity_stream';\n      this.list.collection.setParam('asset_type', 'Submission');\n\n      if (filters.course) {\n        this.list.collection.setParam('context_code', filters.course);\n      } else {\n        this.list.collection.deleteParam('context_code');\n      }\n    } else {\n      ;\n      ['context_code', 'asset_type', 'submission_user_id'].forEach(this.list.collection.deleteParam.bind(this.list.collection));\n      this.list.collection.url = '/api/v1/conversations';\n      this.list.collection.setParam('scope', filters.type);\n      this.list.collection.setParam('filter', this._currentFilter());\n      this.list.collection.setParam('filter_mode', 'and');\n      this.list.collection.setParam('include_private_conversation_enrollments', false);\n    }\n\n    this.list.collection.fetch();\n    this.compose.setDefaultCourse(filters.course);\n  },\n\n  onMarkUnread() {\n    return this.batchUpdate('mark_as_unread', m => m.toggleReadState(false));\n  },\n\n  onMarkRead() {\n    return this.batchUpdate('mark_as_read', m => m.toggleReadState(true));\n  },\n\n  onForward(message, trigger) {\n    let model;\n\n    if (message) {\n      model = this.detail.model.clone();\n      model.handleMessages();\n      model.set('messages', underscore__WEBPACK_IMPORTED_MODULE_2___default.a.filter(model.get('messages'), m => m.id === message.id || underscore__WEBPACK_IMPORTED_MODULE_2___default.a.includes(m.participating_user_ids, message.author_id) && m.created_at < message.created_at));\n    } else {\n      model = this.detail.model;\n    }\n\n    this.compose.show(model, {\n      to: 'forward',\n      trigger\n    });\n  },\n\n  onStarToggle() {\n    const event = this.list.selectedMessage().get('starred') ? 'unstar' : 'star';\n    const messages = this.batchUpdate(event, m => m.toggleStarred(event === 'star'));\n\n    if (this.filters.type === 'starred') {\n      if (event === 'unstar') this.selectConversation(null);\n      return this.list.collection.remove(messages);\n    }\n  },\n\n  onFilter(filters) {\n    // Update the hash. Replace if there isn't already a hash - we're in the\n    // process of loading the page if so, and we wouldn't want to create a\n    // spurious history entry by not doing so.\n    const existingHash = window.location.hash && window.location.hash.substring(1);\n    return this.navigate(`filter=${jquery__WEBPACK_IMPORTED_MODULE_1___default.a.param(filters)}`, {\n      trigger: true,\n      replace: !existingHash\n    });\n  },\n\n  onCourse(course) {\n    return this.list.updateCourse(course);\n  },\n\n  // Internal: Determine if a reply was launched from another URL.\n  //\n  // Returns a boolean.\n  _isRemoteLaunch() {\n    return !!window.location.search.match(/user_id/);\n  },\n\n  // Internal: Open and populate the new message dialog from a remote launch.\n  //\n  // Returns nothing.\n  _replyFromRemote() {\n    this.compose.show(null, {\n      user: {\n        id: this.param('user_id'),\n        name: this.param('user_name')\n      },\n      context: this.param('context_id'),\n      remoteLaunch: true\n    });\n  },\n\n  _initCollections() {\n    const gc = new _canvas_groups_backbone_collections_GroupCollection_coffee__WEBPACK_IMPORTED_MODULE_13__[\"default\"]();\n    gc.setParam('include[]', 'can_message');\n    this.courses = {\n      favorites: new _backbone_collections_FavoriteCourseCollection__WEBPACK_IMPORTED_MODULE_12__[\"default\"](),\n      all: new _backbone_collections_CourseCollection__WEBPACK_IMPORTED_MODULE_11__[\"default\"](),\n      groups: gc\n    };\n    this.courses.all.setParam('per_page', '50');\n    return this.courses.favorites.fetch();\n  },\n\n  _initViews() {\n    this._initListView();\n\n    this._initDetailView();\n\n    this._initHeaderView();\n\n    this._initComposeDialog();\n\n    this._initSubmissionCommentReplyDialog();\n  },\n\n  _attachEvents() {\n    this.list.collection.on('change:selected', this.onSelected);\n    this.header.on('compose', this.onCompose);\n    this.header.on('reply', this.onReply);\n    this.header.on('reply-all', this.onReplyAll);\n    this.header.on('archive', this.onArchive);\n    this.header.on('delete', this.onDelete);\n    this.header.on('filter', this.onFilter);\n    this.header.on('course', this.onCourse);\n    this.header.on('mark-unread', this.onMarkUnread);\n    this.header.on('mark-read', this.onMarkRead);\n    this.header.on('forward', this.onForward);\n    this.header.on('star-toggle', this.onStarToggle);\n    this.header.on('search', this.onSearch);\n    this.header.on('submission-reply', this.onReply);\n    this.compose.on('close', this.onCloseCompose);\n    this.compose.on('addMessage', this.onAddMessage);\n    this.compose.on('addMessage', this.list.updateMessage, this.list);\n    this.compose.on('newConversations', this.onNewConversations);\n    this.compose.on('submitting', this.onSubmit);\n    this.submissionReply.on('addMessage', this.onSubmissionAddMessage);\n    this.submissionReply.on('submitting', this.onSubmit);\n    this.detail.on('reply', this.onReply);\n    this.detail.on('reply-all', this.onReplyAll);\n    this.detail.on('forward', this.onForward);\n    this.detail.on('star-toggle', this.onStarToggle);\n    this.detail.on('delete', this.onDelete);\n    this.detail.on('archive', this.onArchive);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(document).ready(this.onPageLoad);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(window).keydown(this.onKeyDown);\n  },\n\n  onPageLoad(e) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#main').css({\n      display: 'block'\n    });\n  },\n\n  onSubmit(dfd) {\n    this._incrementSending(1);\n\n    return dfd.always(() => this._incrementSending(-1));\n  },\n\n  onAddMessage(message, conversation) {\n    const model = this.list.collection.get(conversation.id);\n\n    if (model && model.get('messages')) {\n      message.context_name = model.messageCollection.last().get('context_name');\n      model.get('messages').unshift(message);\n      model.trigger('change:messages');\n\n      if (model === this.detail.model) {\n        return this.detail.render();\n      }\n    }\n  },\n\n  onSubmissionAddMessage(message, submission) {\n    const model = this.list.collection.findWhere({\n      submission_id: submission.id\n    });\n\n    if (model && model.get('messages')) {\n      model.get('messages').unshift(message);\n      model.trigger('change:messages');\n\n      if (model === this.detail.model) {\n        return this.detail.render();\n      }\n    }\n  },\n\n  onNewConversations(conversations) {},\n\n  _incrementSending(increment) {\n    this.sendingCount += increment;\n    return this.header.toggleSending(this.sendingCount > 0);\n  },\n\n  _currentFilter() {\n    let filter = this.searchTokens || [];\n    if (this.filters.course) filter = filter.concat(this.filters.course);\n    return filter;\n  },\n\n  onSearch(tokens) {\n    this.list.collection.reset();\n    this.searchTokens = tokens.length ? tokens : null;\n\n    if (this.filters.type === 'submission_comments') {\n      let match;\n\n      if (this.searchTokens && (match = this.searchTokens[0].match(/^user_(\\d+)$/))) {\n        this.list.collection.setParam('submission_user_id', match[1]);\n      } else {\n        this.list.collection.deleteParam('submission_user_id');\n      }\n    } else {\n      this.list.collection.setParam('filter', this._currentFilter());\n    }\n\n    delete this.detail.model;\n    this.list.selectedMessages = [];\n    this.detail.render();\n    return this.list.collection.fetch();\n  },\n\n  _initListView() {\n    this.list = new _backbone_views_MessageListView__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n      collection: new _backbone_collections_MessageCollection__WEBPACK_IMPORTED_MODULE_4__[\"default\"](),\n      el: jquery__WEBPACK_IMPORTED_MODULE_1___default()('.message-list'),\n      scrollContainer: jquery__WEBPACK_IMPORTED_MODULE_1___default()('.message-list-scroller'),\n      buffer: 50\n    });\n    this.list.render();\n  },\n\n  _initDetailView() {\n    this.detail = new _backbone_views_MessageDetailView__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      el: jquery__WEBPACK_IMPORTED_MODULE_1___default()('.message-detail')\n    });\n    this.detail.render();\n  },\n\n  _initHeaderView() {\n    const defaultFilter = 'inbox';\n    const filters = {\n      inbox: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Inbox'),\n      unread: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Unread'),\n      starred: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Starred'),\n      sent: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Sent'),\n      archived: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Archived'),\n      submission_comments: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Submission Comments')\n    }; // The onArchive function requires the filter to always be set in the url.\n    // If you are accessing the page iniitially, the filter will be set to\n    // inbox, but we have to update the url here manually to match. Further\n    // updates to the url are handled by the filter trigger and backbone history\n\n    const hash = window.location.hash;\n    const hashParams = hash.substring('#filter='.length);\n    const filterType = Object(query_string_encoding__WEBPACK_IMPORTED_MODULE_17__[\"decodeQueryString\"])(hashParams).filter(i => i.type !== void 0);\n    const validFilter = filterType.length === 1 && Object.keys(filters).includes(filterType[0].type);\n    let initialFilter;\n\n    if (hash.startsWith('#filter=') && validFilter) {\n      initialFilter = filterType[0].type;\n    } else {\n      window.location.hash = `#filter=type=${defaultFilter}`;\n      initialFilter = defaultFilter;\n    }\n\n    this.header = new _backbone_views_InboxHeaderView__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n      el: jquery__WEBPACK_IMPORTED_MODULE_1___default()('header.panel'),\n      courses: this.courses\n    });\n    this.header.render();\n    react_dom__WEBPACK_IMPORTED_MODULE_16___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_react_ConversationStatusFilter__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n      router: this,\n      filters: filters,\n      defaultFilter: defaultFilter,\n      initialFilter: initialFilter\n    }), document.getElementById('conversation_filter'));\n  },\n\n  _initComposeDialog() {\n    this.compose = new _backbone_views_MessageFormDialog__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n      courses: this.courses,\n      folderId: ENV.CONVERSATIONS.ATTACHMENTS_FOLDER_ID,\n      account_context_code: ENV.CONVERSATIONS.ACCOUNT_CONTEXT_CODE\n    });\n  },\n\n  _initSubmissionCommentReplyDialog() {\n    this.submissionReply = new _backbone_views_SubmissionCommentFormDialog__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n  },\n\n  onKeyDown(e) {\n    const nodeName = e.target.nodeName.toLowerCase();\n    if (nodeName === 'input' || nodeName === 'textarea') return;\n    const ctrl = e.ctrlKey || e.metaKey;\n\n    if (e.which === 65 && ctrl) {\n      // ctrl-a\n      e.preventDefault();\n      this.list.selectAll();\n    }\n  }\n\n});\nwindow.conversationsRouter = new ConversationsRouter();\n_canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default.a.history.start();\n\n//# sourceURL=webpack:///./ui/features/conversations/index.js?");

/***/ }),

/***/ "5sHi":
/*!*****************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/MessageView.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MessageView; });\n/* harmony import */ var i18n_conversations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!conversations */ \"mD3o\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _jst_message_handlebars__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../jst/message.handlebars */ \"C7tP\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-checkbox */ \"Kdwl\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\n\n\n\nclass MessageView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__[\"View\"] {\n  initialize(...args) {\n    super.initialize(...args);\n    return this.attachModel();\n  }\n\n  attachModel() {\n    this.model.on('change:starred', this.setStarBtnChecked.bind(this));\n    this.model.on('change:workflow_state', () => this.$readBtn.toggleClass('read', this.model.get('workflow_state') !== 'unread'));\n    this.model.on('change:selected', this.setSelected.bind(this));\n  }\n\n  renderSelectCheckbox() {\n    const subject = this.model.get('subject') || i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('No Subject');\n    react_dom__WEBPACK_IMPORTED_MODULE_5___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_6__[\"Checkbox\"], {\n      label: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__[\"ScreenReaderContent\"], null, i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Select Conversation %{subject}', {\n        subject\n      })),\n      checked: !!this.model.get('selected'),\n      onChange: () => this.model.set('selected', !this.model.get('selected'))\n    }), this.$selectCheckbox[0]);\n  }\n\n  setSelected(m) {\n    const selected = m.get('selected');\n    this.$el.toggleClass('active', selected);\n    this.renderSelectCheckbox();\n  }\n\n  onSelect(e) {\n    if (e && e.target.className.match(/star|read-state/) || this.$selectCheckbox[0].contains(e.target)) return;\n    if (e.shiftKey) return this.model.collection.selectRange(this.model);\n    const modifier = e.metaKey || e.ctrlKey;\n    if (this.model.get('selected') && modifier) return this.deselect(modifier);\n    return this.select(modifier);\n  }\n\n  select(modifier) {\n    if (!modifier) {\n      underscore__WEBPACK_IMPORTED_MODULE_2___default.a.each(this.model.collection.without(this.model), m => m.set('selected', false));\n    }\n\n    this.model.set('selected', true);\n\n    if (this.model.unread()) {\n      this.model.set('workflow_state', 'read');\n\n      if (this.model.get('for_submission')) {\n        return this.model.save();\n      }\n    }\n  }\n\n  deselect(modifier) {\n    if (modifier) this.model.set('selected', false);\n  }\n\n  setStarBtnCheckedScreenReaderMessage() {\n    const subject = this.model.get('subject');\n    const text = this.model.starred() ? subject ? i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Starred \"%{subject}\", Click to unstar.', {\n      subject\n    }) : i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Starred \"(No Subject)\", Click to unstar.') : subject ? i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Not starred \"%{subject}\", Click to star.', {\n      subject\n    }) : i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Not starred \"(No Subject)\", Click to star.');\n    this.$starBtnScreenReaderMessage.text(text);\n  }\n\n  setStarBtnChecked() {\n    this.$starBtn.attr({\n      'aria-checked': this.model.starred(),\n      title: this.model.starred() ? this.messages.unstar : this.messages.star\n    });\n    this.$starBtn.toggleClass('active', this.model.starred());\n    this.setStarBtnCheckedScreenReaderMessage();\n  }\n\n  toggleStar(e) {\n    e.preventDefault();\n    this.model.toggleStarred();\n    this.model.save();\n    this.setStarBtnChecked();\n  }\n\n  toggleRead(e) {\n    e.preventDefault();\n    this.model.toggleReadState();\n    this.model.save();\n    this.$readBtn.attr({\n      'aria-checked': this.model.unread(),\n      title: this.model.unread() ? this.messages.read : this.messages.unread\n    });\n  }\n\n  onMouseDown(e) {\n    if (e.shiftKey) {\n      e.preventDefault();\n      setTimeout(() => window.getSelection().removeAllRanges(), 0); // IE\n    }\n  }\n\n  afterRender() {\n    this.renderSelectCheckbox();\n  }\n\n  remove() {\n    react_dom__WEBPACK_IMPORTED_MODULE_5___default.a.unmountComponentAtNode(this.$selectCheckbox[0]);\n    super.remove(...arguments);\n  }\n\n  toJSON() {\n    return this.model.toJSON().conversation;\n  }\n\n}\nObject.assign(MessageView.prototype, {\n  tagName: 'li',\n  template: _jst_message_handlebars__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n  els: {\n    '.star-btn': '$starBtn',\n    '.StarButton-LabelContainer': '$starBtnScreenReaderMessage',\n    '.read-state': '$readBtn',\n    '.select-checkbox': '$selectCheckbox'\n  },\n  events: {\n    click: 'onSelect',\n    'click .open-message': 'onSelect',\n    'click .star-btn': 'toggleStar',\n    'click .read-state': 'toggleRead',\n    mousedown: 'onMouseDown'\n  },\n  messages: {\n    read: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Mark as read'),\n    unread: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Mark as unread'),\n    star: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Star conversation'),\n    unstar: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Unstar conversation')\n  }\n});\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/MessageView.js?");

/***/ }),

/***/ "6NVu":
/*!***********************************!*\
  !*** ./packages/deparam/index.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return deparam; });\n/* harmony import */ var obj_unflatten__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! obj-unflatten */ \"IxAH\");\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n// an extraction of the deparam method from Ben Alman's jQuery BBQ\n// http://benalman.com/projects/jquery-bbq-plugin/\n\n\n\nconst coerceTypes = {\n  true: true,\n  false: false,\n  null: null\n}\n\nfunction deparam(params, coerce) {\n  // shortcut for just deparam'ing the current querystring\n  if (!params || typeof params === 'boolean') {\n    const currentQueryString = window.location.search\n    if (!currentQueryString) return {}\n    return deparam(currentQueryString, ...arguments)\n  }\n\n  const obj = {}\n  params\n    .replace(/\\+/g, ' ')\n    .split('&')\n    .forEach(param => {\n      let [key, val] = param.split('=')\n      key = decodeURIComponent(key)\n      val = decodeURIComponent(val)\n\n      // coerce values.\n      if (coerce) {\n        val =\n          val && !isNaN(val)\n            ? +val // number\n            : val === 'undefined'\n            ? undefined // undefined\n            : coerceTypes[val] !== undefined\n            ? coerceTypes[val] // true, false, null\n            : val // string\n      }\n\n      obj[key] = val\n    })\n\n  return Object(obj_unflatten__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(obj)\n}\n\n\n//# sourceURL=webpack:///./packages/deparam/index.js?");

/***/ }),

/***/ "8ZhW":
/*!********************************************************************!*\
  !*** ./ui/features/conversations/jst/MessageFormDialog.handlebars ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_message_form_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.message_form_dialog */ \"uZYt\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/MessageFormDialog';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n      action=\\\"/conversations/\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.conversation)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"/add_message\\\" class=\\\"form-horizontal\\\"\\n  \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n      action=\\\"/conversations\\\" class=\\\"form-horizontal new\\\"\\n  \";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n          \";\n  if (helper = helpers.audience) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.audience); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n          <!--\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"headings.new_message\", \"New Message\", options) : helperMissing.call(depth0, \"t\", \"headings.new_message\", \"New Message\", options)))\n    + \"-->\\n        \";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n          <a href=\\\"/conversations/\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"/add_recipients\\\" class=\\\"action_add_recipients\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"inbox_actions.add_people\", \"Add People\", options) : helperMissing.call(depth0, \"t\", \"inbox_actions.add_people\", \"Add People\", options)))\n    + \"</a>\\n        \";\n  return buffer;\n  }\n\nfunction program11(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.course) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.course); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\nfunction program13(depth0,data) {\n  \n  var helper, options;\n  return escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"no_course\", \"No course\", options) : helperMissing.call(depth0, \"t\", \"no_course\", \"No course\", options)));\n  }\n\nfunction program15(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.subject) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subject); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\nfunction program17(depth0,data) {\n  \n  var helper, options;\n  return escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"no_subject\", \"No subject\", options) : helperMissing.call(depth0, \"t\", \"no_subject\", \"No subject\", options)));\n  }\n\nfunction program19(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        <div class=\\\"message-header-row\\\">\\n          <div class=\\\"message-header-label\\\"></div>\\n          <div class=\\\"message-header-input\\\">\\n            <input type=\\\"hidden\\\" name=\\\"bulk_message\\\" value=\\\"0\\\" />\\n            <label class=\\\"checkbox\\\">\\n              <input id=\\\"bulk_message\\\" type=\\\"checkbox\\\" name=\\\"bulk_message\\\" value=\\\"1\\\" />\\n              \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"send_individual_messages\", \"Send an individual message to each recipient\", options) : helperMissing.call(depth0, \"t\", \"send_individual_messages\", \"Send an individual message to each recipient\", options)))\n    + \"\\n            </label>\\n\\n          </div>\\n        </div>\\n      \";\n  return buffer;\n  }\n\nfunction program21(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n            <a class=\\\"action_media_comment\\\"\\n               href=\\\"#\\\"\\n               data-track-category=\\\"Compose Message\\\"\\n               data-track-action=\\\"Edit\\\"\\n               data-track-label=\\\"Audio Recording\\\"\\n               title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"titles.record_media_comment\", \"Record an audio or video comment\", options) : helperMissing.call(depth0, \"t\", \"titles.record_media_comment\", \"Record an audio or video comment\", options)))\n    + \"\\\">\\n              <i class=\\\"icon-media\\\"></i> \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"links.media_comment\", \"Record\", options) : helperMissing.call(depth0, \"t\", \"links.media_comment\", \"Record\", options)))\n    + \"\\n            </a>\\n          \";\n  return buffer;\n  }\n\n  buffer += \"<form class=\\\"compose_form\\\" method=\\\"post\\\"\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.conversation), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  >\\n  <div class=\\\"message-header\\\">\\n    <input type=\\\"hidden\\\" name=\\\"from_conversation_id\\\" value=\\\"\";\n  if (helper = helpers.from_conversation_id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.from_conversation_id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <input type=\\\"hidden\\\" name=\\\"mode\\\" value=\\\"async\\\">\\n    <input type=\\\"hidden\\\" name=\\\"scope\\\" value=\\\"\";\n  if (helper = helpers.scope) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.scope); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <input type=\\\"hidden\\\" name=\\\"filter\\\" value=\\\"\";\n  if (helper = helpers.filter) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.filter); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <input type=\\\"hidden\\\" name=\\\"group_conversation\\\" value=\\\"true\\\">\\n\\n    <ul class=\\\"conversations\\\" style='display:none;'>\\n      <li>\\n      <span class=\\\"audience\\\">\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.conversation), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </span>\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.addRecipientsEnabled), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </li>\\n    </ul>\\n\\n    <div class='message-header'>\\n      <div class='message-header-row'>\\n        <div class='message-header-label'>\\n          <label for=\\\"compose-message-course\\\">\\n            \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"labels.course\", \"Course\", options) : helperMissing.call(depth0, \"t\", \"labels.course\", \"Course\", options)))\n    + \"\\n          </label>\\n        </div>\\n        <div class='message-header-input'>\\n          <select id=\\\"compose-message-course\\\" name=\\\"course\\\"\\n                  data-track-category=\\\"Compose Course\\\"\\n                  data-track-action=\\\"Edit\\\"\\n                  data-track-label=\\\"Course\\\"\\n                  class=\\\"message_course\\\"\\n                  required=\\\"true\\\"\\n                  value=\\\"\";\n  if (helper = helpers.course) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.course); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <option>\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"labels.select_course\", \"Select a course\", options) : helperMissing.call(depth0, \"t\", \"labels.select_course\", \"Select a course\", options)))\n    + \"</option>\\n          </select>\\n          <span class=\\\"message_course_ro\\\">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.course), {hash:{},inverse:self.program(13, program13, data),fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span>\\n          <input type=\\\"hidden\\\" name=\\\"context_code\\\" />\\n        </div>\\n      </div>\\n\\n      <div id='recipient-row' class='message-header-row'>\\n        <div class='message-header-label'>\\n          <label for=\\\"compose-message-recipients\\\">\\n            \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"labels.to\", \"To\", options) : helperMissing.call(depth0, \"t\", \"labels.to\", \"To\", options)))\n    + \"\\n            <span id=\\\"recipient-label\\\" class=\\\"screenreader-only\\\"></span>\\n          </label>\\n        </div>\\n        <div class='message-header-input'>\\n          <div class=\\\"ac\\\">\\n            <div class=\\\"ac-row\\\">\\n              <div class=\\\"ac-input-cell\\\">\\n                <div class=\\\"ac-input-box\\\">\\n                  <ul class=\\\"ac-token-list\\\"></ul>\\n                  <input type=\\\"search\\\"\\n                         class=\\\"ac-input\\\"\\n                         id=\\\"compose-message-recipients\\\"\\n                         aria-expanded=\\\"false\\\"\\n                         aria-activedescendant=\\\"ac-result-list\\\"\\n                         aria-owns=\\\"ac-result-list-1\\\"\\n                         aria-autocomplete=\\\"list\\\"\\n                         aria-label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"comboboxInstructions\", \"To: (Start typing to choose recipients. Press the down arrow to navigate results. If you don't find an acceptable option, you can enter an alternative.)\", options) : helperMissing.call(depth0, \"t\", \"comboboxInstructions\", \"To: (Start typing to choose recipients. Press the down arrow to navigate results. If you don't find an acceptable option, you can enter an alternative.)\", options)))\n    + \"\\\"\\n                         aria-describedby=\\\"ac-input-description\\\"\\n                         autocomplete=\\\"off\\\"\\n                         role=\\\"combobox\\\" />\\n                  <span aria-live=\\\"polite\\\" class=\\\"ac-results-status screenreader-only\\\" id=\\\"ac-input-description\\\"></span>\\n                  <span aria-live=\\\"polite\\\" class=\\\"ac-selected-name screenreader-only\\\"></span>\\n                </div>\\n              </div>\\n\\n              <div class=\\\"btn ac-search-btn\\\"\\n                      id=\\\"recipient-search-btn\\\"\\n                      role=\\\"button\\\" tabindex=\\\"0\\\">\\n                <i class=\\\"icon-address-book\\\"></i>\\n                <span class=\\\"screenreader-only\\\">\\n                  \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"search_names_groups_courses\", \"Search names, groups, and courses\", options) : helperMissing.call(depth0, \"t\", \"search_names_groups_courses\", \"Search names, groups, and courses\", options)))\n    + \"\\n                </span>\\n              </div>\\n            </div>\\n\\n            <div class=\\\"ac-result-wrapper\\\" id=\\\"ac-result-list-1\\\" aria-hidden=\\\"true\\\">\\n              <div class=\\\"ac-result-container\\\">\\n                <div class=\\\"ac-result-contents\\\">\\n                  <ul class=\\\"ac-result-list collectionViewItems\\\"></ul>\\n                  <div class=\\\"paginatedLoadingIndicator\\\"></div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class='message-header-row'>\\n        <div class='message-header-label'>\\n          <label for=\\\"compose-message-subject\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"labels.subject\", \"Subject\", options) : helperMissing.call(depth0, \"t\", \"labels.subject\", \"Subject\", options)))\n    + \"</label>\\n        </div>\\n        <div class='message-header-input'>\\n          <input type=\\\"text\\\" id=\\\"compose-message-subject\\\" name=\\\"subject\\\"\\n                 data-track-category=\\\"Compose Subject\\\"\\n                 data-track-action=\\\"Edit\\\"\\n                 data-track-label=\\\"Subject\\\"\\n                 class=\\\"message_subject\\\"\\n                 value=\\\"\";\n  if (helper = helpers.subject) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subject); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n                 placeholder=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"no_subject\", \"No subject\", options) : helperMissing.call(depth0, \"t\", \"no_subject\", \"No subject\", options)))\n    + \"\\\"\\n                 maxlength=\\\"255\\\">\\n          <span class=\\\"message_subject_ro\\\">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subject), {hash:{},inverse:self.program(17, program17, data),fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span>\\n        </div>\\n      </div>\\n\\n      \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.conversation), {hash:{},inverse:self.noop,fn:self.program(19, program19, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n      <div class='message-header-row user_note_info' style=\\\"display: none\\\">\\n        <div class='message-header-label'></div>\\n        <div class='message-header-input'>\\n          <input type=\\\"hidden\\\" name=\\\"user_note\\\" value=\\\"0\\\" />\\n          <label class=\\\"checkbox\\\">\\n            <input type=\\\"checkbox\\\" name=\\\"user_note\\\" class=\\\"user_note\\\" value=\\\"1\\\" />\\n            \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"labels.add_to_faculty_journal\", \"Add as a Faculty Journal entry\", options) : helperMissing.call(depth0, \"t\", \"labels.add_to_faculty_journal\", \"Add as a Faculty Journal entry\", options)))\n    + \"\\n          </label>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"message-header-row\\\">\\n        <div class='message-header-label'></div>\\n        <div class='message-header-input'>\\n          <div class=\\\"media_comment\\\" style=\\\"display: none;\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"titles.media_comment\", \"Recorded media comment\", options) : helperMissing.call(depth0, \"t\", \"titles.media_comment\", \"Recorded media comment\", options)))\n    + \"\\\">\\n            <img src=\\\"/images/messages/media-gray.png\\\">\\n            \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"media_comment\", \"Media Comment\", options) : helperMissing.call(depth0, \"t\", \"media_comment\", \"Media Comment\", options)))\n    + \"\\n            <a href=\\\"#\\\" class=\\\"remove_link black\\\" style=\\\"float: right;\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"titles.remove_media_comment\", \"Remove media comment\", options) : helperMissing.call(depth0, \"t\", \"titles.remove_media_comment\", \"Remove media comment\", options)))\n    + \"\\\"><i class=\\\"icon-end\\\"></i> </a>\\n            <div class=\\\"clear\\\"></div>\\n          </div>\\n          <input type=\\\"hidden\\\" name=\\\"media_comment_id\\\">\\n          <input type=\\\"hidden\\\" name=\\\"media_comment_type\\\">\\n          \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.mediaCommentsEnabled), {hash:{},inverse:self.noop,fn:self.program(21, program21, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <hr class='header-separator' />\\n\\n  <div class='message-body'>\\n    <textarea name=\\\"body\\\"\\n              data-track-category=\\\"Compose Message\\\"\\n              data-track-action=\\\"Edit\\\"\\n              data-track-label=\\\"Body\\\"\\n              aria-label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"body\", \"Body\", options) : helperMissing.call(depth0, \"t\", \"body\", \"Body\", options)))\n    + \"\\\"\\n              class=\\\"conversation_body\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</textarea>\\n    <div class='context_messages'></div>\\n  </div>\\n\\n  <div class='attachments-pane'>\\n    <ul class='attachment_list' aria-label='\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"labels.attachments\", \"Attachments\", options) : helperMissing.call(depth0, \"t\", \"labels.attachments\", \"Attachments\", options)))\n    + \"' aria-live='polite'></ul>\\n  </div>\\n\\n</form>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/MessageFormDialog.handlebars?");

/***/ }),

/***/ "90NG":
/*!*************************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/CourseSelectionView.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CourseSelectionView; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var i18n_conversations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations */ \"mD3o\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _SearchableSubmenuView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SearchableSubmenuView */ \"PFi0\");\n/* harmony import */ var _jst_courseOptions_handlebars__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../jst/courseOptions.handlebars */ \"395I\");\n/* harmony import */ var _canvas_datetime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @canvas/datetime */ \"7AEQ\");\n/* harmony import */ var bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! bootstrap-dropdown */ \"Qrqo\");\n/* harmony import */ var bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var bootstrap_select__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! bootstrap-select */ \"9HrG\");\n/* harmony import */ var bootstrap_select__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(bootstrap_select__WEBPACK_IMPORTED_MODULE_9__);\n\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\n\n\n\n\nclass CourseSelectionView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_4__[\"View\"] {\n  static initClass() {\n    this.prototype.events = {\n      change: 'onChange'\n    };\n    this.prototype._value = '';\n  }\n\n  initialize() {\n    var _this$$el$data;\n\n    super.initialize(...arguments);\n    if (!this.options.defaultOption) this.options.defaultOption = i18n_conversations__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('all_courses', 'All Courses');\n    this.$el.addClass('show-tick');\n    this.$el.selectpicker({\n      useSubmenus: true\n    }).next().on('mouseover', () => this.loadAll()).find('.dropdown-toggle').on('focus', () => this.loadAll());\n    const dropdown = (_this$$el$data = this.$el.data('selectpicker')) === null || _this$$el$data === void 0 ? void 0 : _this$$el$data.$newElement;\n\n    if (dropdown) {\n      dropdown.on('focusout', () => {\n        setTimeout(() => {\n          // fully close dropdown once focus has left the dropdown tree\n          if (!dropdown[0].contains(document.activeElement) && // selenium tests fail when executing JS scripts as the web\n          // driver moves focus to the body. so let's just exclude it\n          // from the things we care to check :P\n          document.activeElement !== document.body) {\n            dropdown.removeClass('open');\n          }\n        }, 0);\n      });\n    }\n\n    this.options.courses.favorites.on('reset', () => this.render());\n    this.options.courses.all.on('reset', () => this.render());\n    this.listenTo(this.options.courses.all, 'add', underscore__WEBPACK_IMPORTED_MODULE_3___default.a.debounce(underscore__WEBPACK_IMPORTED_MODULE_3___default.a.bind(this.render), 200));\n    this.options.courses.groups.on('reset', () => this.render());\n    this.listenTo(this.options.courses.groups, 'add', underscore__WEBPACK_IMPORTED_MODULE_3___default.a.debounce(underscore__WEBPACK_IMPORTED_MODULE_3___default.a.bind(this.render), 200));\n    this.$picker = this.$el.next();\n    return this.render();\n  }\n\n  render() {\n    super.render();\n    const more = [];\n    const concluded = [];\n    const now = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.fudgeDateForProfileTimezone(new Date());\n    this.options.courses.all.each(course => {\n      if (this.options.courses.favorites.get(course.id)) return;\n      if (course.get('access_restricted_by_date')) return;\n      const is_complete = this.is_complete(course, now);\n      const collection = is_complete ? concluded : more;\n      return collection.push(course.toJSON());\n    });\n    let group_json = this.options.courses.groups.toJSON();\n\n    if (this.options.messageableOnly) {\n      group_json = underscore__WEBPACK_IMPORTED_MODULE_3___default.a.filter(group_json, g => g.can_message);\n    }\n\n    const data = {\n      defaultOption: this.options.defaultOption,\n      favorites: this.options.courses.favorites.toJSON(),\n      more,\n      groups: group_json\n    };\n\n    if (!this.options.excludeConcluded) {\n      data.concluded = concluded;\n    }\n\n    this.truncate_course_name_data(data);\n    this.$el.html(Object(_jst_courseOptions_handlebars__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(data));\n    this.$el.selectpicker('refresh');\n    this.$picker.find('.paginatedLoadingIndicator').remove();\n    this.getAriaLabel();\n    this.createSearchViews();\n    if (!this.renderValue()) return this.loadAll();\n  }\n\n  is_complete(course, asOf) {\n    if (course.get('workflow_state') === 'completed') return true;\n    if (course.get('end_at') && course.get('restrict_enrollments_to_course_dates')) return new Date(course.get('end_at')) < asOf;\n    if (course.get('term') && course.get('term').end_at) return new Date(course.get('term').end_at) < asOf;\n    return false;\n  }\n\n  createSearchViews() {\n    const searchViews = [];\n    this.$picker.find('.dropdown-submenu').each(function () {\n      searchViews.push(new _SearchableSubmenuView__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n        el: this\n      }));\n    });\n    return this.searchViews = searchViews;\n  }\n\n  loadAll() {\n    const _this$options$courses = this.options.courses,\n          all = _this$options$courses.all,\n          groups = _this$options$courses.groups;\n    if (all._loading) return;\n    all.fetch();\n    all._loading = true;\n    groups.fetchAll();\n    return this.$picker.find('> .dropdown-menu').append(jquery__WEBPACK_IMPORTED_MODULE_2___default()('<div />').attr('class', 'paginatedLoadingIndicator').css('clear', 'both'));\n  }\n\n  setValue(value) {\n    this._value = value || '';\n    this.renderValue();\n    return this.triggerEvent();\n  }\n\n  renderValue() {\n    this.silenced = true;\n    this.$el.selectpicker('val', this._value);\n    this.silenced = false;\n    return this.$el.val() === this._value;\n  }\n\n  onChange() {\n    if (this.silenced) return;\n    this._value = this.$el.val();\n    this.triggerEvent();\n    this.getAriaLabel();\n    return this.searchViews.forEach(view => view.clearSearch());\n  }\n\n  getAriaLabel() {\n    if (ENV.CONVERSATIONS.CAN_MESSAGE_ACCOUNT_CONTEXT) return;\n    const label = this.getCurrentContext().name || i18n_conversations__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Select course: a selection is required before recipients field will become available');\n    return this.$picker.find('button').attr('aria-label', label);\n  }\n\n  getCurrentContext() {\n    let course;\n\n    const matches = this._value.match(/(\\w+)_(\\d+)/);\n\n    if (!matches) return {};\n\n    const _Array$from = Array.from(matches),\n          _Array$from2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_Array$from, 3),\n          match = _Array$from2[0],\n          type = _Array$from2[1],\n          id = _Array$from2[2];\n\n    const context = type === 'course' ? course = this.options.courses.favorites.get(id) || this.options.courses.all.get(id) : this.options.courses.groups.get(id);\n\n    if (context) {\n      return {\n        name: context.get('name'),\n        id: this._value\n      };\n    } else {\n      return {};\n    }\n  }\n\n  triggerEvent() {\n    return this.trigger('course', this.getCurrentContext());\n  }\n\n  focus() {\n    return this.$el.next().find('.dropdown-toggle').focus();\n  }\n\n  truncate_course_name_data(course_data) {\n    return underscore__WEBPACK_IMPORTED_MODULE_3___default.a.each(['favorites', 'more', 'concluded', 'groups'], key => this.truncate_course_names(course_data[key]));\n  }\n\n  truncate_course_names(courses) {\n    return underscore__WEBPACK_IMPORTED_MODULE_3___default.a.each(courses, c => this.truncate_course(c));\n  }\n\n  truncate_course(course) {\n    const name = course.name;\n    const truncated = this.middle_truncate(name);\n\n    if (name !== truncated) {\n      return course.truncated_name = truncated;\n    }\n  }\n\n  middle_truncate(name) {\n    if (name.length > 25) {\n      return `${name.slice(0, 10)}…${name.slice(-10)}`;\n    } else {\n      return name;\n    }\n  }\n\n}\nCourseSelectionView.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/CourseSelectionView.js?");

/***/ }),

/***/ "9GAG":
/*!******************************************************************!*\
  !*** ./ui/features/conversations/jst/composeTitleBar.handlebars ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_compose_title_bar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.compose_title_bar */ \"3NPa\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/composeTitleBar';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<i class=\\\"icon-x\\\"></i>\\n<span class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.compose_title_bar\")\n  },data:data},helper ? helper.call(depth0, \"buttons.close\", \"close\", options) : helperMissing.call(depth0, \"t\", \"buttons.close\", \"close\", options)))\n    + \"</span>\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/composeTitleBar.handlebars?");

/***/ }),

/***/ "9HrG":
/*!********************************************!*\
  !*** ./packages/bootstrap-select/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// INSTRUCTURE modified\n(function (factory) { // UMD wrapper\n  if ( true && module.exports) {\n    factory(__webpack_require__(/*! jquery */ \"ouhR\"))\n  } else if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"ouhR\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n  } else {}\n})(function ($) {\n\n  \"use strict\";\n\n  var Selectpicker = function(element, options, e) {\n      if (e) {\n          e.stopPropagation();\n          e.preventDefault();\n      }\n      this.$element = $(element);\n      this.$newElement = null;\n      this.button = null;\n      this.$menu = null;\n\n      //Merge defaults, options and data-attributes to make our options\n      this.options = $.extend({}, $.fn.selectpicker.defaults, this.$element.data(), typeof options == 'object' && options);\n\n      //If we have no title yet, check the attribute 'title' (this is missed by jq as its not a data-attribute\n      if (this.options.title == null) {\n          this.options.title = this.$element.attr('title');\n      }\n\n      //Expose public methods\n      this.val = Selectpicker.prototype.val;\n      this.render = Selectpicker.prototype.render;\n      this.refresh = Selectpicker.prototype.refresh;\n      this.setStyle = Selectpicker.prototype.setStyle;\n      this.selectAll = Selectpicker.prototype.selectAll;\n      this.deselectAll = Selectpicker.prototype.deselectAll;\n      this.init();\n  };\n\n  Selectpicker.prototype = {\n\n      constructor: Selectpicker,\n\n      init: function(e) {\n          this.$element.hide();\n          this.multiple = this.$element.prop('multiple');\n          var id = this.$element.attr('id');\n          // INSTRUCTURE\n          this.id = id ? id+'-bs' : 'bs-'+((window.$ || window).guid++);\n          this.$newElement = this.createView();\n          this.$element.after(this.$newElement);\n          this.$menu = this.$newElement.find('> .dropdown-menu');\n          this.button = this.$newElement.find('> button');\n\n          if (id !== undefined) {\n              var _this = this;\n              this.button.attr('data-id', id);\n              $('label[for=\"' + id + '\"]').click(function() {\n                  _this.button.focus();\n              })\n          }\n\n          // INSTRUCTURE\n          this.$menu.attr('id', this.id);\n          this.button.attr('aria-owns', this.id);\n          this.button.attr('aria-label', this.$element.attr('aria-label'));\n          this.button.attr('aria-labelledby', this.$element.attr('aria-labelledby'));\n\n          //If we are multiple, then add the show-tick class by default\n          if (this.multiple) {\n                this.$newElement.addClass('show-tick');\n          }\n\n          this.checkDisabled();\n          this.checkTabIndex();\n          this.clickListener();\n          this.render();\n          this.liHeight();\n          this.setWidth();\n          this.setStyle();\n          if (this.options.container) {\n              this.selectPosition();\n          }\n      },\n\n      createDropdown: function() {\n          var drop =\n              \"<div class='btn-group bootstrap-select'>\" +\n                  \"<button type='button' aria-haspopup='true' class='btn dropdown-toggle' data-toggle='dropdown'>\" +\n                      \"<div class='filter-option pull-left'></div>&nbsp;\" +\n                      \"<div class='caret'></div>\" +\n                  \"</button>\" +\n                  \"<div class='dropdown-menu open' tabindex='0'>\" +\n                      \"<ul class='dropdown-menu inner' role='menu'>\" +\n                      \"</ul>\" +\n                  \"</div>\" +\n              \"</div>\";\n\n          return $(drop);\n      },\n\n      createView: function() {\n          var $drop = this.createDropdown();\n          var $li = this.createLi();\n          $drop.find('ul').append($li);\n          return $drop;\n      },\n\n      reloadLi: function() {\n          //Remove all children.\n          this.destroyLi();\n          //Re build\n          var $li = this.createLi();\n          this.$newElement.find('ul').append( $li );\n      },\n\n      destroyLi: function() {\n          this.$newElement.find('li').remove();\n      },\n\n      createLi: function() {\n          var _this = this,\n              _liA = [],\n              _subLiA = [],\n              _optgroup = null,\n              _liHtml = '';\n\n          this.$element.find('option').each(function(index) {\n              var $this = $(this);\n\n              //Get the class and text for the option\n              var optionClass = $this.attr(\"class\") || '';\n              var inline = $this.attr(\"style\") || '';\n              var text =  $this.data('content') ? $this.data('content') : $this.html();\n              var subtext = $this.data('subtext') !== undefined ? '<small class=\"muted\">' + $this.data('subtext') + '</small>' : '';\n              var icon = $this.data('icon') !== undefined ? '<i class=\"'+$this.data('icon')+'\"></i> ' : '';\n              if (icon !== '' && ($this.is(':disabled') || $this.parent().is(':disabled'))) {\n                  icon = '<span>'+icon+'</span>';\n              }\n              // INSTRUCTURE\n              var value = $this.attr(\"value\");\n              if (value !== undefined) {\n                value = $('<div/>').text(value).html();\n              } else {\n                value = text;\n              }\n\n              if (!$this.data('content')) {\n                //Prepend any icon and append any subtext to the main text.\n                text = icon + '<span class=\"text\" data-value=\"'+value+'\">' + text + subtext + '</span>';\n              }\n\n              if (_this.options.hideDisabled && ($this.is(':disabled') || $this.parent().is(':disabled'))) {\n                  _liA.push('<a style=\"min-height: 0; padding: 0\"></a>');\n              } else if ($this.parent().is('optgroup') && $this.data('divider') != true) {\n                  if ($this.index() == 0) {\n                      //Get the opt group label\n                      var label = $this.parent().attr('label');\n                      var content_type = $this.parent().data('content-type');\n                      var labelSubtext = $this.parent().data('subtext') !== undefined ? '<small class=\"muted\">'+$this.parent().data('subtext')+'</small>' : '';\n                      var labelIcon = $this.parent().data('icon') ? '<i class=\"'+$this.parent().data('icon')+'\"></i> ' : '';\n                      label = labelIcon + '<span class=\"text\">' + label + labelSubtext + '</span>';\n\n                      // INSTRUCTURE\n                      if (_this.options.useSubmenus) {\n                        _liA.push(\n                          '<div class=\"div-contain\"><div class=\"divider\"></div></div>'+\n                          '<a role=\"button\" aria-haspopup=\"true\" tabindex=\"-1\" href=\"#\">'+label+'</a>'+\n                          '<div class=\"dropdown-menu open\" data-content-type=\"' + content_type + '\" tabindex=\"0\"><ul class=\"dropdown-menu inner\" role=\"group\">'\n                          );\n                        _subLiA.push(_this.createA(text, \"opt \" + optionClass, inline, index, $this ));\n                      } else if ($this[0].index != 0) {\n                          _liA.push(\n                              '<div class=\"div-contain\"><div class=\"divider\"></div></div>'+\n                              '<dt>'+label+'</dt>'+\n                              _this.createA(text, \"opt \" + optionClass, inline, index, $this )\n                              );\n                      } else {\n                          _liA.push(\n                              '<dt>'+label+'</dt>'+\n                              _this.createA(text, \"opt \" + optionClass, inline, index, $this ));\n                      }\n                  } else {\n                        // INSTRUCTURE\n                        var container = _this.options.useSubmenus ? _subLiA : _liA;\n                        container.push( _this.createA(text, \"opt \" + optionClass, inline, index, $this )  );\n                  }\n              } else if ($this.data('divider') == true) {\n                  _liA.push('<div class=\"div-contain\"><div class=\"divider\"></div></div>');\n              } else if ($(this).data('hidden') == true) {\n                  _liA.push('');\n              } else {\n                  _liA.push( _this.createA(text, optionClass, inline, index, $this ) );\n              }\n\n              if (_subLiA.length && !$this.next().length) {\n                var group = _liA.pop();\n                $.each(_subLiA, function(i, item) {\n                  group += \"<li rel='\" + i + \"' tabindex='0'>\" + item + \"</li>\";\n                });\n                group += '</ul></div>';\n                _liA.push(group);\n                _subLiA = [];\n              }\n          });\n\n          $.each(_liA, function(i, item) {\n              // INSTRUCTURE\n              var isMenu = item.indexOf('<ul') != -1;\n              _liHtml += \"<li rel='\" + i + \"'\" + (isMenu ? \" class='dropdown-submenu'\" : \"\") + \" tabindex='0'>\" + item + \" </li>\";\n          });\n\n          //If we are not multiple, and we dont have a selected item, and we dont have a title, select the first element so something is set in the button\n          if (!this.multiple && this.$element.find('option:selected').length==0 && !_this.options.title) {\n              this.$element.find('option').eq(0).prop('selected', true).attr('selected', 'selected');\n          }\n          return $(_liHtml);\n      },\n\n      createA: function(text, classes, inline, index, $option) {\n        // INSTRUCTURE: added role and aria-label and the $option parameter\n        var $obj = $('<a class=\"'+classes+'\">' + text + '<i class=\"icon-ok check-mark\"></i>' + '</a>');\n\n        $obj.attr('tabindex', '-1').attr('role', 'menuitemcheckbox');\n        if ($option.attr('aria-label') !== undefined) {\n          $obj.attr('aria-label', $option.attr('aria-label'));\n        }\n        return $('<div></div>').append($obj).html();\n      },\n\n      render: function(inUse) {\n          var _this = this;\n\n          //Update the LI to match the SELECT\n          this.$element.find('option').each(function(index) {\n              _this.setDisabled(index, $(this).is(':disabled') || $(this).parent().is(':disabled') );\n              _this.setSelected(index, $(this).is(':selected') );\n          });\n\n          var selectedItems = this.$element.find('option:selected').map(function(index,value) {\n              var $this = $(this);\n              var icon = $this.data('icon') && _this.options.showIcon ? '<i class=\"' + $this.data('icon') + '\"></i> ' : '';\n              var subtext;\n              if (_this.options.showSubtext && $this.attr('data-subtext') && !_this.multiple) {\n                  subtext = ' <small class=\"muted\">'+$this.data('subtext') +'</small>';\n              } else {\n                  subtext = '';\n              }\n              if ($this.data('content') && _this.options.showContent) {\n                  return $this.data('content');\n              } else if ($this.attr('title') != undefined) {\n                  return $this.attr('title');\n              } else {\n                  return icon + $this.html() + subtext;\n              }\n          }).toArray();\n\n          //Fixes issue in IE10 occurring when no default option is selected and at least one option is disabled\n          //Convert all the values into a comma delimited string\n          var title = !this.multiple ? selectedItems[0] : selectedItems.join(\", \");\n\n          //If this is multi select, and the selectText type is count, the show 1 of 2 selected etc..\n          if (_this.multiple && _this.options.selectedTextFormat.indexOf('count') > -1) {\n              var max = _this.options.selectedTextFormat.split(\">\");\n              var notDisabled = this.options.hideDisabled ? ':not([disabled])' : '';\n              if ( (max.length>1 && selectedItems.length > max[1]) || (max.length==1 && selectedItems.length>=2)) {\n                  title = _this.options.countSelectedText.replace('{0}', selectedItems.length).replace('{1}', this.$element.find('option:not([data-divider=\"true\"]):not([data-hidden=\"true\"])'+notDisabled).length);\n              }\n            }\n\n          //If we dont have a title, then use the default, or if nothing is set at all, use the not selected text\n          if (!title) {\n              title = _this.options.title != undefined ? _this.options.title : _this.options.noneSelectedText;\n          }\n\n          var subtext;\n          if (this.options.showSubtext && this.$element.find('option:selected').attr('data-subtext')) {\n              subtext = ' <small class=\"muted\">'+this.$element.find('option:selected').data('subtext') +'</small>';\n          } else {\n              subtext = '';\n          }\n\n          _this.$newElement.find('.filter-option').html(title + subtext);\n\n          // INSTRUCTURE\n          if (inUse) {\n            $('li:not(.divider):visible > a', _this.$newElement).first().focus();\n          }\n      },\n\n      setStyle: function(style, status) {\n          if (this.$element.attr('class')) {\n              this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker/gi, ''));\n          }\n\n          var buttonClass = style ? style : this.options.style;\n\n          if (status == 'add') {\n              this.button.addClass(buttonClass);\n          } else {\n              this.button.removeClass(this.options.style);\n              this.button.addClass(buttonClass);\n          }\n      },\n\n      liHeight: function() {\n          var selectClone = this.$newElement.clone();\n          selectClone.appendTo('body');\n          var liHeight = selectClone.addClass('open').find('.dropdown-menu li > a').outerHeight();\n          selectClone.remove();\n          this.$newElement.data('liHeight', liHeight);\n      },\n\n      setSize: function() {\n          var _this = this,\n              menu = this.$newElement.find('> .dropdown-menu'),\n              menuInner = menu.find('> .inner'), // INSTRUCTURE added >\n              menuA = menuInner.find('li > a'),\n              selectHeight = this.$newElement.outerHeight(),\n              liHeight = this.$newElement.data('liHeight'),\n              divHeight = menu.find('li .divider').outerHeight(true),\n              menuPadding = parseInt(menu.css('padding-top')) +\n                            parseInt(menu.css('padding-bottom')) +\n                            parseInt(menu.css('border-top-width')) +\n                            parseInt(menu.css('border-bottom-width')),\n              notDisabled = this.options.hideDisabled ? ':not(.disabled)' : '',\n              menuHeight;\n          if (this.options.size == 'auto') {\n              var getSize = function() {\n                  var selectOffset_top = _this.$newElement.offset().top;\n                  var selectOffset_top_scroll = selectOffset_top - $(window).scrollTop();\n                  var windowHeight = $(window).height();\n                  var menuExtras = menuPadding + parseInt(menu.css('margin-top')) + parseInt(menu.css('margin-bottom')) + 2;\n                  var selectOffset_bot = windowHeight - selectOffset_top_scroll - selectHeight - menuExtras;\n                  var minHeight;\n                  menuHeight = selectOffset_bot;\n                  if (_this.$newElement.hasClass('dropup')) {\n                      menuHeight = selectOffset_top_scroll - menuExtras;\n                  }\n                  if ((menu.find('li').length + menu.find('dt').length) > 3) {\n                      minHeight = liHeight*3 + menuExtras - 2;\n                  } else {\n                      minHeight = 0;\n                  }\n                  menu.css({'max-height' : menuHeight + 'px', 'overflow' : 'auto', 'min-height' : minHeight + 'px'});\n                  menuInner.css({'max-height' : (menuHeight - menuPadding) + 'px', 'overflow-y' : 'auto'});\n          }\n              getSize();\n              $(window).resize(getSize);\n              $(window).scroll(getSize);\n          } else if (this.options.size && this.options.size != 'auto' && menu.find('li'+notDisabled).length > this.options.size) {\n              var optIndex = menu.find(\"li\"+notDisabled+\" > *\").filter(':not(.div-contain)').slice(0,this.options.size).last().parent().index();\n              var divLength = menu.find(\"li\").slice(0,optIndex + 1).find('.div-contain').length;\n              menuHeight = liHeight*this.options.size + divLength*divHeight + menuPadding;\n              menu.css({'max-height' : menuHeight + 'px', 'overflow' : 'hidden'});\n              menuInner.css({'max-height' : (menuHeight - menuPadding) + 'px', 'overflow-y' : 'auto'});\n          }\n      },\n\n      setWidth: function() {\n          //Set width of select\n          var menu = this.$newElement.find('> .dropdown-menu');\n          if (this.options.width == 'auto') {\n              menu.css('min-width','0');\n              var ulWidth = menu.css('width');\n              this.$newElement.css('width',ulWidth);\n          } else if (this.options.width) {\n              this.$newElement.css('width',this.options.width);\n          }\n      },\n\n      selectPosition: function() {\n          var _this = this,\n              drop = \"<div />\",\n              $drop = $(drop),\n              pos,\n              actualHeight,\n              getPlacement = function($element) {\n                  $drop.addClass($element.attr('class').replace(/open/gi, ''));\n                  pos = $element.offset();\n                  actualHeight = $element[0].offsetHeight;\n                  $drop.css({'top' : pos.top + actualHeight, 'left' : pos.left, 'width' : $element[0].offsetWidth, 'position' : 'absolute'});\n              };\n          this.$newElement.on('click', function() {\n              getPlacement($(this));\n              $drop.toggleClass('open');\n              $drop.append(_this.$menu);\n              $drop.appendTo(_this.options.container);\n              return false;\n          });\n          $(window).resize(function() {\n              getPlacement(_this.$newElement);\n          });\n          $(window).scroll(function() {\n              getPlacement(_this.$newElement);\n          });\n          $('html').on('click', function() {\n              $drop.removeClass('open');\n          });\n      },\n\n      refresh: function() {\n          // INSTRUCTURE\n          // TODO: it would be nice to refocus the equivalent element if present\n          var inUse = this.$newElement.hasClass('open') && $.contains(this.$menu[0], document.activeElement);\n\n          this.reloadLi();\n          this.render(inUse);\n          this.setWidth();\n          this.setStyle();\n          this.checkDisabled();\n      },\n\n      setSelected: function(index, selected) {\n          var link = this.$menu.find('a[role=menuitemcheckbox]').eq(index);\n          if (selected) {\n              link.parent().addClass('selected');\n          } else {\n              link.parent().removeClass('selected');\n          }\n          // INSTRUCTURE\n          link.attr('aria-checked', selected ? 'true' : 'false');\n      },\n\n      setDisabled: function(index, disabled) {\n          if (disabled) {\n              this.$menu.find('li').eq(index).addClass('disabled').find('a').attr('href','#').attr('tabindex',-1);\n          } else {\n              // INSTRUCTURE: remove tabindex\n              this.$menu.find('li').eq(index).removeClass('disabled').find('a').removeAttr('href');\n          }\n      },\n\n      isDisabled: function() {\n          return this.$element.is(':disabled') || this.$element.attr('readonly');\n      },\n\n      checkDisabled: function() {\n          var _this = this;\n          if (this.isDisabled()) {\n              this.button.addClass('disabled');\n              this.button.attr('tabindex','-1');\n          } else if (!this.isDisabled() && this.button.hasClass('disabled')) {\n              this.button.removeClass('disabled');\n              this.button.removeAttr('tabindex');\n          }\n          this.button.click(function() {\n              if (_this.isDisabled()) {\n                  return false;\n              }\n          });\n      },\n\n      checkTabIndex: function() {\n          if (this.$element.is('[tabindex]')) {\n              var tabindex = this.$element.attr(\"tabindex\");\n              this.button.attr('tabindex', tabindex);\n          }\n      },\n\n      clickListener: function() {\n          var _this = this;\n\n          $('body').on('touchstart.dropdown', '.dropdown-menu', function(e) {\n              e.stopPropagation();\n          });\n\n          this.$newElement.on('click', function() {\n              _this.setSize();\n          });\n\n          this.$menu.on('click', 'li a', function(e) {\n              // INSTRUCTURE\n              if ($(this).closest('li').hasClass('dropdown-submenu')) {return;}\n              var clickedIndex = _this.$newElement.find('a[role=menuitemcheckbox]').index(this),\n                  $this = $(this).parent(),\n                  prevValue = _this.$element.val();\n\n              //Dont close on multi choice menu\n              if (_this.multiple) {\n                  e.stopPropagation();\n              }\n\n              e.preventDefault();\n\n              //Dont run if we have been disabled\n              if (_this.$element.not(':disabled') && !$(this).parent().hasClass('disabled')) {\n                  //Deselect all others if not multi select box\n                  if (!_this.multiple) {\n                      _this.$element.find('option').prop('selected', false);\n                      _this.$element.find('option').eq(clickedIndex).prop('selected', true);\n                  }\n                  //Else toggle the one we have chosen if we are multi select.\n                  else {\n                      var selected = _this.$element.find('option').eq(clickedIndex).prop('selected');\n\n                      if (selected) {\n                          _this.$element.find('option').eq(clickedIndex).prop('selected', false);\n                      } else {\n                          _this.$element.find('option').eq(clickedIndex).prop('selected', true);\n                      }\n                  }\n\n                  _this.button.focus();\n\n                  // Trigger select 'change'\n                  if (prevValue != _this.$element.val()) {\n                      _this.$element.trigger('change');\n                  }\n\n                  _this.render();\n              }\n\n          });\n\n          this.$menu.on('click', 'li.disabled a, li dt, li .div-contain', function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              var $select = $(this).parent().parents('.bootstrap-select');\n              _this.button.focus();\n          });\n\n          this.$element.on('change', function(e) {\n              _this.render();\n          });\n      },\n\n      val: function(value) {\n\n          if (value != undefined) {\n              this.$element.val( value );\n\n              this.$element.trigger('change');\n              return this.$element;\n          } else {\n              return this.$element.val();\n          }\n      },\n\n      selectAll: function() {\n          this.$element.find('option').prop('selected', true).attr('selected', 'selected');\n          this.render();\n      },\n\n      deselectAll: function() {\n          this.$element.find('option').prop('selected', false).removeAttr('selected');\n          this.render();\n      },\n\n      keydown: function(e) {\n          var $this,\n              $items,\n              $parent,\n              index,\n              next,\n              first,\n              last,\n              prev,\n              nextPrev,\n              $target,\n              $list;\n\n          $this = $(this);\n          $parent = $this.parent();\n          $target = $(e.target);\n\n          // INSTRUCTURE\n          if ($target.is('input')) {\n            return;\n          } else if ($target.is('a')) {\n            $list = $(e.target).closest('ul');\n          } else {\n            $list = $('[role=menu]', $parent);\n          }\n          $items = $('> li:not(.divider):visible > a', $list);\n\n          if (!$items.length) return;\n\n          // INSTRUCTURE: bootstrap-dropdown handles arrow key movement\n          var keyCodeMap = {\n              48:\"0\", 49:\"1\", 50:\"2\", 51:\"3\", 52:\"4\", 53:\"5\", 54:\"6\", 55:\"7\", 56:\"8\", 57:\"9\", 59:\";\",\n              65:\"a\", 66:\"b\", 67:\"c\", 68:\"d\", 69:\"e\", 70:\"f\", 71:\"g\", 72:\"h\", 73:\"i\", 74:\"j\", 75:\"k\", 76:\"l\",\n              77:\"m\", 78:\"n\", 79:\"o\", 80:\"p\", 81:\"q\", 82:\"r\", 83:\"s\", 84:\"t\", 85:\"u\", 86:\"v\", 87:\"w\", 88:\"x\", 89:\"y\", 90:\"z\",\n              96:\"0\", 97:\"1\", 98:\"2\", 99:\"3\", 100:\"4\", 101:\"5\", 102:\"6\", 103:\"7\", 104:\"8\", 105:\"9\"\n          }\n\n          var keyIndex = [];\n\n          $items.each(function() {\n              if ($(this).parent().is(':not(.disabled)')) {\n                  if ($.trim($(this).text().toLowerCase()).substring(0,1) == keyCodeMap[e.keyCode]) {\n                      keyIndex.push($(this).parent().index());\n                  }\n              }\n          });\n\n          var count = $(document).data('keycount');\n          count++;\n          $(document).data('keycount',count);\n\n          var prevKey = $.trim($(':focus').text().toLowerCase()).substring(0,1);\n\n          if (prevKey != keyCodeMap[e.keyCode]) {\n              count = 1;\n              $(document).data('keycount',count);\n          } else if (count >= keyIndex.length) {\n              $(document).data('keycount',0);\n          }\n\n          $items.eq(keyIndex[count - 1]).focus();\n\n          if (/(13)/.test(e.keyCode)) {\n              $(':focus').click();\n              $parent.addClass('open');\n              $(document).data('keycount',0);\n              // INSTRUCTURE\n              return false;\n          }\n      },\n\n      hide: function() {\n          this.$newElement.hide();\n      },\n\n      show: function() {\n          this.$newElement.show();\n      },\n\n      destroy: function() {\n          this.$newElement.remove();\n          this.$element.remove();\n      }\n  };\n\n  $.fn.selectpicker = function(option, event) {\n      //get the args of the outer function..\n      var args = arguments;\n      var value;\n      var chain = this.each(function() {\n          if ($(this).is('select')) {\n              var $this = $(this),\n                  data = $this.data('selectpicker'),\n                  options = typeof option == 'object' && option;\n\n              if (!data) {\n                  $this.data('selectpicker', (data = new Selectpicker(this, options, event)));\n              } else if (options) {\n                  for(var i in options) {\n                      data.options[i] = options[i];\n                  }\n              }\n\n              if (typeof option == 'string') {\n                  //Copy the value of option, as once we shift the arguments\n                  //it also shifts the value of option.\n                  var property = option;\n                  if (data[property] instanceof Function) {\n                      [].shift.apply(args);\n                      value = data[property].apply(data, args);\n                  } else {\n                      value = data.options[property];\n                  }\n              }\n          }\n      });\n\n      if (value != undefined) {\n          return value;\n      } else {\n          return chain;\n      }\n  };\n\n  $.fn.selectpicker.defaults = {\n      style: null,\n      size: 'auto',\n      title: null,\n      selectedTextFormat : 'values',\n      noneSelectedText : 'Nothing selected',\n      countSelectedText: '{0} of {1} selected',\n      width: null,\n      container: false,\n      hideDisabled: false,\n      showSubtext: false,\n      showIcon: true,\n      showContent: true,\n      // INSTRUCTURE\n      useSubmenus: false\n  }\n\n  $(document)\n      .data('keycount', 0)\n      .on('keydown', '[data-toggle=dropdown], [role=menu]' , Selectpicker.prototype.keydown)\n});\n\n\n//# sourceURL=webpack:///./packages/bootstrap-select/index.js?");

/***/ }),

/***/ "C7tP":
/*!**********************************************************!*\
  !*** ./ui/features/conversations/jst/message.handlebars ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_message__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.message */ \"fKLg\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/message';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"read\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"true\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"false\";\n  }\n\nfunction program7(depth0,data) {\n  \n  var helper, options;\n  return escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"mark_as_read_e7de2ce3\", \"Mark as read\", options) : helperMissing.call(depth0, \"t\", \"mark_as_read_e7de2ce3\", \"Mark as read\", options)));\n  }\n\nfunction program9(depth0,data) {\n  \n  var helper, options;\n  return escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"mark_as_unread_4a413c41\", \"Mark as unread\", options) : helperMissing.call(depth0, \"t\", \"mark_as_unread_4a413c41\", \"Mark as unread\", options)));\n  }\n\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n      \";\n  if (helper = helpers.subject) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subject); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    \";\n  return buffer;\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n      (\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"no_subject_970aad80\", \"No subject\", options) : helperMissing.call(depth0, \"t\", \"no_subject_970aad80\", \"No subject\", options)))\n    + \")\\n    \";\n  return buffer;\n  }\n\nfunction program15(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.last_message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.last_message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\nfunction program17(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.last_authored_message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.last_authored_message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\nfunction program19(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n  <span class=\\\"StarButton-LabelContainer\\\" id=\\\"star_button_\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" style=\\\"display: none;\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.starred), {hash:{},inverse:self.program(25, program25, data),fn:self.program(20, program20, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </span>\\n  <a href=\\\"#\\\"\\n      class=\\\"star-btn \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.starred), {hash:{},inverse:self.noop,fn:self.program(30, program30, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"\\n      title=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.starred), {hash:{},inverse:self.program(34, program34, data),fn:self.program(32, program32, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"\\n      aria-checked=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.starred), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"\\n      aria-labelledby=\\\"star_button_\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n      role=\\\"checkbox\\\"></a>\\n  \";\n  return buffer;\n  }\nfunction program20(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n      \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subject), {hash:{},inverse:self.program(23, program23, data),fn:self.program(21, program21, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program21(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'subject': ((depth0 && depth0.subject)),\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"starred_subject_click_to_unstar_6aafcddc\", \"Starred \\\"%{subject}\\\", Click to unstar.\", options) : helperMissing.call(depth0, \"t\", \"starred_subject_click_to_unstar_6aafcddc\", \"Starred \\\"%{subject}\\\", Click to unstar.\", options)))\n    + \"\\n      \";\n  return buffer;\n  }\n\nfunction program23(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"starred_no_subject_click_to_unstar_bff04bce\", \"Starred \\\"(No subject)\\\", Click to unstar.\", options) : helperMissing.call(depth0, \"t\", \"starred_no_subject_click_to_unstar_bff04bce\", \"Starred \\\"(No subject)\\\", Click to unstar.\", options)))\n    + \"\\n      \";\n  return buffer;\n  }\n\nfunction program25(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n      \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subject), {hash:{},inverse:self.program(28, program28, data),fn:self.program(26, program26, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program26(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'subject': ((depth0 && depth0.subject)),\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"not_starred_subject_click_to_star_4ea6eb64\", \"Not starred \\\"%{subject}\\\", Click to star.\", options) : helperMissing.call(depth0, \"t\", \"not_starred_subject_click_to_star_4ea6eb64\", \"Not starred \\\"%{subject}\\\", Click to star.\", options)))\n    + \"\\n      \";\n  return buffer;\n  }\n\nfunction program28(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"not_starred_no_subject_click_to_star_adfefe93\", \"'Not starred \\\"(No Subject)\\\", Click to star.\", options) : helperMissing.call(depth0, \"t\", \"not_starred_no_subject_click_to_star_adfefe93\", \"'Not starred \\\"(No Subject)\\\", Click to star.\", options)))\n    + \"\\n      \";\n  return buffer;\n  }\n\nfunction program30(depth0,data) {\n  \n  \n  return \"active\";\n  }\n\nfunction program32(depth0,data) {\n  \n  var helper, options;\n  return escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"unstar_conversation_45fc43d6\", \"Unstar conversation\", options) : helperMissing.call(depth0, \"t\", \"unstar_conversation_45fc43d6\", \"Unstar conversation\", options)));\n  }\n\nfunction program34(depth0,data) {\n  \n  var helper, options;\n  return escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"star_conversation_2e2ba614\", \"Star conversation\", options) : helperMissing.call(depth0, \"t\", \"star_conversation_2e2ba614\", \"Star conversation\", options)));\n  }\n\n  buffer += \"<div class=\\\"message-left-column\\\">\\n  <div class=\\\"select-checkbox\\\" id=\\\"conversation-checkbox-\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \\n  </div>\\n  <input href=\\\"#\\\"\\n      class=\\\"read-state \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.unread), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"\\n      type=\\\"checkbox\\\"\\n      aria-checked=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.unread), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"\\n      title=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.unread), {hash:{},inverse:self.program(9, program9, data),fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n    <span class=\\\"screenreader-only\\\">\\n      \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"unread_e9c1b19c\", \"Unread\", options) : helperMissing.call(depth0, \"t\", \"unread_e9c1b19c\", \"Unread\", options)))\n    + \"\\n    </span>\\n  </a>\\n</div>\\n\\n<div class=\\\"message-middle-column\\\">\\n  <div class=\\\"date\\\">\"\n    + escapeExpression((helper = helpers.friendlyDatetime || (depth0 && depth0.friendlyDatetime),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.timestamp), options) : helperMissing.call(depth0, \"friendlyDatetime\", (depth0 && depth0.timestamp), options)))\n    + \"</div>\\n  <h2 class=\\\"author\\\">\"\n    + escapeExpression((helper = helpers.list || (depth0 && depth0.list),options={hash:{\n    'propName': (\"name\"),\n    'limit': (2)\n  },data:data},helper ? helper.call(depth0, (depth0 && depth0.participants), options) : helperMissing.call(depth0, \"list\", (depth0 && depth0.participants), options)))\n    + \"</h2>\\n  <h3 class=\\\"subject\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subject), {hash:{},inverse:self.program(13, program13, data),fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </h3>\\n  <div class=\\\"summary\\\">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.last_message), {hash:{},inverse:self.program(17, program17, data),fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</div>\\n\\n<div class=\\\"message-right-column\\\">\\n  <span class=\\\"message-count label\\\">\\n    \";\n  if (helper = helpers.message_count) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message_count); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    <span class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"total_messages_af025be6\", \"Total messages\", options) : helperMissing.call(depth0, \"t\", \"total_messages_af025be6\", \"Total messages\", options)))\n    + \"</span>\\n  </span>\\n\\n  \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.for_submission), {hash:{},inverse:self.noop,fn:self.program(19, program19, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n\\n<a href=\\\"#\\\" class=\\\"open-message\\\" role=\\\"button\\\">\\n  \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"open_message_d7b12975\", \"Open Message\", options) : helperMissing.call(depth0, \"t\", \"open_message_d7b12975\", \"Open Message\", options)))\n    + \"\\n</a>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/message.handlebars?");

/***/ }),

/***/ "CIfu":
/*!*****************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.no_message!./ui/shims/dummyI18nResource.js ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.no_message'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.no_message");

/***/ }),

/***/ "CQFS":
/*!*************************************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.submission_comment_form_dialog!./ui/shims/dummyI18nResource.js ***!
  \*************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.submission_comment_form_dialog'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.submission_comment_form_dialog");

/***/ }),

/***/ "DdFN":
/*!*********************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.add_attachment!./ui/shims/dummyI18nResource.js ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.add_attachment'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.add_attachment");

/***/ }),

/***/ "H/mi":
/*!**************************************************************!*\
  !*** ./node_modules/jquery.elastic/jquery.elastic.source.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n*\t@name\t\t\t\t\t\t\tElastic\n*\t@descripton\t\t\t\t\t\tElastic is jQuery plugin that grow and shrink your textareas automatically\n*\t@version\t\t\t\t\t\t1.6.11\n*\t@requires\t\t\t\t\t\tjQuery 1.2.6+\n*\n*\t@author\t\t\t\t\t\t\tJan Jarfalk\n*\t@author-email\t\t\t\t\tjan.jarfalk@unwrongest.com\n*\t@author-website\t\t\t\t\thttp://www.unwrongest.com\n*\n*\t@licence\t\t\t\t\t\tMIT License - http://www.opensource.org/licenses/mit-license.php\n*/\n\n(function (factory) { // UMD wrapper\n  if ( true && module.exports) {\n    factory(__webpack_require__(/*! jquery */ \"ouhR\"))\n  } else if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"ouhR\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n  } else {}\n}(function ($) {\n\tjQuery.fn.extend({  \n\t\telastic: function() {\n\t\t\n\t\t\t//\tWe will create a div clone of the textarea\n\t\t\t//\tby copying these attributes from the textarea to the div.\n\t\t\tvar mimics = [\n\t\t\t\t'paddingTop',\n\t\t\t\t'paddingRight',\n\t\t\t\t'paddingBottom',\n\t\t\t\t'paddingLeft',\n\t\t\t\t'fontSize',\n\t\t\t\t'lineHeight',\n\t\t\t\t'fontFamily',\n\t\t\t\t'width',\n\t\t\t\t'fontWeight',\n\t\t\t\t'border-top-width',\n\t\t\t\t'border-right-width',\n\t\t\t\t'border-bottom-width',\n\t\t\t\t'border-left-width',\n\t\t\t\t'borderTopStyle',\n\t\t\t\t'borderTopColor',\n\t\t\t\t'borderRightStyle',\n\t\t\t\t'borderRightColor',\n\t\t\t\t'borderBottomStyle',\n\t\t\t\t'borderBottomColor',\n\t\t\t\t'borderLeftStyle',\n\t\t\t\t'borderLeftColor'\n\t\t\t\t];\n\t\t\t\n\t\t\treturn this.each( function() {\n\n\t\t\t\t// Elastic only works on textareas\n\t\t\t\tif ( this.type !== 'textarea' ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\tvar $textarea\t= jQuery(this),\n\t\t\t\t$twin\t\t= jQuery('<div />').css({\n\t\t\t\t\t'position'\t\t: 'absolute',\n\t\t\t\t\t'display'\t\t: 'none',\n\t\t\t\t\t'word-wrap'\t\t: 'break-word',\n\t\t\t\t\t'white-space'\t:'pre-wrap'\n\t\t\t\t}),\n\t\t\t\tlineHeight\t= parseInt($textarea.css('line-height'),10) || parseInt($textarea.css('font-size'),'10'),\n\t\t\t\tminheight\t= parseInt($textarea.css('height'),10) || lineHeight*3,\n\t\t\t\tmaxheight\t= parseInt($textarea.css('max-height'),10) || Number.MAX_VALUE,\n\t\t\t\tgoalheight\t= 0;\n\t\t\t\t\n\t\t\t\t// Opera returns max-height of -1 if not set\n\t\t\t\tif (maxheight < 0) { maxheight = Number.MAX_VALUE; }\n\t\t\t\t\t\n\t\t\t\t// Append the twin to the DOM\n\t\t\t\t// We are going to meassure the height of this, not the textarea.\n\t\t\t\t$twin.appendTo($textarea.parent());\n\t\t\t\t\n\t\t\t\t// Copy the essential styles (mimics) from the textarea to the twin\n\t\t\t\tvar i = mimics.length;\n\t\t\t\twhile(i--){\n\t\t\t\t\t$twin.css(mimics[i].toString(),$textarea.css(mimics[i].toString()));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Updates the width of the twin. (solution for textareas with widths in percent)\n\t\t\t\tfunction setTwinWidth(){\n\t\t\t\t\tvar curatedWidth = Math.floor(parseInt($textarea.width(),10));\n\t\t\t\t\tif($twin.width() !== curatedWidth){\n\t\t\t\t\t\t$twin.css({'width': curatedWidth + 'px'});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Update height of textarea\n\t\t\t\t\t\tupdate(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Sets a given height and overflow state on the textarea\n\t\t\t\tfunction setHeightAndOverflow(height, overflow){\n\t\t\t\t\n\t\t\t\t\tvar curratedHeight = Math.floor(parseInt(height,10));\n\t\t\t\t\tif($textarea.height() !== curratedHeight){\n\t\t\t\t\t\t$textarea.css({'height': curratedHeight + 'px','overflow':overflow});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// This function will update the height of the textarea if necessary \n\t\t\t\tfunction update(forced) {\n\t\t\t\t\t\n\t\t\t\t\t// Get curated content from the textarea.\n\t\t\t\t\tvar textareaContent = $textarea.val().replace(/&/g,'&amp;').replace(/ {2}/g, '&nbsp;').replace(/<|>/g, '&gt;').replace(/\\n/g, '<br />');\n\t\t\t\t\t\n\t\t\t\t\t// Compare curated content with curated twin.\n\t\t\t\t\tvar twinContent = $twin.html().replace(/<br>/ig,'<br />');\n\t\t\t\t\t\n\t\t\t\t\tif(forced || textareaContent+'&nbsp;' !== twinContent){\n\t\t\t\t\t\n\t\t\t\t\t\t// Add an extra white space so new rows are added when you are at the end of a row.\n\t\t\t\t\t\t$twin.html(textareaContent+'&nbsp;');\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Change textarea height if twin plus the height of one line differs more than 3 pixel from textarea height\n\t\t\t\t\t\tif(Math.abs($twin.height() + lineHeight - $textarea.height()) > 3){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar goalheight = $twin.height()+lineHeight;\n\t\t\t\t\t\t\tif(goalheight >= maxheight) {\n\t\t\t\t\t\t\t\tsetHeightAndOverflow(maxheight,'auto');\n\t\t\t\t\t\t\t} else if(goalheight <= minheight) {\n\t\t\t\t\t\t\t\tsetHeightAndOverflow(minheight,'hidden');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetHeightAndOverflow(goalheight,'hidden');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Hide scrollbars\n\t\t\t\t$textarea.css({'overflow':'hidden'});\n\t\t\t\t\n\t\t\t\t// Update textarea size on keyup, change, cut and paste\n\t\t\t\t$textarea.bind('keyup change cut paste', function(){\n\t\t\t\t\tupdate(); \n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// Update width of twin if browser or textarea is resized (solution for textareas with widths in percent)\n\t\t\t\tjQuery(window).bind('resize', setTwinWidth);\n\t\t\t\t$textarea.bind('resize', setTwinWidth);\n\t\t\t\t$textarea.bind('update', update);\n\t\t\t\t\n\t\t\t\t// Compact textarea on blur\n\t\t\t\t$textarea.bind('blur',function(){\n\t\t\t\t\tif($twin.height() < maxheight){\n\t\t\t\t\t\tif($twin.height() > minheight) {\n\t\t\t\t\t\t\t$textarea.height($twin.height());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$textarea.height(minheight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// And this line is to catch the browser paste event\n\t\t\t\t$textarea.bind('input paste',function(e){ setTimeout( update, 250); });\t\t\t\t\n\t\t\t\t\n\t\t\t\t// Run update once when elastic is initialized\n\t\t\t\tupdate();\n\t\t\t\t\n\t\t\t});\n\t\t\t\n        } \n    }); \n}));\n\n//# sourceURL=webpack:///./node_modules/jquery.elastic/jquery.elastic.source.js?");

/***/ }),

/***/ "HEIT":
/*!*****************************************************************************************!*\
  !*** ./frontend_build/i18n.js?ConversationStatusFilter!./ui/shims/dummyI18nResource.js ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('ConversationStatusFilter'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?ConversationStatusFilter");

/***/ }),

/***/ "HUWs":
/*!*************************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.compose_button_bar!./ui/shims/dummyI18nResource.js ***!
  \*************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.compose_button_bar'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.compose_button_bar");

/***/ }),

/***/ "Hm21":
/*!*************************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/ContextMessagesView.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ContextMessagesView; });\n/* harmony import */ var _canvas_backbone_collection_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/backbone-collection-view */ \"HknL\");\n/* harmony import */ var _ContextMessageView__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ContextMessageView */ \"WuGG\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\nclass ContextMessagesView extends _canvas_backbone_collection_view__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  static initClass() {\n    this.prototype.itemView = _ContextMessageView__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n  }\n\n  initialize(options) {\n    super.initialize(...arguments);\n    return this.collection.each(model => model.bind('removeView', this.handleChildViewRemoval));\n  }\n\n  handleChildViewRemoval(e) {\n    const el = e.view.$el;\n    const index = el.index();\n    const hasSiblings = el.siblings().length > 0;\n    const prev = el.prev().find('.delete-btn');\n    const next = el.next().find('.delete-btn');\n    e.view.remove();\n\n    if (index > 0) {\n      return prev.focus();\n    } else if (hasSiblings) {\n      return next.focus();\n    } else {\n      $('#add-message-attachment-button').focus();\n    }\n  }\n\n}\nContextMessagesView.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/ContextMessagesView.js?");

/***/ }),

/***/ "I3fs":
/*!***********************************************************************!*\
  !*** ./frontend_build/i18n.js?dialog!./ui/shims/dummyI18nResource.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('dialog'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?dialog");

/***/ }),

/***/ "IxAH":
/*!*****************************************!*\
  !*** ./packages/obj-unflatten/index.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return unflatten; });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n// turns {'foo[bar]': 1} into {foo: {bar: 1}}\nfunction unflatten(obj) {\n  return underscore__WEBPACK_IMPORTED_MODULE_0___default()(obj).reduce((newObj, val, key) => {\n    let keys = key.split('][')\n    let lastKey = keys.length - 1\n\n    // If the first keys part contains [ and the last ends with ], then []\n    // are correctly balanced.\n    if (/\\[/.test(keys[0]) && /\\]$/.test(keys[lastKey])) {\n      // Remove the trailing ] from the last keys part.\n      keys[lastKey] = keys[lastKey].replace(/\\]$/, '')\n\n      // Split first keys part into two parts on the [ and add them back onto\n      // the beginning of the keys array.\n      keys = keys\n        .shift()\n        .split('[')\n        .concat(keys)\n      lastKey = keys.length - 1\n    } else {\n      // Basic 'foo' style key.\n      lastKey = 0\n    }\n\n    if (lastKey) {\n      // Complex key, build deep object structure based on a few rules:\n      // * The 'cur' pointer starts at the object top-level.\n      // * [] = array push (n is set to array length), [n] = array if n is\n      //   numeric, otherwise object.\n      // * If at the last keys part, set the value.\n      // * For each keys part, if the current level is undefined create an\n      //   object or array based on the type of the next keys part.\n      // * Move the 'cur' pointer to the next level.\n      // * Rinse & repeat.\n      let i = 0\n      let cur = newObj\n      while (i <= lastKey) {\n        key = keys[i] === '' ? cur.length : keys[i]\n\n        cur = cur[key] =\n          i < lastKey ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : []) : val\n        i++\n      }\n    } else {\n      // Simple key, even simpler rules, since only scalars and shallow\n      // arrays are allowed.\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(newObj[key])) {\n        // val is already an array, so push on the next value.\n        newObj[key].push(val)\n      } else if (newObj[key] != null) {\n        // val isn't an array, but since a second value has been specified,\n        // convert val into an array.\n        newObj[key] = [newObj[key], val]\n      } else {\n        // val is a scalar.\n        newObj[key] = val\n      }\n    }\n\n    return newObj\n  }, Object.create(null))\n}\n\n\n//# sourceURL=webpack:///./packages/obj-unflatten/index.js?");

/***/ }),

/***/ "KIYd":
/*!*************************************************!*\
  !*** ./ui/shared/dialog-base-view/index.coffee ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!dialog */ \"I3fs\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\nvar DialogBaseView,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (DialogBaseView = (function(superClass) {\n  extend(DialogBaseView, superClass);\n\n  function DialogBaseView() {\n    this.cancel = bind(this.cancel, this);\n    return DialogBaseView.__super__.constructor.apply(this, arguments);\n  }\n\n  DialogBaseView.prototype.initialize = function() {\n    DialogBaseView.__super__.initialize.apply(this, arguments);\n    this.initDialog();\n    return this.setElement(this.dialog);\n  };\n\n  DialogBaseView.prototype.defaultOptions = function() {\n    return {\n      autoOpen: false,\n      width: 420,\n      resizable: false,\n      buttons: [],\n      destroy: false\n    };\n  };\n\n  DialogBaseView.prototype.initDialog = function() {\n    var opts;\n    opts = underscore__WEBPACK_IMPORTED_MODULE_2___default.a.extend({}, this.defaultOptions(), {\n      buttons: [\n        {\n          text: i18n_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('#buttons.cancel', 'Cancel'),\n          'class': 'cancel_button',\n          click: (function(_this) {\n            return function(e) {\n              return _this.cancel(e);\n            };\n          })(this)\n        }, {\n          text: i18n_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('#buttons.update', 'Update'),\n          'class': 'btn-primary',\n          click: (function(_this) {\n            return function(e) {\n              return _this.update(e);\n            };\n          })(this)\n        }\n      ]\n    }, underscore__WEBPACK_IMPORTED_MODULE_2___default.a.result(this, 'dialogOptions'));\n    this.dialog = jquery__WEBPACK_IMPORTED_MODULE_1___default()(\"<div id=\\\"\" + opts.id + \"\\\"></div>\").appendTo('body').dialog(opts);\n    if (opts.containerId) {\n      this.dialog.parent().attr('id', opts.containerId);\n    }\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.ui-resizable-handle').attr('aria-hidden', true);\n    return this.dialog;\n  };\n\n  DialogBaseView.prototype.show = function() {\n    return this.dialog.dialog('open');\n  };\n\n  DialogBaseView.prototype.close = function() {\n    if (this.options.destroy) {\n      return this.dialog.dialog('destroy');\n    } else {\n      return this.dialog.dialog('close');\n    }\n  };\n\n  DialogBaseView.prototype.update = function(e) {\n    throw 'Not yet implemented';\n  };\n\n  DialogBaseView.prototype.cancel = function(e) {\n    e.preventDefault();\n    return this.close();\n  };\n\n  return DialogBaseView;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default.a.View));\n\n\n//# sourceURL=webpack:///./ui/shared/dialog-base-view/index.coffee?");

/***/ }),

/***/ "KyTj":
/*!**************************************************************************************!*\
  !*** ./frontend_build/i18n.js?SearchableSubmenuView!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('SearchableSubmenuView'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?SearchableSubmenuView");

/***/ }),

/***/ "MmV5":
/*!*********************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/MessageListView.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MessageListView; });\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var _canvas_pagination_backbone_views_PaginatedCollectionView_coffee__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/pagination/backbone/views/PaginatedCollectionView.coffee */ \"5VKQ\");\n/* harmony import */ var _MessageView__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MessageView */ \"5sHi\");\n/* harmony import */ var _jst_messageList_handlebars__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../jst/messageList.handlebars */ \"YMFK\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\nclass MessageListView extends _canvas_pagination_backbone_views_PaginatedCollectionView_coffee__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  static initClass() {\n    this.prototype.tagName = 'div';\n    this.prototype.itemView = _MessageView__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n    this.prototype.template = _jst_messageList_handlebars__WEBPACK_IMPORTED_MODULE_3__[\"default\"];\n    this.prototype.course = {};\n    this.prototype.selectedMessages = [];\n    this.prototype.autoFetch = true;\n    this.prototype.events = {\n      click: 'onClick'\n    };\n  }\n\n  constructor() {\n    super(...arguments);\n    this.attachEvents();\n  }\n\n  attachEvents() {\n    return this.collection.on('change:selected', this.trackSelectedMessages, this);\n  }\n\n  trackSelectedMessages(model) {\n    if (model.get('selected')) {\n      return this.selectedMessages.push(model);\n    } else {\n      return this.selectedMessages.splice(this.selectedMessages.indexOf(model), 1);\n    }\n  }\n\n  onClick(e) {\n    if (e.target !== this.el) return;\n    return this.collection.each(m => m.set('selected', false));\n  }\n\n  updateCourse(course) {\n    return this.course = course;\n  }\n\n  selectedMessage() {\n    return this.selectedMessages[0];\n  }\n\n  updateMessage(message, thread) {\n    const selectedThread = this.collection.where({\n      selected: true\n    })[0];\n    const updatedThread = this.collection.get(thread.id);\n    updatedThread.set({\n      last_message: thread.last_message,\n      last_authored_message_at: new Date().toString(),\n      message_count: _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"default\"].n(updatedThread.get('messages').length)\n    });\n    this.collection.sort();\n    this.render();\n    return selectedThread != null ? selectedThread.view.select() : void 0;\n  }\n\n  afterRender() {\n    super.afterRender(...arguments);\n    this.$('.current-context').text(this.course.name);\n    return this.$('.list-header')[this.course.name ? 'show' : 'hide']();\n  }\n\n  selectAll() {\n    return this.collection.each(x => x.set('selected', true));\n  }\n\n}\nMessageListView.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/MessageListView.js?");

/***/ }),

/***/ "Novy":
/*!************************************************************!*\
  !*** ./ui/features/conversations/jst/noMessage.handlebars ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_no_message__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.no_message */ \"CIfu\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/noMessage';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n    \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.no_message\")\n  },data:data},helper ? helper.call(depth0, \"batch_selected\", \"Multiple Conversations Selected\", options) : helperMissing.call(depth0, \"t\", \"batch_selected\", \"Multiple Conversations Selected\", options)))\n    + \"\\n  \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n    \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.no_message\")\n  },data:data},helper ? helper.call(depth0, \"no_conversations_selected\", \"No Conversations Selected\", options) : helperMissing.call(depth0, \"t\", \"no_conversations_selected\", \"No Conversations Selected\", options)))\n    + \"\\n  \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"no-messages\\\">\\n  <i class=\\\"icon-email\\\"></i>\\n\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.batch), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/noMessage.handlebars?");

/***/ }),

/***/ "ODF5":
/*!*******************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.message_item!./ui/shims/dummyI18nResource.js ***!
  \*******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.message_item'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.message_item");

/***/ }),

/***/ "PFi0":
/*!***************************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/SearchableSubmenuView.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SearchableSubmenuView; });\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var i18n_SearchableSubmenuView__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!SearchableSubmenuView */ \"KyTj\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_4__);\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\nclass SearchableSubmenuView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_4__[\"View\"] {\n  initialize() {\n    super.initialize(...arguments);\n    const content_type = this.$el.children('[data-content-type]').data('content-type');\n    this.$field = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<input />').attr({\n      class: 'dropdown-search',\n      type: 'search',\n      placeholder: content_type,\n      'aria-label': i18n_SearchableSubmenuView__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Below this search field is a list of %{content_type}. As you type, the list will be filtered to match your query. Conversation messages will be filtered by whichever option you select.', {\n        content_type\n      })\n    }).keyup(underscore__WEBPACK_IMPORTED_MODULE_3___default.a.debounce(() => this.search(), 100)).keydown(e => this.handleDownArrow(e));\n    this.$announce = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<span class=\"screenreader-only\" aria-live=\"polite\"></span>');\n    const label = this.getMenuRoot().text();\n    const $labelledField = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<label>').append(this.$field).append(this.$announce);\n    this.$submenu = this.$el.children('.dropdown-menu').prepend($labelledField).find('.inner').keydown(e => this.handleUpArrow(e));\n    this.getMenuRoot().keydown(e => this.handleRightArrow(e));\n    return this.$contents = this.$el.find('li');\n  }\n\n  search() {\n    const val = this.$field.val().toLowerCase();\n\n    if (!val) {\n      this.$contents.show();\n      this.$contents.attr('aria-hidden', false);\n    } else {\n      this.$contents.each(function () {\n        const $entry = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this);\n        const $abbr = $entry.find('abbr');\n        const text = $abbr.length ? $abbr.attr('title') : $entry.find('span').text();\n        const isMatch = text.toLowerCase().indexOf(val) !== -1;\n\n        if (isMatch) {\n          $entry.show();\n          return $entry.attr('aria-hidden', false);\n        } else {\n          $entry.hide();\n          return $entry.attr('aria-hidden', true);\n        }\n      });\n    }\n\n    const shown_count = this.$contents.filter('[aria-hidden=false]').length;\n    const result_message = i18n_SearchableSubmenuView__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t({\n      one: 'There is 1 result in the list',\n      other: 'There are %{count} results in the list'\n    }, {\n      count: shown_count\n    });\n    return this.$announce.html(Object(html_escape__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(result_message));\n  }\n\n  clearSearch() {\n    this.$field.val('');\n    return this.search();\n  }\n\n  getFirstEntry() {\n    return this.$submenu.find('li:not(.divider):visible > a').first();\n  }\n\n  getMenuRoot() {\n    return this.$el.children('[role=menuitem]');\n  }\n\n  handleDownArrow(e) {\n    if (e.keyCode !== 40) return;\n    e.preventDefault();\n    return this.getFirstEntry().focus();\n  }\n\n  handleUpArrow(e) {\n    if (e.keyCode !== 38) return;\n    if (e.target !== this.getFirstEntry()[0]) return;\n    e.stopPropagation();\n    return this.$field.focus();\n  }\n\n  handleRightArrow(e) {\n    if (e.keyCode !== 39) return;\n    e.stopPropagation();\n    return this.$field.focus();\n  }\n\n}\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/SearchableSubmenuView.js?");

/***/ }),

/***/ "Pn84":
/*!***********************************************************************************!*\
  !*** ./ui/features/conversations/backbone/models/ConversationSearchResult.coffee ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\nvar ConversationSearchResult,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ConversationSearchResult = (function(superClass) {\n  extend(ConversationSearchResult, superClass);\n\n  function ConversationSearchResult() {\n    return ConversationSearchResult.__super__.constructor.apply(this, arguments);\n  }\n\n  ConversationSearchResult.prototype.parse = function(data) {\n    return underscore__WEBPACK_IMPORTED_MODULE_0___default.a.extend(data, {\n      isContext: data.type === 'context'\n    });\n  };\n\n  return ConversationSearchResult;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__[\"Model\"]));\n\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/models/ConversationSearchResult.coffee?");

/***/ }),

/***/ "QnQE":
/*!*******************************************************************!*\
  !*** ./ui/features/conversations/jst/composeButtonBar.handlebars ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_compose_button_bar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.compose_button_bar */ \"HUWs\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/composeButtonBar';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"ui-dialog-buttonset attachments\\\">\\n  <button\\n          id=\\\"add-message-attachment-button\\\"\\n          class=\\\"ui-button ui-widget ui-state-default ui-corner-all attach-file\\\"\\n          type=\\\"button\\\"\\n          title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.compose_button_bar\")\n  },data:data},helper ? helper.call(depth0, \"titles.add_attachment\", \"Add an attachment\", options) : helperMissing.call(depth0, \"t\", \"titles.add_attachment\", \"Add an attachment\", options)))\n    + \"\\\">\\n    <span class=\\\"ui-button-text\\\">\\n      <i class=\\\"icon-paperclip\\\"></i>\\n      <span class=\\\"screenreader-only\\\">\\n        \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.compose_button_bar\")\n  },data:data},helper ? helper.call(depth0, \"titles.add_attachment\", \"Add an attachment\", options) : helperMissing.call(depth0, \"t\", \"titles.add_attachment\", \"Add an attachment\", options)))\n    + \"\\n      </span>\\n    </span>\\n  </button>\\n\\n  <button class=\\\"ui-button ui-widget ui-state-default ui-corner-all attach-media\\\"\\n          type=\\\"button\\\"\\n          title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.compose_button_bar\")\n  },data:data},helper ? helper.call(depth0, \"titles.record_media_comment\", \"Record an audio or video comment\", options) : helperMissing.call(depth0, \"t\", \"titles.record_media_comment\", \"Record an audio or video comment\", options)))\n    + \"\\\">\\n    <span class=\\\"ui-button-text\\\">\\n      <i class=\\\"icon-media\\\"></i>\\n      <span class=\\\"screenreader-only\\\">\\n        \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.compose_button_bar\")\n  },data:data},helper ? helper.call(depth0, \"titles.record_media_comment\", \"Record an audio or video comment\", options) : helperMissing.call(depth0, \"t\", \"titles.record_media_comment\", \"Record an audio or video comment\", options)))\n    + \"\\n      </span>\\n    </span>\\n  </button>\\n</div>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/composeButtonBar.handlebars?");

/***/ }),

/***/ "Qrqo":
/*!**********************************************!*\
  !*** ./packages/bootstrap-dropdown/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (factory) { // UMD wrapper\n  if ( true && module.exports) {\n    factory(__webpack_require__(/*! jquery */ \"ouhR\"))\n  } else if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"ouhR\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n  } else {}\n})(function ($) {\n\n/* ============================================================\n * bootstrap-dropdown.js v2.3.2\n * http://twitter.github.com/bootstrap/javascript.html#dropdowns\n * ============================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n// INSTRUCTURE modified\n\n\n  \"use strict\"; // jshint ;_;\n\n\n /* DROPDOWN CLASS DEFINITION\n  * ========================= */\n\n  var toggle = '[data-toggle=dropdown]'\n    , Dropdown = function (element) {\n        var $el = $(element).on('click.dropdown.data-api', this.toggle)\n        $('html').on('click.dropdown.data-api', function () {\n          // INSTRUCTURE added aria-expanded\n          $el.parent().removeClass('open').attr('aria-expanded', 'false')\n        })\n      }\n\n  Dropdown.prototype = {\n\n    constructor: Dropdown\n\n  , toggle: function (e) {\n      var $this = $(this)\n        , $parent\n        , $parentsParent\n        , isActive\n\n      if ($this.is('.disabled, :disabled')) return\n\n      $parent = getParent($this)\n      $parentsParent = getParent($parent)\n\n      isActive = $parent.hasClass('open')\n\n      clearMenus()\n\n      if (!isActive) {\n        if ('ontouchstart' in document.documentElement) {\n          // if mobile we we use a backdrop because click events don't delegate\n          $('<div class=\"dropdown-backdrop\"/>').insertBefore($(this)).on('click', clearMenus)\n        }\n        // INSTRUCTURE added aria-expanded and role='application'\n        $parent.toggleClass('open')\n        getProperParent($parent).attr('aria-expanded', 'true')\n        $parent.trigger(\"show.bs.dropdown\")\n\n        if ($parent.hasClass('open')){\n          $parentsParent.attr('role', 'application');\n        }\n\n        // if this causes issues in the future, we should trackdown the event handler that is\n        // stealing focus after the fact\n        window.setTimeout(function (){$parent.find('>div.dropdown-menu>ul>li[rel=0]').focus()},0)\n      } else {\n        $parentsParent.removeAttr('role');\n        $parent.trigger(\"hide.bs.dropdown\")\n      }\n\n      $parent.trigger(\"toggle.bs.dropdown\")\n      $this.focus()\n\n      return false\n    }\n\n  , keydown: function (e) {\n      var $this\n        , $items\n        , $active\n        , $parent\n        , $list\n        , isActive\n        , index\n\n      // INSTRUCTURE\n      if (e.keyCode == 9) return clearMenus()\n      if ($(e.target).is('input')) return\n\n      if (!/(32|13|37|38|39|40|27)/.test(e.keyCode)) return\n\n      $this = $(this)\n\n      e.preventDefault()\n      e.stopPropagation()\n\n      if ($this.is('.disabled, :disabled')) return\n\n      $parent = getParent($this)\n\n      isActive = $parent.hasClass('open')\n\n      if (!isActive || (isActive && e.keyCode == 27)) {\n        if (e.which == 27) $parent.find(toggle).focus()\n        // INSTRUCTURE\n        setTimeout(function() {$('li:not(.divider):visible > a', $parent).first().focus()}, 0)\n        return $this.click()\n      }\n\n      // INSTRUCTURE--modified the rest of the method\n      // left\n      if (e.keyCode == 37) {\n        $list = $(e.target).closest('ul')\n        if ($list.is('[role=group]')) {\n          $list.closest('li').children('a').focus()\n        }\n        return\n      }\n\n      // right\n      if (e.keyCode == 39) {\n        $list = $(e.target).next()\n        if ($list.is('.dropdown-menu')) {\n          $list.find('li:not(.divider):visible > a').eq(0).focus()\n          e.preventDefault()\n        }\n        return\n      }\n\n      if ($(e.target).is('a')) {\n        $list = $(e.target).closest('ul')\n      } else {\n        $list = $('[role=menu]', $parent)\n      }\n      $items = $('> li:not(.divider):visible > a', $list)\n\n      if (!$items.length) return\n\n      index = $items.index($items.filter(':focus'))\n\n      if (e.keyCode == 38 && index > 0) index--                                        // up\n      if (e.keyCode == 40 && index < $items.length - 1) index++                        // down\n      if (!~index) index = 0\n\n      $items\n        .eq(index)\n        .focus()\n      if((e.keyCode == 13 || e.keyCode == 32)) {\n        var parent = $($items.eq(index).closest('li'));\n        if (parent.hasClass(\"dropdown-submenu\") ){\n          parent.find(\".dropdown-menu input\").focus()\n        }\n      }\n\n    }\n\n    // INSTRUCTURE\n    , focusSubmenu: function(e) {\n      $(this).attr('role', 'application')\n      $(this).addClass('open').attr('aria-expanded', 'true')\n    }\n\n    , blurSubmenu: function(e) {\n      var self = this;\n      setTimeout(function() {\n        if ($.contains(self, document.activeElement)) {return;}\n        $(self).removeAttr('role')\n        $(self).removeClass('open').attr('aria-expanded', 'false')\n      }, 0)\n    }\n\n    , clickSubmenu: function(e) {\n      var subMenu = $(e.target).closest('li');\n      if (subMenu.hasClass('dropdown-submenu')){\n        subMenu.find(\".dropdown-menu input\").focus();\n      } else {\n        return;\n      }\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  function clearMenus() {\n    // INSTRUCTURE--maintain focus\n    var $list = $(document.activeElement).closest('.dropdown-menu')\n    if ($list) {\n      $list.parent().prev().focus();\n    }\n    $('.dropdown-backdrop').remove()\n    $(toggle).each(function () {\n      // INSTRUCTURE added aria-expanded\n      var $parent = getParent($(this))\n      $parent.removeClass('open')\n      getProperParent($parent).attr('aria-expanded', 'false')\n    })\n    // INSTRUCTURE\n    $('.dropdown-submenu').each(function() {\n      $(this).removeClass('open').attr('aria-expanded', 'false')\n    })\n  }\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n      , $parent\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    $parent = selector && $(selector)\n\n    if (!$parent || !$parent.length) $parent = $this.parent()\n\n    return $parent\n  }\n\n  // INSTRUCTURE - Added this to better suit needs of aria-expanded stuff\n  // It will return a button, rather than a parent div.\n  function getProperParent($parent) {\n    if ($parent.is('button')) {\n      return $parent;\n    } else {\n      return $parent.children('button')\n    }\n  }\n\n\n  /* DROPDOWN PLUGIN DEFINITION\n   * ========================== */\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('dropdown')\n      if (!data) $this.data('dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.dropdown.Constructor = Dropdown\n\n\n /* DROPDOWN NO CONFLICT\n  * ==================== */\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  /* APPLY TO STANDARD DROPDOWN ELEMENTS\n   * =================================== */\n\n  $(document)\n    .on('click.dropdown.data-api', clearMenus)\n    .on('click.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('click.dropdown.data-api'  , toggle, Dropdown.prototype.toggle)\n    .on('keydown.dropdown.data-api', toggle + ', [role=menu]' , Dropdown.prototype.keydown)\n    // INSTRUCTURE\n    .on('focus.dropdown.data-api', '.dropdown-submenu', Dropdown.prototype.focusSubmenu)\n    .on('blur.dropdown.data-api', '.dropdown-submenu', Dropdown.prototype.blurSubmenu)\n    .on('click.dropdown.data-api', '.dropdown-submenu', Dropdown.prototype.clickSubmenu)\n\n});\n\n\n//# sourceURL=webpack:///./packages/bootstrap-dropdown/index.js?");

/***/ }),

/***/ "R1PX":
/*!**********************************************************************!*\
  !*** ./ui/shared/groups/backbone/collections/GroupCollection.coffee ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/pagination/backbone/collections/PaginatedCollection.coffee */ \"TnsN\");\n/* harmony import */ var _GroupUserCollection_coffee__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GroupUserCollection.coffee */ \"n7p2\");\n/* harmony import */ var _models_Group_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/Group.coffee */ \"aftf\");\n/* harmony import */ var _canvas_util_natcompare__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/util/natcompare */ \"plYi\");\nvar GroupCollection,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GroupCollection = (function(superClass) {\n  extend(GroupCollection, superClass);\n\n  function GroupCollection() {\n    this.fetchNext = bind(this.fetchNext, this);\n    return GroupCollection.__super__.constructor.apply(this, arguments);\n  }\n\n  GroupCollection.prototype.model = _models_Group_coffee__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n\n  GroupCollection.prototype.comparator = _canvas_util_natcompare__WEBPACK_IMPORTED_MODULE_3__[\"default\"].byGet('name');\n\n  GroupCollection.optionProperty('category');\n\n  GroupCollection.optionProperty('loadAll');\n\n  GroupCollection.optionProperty('markInactiveStudents');\n\n  GroupCollection.prototype._defaultUrl = function() {\n    var url;\n    if (this.forCourse) {\n      url = GroupCollection.__super__._defaultUrl.apply(this, arguments);\n      if (!ENV.CAN_MANAGE_GROUPS) {\n        url = url + \"?only_own_groups=1\";\n      }\n      return url;\n    } else {\n      return '/api/v1/users/self/groups';\n    }\n  };\n\n  GroupCollection.prototype.url = function() {\n    if (this.category != null) {\n      return this.url = \"/api/v1/group_categories/\" + this.category.id + \"/groups?per_page=50\";\n    } else {\n      return this.url = GroupCollection.__super__.url.apply(this, arguments);\n    }\n  };\n\n  GroupCollection.prototype.fetchAll = function() {\n    return this.fetchAllDriver({\n      success: this.fetchNext\n    });\n  };\n\n  GroupCollection.prototype.fetchNext = function() {\n    if (this.canFetch('next')) {\n      return this.fetch({\n        page: 'next',\n        success: this.fetchNext\n      });\n    } else {\n      return this.trigger('finish');\n    }\n  };\n\n  GroupCollection.prototype.fetchAllDriver = function(options) {\n    if (options == null) {\n      options = {};\n    }\n    options.data = Object.assign({\n      per_page: 20,\n      include: \"can_message\"\n    }, options.data || {});\n    return this.fetch(options);\n  };\n\n  return GroupCollection;\n\n})(_canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n\n\n//# sourceURL=webpack:///./ui/shared/groups/backbone/collections/GroupCollection.coffee?");

/***/ }),

/***/ "RjDh":
/*!****************************************************************************!*\
  !*** ./ui/features/conversations/backbone/collections/CourseCollection.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CourseCollection; });\n/* harmony import */ var _canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/pagination/backbone/collections/PaginatedCollection.coffee */ \"TnsN\");\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\nclass CourseCollection extends _canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  initialize() {\n    super.initialize();\n    this.setParam('state', ['unpublished', 'available', 'completed']);\n    return this.setParam('include', ['term']);\n  }\n\n}\nCourseCollection.prototype.url = '/api/v1/courses/';\nCourseCollection.prototype.loadAll = true;\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/collections/CourseCollection.js?");

/***/ }),

/***/ "SN0J":
/*!*************************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.autocomplete_token!./ui/shims/dummyI18nResource.js ***!
  \*************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.autocomplete_token'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.autocomplete_token");

/***/ }),

/***/ "T7C4":
/*!**********************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/AutocompleteView.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AutocompleteView; });\n/* harmony import */ var i18n_conversations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!conversations */ \"mD3o\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/pagination/backbone/collections/PaginatedCollection.coffee */ \"TnsN\");\n/* harmony import */ var _models_ConversationSearchResult_coffee__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/ConversationSearchResult.coffee */ \"Pn84\");\n/* harmony import */ var _canvas_pagination_backbone_views_PaginatedCollectionView_coffee__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/pagination/backbone/views/PaginatedCollectionView.coffee */ \"5VKQ\");\n/* harmony import */ var _jst_autocompleteToken_handlebars__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../jst/autocompleteToken.handlebars */ \"thpG\");\n/* harmony import */ var _jst_autocompleteResult_handlebars__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../jst/autocompleteResult.handlebars */ \"a8rX\");\n/* harmony import */ var jquery_scroll_into_view__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jquery-scroll-into-view */ \"hmuK\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\n\n\n\n\n // Public: Helper method for capitalizing a string\n//\n// string - The string to capitalize.\n//\n// Returns a capitalized string.\n\nconst capitalize = string => string.charAt(0).toUpperCase() + string.slice(1);\n\nclass AutocompleteView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.View {\n  static initClass() {\n    // Public: Limit selection to one result.\n    this.optionProperty('single'); // Public: If true, don't display \"All in ...\" results.\n\n    this.optionProperty('excludeAll'); // Internal: Current result set from the server.\n\n    this.prototype.collection = null; // Internal: Current XMLHttpRequest (if any).\n\n    this.prototype.currentRequest = null; // Internal: Current context to filter searches by.\n\n    this.prototype.currentContext = null; // Internal: Parent of the current context.\n\n    this.prototype.parentContexts = []; // Internal: Currently selected model.\n\n    this.prototype.selectedModel = null; // Internal: Currently selected results.\n\n    this.prototype.tokens = []; // Internal: A cache of per-context permissions.\n\n    this.prototype.permissions = {}; // Internal: A cache of URL results.\n\n    this.prototype.cache = {};\n    this.prototype.messages = {\n      noResults: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('no_results_found', 'No results found'),\n      back: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('back', 'Back'),\n\n      everyone(context) {\n        return i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('all_in_context', 'All in %{context}', {\n          context\n        });\n      },\n\n      private: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('cannot_add_to_private', 'You cannot add participants to a private conversation.')\n    }; // Internal: Map of key names to codes.\n\n    this.prototype.keys = {\n      8: 'backspace',\n      13: 'enter',\n      27: 'escape',\n      38: 'up',\n      40: 'down'\n    }; // Internal: Cached DOM element references.\n\n    this.prototype.els = {\n      '.ac-input-box': '$inputBox',\n      '.ac-input': '$input',\n      '.ac-token-list': '$tokenList',\n      '.ac-result-wrapper': '$resultWrapper',\n      '.ac-result-container': '$resultContainer',\n      '.ac-result-contents': '$resultContents',\n      '.ac-result-list': '$resultList',\n      '.ac-placeholder': '$placeholder',\n      '.ac-clear': '$clearBtn',\n      '.ac-search-btn': '$searchBtn',\n      '.ac-results-status': '$resultsStatus',\n      '.ac-selected-name': '$selectedName'\n    }; // Internal: Event map.\n\n    this.prototype.events = {\n      'blur      .ac-input': '_onInputBlur',\n      'click     .ac-input-box': '_onWidgetClick',\n      'click     .ac-clear': '_onClearTokens',\n      'click     .ac-token-remove-btn': '_onRemoveToken',\n      'click     .ac-search-btn': '_onSearch',\n      'keyclick  .ac-search-btn': '_onSearch',\n      'focus     .ac-input': '_onInputFocus',\n      'input     .ac-input': '_onSearchTermChange',\n      'keydown   .ac-input': '_onInputAction',\n      'mousedown .ac-result': '_onResultClick',\n      'mouseenter .ac-result-list': '_clearSelectedStyles'\n    };\n    this.prototype.modelCache = new _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.Collection();\n  } // Internal: Construct the search URL for the given term.\n\n\n  url(term) {\n    const baseURL = '/api/v1/search/recipients?';\n    const params = {\n      search: term,\n      per_page: 20,\n      'permissions[]': 'send_messages_all',\n      messageable_only: true,\n      synthetic_contexts: true\n    };\n    if (this.currentContext) params.context = this.currentContext.id;\n    return baseURL + underscore__WEBPACK_IMPORTED_MODULE_3___default.a.reduce(params, (queryString, v, k) => {\n      queryString.push(`${k}=${v}`);\n      return queryString;\n    }, []).join('&');\n  } // Public: Create and configure a new instance.\n  //\n  // Returns an AutocompleteView instance.\n\n\n  initialize() {\n    super.initialize(...arguments); // After battling chrome, firefox, and IE this seems to be the best place to\n    // inject some hackery to prevent focus/blur issues\n\n    this.parentContexts = [];\n    this.currentContext = null;\n    this.recipientCounts = {};\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).on('mousedown', this._onDocumentMouseDown.bind(this));\n    this.render(); // to initialize els\n\n    this.$span = this._initializeWidthSpan();\n    setTimeout(() => {\n      if (this.options.disabled) this._disable();\n    }, 0);\n    this._fetchResults = underscore__WEBPACK_IMPORTED_MODULE_3___default.a.debounce(this.__fetchResults, 250);\n    return this.resultView = new _canvas_pagination_backbone_views_PaginatedCollectionView_coffee__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      el: this.$resultContents,\n      scrollContainer: this.$resultContainer,\n      buffer: 50,\n      collection: new _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.Collection(),\n      template: null,\n      itemView: _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.View.extend({\n        template: _jst_autocompleteResult_handlebars__WEBPACK_IMPORTED_MODULE_8__[\"default\"]\n      }),\n      itemViewOptions: {\n        tagName: 'li',\n\n        attributes() {\n          const classes = ['ac-result'];\n          if (this.model.get('isContext')) classes.push('context');\n          if (this.model.get('back')) classes.push('back');\n          if (this.model.get('everyone')) classes.push('everyone');\n          const attributes = {\n            class: classes.join(' '),\n            'data-id': this.model.id,\n            'data-people-count': this.model.get('user_count'),\n            'aria-label': this.model.get('name'),\n            id: `result-${jquery__WEBPACK_IMPORTED_MODULE_2___default.a.guid++}` // for aria-activedescendant\n\n          };\n          attributes['aria-haspopup'] = this.model.get('isContext');\n          return attributes;\n        }\n\n      }\n    });\n  } // Internal: Manage events on the results collection.\n  //\n  // Returns nothing.\n\n\n  _attachCollection() {\n    this.resultView.switchCollection(this.resultCollection);\n    this.resultView.stopListening(this.resultCollection, 'reset', this.resultView.renderOnReset);\n    return this.resultView.stopListening(this.resultCollection, 'remove', this.resultView.removeItem);\n  } // Public: Toggle visibility of result list.\n  //\n  // isVisible - A boolean to determine if the list should be shown.\n  //\n  // Returns the result list jQuery object.\n\n\n  toggleResultList(isVisible) {\n    this.$resultWrapper.attr('aria-hidden', !isVisible);\n    this.$resultWrapper.toggle(isVisible);\n    this.$input.attr('aria-expanded', isVisible);\n    if (!isVisible) return this.$resultList.empty();\n  } // Internal: Disable the autocomplete input.\n  //\n  // Returns nothing.\n\n\n  _disable() {\n    this.disable();\n    this.$inputBox.attr('title', this.messages.private);\n    this.$inputBox.attr('data-tooltip', '{\"position\":\"bottom\"}');\n    return this.disabled = true;\n  } // Internal: Empty the current and parent contexts.\n  //\n  // Returns nothing.\n\n\n  _resetContext() {\n    if (this.hasExternalContext) {\n      this.currentContext = underscore__WEBPACK_IMPORTED_MODULE_3___default.a.isEmpty(this.parentContexts) ? this.currentContext : underscore__WEBPACK_IMPORTED_MODULE_3___default.a.head(this.parentContexts);\n    } else {\n      this.currentContext = null;\n    }\n\n    return this.parentContexts = [];\n  } // Internal: Create a <span /> to track search term width.\n  //\n  // Returns a jQuery-wrapped <span />.\n\n\n  _initializeWidthSpan() {\n    return jquery__WEBPACK_IMPORTED_MODULE_2___default()('<span />').css({\n      fontSize: '14px',\n      position: 'absolute',\n      top: '-9999px'\n    }).appendTo('body');\n  } // Internal: Add the given model to the cache.\n  //\n  // This is necessary because previously selected\n  // tokens may not be present in the collection.\n\n\n  _addToModelCache(model) {\n    return this.modelCache.add(model);\n  } // Internal: Get the given model from the collection.\n  //\n  // id - The ID of the model to return.\n  //\n  // Returns a model object.\n\n\n  _getModel(id) {\n    let result;\n    id = id && String(id);\n    return result = this.modelCache.get(id);\n  } // Internal: Remove the \"selected\" class from result list items.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _clearSelectedStyles(e) {\n    this.$resultList.find('.selected').removeClass('selected');\n    return this.selectedModel = null;\n  } // Internal: Translate clicks anywhere into clicks on the input.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onWidgetClick(e) {\n    return this.$input.focus();\n  } // Internal: Delegate special key presses to their handler (if any).\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onInputAction(e) {\n    let key;\n    if (!(key = this.keys[e.keyCode])) return;\n    const methodName = `_on${capitalize(key)}Key`;\n    if (typeof this[methodName] === 'function') return this[methodName].call(this, e);\n  }\n\n  _onDocumentMouseDown(e) {\n    if (!this.$inputBox.hasClass('focused')) return; // this is a hack so we can click the scroll bar without losing the result list\n\n    const parentClassName = '.ac';\n    const targetParent = jquery__WEBPACK_IMPORTED_MODULE_2___default()(e.target).closest(parentClassName);\n    const inputParent = this.$input.closest(parentClassName); // normally I would just preventDefault(), IE was making that difficult\n\n    this._shouldPreventBlur = targetParent.length && inputParent.length && targetParent[0] === inputParent[0];\n\n    if (this._shouldPreventBlur) {\n      return e.preventDefault();\n    } else {\n      // we are focused but we clicked outside of the area we care about unfocus\n      return this._onInputBlur();\n    }\n  } // Internal: Remove focus styles on widget when input is blurred.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onInputBlur(e) {\n    if (this._shouldPreventBlur) {\n      this._shouldPreventBlur = false;\n      this.$input.focus();\n      return;\n    }\n\n    this.$inputBox.removeAttr('role');\n    this.$inputBox.removeClass('focused');\n    if (!this.tokens.length && !this.$input.val()) this.$placeholder.css({\n      opacity: 1\n    });\n\n    this._resetContext();\n\n    return this.toggleResultList(false);\n  } // Internal: Set proper styles on widget when input is focused.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onInputFocus(e) {\n    this.$inputBox.addClass('focused');\n    this.$inputBox.attr('role', 'application');\n    this.$placeholder.css({\n      opacity: 0\n    });\n\n    if (!jquery__WEBPACK_IMPORTED_MODULE_2___default()(e.target).hasClass('ac-input')) {\n      return this.$input[0].selectionStart = this.$input.val().length;\n    }\n  } // Internal: Fetch from server when the search term changes.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onSearchTermChange(e) {\n    if (!this.$input.val()) {\n      this.toggleResultList(false);\n    } else {\n      this._fetchResults();\n    }\n\n    this.$input.width(this.$span.text(this.$input.val()).width() + 15);\n    return this.resultView.collection.each(m => this.resultView.removeItem(m));\n  } // Internal: Display search results returned from the server.\n  //\n  // searchResults - An array of results from the server.\n  //\n  // Returns nothing.\n\n\n  _onSearchResultLoad() {\n    underscore__WEBPACK_IMPORTED_MODULE_3___default.a.extend(this.permissions, this._getPermissions());\n\n    if (!this.excludeAll && !!this._canSendToAll()) this._addEveryoneResult(this.resultCollection);\n    this.resultCollection.each(this._addToModelCache.bind(this));\n    const hasResults = this.resultCollection.length;\n    const isFinished = !this.nextRequest;\n\n    this._addBackResult(this.resultCollection);\n\n    this.currentRequest = null;\n\n    if (!hasResults) {\n      this.resultCollection.push(new _models_ConversationSearchResult_coffee__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n        id: 'no_results',\n        name: '',\n        noResults: true\n      }));\n    }\n\n    if (isFinished) {\n      this._drawResults();\n    }\n\n    if (this.nextRequest) this._fetchResults(true);\n    return this.updateStatusMessage(this.resultCollection.length);\n  } // Internal: Determine if the current user can send to all users in the course.\n  //\n  // Returns a boolean.\n\n\n  _canSendToAll() {\n    if (!this.currentContext) return false;\n    const key = this.currentContext.id.replace(/_(students|teachers)$/, '');\n    return this.permissions[key];\n  } // Internal: Return permissions hashes from the current results.\n  //\n  // Returns a hash.\n\n\n  _getPermissions() {\n    const permissions = this.resultCollection.filter(r => r.attributes.hasOwnProperty('permissions'));\n    return underscore__WEBPACK_IMPORTED_MODULE_3___default.a.reduce(permissions, (map, result) => {\n      const key = result.id.replace(/_(students|teachers)$/, '');\n      map[key] = !!result.get('permissions').send_messages_all;\n      return map;\n    }, {});\n  } // Internal: Add, if appropriate, an \"All in %{context}\" result to the\n  //           search results.\n  //\n  // results - A search results array to mutate.\n  //\n  // Returns a new search results array.\n\n\n  _addEveryoneResult(results) {\n    if (!this.currentContext) return;\n    const name = this.messages.everyone(this.currentContext.name);\n    const searchTerm = new RegExp(this.$input.val().trim(), 'gi');\n    if (searchTerm && !name.match(searchTerm)) return results;\n    const actual_results = results.reject(result => result.attributes.back || result.attributes.noResults || result.attributes.everyone);\n    if (!actual_results.length) return results;\n    if (this.currentContext.id.match(/course_\\d+_(group|section)/)) return;\n\n    if (!this.currentContext.peopleCount) {\n      this.currentContext.peopleCount = underscore__WEBPACK_IMPORTED_MODULE_3___default.a.reduce(actual_results, (count, result) => count + (result.attributes.user_count || 0), 0);\n    }\n\n    const tag = {\n      id: this.currentContext.id,\n      name,\n      everyone: true,\n      people: this.currentContext.peopleCount\n    };\n    return results.unshift(new _models_ConversationSearchResult_coffee__WEBPACK_IMPORTED_MODULE_5__[\"default\"](tag));\n  } // Internal: Add, if appropriate, an \"All in %{context}\" result to the\n  //           search results.\n  //\n  // results - A search results array to mutate.\n  //\n  // Returns a new search results array.\n\n\n  _addBackResult(results) {\n    if (!this.parentContexts.length) return results;\n    const tag = {\n      id: 'back',\n      name: this.messages.back,\n      back: true,\n      isContext: true\n    };\n    const back = new _models_ConversationSearchResult_coffee__WEBPACK_IMPORTED_MODULE_5__[\"default\"](tag);\n    results.unshift(back);\n    return this._addToModelCache(back);\n  } // Internal: Draw out search results to the DOM.\n  //\n  // Returns nothing.\n\n\n  _drawResults() {\n    this.resultView.empty = !this.resultView.collection.length;\n    this.resultView.$('.collectionViewItems').empty();\n    this.resultView.render();\n    const $el = this.$resultList.find('li:first').addClass('selected');\n    this.selectedModel = this._getModel($el.attr('data-id'));\n    return this.$input.attr('aria-activedescendant', $el.attr('id'));\n  } // Internal: Fetch and display autocomplete results from the server.\n  //\n  // fetchIfEmpty - Fetch a result set, even if no query exists (default: false)\n  //\n  // Returns nothing.\n\n\n  __fetchResults(fetchIfEmpty = false) {\n    if (!this.$input.val() && !fetchIfEmpty) return;\n\n    const url = this._loadURL();\n\n    if (!url) return;\n    this.currentUrl = url;\n\n    if (this.cache[url]) {\n      this.resultCollection = this.cache[url];\n\n      this._attachCollection();\n\n      this.toggleResultList(true);\n      return this._onSearchResultLoad();\n    } else {\n      this.resultCollection = new _canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_4__[\"default\"]([], {\n        model: _models_ConversationSearchResult_coffee__WEBPACK_IMPORTED_MODULE_5__[\"default\"]\n      });\n      this.resultCollection.url = url;\n      this.cache[url] = this.resultCollection;\n\n      this._attachCollection();\n\n      this.currentRequest = this.resultCollection.fetch().done(this._onSearchResultLoad.bind(this));\n      return this.toggleResultList(true);\n    }\n  } // Internal: Get URL for the current request, caching it as\n  //   @nextRequest if needed.\n  //\n  // Returns a URL string (will be empty if current request is pending).\n\n\n  _loadURL() {\n    const searchURL = this.url(this.$input.val());\n\n    if (this.currentRequest) {\n      this.nextRequest = searchURL;\n      return '';\n    } else {\n      const previousNextRequest = this.nextRequest;\n      delete this.nextRequest;\n      return previousNextRequest || searchURL;\n    }\n  } // Internal: Delete the last token.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onBackspaceKey(e) {\n    if (!this.$input.val()) {\n      return this._removeToken(underscore__WEBPACK_IMPORTED_MODULE_3___default.a.last(this.tokens));\n    }\n  } // Internal: Close the result list without choosing an option.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onEscapeKey(e) {\n    e.preventDefault() && e.stopPropagation();\n    this.toggleResultList(false);\n\n    this._resetContext();\n\n    return setTimeout(() => this.$input.focus(), 0);\n  } // Internal: Add the current @selectedModel to the list of tokens.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onEnterKey(e) {\n    e.preventDefault() && e.stopPropagation();\n    return this._activateSelected(e.metaKey || e.ctrlKey);\n  }\n\n  _activateSelected(keepOpen = false) {\n    if (!this.selectedModel || this.selectedModel.get('noResults')) return;\n\n    if (this.selectedModel.get('back')) {\n      this.currentContext = this.parentContexts.pop();\n      return this._fetchResults(true);\n    } else if (this.selectedModel.get('isContext')) {\n      this.parentContexts.push(this.currentContext);\n      this.$input.val('');\n      this.currentContext = {\n        id: this.selectedModel.id,\n        name: this.selectedModel.get('name'),\n        peopleCount: this.selectedModel.get('user_count')\n      };\n      return this._fetchResults(true);\n    } else {\n      return this._addToken(this.selectedModel.attributes, keepOpen);\n    }\n  } // Internal: Handle down-arrow events.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onDownKey(e) {\n    return this._onArrowKey(e, 1);\n  } // Internal: Handle up-arrow events.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onUpKey(e) {\n    return this._onArrowKey(e, -1);\n  } // Internal: Move the current selection based on arrow key\n  //\n  // e - Event object\n  // inc - The increment to the current selection index. -1 = up, +1 = down\n  //\n  // Returns nothing.\n\n\n  _onArrowKey(e, inc) {\n    // no keyboard nav when popup isn't open\n    if (this.$resultWrapper.css('display') !== 'block') return;\n    e.stopPropagation();\n    e.preventDefault();\n    this.$resultList.find('li.selected:first').removeClass('selected');\n    const currentIndex = this.selectedModel ? this.resultCollection.indexOf(this.selectedModel) : -1;\n    let newIndex = currentIndex + inc;\n\n    if (newIndex < 0) {\n      newIndex = 0;\n    }\n\n    if (newIndex >= this.resultCollection.length) newIndex = this.resultCollection.length - 1;\n    this.selectedModel = this.resultCollection.at(newIndex);\n    const $el = this.$resultList.find(`[data-id=${this.selectedModel.id}]`);\n    $el.scrollIntoView();\n    this.$input.attr('aria-activedescendant', $el.addClass('selected').attr('id'));\n    return this.updateSelectedNameForScreenReaders($el.text());\n  } // Internal: Add the clicked model to the list of tokens.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onResultClick(e) {\n    if (e.button !== 0) return;\n    e.preventDefault() && e.stopPropagation();\n    const $target = jquery__WEBPACK_IMPORTED_MODULE_2___default()(e.currentTarget);\n    this.selectedModel = this.resultCollection.get($target.attr('data-id'));\n    return this._activateSelected(e.metaKey || e.ctrlKey);\n  } // Internal: Clear the current token.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onClearTokens(e) {\n    e.preventDefault();\n\n    while (this.tokens.length) this._removeToken(this.tokens[0], false);\n\n    this.$clearBtn.hide();\n    if (!this.disabled) this.$input.prop('disabled', false).focus(); // fire a single token change event\n\n    this.trigger('enabled');\n    return this.trigger('changeToken', this.tokenParams());\n  } // Internal: Handle clicks on token remove buttons.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onRemoveToken(e) {\n    e.preventDefault();\n    return this._removeToken(jquery__WEBPACK_IMPORTED_MODULE_2___default()(e.currentTarget).siblings('input').val());\n  } // Internal: Handle clicks to the search button.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n\n\n  _onSearch(e) {\n    if (this.$searchBtn.attr('disabled')) return;\n\n    this._fetchResults(true);\n\n    return this.$input.focus();\n  }\n\n  checkRecipientTotal() {\n    const total = underscore__WEBPACK_IMPORTED_MODULE_3___default.a.reduce(this.recipientCounts, (sum, c) => sum + c, 0);\n\n    if (total > ENV.CONVERSATIONS.MAX_GROUP_CONVERSATION_SIZE) {\n      return this.trigger('recipientTotalChange', true);\n    } else {\n      return this.trigger('recipientTotalChange', false);\n    }\n  } // Internal: Add the given model to the token list.\n  //\n  // model - Result model (user or course)\n  //\n  // Returns nothing.\n\n\n  _addToken(model, keepOpen = false) {\n    if (this.disabled) return;\n    model.name = this._formatTokenName(model);\n    this.tokens.push(model.id);\n    this.$tokenList.append(Object(_jst_autocompleteToken_handlebars__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(model));\n    this.recipientCounts[model.id] = model.people || 1;\n    this.checkRecipientTotal();\n\n    if (!keepOpen) {\n      this.toggleResultList(false);\n      this.selectedModel = null;\n\n      this._resetContext();\n    }\n\n    this.$input.val('');\n\n    if (this.options.single) {\n      this.$clearBtn.show().focus();\n      this.$input.prop('disabled', true);\n      this.$searchBtn.prop('disabled', true);\n      this.trigger('disabled');\n    }\n\n    this.trigger('changeToken', this.tokenParams());\n    return this._refreshRecipientList();\n  } // Internal: Prepares a given model's name for display.\n  //\n  // model - A ConversationSearchResult model's attributes.\n  //\n  // Returns a formatted name.\n\n\n  _formatTokenName(model) {\n    let parent;\n    if (!model.everyone) return model.name;\n\n    if (parent = underscore__WEBPACK_IMPORTED_MODULE_3___default.a.head(this.parentContexts)) {\n      return `${parent.name}: ${this.currentContext.name}`;\n    } else {\n      return this.currentContext.name;\n    }\n  } // Internal: Remove the given model from the token list.\n  //\n  // id - The ID of the result to remove from the token list.\n  // silent - If true, don't fire a changeToken event (default: false).\n  //\n  // Returns nothing.\n\n\n  _removeToken(id, silent = false) {\n    if (this.disabled) return;\n    this.$tokenList.find(`input[value=${id}]`).parent().remove();\n    this.tokens.splice(underscore__WEBPACK_IMPORTED_MODULE_3___default.a.indexOf(this.tokens, id), 1);\n    if (!this.tokens.length) this.$clearBtn.hide();\n\n    if (this.options.single && !this.tokens.length) {\n      this.$input.prop('disabled', false);\n      this.$searchBtn.prop('disabled', false);\n      this.trigger('enabled');\n    }\n\n    this.recipientCounts[id] = 0;\n    this.checkRecipientTotal();\n    if (!silent) this.trigger('changeToken', this.tokenParams());\n    return this._refreshRecipientList();\n  }\n\n  _refreshRecipientList() {\n    const recipientNames = [];\n\n    underscore__WEBPACK_IMPORTED_MODULE_3___default.a.each(this.tokenModels(), model => {\n      recipientNames.push(model.get('name'));\n    });\n\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()('#recipient-label').text(recipientNames.join(', '));\n  } // Public: Return the current tokens as an array of params.\n  //\n  // Returns an array of context_id strings.\n\n\n  tokenParams() {\n    return underscore__WEBPACK_IMPORTED_MODULE_3___default.a.map(this.tokens, t => {\n      if (t.match) {\n        return t;\n      } else {\n        return `user_${t}`;\n      }\n    });\n  } // Public: Get the currently selected models.\n  //\n  // Returns an array of models.\n\n\n  tokenModels() {\n    return underscore__WEBPACK_IMPORTED_MODULE_3___default.a.map(this.tokens, this._getModel.bind(this));\n  } // Public: Set the current course context.\n  //\n  // context - A context string, e.g. \"course_123\"\n  // disable - Disable the input if no context is given (default: false).\n  //\n  // Returns nothing.\n\n\n  setContext(context, disable = false) {\n    if (!context.id) context = null;\n\n    if (disable && !ENV.CONVERSATIONS.CAN_MESSAGE_ACCOUNT_CONTEXT && !this.disabled) {\n      this.disable(!context);\n    }\n\n    if ((context != null ? context.id : void 0) === (this.currentContext != null ? this.currentContext.id : void 0)) return;\n    this.currentContext = context;\n    this.hasExternalContext = !!context;\n    this.tokens = [];\n    this.recipientCounts = {};\n    this.checkRecipientTotal();\n    return this.$tokenList.find('li.ac-token').remove();\n  }\n\n  disable(value = true) {\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()('#recipient-row').toggle(!value);\n  } // Public: Put the given tokens in the token list.\n  //\n  // tokens - Array of Result model object (course or user)\n  //\n  // Returns nothing.\n\n\n  setTokens(tokens) {\n    return underscore__WEBPACK_IMPORTED_MODULE_3___default.a.each(tokens, token => {\n      this._addToModelCache(token);\n\n      this._addToken(token);\n    });\n  } // Internal: Set the status message for screenreaders\n  //\n  //\n\n\n  updateStatusMessage(resultCount) {\n    // Empty the text\n    this.$resultsStatus.text(''); // Refill the text\n\n    return this.$resultsStatus.text(i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('result_status', 'The autocomplete has %{results} entries listed, use the up and down arrow keys' + ' to navigate to a listing, then press enter to add the person to the To field.', {\n      results: resultCount\n    }));\n  } // Internal: Set selected name for screenreaders\n  //\n  // had to add this for IE :/\n\n\n  updateSelectedNameForScreenReaders(selectedName) {\n    // Empty the text\n    this.$selectedName.text(''); // Refill the text\n\n    return this.$selectedName.text(selectedName);\n  }\n\n}\nAutocompleteView.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/AutocompleteView.js?");

/***/ }),

/***/ "U64V":
/*!*********************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/InboxHeaderView.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return InboxHeaderView; });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations */ \"mD3o\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var spin_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! spin.js */ \"RnbG\");\n/* harmony import */ var spin_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(spin_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _CourseSelectionView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CourseSelectionView */ \"90NG\");\n/* harmony import */ var _SearchView__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SearchView */ \"oJCR\");\n/* harmony import */ var bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! bootstrap-dropdown */ \"Qrqo\");\n/* harmony import */ var bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var bootstrap_select__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! bootstrap-select */ \"9HrG\");\n/* harmony import */ var bootstrap_select__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bootstrap_select__WEBPACK_IMPORTED_MODULE_8__);\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\n\n\n\n\nclass InboxHeaderView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__[\"View\"] {\n  static initClass() {\n    this.prototype.els = {\n      '#compose-btn': '$composeBtn',\n      '#reply-btn': '$replyBtn',\n      '#reply-all-btn': '$replyAllBtn',\n      '#archive-btn': '$archiveBtn',\n      '#delete-btn': '$deleteBtn',\n      '#course-filter': '$courseFilter',\n      '#admin-btn': '$adminBtn',\n      '#mark-unread-btn': '$markUnreadBtn',\n      '#mark-read-btn': '$markReadBtn',\n      '#forward-btn': '$forwardBtn',\n      '#star-toggle-btn': '$starToggleBtn',\n      '#admin-menu': '$adminMenu',\n      '#sending-message': '$sendingMessage',\n      '#sending-spinner': '$sendingSpinner',\n      '[role=search]': '$search',\n      '#conversation-actions': '$conversationActions',\n      '#submission-comment-actions': '$submissionCommentActions',\n      '#submission-reply-btn': '$submissionReplyBtn'\n    };\n    this.prototype.events = {\n      'click #compose-btn': 'onCompose',\n      'click #reply-btn': 'onReply',\n      'click #reply-all-btn': 'onReplyAll',\n      'click #archive-btn': 'onArchive',\n      'click #delete-btn': 'onDelete',\n      'change #course-filter': 'changeCourseFilter',\n      'click #mark-unread-btn': 'onMarkUnread',\n      'click #mark-read-btn': 'onMarkRead',\n      'click #forward-btn': 'onForward',\n      'click #star-toggle-btn': 'onStarToggle',\n      'click #submission-reply-btn': 'onSubmissionReply'\n    };\n    this.prototype.messages = {\n      star: i18n_conversations__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('star', 'Star'),\n      unstar: i18n_conversations__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('unstar', 'Unstar'),\n      archive: i18n_conversations__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('archive', 'Archive'),\n      unarchive: i18n_conversations__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('unarchive', 'Unarchive'),\n      archive_conversation: i18n_conversations__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Archive Selected'),\n      unarchive_conversation: i18n_conversations__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Unarchive Selected')\n    };\n    this.prototype.spinnerOptions = {\n      color: '#fff',\n      lines: 10,\n      length: 2,\n      radius: 2,\n      width: 2,\n      left: 0\n    };\n  }\n\n  render() {\n    super.render();\n    this.courseView = new _CourseSelectionView__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n      el: this.$courseFilter,\n      courses: this.options.courses\n    });\n    this.searchView = new _SearchView__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      el: this.$search\n    });\n    this.searchView.on('search', this.onSearch, this);\n    const spinner = new spin_js__WEBPACK_IMPORTED_MODULE_4___default.a(this.spinnerOptions);\n    spinner.spin(this.$sendingSpinner[0]);\n    this.toggleSending(false);\n    this.updateFilterLabels();\n    return this.courseFilterValue = this.$courseFilter.val();\n  }\n\n  onSearch(tokens) {\n    return this.trigger('search', tokens);\n  }\n\n  onCompose(e) {\n    return this.trigger('compose');\n  }\n\n  onReply(e) {\n    return this.trigger('reply', null, '#reply-btn');\n  }\n\n  onReplyAll(e) {\n    return this.trigger('reply-all', null, '#reply-all-btn');\n  }\n\n  onArchive(e) {\n    return this.trigger('archive', '#compose-btn', '#archive-btn');\n  }\n\n  onDelete(e) {\n    return this.trigger('delete', '#compose-btn', '#delete-btn');\n  }\n\n  onMarkUnread(e) {\n    e.preventDefault();\n    return this.trigger('mark-unread');\n  }\n\n  onMarkRead(e) {\n    e.preventDefault();\n    return this.trigger('mark-read');\n  }\n\n  onForward(e) {\n    e.preventDefault();\n    return this.trigger('forward', null, '#admin-btn');\n  }\n\n  onStarToggle(e) {\n    e.preventDefault();\n    this.$adminBtn.focus();\n    return this.trigger('star-toggle');\n  }\n\n  onSubmissionReply(e) {\n    return this.trigger('submission-reply');\n  }\n\n  onModelChange(newModel, oldModel) {\n    this.detachModelEvents(oldModel);\n    this.attachModelEvents(newModel);\n    return this.updateUi(newModel);\n  }\n\n  updateUi(newModel) {\n    this.toggleMessageBtns(newModel);\n    this.onReadStateChange(newModel);\n    this.onStarStateChange(newModel);\n    return this.onArchivedStateChange(newModel);\n  }\n\n  detachModelEvents(oldModel) {\n    if (oldModel) return oldModel.off(null, null, this);\n  }\n\n  attachModelEvents(newModel) {\n    if (newModel) {\n      newModel.on('change:workflow_state', this.onReadStateChange, this);\n      return newModel.on('change:starred', this.onStarStateChange, this);\n    }\n  }\n\n  onReadStateChange(msg) {\n    this.hideMarkUnreadBtn(!msg || msg.unread());\n    this.hideMarkReadBtn(!msg || !msg.unread());\n    return this.refreshMenu();\n  }\n\n  onStarStateChange(msg) {\n    if (msg) {\n      const key = msg.starred() ? 'unstar' : 'star';\n      this.$starToggleBtn.text(this.messages[key]);\n    }\n\n    return this.refreshMenu();\n  }\n\n  onArchivedStateChange(msg) {\n    if (!msg) return;\n    const archived = msg.get('workflow_state') === 'archived';\n    this.$archiveBtn.find('i').attr('class', archived ? 'icon-remove-from-collection' : 'icon-collection-save');\n    this.$archiveBtn.attr('title', archived ? this.messages.unarchive : this.messages.archive);\n    this.$archiveBtn.find('.screenreader-only').text(archived ? this.messages.unarchive_conversation : this.messages.archive_conversation);\n\n    if (msg.get('canArchive')) {\n      this.$archiveBtn.removeAttr('disabled');\n    } else {\n      this.$archiveBtn.attr('disabled', true);\n    }\n\n    return this.refreshMenu();\n  }\n\n  refreshMenu() {\n    if (this.$adminMenu.is('.ui-menu')) return this.$adminMenu.menu('refresh');\n  }\n\n  filterObj(obj) {\n    return underscore__WEBPACK_IMPORTED_MODULE_2___default.a.object(underscore__WEBPACK_IMPORTED_MODULE_2___default.a.filter(underscore__WEBPACK_IMPORTED_MODULE_2___default.a.pairs(obj), x => !!x[1]));\n  }\n\n  changeTypeFilter(type) {\n    this.typeFilter = type;\n    return this.onFilterChange();\n  }\n\n  changeCourseFilter() {\n    // This is getting called not just when the course filter gets changed,\n    // but also when the url changes at all. This if statements limits\n    // the onFilterChange to only be called if the filter was actually\n    // changed.\n    if (this.courseFilterValue !== this.$courseFilter.val()) {\n      this.courseFilterValue = this.$courseFilter.val();\n      return this.onFilterChange();\n    }\n  }\n\n  onFilterChange(e) {\n    if (this.searchView != null) {\n      this.searchView.autocompleteView.setContext(this.courseView.getCurrentContext());\n    }\n\n    if (this.typeFilter === 'submission_comments') {\n      this.$search.show();\n      this.$conversationActions.hide();\n      this.$submissionCommentActions.show();\n    } else {\n      this.$search.show();\n      this.$conversationActions.show();\n      this.$submissionCommentActions.hide();\n    }\n\n    this.trigger('filter', this.filterObj({\n      type: this.typeFilter,\n      course: this.courseFilterValue\n    }));\n    return this.updateFilterLabels();\n  }\n\n  updateFilterLabels() {\n    if (!(this.$courseFilterSelectionLabel != null ? this.$courseFilterSelectionLabel.length : void 0)) this.$courseFilterSelectionLabel = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`#${this.$courseFilter.attr('aria-labelledby')}`).find('.current-selection-label');\n    return this.$courseFilterSelectionLabel.text(this.$courseFilter.find(':selected').text());\n  }\n\n  displayState(state) {\n    this.courseView.setValue(state.course);\n    return this.trigger('course', this.courseView.getCurrentContext());\n  }\n\n  toggleMessageBtns(newModel) {\n    const no_model = !newModel || !newModel.get('selected');\n    const cannot_reply = no_model || newModel.get('cannot_reply');\n    this.toggleReplyBtn(cannot_reply);\n    this.toggleReplyAllBtn(cannot_reply);\n    this.toggleArchiveBtn(no_model);\n    this.toggleDeleteBtn(no_model);\n    this.toggleAdminBtn(no_model);\n    return this.hideForwardBtn(no_model);\n  }\n\n  toggleReplyBtn(value) {\n    this._toggleBtn(this.$replyBtn, value);\n\n    return this._toggleBtn(this.$submissionReplyBtn, value);\n  }\n\n  toggleReplyAllBtn(value) {\n    return this._toggleBtn(this.$replyAllBtn, value);\n  }\n\n  toggleArchiveBtn(value) {\n    return this._toggleBtn(this.$archiveBtn, value);\n  }\n\n  toggleDeleteBtn(value) {\n    return this._toggleBtn(this.$deleteBtn, value);\n  }\n\n  toggleAdminBtn(value) {\n    return this._toggleBtn(this.$adminBtn, value);\n  }\n\n  hideMarkUnreadBtn(hide) {\n    if (hide) {\n      return this.$markUnreadBtn.parent().detach();\n    } else {\n      return this.$adminMenu.prepend(this.$markUnreadBtn.parent());\n    }\n  }\n\n  hideMarkReadBtn(hide) {\n    if (hide) {\n      return this.$markReadBtn.parent().detach();\n    } else {\n      return this.$adminMenu.prepend(this.$markReadBtn.parent());\n    }\n  }\n\n  hideForwardBtn(hide) {\n    if (hide) {\n      return this.$forwardBtn.parent().detach();\n    } else {\n      return this.$adminMenu.prepend(this.$forwardBtn.parent());\n    }\n  }\n\n  focusCompose() {\n    return this.$composeBtn.focus();\n  }\n\n  _toggleBtn(btn, value) {\n    value = typeof value === 'undefined' ? !btn.prop('disabled') : value;\n    return btn.prop('disabled', value);\n  }\n\n  toggleSending(shouldShow) {\n    return this.$sendingMessage.toggle(shouldShow);\n  }\n\n}\nInboxHeaderView.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/InboxHeaderView.js?");

/***/ }),

/***/ "WuGG":
/*!************************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/ContextMessageView.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ContextMessageView; });\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _jst_contextMessage_handlebars__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../jst/contextMessage.handlebars */ \"cit+\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\nclass ContextMessageView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_0__[\"View\"] {\n  static initClass() {\n    this.prototype.tagName = 'li';\n    this.prototype.template = _jst_contextMessage_handlebars__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n    this.prototype.events = {\n      'click a.context-more': 'toggle',\n      'click .delete-btn': 'triggerRemoval'\n    };\n  }\n\n  initialize() {\n    super.initialize(...arguments);\n    this.model.set({\n      isCondensable: this.model.get('body').length > 180\n    });\n    return this.model.set({\n      isCondensed: true\n    });\n  }\n\n  toJSON() {\n    const json = super.toJSON(...arguments);\n\n    if (json.isCondensable && json.isCondensed) {\n      json.body = json.body.substr(0, 180).replace(/\\W\\w*$/, '');\n    }\n\n    return json;\n  }\n\n  toggle(e) {\n    e.preventDefault();\n    this.model.set({\n      isCondensed: !this.model.get('isCondensed')\n    });\n    this.render();\n    return this.$('a').focus();\n  }\n\n  triggerRemoval() {\n    return this.model.trigger('removeView', {\n      view: this\n    });\n  }\n\n}\nContextMessageView.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/ContextMessageView.js?");

/***/ }),

/***/ "YMFK":
/*!**************************************************************!*\
  !*** ./ui/features/conversations/jst/messageList.handlebars ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_message_list__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.message_list */ \"hhBJ\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/messageList';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"list-header\\\">\\n  <b class=\\\"current-context\\\"></b>\\n</div>\\n\\n<ul class=\\\"messages unstyled collectionViewItems\\\"\\n  aria-label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_list\")\n  },data:data},helper ? helper.call(depth0, \"messages\", \"Messages\", options) : helperMissing.call(depth0, \"t\", \"messages\", \"Messages\", options)))\n    + \"\\\">\\n</ul>\\n\\n<div class=\\\"paginatedLoadingIndicator\\\"></div>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/messageList.handlebars?");

/***/ }),

/***/ "a8rX":
/*!*********************************************************************!*\
  !*** ./ui/features/conversations/jst/autocompleteResult.handlebars ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_autocomplete_result__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.autocomplete_result */ \"2oez\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/autocompleteResult';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n  <span class=\\\"no-result text-center\\\">\\n    \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.autocomplete_result\")\n  },data:data},helper ? helper.call(depth0, \"no_results\", \"No results\", options) : helperMissing.call(depth0, \"t\", \"no_results\", \"No results\", options)))\n    + \"\\n  </span>\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isContext), {hash:{},inverse:self.program(6, program6, data),fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <b class=\\\"result-name\\\">\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</b>\\n  \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.everyone), {hash:{},inverse:self.program(9, program9, data),fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  \";\n  return buffer;\n  }\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n      <b class=\\\"result-name\\\">\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</b>\\n    \";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n      <span class=\\\"result-name\\\">\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    \";\n  return buffer;\n  }\n\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.back), {hash:{},inverse:self.program(14, program14, data),fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  \";\n  return buffer;\n  }\nfunction program12(depth0,data) {\n  \n  \n  return \"\\n      <i class=\\\"icon-mini-arrow-left\\\"></i>\\n    \";\n  }\n\nfunction program14(depth0,data) {\n  \n  \n  return \"\\n      <i class=\\\"icon-mini-arrow-right\\\"></i>\\n    \";\n  }\n\nfunction program16(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n    \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'people': ((depth0 && depth0.people)),\n    'scope': (\"conversations.autocomplete_result\")\n  },data:data},helper ? helper.call(depth0, \"group_people\", \"People: %{people}\", options) : helperMissing.call(depth0, \"t\", \"group_people\", \"People: %{people}\", options)))\n    + \"\\n  \";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.noResults), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n<div class=\\\"pull-right\\\">\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isContext), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.people), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/autocompleteResult.handlebars?");

/***/ }),

/***/ "a9vR":
/*!*********************************************************************!*\
  !*** ./ui/features/conversations/react/ConversationStatusFilter.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ConversationStatusFilter; });\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var query_string_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! query-string-encoding */ \"qbUT\");\n/* harmony import */ var _instructure_ui_form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @instructure/ui-form-field */ \"sTNg\");\n/* harmony import */ var i18n_ConversationStatusFilter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!ConversationStatusFilter */ \"HEIT\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nclass ConversationStatusFilter extends react__WEBPACK_IMPORTED_MODULE_5___default.a.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleBackboneHistory = (route, params) => {\n      const filterParam = params[0];\n      const newState = filterParam === null ? this.props.defaultFilter : this.getUrlFilter(filterParam); // We don't need to update the backbone state if the state hasn't actually\n      // changed. This occurs due to the state changing on the select option\n      // being changed, and then again as the history gets updated as a result\n      // of that change\n\n      if (newState !== this.state.selected) {\n        this.updateBackboneState(newState);\n      }\n    };\n\n    this.state = {\n      selected: props.initialFilter\n    };\n    this.props.router.header.changeTypeFilter(props.initialFilter);\n  }\n\n  componentWillMount() {\n    this.props.router.on('route', this.handleBackboneHistory);\n  }\n\n  componentWillUnmount() {\n    this.props.router.off('route', this.handleBackboneHistory);\n  }\n\n  getUrlFilter(params) {\n    const types = Object(query_string_encoding__WEBPACK_IMPORTED_MODULE_1__[\"decodeQueryString\"])(params).filter(i => i.type !== void 0);\n\n    if (types.length === 1 && this.validFilter(types[0].type)) {\n      return types[0].type;\n    }\n\n    return this.props.defaultFilter;\n  }\n\n  validFilter(filter) {\n    return Object.keys(this.props.filters).includes(filter);\n  }\n\n  updateBackboneState(newFilter) {\n    const filter = this.validFilter(newFilter) ? newFilter : this.props.defaultFilter;\n    const state = {\n      selected: filter\n    }; // The state needs to finished being set before we call out to backbone,\n    // because that will lead to the url being changed and causing the\n    // handleBackboneHistory to be triggered. If the state hasn't finished\n    // being saved by this state, it will lead to this function being called\n    // again.\n\n    this.setState(state, () => this.props.router.header.changeTypeFilter(newFilter));\n  }\n\n  render() {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_instructure_ui_form_field__WEBPACK_IMPORTED_MODULE_2__[\"FormField\"], {\n      id: \"conversation_filter\",\n      label: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_6__[\"ScreenReaderContent\"], null, i18n_ConversationStatusFilter__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Filter conversations by type'))\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"select\", {\n      id: \"conversation_filter_select\",\n      onChange: e => this.updateBackboneState(e.target.value),\n      style: {\n        width: '115%'\n      },\n      value: this.state.selected\n    }, Object.keys(this.props.filters).map(key => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"option\", {\n      value: key,\n      key: key\n    }, this.props.filters[key]))));\n  }\n\n}\nConversationStatusFilter.propTypes = {\n  defaultFilter: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.string.isRequired,\n  initialFilter: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.string.isRequired,\n  router: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.instanceOf(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0___default.a.Router).isRequired,\n  filters: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.objectOf((obj, key) => {\n    if (typeof key !== 'string' || typeof obj[key] !== 'string') {\n      return new Error(\"Keys and values of 'filter' prop must be strings\");\n    }\n  }).isRequired\n};\n\n//# sourceURL=webpack:///./ui/features/conversations/react/ConversationStatusFilter.js?");

/***/ }),

/***/ "blrE":
/*!******************************************************************!*\
  !*** ./ui/features/conversations/backbone/models/Message.coffee ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _canvas_util_TextHelper_coffee__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/util/TextHelper.coffee */ \"JOjB\");\nvar Message,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Message = (function(superClass) {\n  extend(Message, superClass);\n\n  function Message() {\n    return Message.__super__.constructor.apply(this, arguments);\n  }\n\n  Message.prototype.initialize = function() {\n    this.messageCollection = new _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__[\"Collection\"](this.get('messages') || []);\n    return this.on('change:messages', this.handleMessages);\n  };\n\n  Message.prototype.save = function(attrs, opts) {\n    if (this.get('for_submission')) {\n      return jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(\"/api/v1/courses/\" + (this.get('course_id')) + \"/assignments/\" + (this.get('assignment_id')) + \"/submissions/\" + (this.get('user_id')) + \"/read.json\", this.unread() ? 'DELETE' : 'PUT');\n    } else {\n      return _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__[\"Model\"].prototype.save.call(this);\n    }\n  };\n\n  Message.prototype.parse = function(data) {\n    var findParticipant;\n    if (data.type === 'Submission') {\n      data.for_submission = true;\n      data.subject = data.course.name + \" - \" + data.title;\n      data.subject_url = data.html_url;\n      data.messages = data.submission_comments;\n      data.messages.reverse();\n      underscore__WEBPACK_IMPORTED_MODULE_2___default.a.each(data.messages, function(message) {\n        message.author.name = message.author.display_name;\n        message.bodyHTML = _canvas_util_TextHelper_coffee__WEBPACK_IMPORTED_MODULE_4__[\"default\"].formatMessage(message.comment);\n        return message.for_submission = true;\n      });\n      data.participants = underscore__WEBPACK_IMPORTED_MODULE_2___default.a.uniq(underscore__WEBPACK_IMPORTED_MODULE_2___default.a.map(data.submission_comments, function(m) {\n        return {\n          name: m.author_name\n        };\n      }), null, function(u) {\n        return u.name;\n      });\n      data.last_authored_message_at = data.submission_comments[0].created_at;\n      data.last_message_at = data.submission_comments[0].created_at;\n      data.message_count = _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"default\"].n(data.submission_comments.length);\n      data.last_message = data.submission_comments[0].comment;\n      data.read = data.read_state;\n      data.workflow_state = data.read_state ? 'read' : 'unread';\n    } else if (data.messages) {\n      findParticipant = function(id) {\n        return underscore__WEBPACK_IMPORTED_MODULE_2___default.a.find(data.participants, {\n          id: id\n        });\n      };\n      underscore__WEBPACK_IMPORTED_MODULE_2___default.a.each(data.messages, function(message) {\n        var i, id, len, participant, ref, ref1, ref2;\n        message.author = findParticipant(message.author_id);\n        message.participants = [];\n        message.participantNames = [];\n        ref = message.participating_user_ids;\n        for (i = 0, len = ref.length; i < len; i++) {\n          id = ref[i];\n          if (id !== message.author_id) {\n            if (participant = findParticipant(id)) {\n              message.participants.push(participant);\n              message.participantNames.push({\n                name: participant.name,\n                pronouns: participant.pronouns\n              });\n            }\n          }\n        }\n        if (message.participants.length > 2) {\n          message.summarizedParticipantNames = message.participantNames.slice(0, 2);\n          message.hiddenParticipantCount = message.participants.length - 2;\n        }\n        message.context_name = data.context_name;\n        message.has_attachments = message.media_comment || message.attachments.length;\n        message.bodyHTML = _canvas_util_TextHelper_coffee__WEBPACK_IMPORTED_MODULE_4__[\"default\"].formatMessage(message.body);\n        message.text = _canvas_util_TextHelper_coffee__WEBPACK_IMPORTED_MODULE_4__[\"default\"].plainText(message.body);\n        return message.responsive_awareness = !!((ref1 = window.ENV) != null ? (ref2 = ref1.FEATURES) != null ? ref2.responsive_awareness : void 0 : void 0);\n      });\n    }\n    return data;\n  };\n\n  Message.prototype.handleMessages = function() {\n    this.messageCollection.reset(this.get('messages') || []);\n    return this.listenTo(this.messageCollection, 'change:selected', this.handleSelection);\n  };\n\n  Message.prototype.handleSelection = function(model, value) {\n    if (!value) {\n      return;\n    }\n    return this.messageCollection.each(function(m) {\n      if (m !== model) {\n        return m.set({\n          selected: false\n        });\n      }\n    });\n  };\n\n  Message.prototype.unread = function() {\n    return this.get('workflow_state') === 'unread';\n  };\n\n  Message.prototype.starred = function() {\n    return this.get('starred');\n  };\n\n  Message.prototype.toggleReadState = function(set_read) {\n    if (set_read == null) {\n      set_read = this.unread();\n    }\n    return this.set('workflow_state', set_read ? 'read' : 'unread');\n  };\n\n  Message.prototype.toggleStarred = function(setStarred) {\n    if (setStarred == null) {\n      setStarred = !this.starred();\n    }\n    return this.set('starred', setStarred);\n  };\n\n  Message.prototype.timestamp = function() {\n    var lastAuthored, lastMessage;\n    lastMessage = new Date(this.get('last_message_at')).getTime();\n    lastAuthored = new Date(this.get('last_authored_message_at')).getTime();\n    return new Date(underscore__WEBPACK_IMPORTED_MODULE_2___default.a.max([lastMessage, lastAuthored]));\n  };\n\n  Message.prototype.toJSON = function() {\n    return {\n      conversation: underscore__WEBPACK_IMPORTED_MODULE_2___default.a.extend(Message.__super__.toJSON.apply(this, arguments), {\n        unread: this.unread(),\n        starred: this.starred(),\n        timestamp: this.timestamp()\n      })\n    };\n  };\n\n  return Message;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_3__[\"Model\"]));\n\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/models/Message.coffee?");

/***/ }),

/***/ "cQqb":
/*!****************************************************************!*\
  !*** ./ui/features/conversations/jst/addAttachment.handlebars ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_add_attachment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.add_attachment */ \"DdFN\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/addAttachment';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<li class=\\\"attachment clearfix\\\" tabindex=\\\"0\\\"\\n    title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.add_attachment\")\n  },data:data},helper ? helper.call(depth0, \"titles.attachment\", \"File to attach\", options) : helperMissing.call(depth0, \"t\", \"titles.attachment\", \"File to attach\", options)))\n    + \"\\\">\\n      <a href=\\\"#\\\"\\n         class=\\\"remove_link icon-end black pull-right\\\"\\n         title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.add_attachment\")\n  },data:data},helper ? helper.call(depth0, \"titles.remove_attachment\", \"Remove attachment\", options) : helperMissing.call(depth0, \"t\", \"titles.remove_attachment\", \"Remove attachment\", options)))\n    + \"\\\">\\n        <span class=\\\"screenreader-only\\\">\\n          \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.add_attachment\")\n  },data:data},helper ? helper.call(depth0, \"titles.remove_attachment\", \"Remove attachment\", options) : helperMissing.call(depth0, \"t\", \"titles.remove_attachment\", \"Remove attachment\", options)))\n    + \"\\n        </span>\\n      </a>\\n      <div class=\\\"attachment-icon\\\" aria-hidden=\\\"true\\\">\\n        <i class=\\\"icon-paperclip\\\"></i>\\n      </div>\\n      <div class=\\\"attachment-name-clip\\\"></div>\\n      <div class=\\\"attachment-name\\\"></div>\\n      <input id=\\\"file_input\\\" type=\\\"file\\\"\\n             class=\\\"file_input\\\"\\n             name=\\\"attachments[]\\\">\\n  </div>\\n</li>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/addAttachment.handlebars?");

/***/ }),

/***/ "cY2H":
/*!***********************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/MessageDetailView.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MessageDetailView; });\n/* harmony import */ var i18n_conversations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!conversations */ \"mD3o\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _models_Message_coffee__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/Message.coffee */ \"blrE\");\n/* harmony import */ var _MessageItemView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MessageItemView */ \"0HZp\");\n/* harmony import */ var _jst_messageDetail_handlebars__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../jst/messageDetail.handlebars */ \"cgKz\");\n/* harmony import */ var _jst_noMessage_handlebars__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../jst/noMessage.handlebars */ \"Novy\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _instructure_ui_avatar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @instructure/ui-avatar */ \"KK4r\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! nanoid */ \"4b23\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\n\n\n\n\n\n\n\nclass MessageDetailView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__[\"View\"] {\n  static initClass() {\n    this.prototype.events = {\n      'click .message-detail-actions .reply-btn': 'onReply',\n      'click .message-detail-actions .reply-all-btn': 'onReplyAll',\n      'click .message-detail-actions .delete-btn': 'onDelete',\n      'click .message-detail-actions .forward-btn': 'onForward',\n      'click .message-detail-actions .archive-btn': 'onArchive',\n      'click .message-detail-actions .star-toggle-btn': 'onStarToggle',\n      modelChange: 'onModelChange',\n      'changed:starred': 'render'\n    };\n    this.prototype.tagName = 'div';\n    this.prototype.messages = {\n      star: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('star', 'Star'),\n      unstar: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('unstar', 'Unstar'),\n      archive: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('archive', 'Archive'),\n      unarchive: i18n_conversations__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('unarchive', 'Unarchive')\n    };\n  }\n\n  render(options = {}) {\n    let $template;\n    super.render(...arguments);\n\n    if (this.model) {\n      const context = this.model.toJSON().conversation;\n      context.starToggleMessage = this.model.starred() ? this.messages.unstar : this.messages.star;\n      context.archiveToggleMessage = this.model.get('workflow_state') === 'archived' ? this.messages.unarchive : this.messages.archive;\n      $template = jquery__WEBPACK_IMPORTED_MODULE_1___default()(Object(_jst_messageDetail_handlebars__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(context));\n      this.model.messageCollection.each(message => {\n        message.attributes.avatarContainerId = `message-item-avatar-wrapper-${Object(nanoid__WEBPACK_IMPORTED_MODULE_11__[\"nanoid\"])()}`;\n\n        if (!message.get('conversation_id')) {\n          message.set('conversation_id', context.id);\n        }\n\n        if (context.cannot_reply) {\n          message.set('cannot_reply', context.cannot_reply);\n        }\n\n        const childView = new _MessageItemView__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n          model: message\n        }).render();\n        $template.find('.message-content').append(childView.$el);\n        react_dom__WEBPACK_IMPORTED_MODULE_9___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_instructure_ui_avatar__WEBPACK_IMPORTED_MODULE_10__[\"Avatar\"], {\n          name: message.attributes.author.name,\n          src: message.attributes.author.avatar_url\n        }), $template.find(`#${message.attributes.avatarContainerId}`)[0]);\n        this.listenTo(childView, 'reply', () => this.trigger('reply', message, `.message-item-view[data-id=${message.id}] .reply-btn`));\n        this.listenTo(childView, 'reply-all', () => this.trigger('reply-all', message, `.message-item-view[data-id=${message.id}] .al-trigger`));\n        return this.listenTo(childView, 'forward', () => this.trigger('forward', message, `.message-item-view[data-id=${message.id}] .al-trigger`));\n      });\n    } else {\n      $template = Object(_jst_noMessage_handlebars__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(options);\n    }\n\n    this.$el.html($template);\n    this.$archiveToggle = this.$el.find('.archive-btn');\n    this.$starToggle = this.$el.find('.star-toggle-btn');\n    return this;\n  }\n\n  renderEmptyTimeout() {\n    const $template = Object(_jst_noMessage_handlebars__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({});\n    this.$el.html($template);\n    this.$archiveToggle = this.$el.find('.archive-btn').click();\n    return this.$starToggle = this.$el.find('.star-toggle-btn');\n  }\n\n  renderEmpty() {\n    return setTimeout(() => this.renderEmptyTimeout(), 0);\n  }\n\n  onModelChange(newModel) {\n    this.detachModelEvents();\n    this.model = newModel;\n    return this.attachModelEvents();\n  }\n\n  detachModelEvents() {\n    if (this.model) {\n      return this.model.off(null, null, this);\n    }\n  }\n\n  attachModelEvents() {\n    if (this.model) {\n      return this.model.on('change:starred change:workflow_state', underscore__WEBPACK_IMPORTED_MODULE_2___default.a.debounce(this.updateLabels, 90), this);\n    }\n  }\n\n  updateLabels() {\n    if (!this.model) return;\n    this.$starToggle.text(this.model.starred() ? this.messages.unstar : this.messages.star);\n    return this.$archiveToggle.text(this.model.get('workflow_state') === 'archived' ? this.messages.unarchive : this.messages.archive);\n  }\n\n  onStarToggle(e) {\n    e.preventDefault();\n    this.$el.find('.message-detail-kyle-menu').focus();\n    return this.trigger('star-toggle');\n  }\n\n  onReply(e) {\n    e.preventDefault();\n    return this.trigger('reply', null, '.message-detail-actions .reply-btn');\n  }\n\n  onReplyAll(e) {\n    e.preventDefault();\n    return this.trigger('reply-all', null, '.message-detail-actions .al-trigger');\n  }\n\n  onForward(e) {\n    e.preventDefault();\n    return this.trigger('forward', null, '.message-detail-actions .al-trigger');\n  }\n\n  onDelete(e) {\n    e.preventDefault();\n    return this.trigger('delete', '.conversations .message-actions:last .star-btn', '.message-detail-actions .al-trigger');\n  }\n\n  onArchive(e) {\n    e.preventDefault();\n    return this.trigger('archive', '.conversations .message-actions:last .star-btn', '.message-detail-actions .al-trigger');\n  }\n\n}\nMessageDetailView.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/MessageDetailView.js?");

/***/ }),

/***/ "cgKz":
/*!****************************************************************!*\
  !*** ./ui/features/conversations/jst/messageDetail.handlebars ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_message_detail__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.message_detail */ \"/m1n\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/messageDetail';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"title=\\\"\";\n  if (helper = helpers.subject) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subject); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n      \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subject_url), {hash:{},inverse:self.program(6, program6, data),fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n        <a href=\";\n  if (helper = helpers.subject_url) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subject_url); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  if (helper = helpers.subject) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subject); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</a>\\n      \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n        \";\n  if (helper = helpers.subject) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subject); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n      \";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        (\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_detail\")\n  },data:data},helper ? helper.call(depth0, \"no_subject\", \"No subject\", options) : helperMissing.call(depth0, \"t\", \"no_subject\", \"No subject\", options)))\n    + \")\\n      \";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n      <li>\\n        <a href=\\\"#\\\"\\n           class=\\\"icon-reply-2 reply-btn Button Button--icon-action\\\"\\n           title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_detail\")\n  },data:data},helper ? helper.call(depth0, \"reply\", \"Reply\", options) : helperMissing.call(depth0, \"t\", \"reply\", \"Reply\", options)))\n    + \"\\\"\\n           data-tooltip>\\n          \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subject), {hash:{},inverse:self.program(13, program13, data),fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </a>\\n      </li>\\n      \";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n            <span class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'subject': ((depth0 && depth0.subject)),\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"reply_to_conversation_subject_4b2e6fe7\", \"Reply to conversation %{subject}\", options) : helperMissing.call(depth0, \"t\", \"reply_to_conversation_subject_4b2e6fe7\", \"Reply to conversation %{subject}\", options)))\n    + \"</span>\\n          \";\n  return buffer;\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n            <span class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"reply_to_conversation_f1aa0d4\", \"Reply to conversation\", options) : helperMissing.call(depth0, \"t\", \"reply_to_conversation_f1aa0d4\", \"Reply to conversation\", options)))\n    + \"</span>\\n          \";\n  return buffer;\n  }\n\nfunction program15(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n      <li>\\n        <div class=\\\"inline-block\\\" role=\\\"application\\\">\\n          <a href=\\\"#\\\"\\n             role=\\\"button\\\"\\n             data-kyle-menu-options='{\\\"appendMenuTo\\\": \\\"body\\\"}'\\n             class=\\\"al-trigger Button Button--icon-action message-detail-kyle-menu\\\"\\n             title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_detail\")\n  },data:data},helper ? helper.call(depth0, \"more_options\", \"More options\", options) : helperMissing.call(depth0, \"t\", \"more_options\", \"More options\", options)))\n    + \"\\\"\\n             data-tooltip>\\n            <i class=\\\"icon-settings\\\"></i>\\n            <i class=\\\"icon-mini-arrow-down\\\"></i>\\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subject), {hash:{},inverse:self.program(18, program18, data),fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n          </a>\\n          <ul class=\\\"al-options message-header-menu\\\">\\n            \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.cannot_reply), {hash:{},inverse:self.noop,fn:self.program(20, program20, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            <li>\\n              <a href=\\\"#\\\" class=\\\"forward-btn\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_detail\")\n  },data:data},helper ? helper.call(depth0, \"forward\", \"Forward\", options) : helperMissing.call(depth0, \"t\", \"forward\", \"Forward\", options)))\n    + \"</a>\\n            </li>\\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.canArchive), {hash:{},inverse:self.noop,fn:self.program(22, program22, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            <li><a href=\\\"#\\\" class=\\\"star-toggle-btn\\\">\";\n  if (helper = helpers.starToggleMessage) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.starToggleMessage); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</a></li>\\n\\n            <li>\\n              <a href=\\\"#\\\" class=\\\"delete-btn\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_detail\")\n  },data:data},helper ? helper.call(depth0, \"delete\", \"Delete\", options) : helperMissing.call(depth0, \"t\", \"delete\", \"Delete\", options)))\n    + \"</a>\\n            </li>\\n          </ul>\\n        </div>\\n      </li>\\n      \";\n  return buffer;\n  }\nfunction program16(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n              <span class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'subject': ((depth0 && depth0.subject)),\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"message_actions_for_conversation_subject_fdb54c88\", \"Message actions for conversation %{subject}\", options) : helperMissing.call(depth0, \"t\", \"message_actions_for_conversation_subject_fdb54c88\", \"Message actions for conversation %{subject}\", options)))\n    + \"</span>\\n            \";\n  return buffer;\n  }\n\nfunction program18(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n              <span class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"message_actions_for_conversation_d29b26cc\", \"Message actions for conversation\", options) : helperMissing.call(depth0, \"t\", \"message_actions_for_conversation_d29b26cc\", \"Message actions for conversation\", options)))\n    + \"</span>\\n            \";\n  return buffer;\n  }\n\nfunction program20(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n              <li>\\n                <a href=\\\"#\\\" class=\\\"reply-all-btn\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_detail\")\n  },data:data},helper ? helper.call(depth0, \"reply_all\", \"Reply all\", options) : helperMissing.call(depth0, \"t\", \"reply_all\", \"Reply all\", options)))\n    + \"</a>\\n              </li>\\n            \";\n  return buffer;\n  }\n\nfunction program22(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n              <li>\\n                <a href=\\\"#\\\" class=\\\"archive-btn\\\">\";\n  if (helper = helpers.archiveToggleMessage) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.archiveToggleMessage); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</a>\\n              </li>\\n            \";\n  return buffer;\n  }\n\n  buffer += \"<div>\\n  <div class=\\\"message-header\\\">\\n    <h2 class=\\\"subject\\\" tabindex=\\\"-1\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subject), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subject), {hash:{},inverse:self.program(8, program8, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </h2>\\n\\n    <ul class=\\\"message-detail-actions unstyled\\\">\\n      \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.cannot_reply), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.for_submission), {hash:{},inverse:self.noop,fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </ul>\\n  </div>\\n\\n  <ul class=\\\"message-content unstyled\\\"></ul>\\n</div>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/messageDetail.handlebars?");

/***/ }),

/***/ "cit+":
/*!*****************************************************************!*\
  !*** ./ui/features/conversations/jst/contextMessage.handlebars ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_context_message__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.context_message */ \"x6Ec\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/contextMessage';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <a class=\\\"context-more pull-right\\\" href=\\\"#\\\">\\n      \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isCondensed), {hash:{},inverse:self.program(4, program4, data),fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n  \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.context_message\")\n  },data:data},helper ? helper.call(depth0, \"labels.more\", \"more...\", options) : helperMissing.call(depth0, \"t\", \"labels.more\", \"more...\", options)))\n    + \"\\n      \";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.context_message\")\n  },data:data},helper ? helper.call(depth0, \"labels.less\", \"less...\", options) : helperMissing.call(depth0, \"t\", \"labels.less\", \"less...\", options)))\n    + \"\\n      \";\n  return buffer;\n  }\n\n  buffer += \"<input type=\\\"hidden\\\" name=\\\"included_messages[]\\\" value=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n<div class=\\\"context-author pull-left\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.author)),stack1 == null || stack1 === false ? stack1 : stack1.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</div>\\n<div class=\\\"pull-right\\\">\\n  <span class=\\\"context-date\\\">\"\n    + escapeExpression((helper = helpers.friendlyDatetime || (depth0 && depth0.friendlyDatetime),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.created_at), options) : helperMissing.call(depth0, \"friendlyDatetime\", (depth0 && depth0.created_at), options)))\n    + \"</span>\\n</div>\\n<div class=\\\"context-body\\\" aria-live=\\\"polite\\\">\\n  \";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isCondensable), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/contextMessage.handlebars?");

/***/ }),

/***/ "evf3":
/*!***************************************************!*\
  !*** ./node_modules/nanoid/url-alphabet/index.js ***!
  \***************************************************/
/*! exports provided: urlAlphabet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"urlAlphabet\", function() { return urlAlphabet; });\n// This alphabet uses `A-Za-z0-9_-` symbols. The genetic algorithm helped\n// optimize the gzip compression for this alphabet.\nlet urlAlphabet =\n  'ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW'\n\n\n\n\n//# sourceURL=webpack:///./node_modules/nanoid/url-alphabet/index.js?");

/***/ }),

/***/ "fKLg":
/*!**************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.message!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.message'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.message");

/***/ }),

/***/ "hhBJ":
/*!*******************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.message_list!./ui/shims/dummyI18nResource.js ***!
  \*******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.message_list'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.message_list");

/***/ }),

/***/ "hmuK":
/*!***************************************************!*\
  !*** ./packages/jquery-scroll-into-view/index.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n// depends on the scrollable ancestor being the first positioned\n// ancestor. if it's not, it won't work\n/* harmony default export */ __webpack_exports__[\"default\"] = (jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.scrollIntoView = function(options = {}) {\n  const $container = options.container || this.offsetParent()\n  const containerTop = $container.scrollTop()\n  const containerBottom = containerTop + $container.height()\n  let elemTop = this[0].offsetTop\n  let elemBottom = elemTop + jquery__WEBPACK_IMPORTED_MODULE_0___default()(this[0]).outerHeight()\n  if (options.ignore && options.ignore.border) {\n    elemTop += parseInt(\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()(this[0])\n        .css('border-top-width')\n        .replace('px', '')\n    )\n    elemBottom -= parseInt(\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()(this[0])\n        .css('border-bottom-width')\n        .replace('px', '')\n    )\n  }\n  if (elemTop < containerTop || options.toTop) {\n    return $container.scrollTop(elemTop)\n  } else if (elemBottom > containerBottom) {\n    return $container.scrollTop(elemBottom - $container.height())\n  }\n});\n\n\n//# sourceURL=webpack:///./packages/jquery-scroll-into-view/index.js?");

/***/ }),

/***/ "jme5":
/*!*****************************************************************************!*\
  !*** ./ui/features/conversations/backbone/collections/MessageCollection.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MessageCollection; });\n/* harmony import */ var _canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/pagination/backbone/collections/PaginatedCollection.coffee */ \"TnsN\");\n/* harmony import */ var _models_Message_coffee__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/Message.coffee */ \"blrE\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\nclass MessageCollection extends _canvas_pagination_backbone_collections_PaginatedCollection_coffee__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  comparator(a, b) {\n    const dates = [a, b].map(message => message.timestamp().getTime());\n\n    if (dates[0] > dates[1]) {\n      return -1;\n    }\n\n    if (dates[1] > dates[0]) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  selectRange(model) {\n    const newPos = this.indexOf(model);\n    const lastSelected = this.view.selectedMessages[this.view.selectedMessages.length - 1];\n    this.each(x => x.set('selected', false));\n    const lastPos = this.indexOf(lastSelected);\n    const range = this.slice(Math.min(newPos, lastPos), Math.max(newPos, lastPos) + 1); // the anchor needs to stay at the end\n\n    if (newPos > lastPos) {\n      range.reverse();\n    }\n\n    return range.forEach(x => x.set('selected', true));\n  }\n\n}\nMessageCollection.prototype.model = _models_Message_coffee__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\nMessageCollection.prototype.url = '/api/v1/conversations';\nMessageCollection.prototype.params = {\n  scope: 'inbox'\n};\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/collections/MessageCollection.js?");

/***/ }),

/***/ "ls3Z":
/*!**************************************************************!*\
  !*** ./ui/features/conversations/jst/messageItem.handlebars ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_message_item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.message_item */ \"ODF5\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/messageItem';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"\\n<div class=\\\"message-info\\\">\\n  <div class=\\\"user-info\\\">\\n\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n<div class=\\\"row-fluid message-info\\\">\\n  <div class=\\\"span8 user-info\\\">\\n\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <i>(\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.author)),stack1 == null || stack1 === false ? stack1 : stack1.pronouns)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \")</i> \";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \",\";\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n              <span>\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.pronouns), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span>\\n            \";\n  return buffer;\n  }\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \" <i>(\";\n  if (helper = helpers.pronouns) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.pronouns); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")</i>\";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  \n  return \"\\n          <a href=\\\"#\\\" class=\\\"message-participants-toggle\\\"></a>\\n        \";\n  }\n\nfunction program14(depth0,data) {\n  \n  \n  return \"\\n  <div class=\\\"message-metadata clearfix\\\">\\n    <div class=\\\"date\\\">\\n  \";\n  }\n\nfunction program16(depth0,data) {\n  \n  \n  return \"\\n  <div class=\\\"span4 message-metadata\\\">\\n    <div class=\\\"date pull-right\\\">\\n  \";\n  }\n\nfunction program18(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.responsive_awareness), {hash:{},inverse:self.program(21, program21, data),fn:self.program(19, program19, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.cannot_reply), {hash:{},inverse:self.noop,fn:self.program(23, program23, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n      <li>\\n        <div class=\\\"inline-block\\\">\\n          <a href=\\\"#\\\"\\n             data-kyle-menu-options='{\\\"appendMenuTo\\\": \\\"body\\\"}'\\n             role=\\\"button\\\"\\n             class=\\\"al-trigger Button Button--icon-action\\\"\\n             title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_item\")\n  },data:data},helper ? helper.call(depth0, \"more_options\", \"More options\", options) : helperMissing.call(depth0, \"t\", \"more_options\", \"More options\", options)))\n    + \"\\\"\\n             data-tooltip>\\n            <i class=\\\"icon-settings\\\"></i>\\n            <i class=\\\"icon-mini-arrow-down\\\"></i>\\n            <span class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'text': ((depth0 && depth0.text)),\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"message_actions_for_text_27eead86\", \"Message actions for %{text}\", options) : helperMissing.call(depth0, \"t\", \"message_actions_for_text_27eead86\", \"Message actions for %{text}\", options)))\n    + \"</span>\\n          </a>\\n          <ul class=\\\"al-options\\\">\\n            \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.cannot_reply), {hash:{},inverse:self.noop,fn:self.program(25, program25, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            <li>\\n              <a href=\\\"#\\\" class=\\\"forward-btn\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_item\")\n  },data:data},helper ? helper.call(depth0, \"forward\", \"Forward\", options) : helperMissing.call(depth0, \"t\", \"forward\", \"Forward\", options)))\n    + \"</a>\\n            </li>\\n            <li>\\n              <a href=\\\"#\\\" class=\\\"delete-btn\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_item\")\n  },data:data},helper ? helper.call(depth0, \"delete\", \"Delete\", options) : helperMissing.call(depth0, \"t\", \"delete\", \"Delete\", options)))\n    + \"</a>\\n            </li>\\n          </ul>\\n        </div>\\n      </li>\\n    </ul>\\n    \";\n  return buffer;\n  }\nfunction program19(depth0,data) {\n  \n  \n  return \"\\n    <ul class=\\\"actions unstyled\\\">\\n    \";\n  }\n\nfunction program21(depth0,data) {\n  \n  \n  return \"\\n    <ul class=\\\"actions pull-right unstyled\\\">\\n    \";\n  }\n\nfunction program23(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n      <li>\\n        <a href=\\\"#\\\"\\n           class=\\\"icon-reply-2 reply-btn Button Button--icon-action\\\"\\n           title=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"reply_389d6fb9\", \"Reply\", options) : helperMissing.call(depth0, \"t\", \"reply_389d6fb9\", \"Reply\", options)))\n    + \"\\\"\\n           data-tooltip>\\n          <span class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'text': ((depth0 && depth0.text)),\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"reply_to_conversation_text_cd45c48f\", \"Reply to conversation %{text}\", options) : helperMissing.call(depth0, \"t\", \"reply_to_conversation_text_cd45c48f\", \"Reply to conversation %{text}\", options)))\n    + \"</span>\\n        </a>\\n      </li>\\n      \";\n  return buffer;\n  }\n\nfunction program25(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n              <li>\\n                <a href=\\\"#\\\" class=\\\"reply-all-btn\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.message_item\")\n  },data:data},helper ? helper.call(depth0, \"reply_all\", \"Reply all\", options) : helperMissing.call(depth0, \"t\", \"reply_all\", \"Reply all\", options)))\n    + \"</a>\\n              </li>\\n            \";\n  return buffer;\n  }\n\nfunction program27(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n<ul class=\\\"message-attachments\\\">\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.media_comment), {hash:{},inverse:self.noop,fn:self.program(28, program28, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.attachments), {hash:{},inverse:self.noop,fn:self.program(30, program30, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</ul>\\n\";\n  return buffer;\n  }\nfunction program28(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <li><a class=\\\"instructure_inline_media_comment\\\" data-media_comment_id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.media_comment)),stack1 == null || stack1 === false ? stack1 : stack1.media_id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" href=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.media_comment)),stack1 == null || stack1 === false ? stack1 : stack1.url)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n      <i class=\\\"icon-media\\\"></i> \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.media_comment)),stack1 == null || stack1 === false ? stack1 : stack1.display_name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\n    </a></li>\\n  \";\n  return buffer;\n  }\n\nfunction program30(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <li>\\n      \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.locked_for_user), {hash:{},inverse:self.program(33, program33, data),fn:self.program(31, program31, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </li>\\n  \";\n  return buffer;\n  }\nfunction program31(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        <i class=\\\"icon-paperclip\\\"></i>\\n        \";\n  if (helper = helpers.display_name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.display_name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n        <br><em>\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"this_attachment_has_been_unpublished_by_the_author_37bff9c3\", \"This attachment has been unpublished by the author.\", options) : helperMissing.call(depth0, \"t\", \"this_attachment_has_been_unpublished_by_the_author_37bff9c3\", \"This attachment has been unpublished by the author.\", options)))\n    + \"</em>\\n      \";\n  return buffer;\n  }\n\nfunction program33(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n        <a href=\\\"\";\n  if (helper = helpers.url) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.url); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n          <i class=\\\"icon-paperclip\\\"></i>\\n          \";\n  if (helper = helpers.display_name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.display_name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n        </a>\\n      \";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.responsive_awareness), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div id=\";\n  if (helper = helpers.avatarContainerId) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.avatarContainerId); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" class=\\\"fs-exclude avatar\\\"></div>\\n    <div class=\\\"message-author-and-participants\\\">\\n      <b class=\\\"username\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.author)),stack1 == null || stack1 === false ? stack1 : stack1.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.author)),stack1 == null || stack1 === false ? stack1 : stack1.pronouns), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</b>\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.participants)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n      <span class=\\\"message-participants-wrapper\\\">\\n        <span class=\\\"message-participants\\\" aria-live=\\\"polite\\\"></span>\\n        <div class=\\\"hidden\\\">\\n          <span class=\\\"summarized-message-participants\\\">\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.summarizedParticipantNames), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"...\\n          </span>\\n          <span class=\\\"full-message-participants\\\">\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.participantNames), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n          </span>\\n        </div>\\n\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.summarizedParticipantNames), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </span>\\n\\n      <span class=\\\"context\\\">\";\n  if (helper = helpers.context_name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.context_name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n\\n    </div>\\n  </div>\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.responsive_awareness), {hash:{},inverse:self.program(16, program16, data),fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t\t\t\"\n    + escapeExpression((helper = helpers.tEventToString || (depth0 && depth0.tEventToString),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.created_at), \"long\", \"tiny\", options) : helperMissing.call(depth0, \"tEventToString\", (depth0 && depth0.created_at), \"long\", \"tiny\", options)))\n    + \"\\n\t\t</div>\\n\\n    \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.for_submission), {hash:{},inverse:self.noop,fn:self.program(18, program18, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t</div>\\n</div>\\n\\n<p>\";\n  if (helper = helpers.bodyHTML) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.bodyHTML); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</p>\\n\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.has_attachments), {hash:{},inverse:self.noop,fn:self.program(27, program27, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/messageItem.handlebars?");

/***/ }),

/***/ "mD3o":
/*!******************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations!./ui/shims/dummyI18nResource.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations");

/***/ }),

/***/ "oJCR":
/*!****************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/SearchView.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SearchView; });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _AutocompleteView__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AutocompleteView */ \"T7C4\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\nclass SearchView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__[\"View\"] {\n  static initClass() {\n    this.prototype.els = {\n      '#search-autocomplete': '$autocomplete'\n    };\n  }\n\n  initialize() {\n    super.initialize(...arguments);\n    this.render();\n    this.autocompleteView = new _AutocompleteView__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n      el: this.$autocomplete,\n      single: true,\n      excludeAll: true\n    }).render();\n    return this.autocompleteView.on('changeToken', this.onSearch, this);\n  }\n\n  onSearch(tokens) {\n    return this.trigger('search', underscore__WEBPACK_IMPORTED_MODULE_0___default.a.map(tokens, x => `user_${x}`));\n  }\n\n}\nSearchView.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/SearchView.js?");

/***/ }),

/***/ "oaNm":
/*!***************************************************************!*\
  !*** ./ui/features/conversations/jst/_groupOption.handlebars ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/-groupOption';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n  \\n  aria-label=\\\"\"\n    + escapeExpression((helper = helpers.escape_html || (depth0 && depth0.escape_html),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.name), options) : helperMissing.call(depth0, \"escape_html\", (depth0 && depth0.name), options)))\n    + \"\\\" data-content=\\\"<abbr class='text' data-value='\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' title='\"\n    + escapeExpression((helper = helpers.escape_html || (depth0 && depth0.escape_html),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.name), options) : helperMissing.call(depth0, \"escape_html\", (depth0 && depth0.name), options)))\n    + \"'>\"\n    + escapeExpression((helper = helpers.escape_html || (depth0 && depth0.escape_html),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.truncated_name), options) : helperMissing.call(depth0, \"escape_html\", (depth0 && depth0.truncated_name), options)))\n    + \"</abbr>\\\"\\n  >\\n  \";\n  if (helper = helpers.truncated_name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.truncated_name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n  >\\n  \";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n\";\n  return buffer;\n  }\n\n  buffer += \"<option value=\\\"group_\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.truncated_name), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</option>\\n\";\n  return buffer;\n  });\n    \n      Handlebars.registerPartial('ui/features/conversations/jst/_groupOption.handlebars', templates['/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/-groupOption']);\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/_groupOption.handlebars?");

/***/ }),

/***/ "obig":
/*!******************************************************************************!*\
  !*** ./ui/features/conversations/jst/SubmissionCommentFormDialog.handlebars ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_submission_comment_form_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.submission_comment_form_dialog */ \"CQFS\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/SubmissionCommentFormDialog';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<form class=\\\"reply_form\\\" method=\\\"post\\\"\\n  action=\\\"/api/v1/courses/\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.conversation)),stack1 == null || stack1 === false ? stack1 : stack1.assignment)),stack1 == null || stack1 === false ? stack1 : stack1.course_id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"/assignments/\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.conversation)),stack1 == null || stack1 === false ? stack1 : stack1.assignment_id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"/submissions/\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.conversation)),stack1 == null || stack1 === false ? stack1 : stack1.user_id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"form-horizontal\\\"\\n  >\\n\\n  <input type=\\\"hidden\\\" name=\\\"_method\\\" value=\\\"put\\\">\\n\\n  <div class='message-body'>\\n    <textarea name=\\\"comment[text_comment]\\\"\\n              data-track-category=\\\"Compose Message\\\"\\n              data-track-action=\\\"Edit\\\"\\n              data-track-label=\\\"Body\\\"\\n              aria-label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"conversations.submission_comment_form_dialog\")\n  },data:data},helper ? helper.call(depth0, \"body\", \"Body\", options) : helperMissing.call(depth0, \"t\", \"body\", \"Body\", options)))\n    + \"\\\"\\n              class=\\\"reply_body\\\"></textarea>\\n    <div class='context_messages'></div>\\n  </div>\\n</form>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/SubmissionCommentFormDialog.handlebars?");

/***/ }),

/***/ "plYi":
/*!**************************************!*\
  !*** ./ui/shared/util/natcompare.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n//\n// Copyright (C) 2014 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  strings(x, y) {\n    let locale = _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"default\"].locale || 'en-US';\n    const locale_map = {\n      zh_Hant: 'zh-Hant'\n    };\n    locale = locale_map[locale] || locale; // if you change these settings, also match the settings in best_unicode_collation_key\n    // and Canvas::ICU.collator\n\n    return x.localeCompare(y, locale, {\n      sensitivity: 'variant',\n      ignorePunctuation: false,\n      numeric: true\n    });\n  },\n\n  by(f) {\n    return (x, y) => this.strings(f(x), f(y));\n  },\n\n  byKey(key) {\n    return this.by(x => x[key]);\n  },\n\n  byGet(key) {\n    return this.by(x => x.get(key));\n  }\n\n});\n\n//# sourceURL=webpack:///./ui/shared/util/natcompare.js?");

/***/ }),

/***/ "qbUT":
/*!*************************************************!*\
  !*** ./packages/query-string-encoding/index.js ***!
  \*************************************************/
/*! exports provided: encodeQueryString, decodeQueryString */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"encodeQueryString\", function() { return encodeQueryString; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decodeQueryString\", function() { return decodeQueryString; });\n/*\n * Copyright (C) 2017 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nfunction encodeQueryString(params) {\n  return params\n    .map(param => {\n      const key = Object.keys(param)[0]\n      const value = param[key]\n      return value !== null ? `${key}=${value}` : null\n    })\n    .filter(Boolean)\n    .join('&')\n}\n\nfunction decodeQueryString(string) {\n  return string\n    .split('&')\n    .map(pair => pair.split('='))\n    .map(([key, value]) => ({[key]: value}))\n}\n\n\n//# sourceURL=webpack:///./packages/query-string-encoding/index.js?");

/***/ }),

/***/ "sXQ3":
/*!****************************************************************!*\
  !*** ./ui/features/conversations/jst/_courseOption.handlebars ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/-courseOption';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n  \\n  aria-label=\\\"\"\n    + escapeExpression((helper = helpers.escape_html || (depth0 && depth0.escape_html),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.name), options) : helperMissing.call(depth0, \"escape_html\", (depth0 && depth0.name), options)))\n    + \"\\\" data-content=\\\"<abbr class='text' data-value='\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' title='\"\n    + escapeExpression((helper = helpers.escape_html || (depth0 && depth0.escape_html),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.name), options) : helperMissing.call(depth0, \"escape_html\", (depth0 && depth0.name), options)))\n    + \"'>\"\n    + escapeExpression((helper = helpers.escape_html || (depth0 && depth0.escape_html),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.truncated_name), options) : helperMissing.call(depth0, \"escape_html\", (depth0 && depth0.truncated_name), options)))\n    + \"</abbr>\\\"\\n  >\\n  \";\n  if (helper = helpers.truncated_name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.truncated_name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n  >\\n  \";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n\";\n  return buffer;\n  }\n\n  buffer += \"<option value=\\\"course_\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-code=\\\"\";\n  if (helper = helpers.course_code) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.course_code); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.truncated_name), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</option>\\n\";\n  return buffer;\n  });\n    \n      Handlebars.registerPartial('ui/features/conversations/jst/_courseOption.handlebars', templates['/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/-courseOption']);\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/_courseOption.handlebars?");

/***/ }),

/***/ "saHx":
/*!*********************************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/SubmissionCommentFormDialog.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SubmissionCommentFormDialog; });\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"VTBJ\");\n/* harmony import */ var i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversation_dialog */ \"uOh4\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _canvas_dialog_base_view__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/dialog-base-view */ \"KIYd\");\n/* harmony import */ var _jst_SubmissionCommentFormDialog_handlebars__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../jst/SubmissionCommentFormDialog.handlebars */ \"obig\");\n/* harmony import */ var _jst_composeTitleBar_handlebars__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../jst/composeTitleBar.handlebars */ \"9GAG\");\n/* harmony import */ var _models_Message_coffee__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../models/Message.coffee */ \"blrE\");\n/* harmony import */ var jquery_elastic__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jquery.elastic */ \"H/mi\");\n/* harmony import */ var jquery_elastic__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jquery_elastic__WEBPACK_IMPORTED_MODULE_8__);\n\n//\n// Copyright (C) 2014 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n//\n\n\n\n\n\n\n\n // #\n// reusable message composition dialog\n\nclass SubmissionCommentFormDialog extends _canvas_dialog_base_view__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n  static initClass() {\n    this.prototype.template = _jst_SubmissionCommentFormDialog_handlebars__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n    this.prototype.els = {\n      '.message-body': '$messageBody',\n      '.reply_body': '$replyBody',\n      '.reply_form': '$form'\n    };\n    this.prototype.messages = {\n      flashSuccess: i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('message_sent', 'Message sent!')\n    };\n  }\n\n  dialogOptions() {\n    return {\n      title: '',\n      id: 'submission-comment-reply',\n      autoOpen: false,\n      minWidth: 400,\n      width: 650,\n      minHeight: 350,\n      height: 400,\n      resizable: true,\n      // Event handler for catching when the dialog is closed.\n      // Overridding @close() or @cancel() doesn't work alone since\n      // hitting ESC doesn't trigger either of those events.\n      close: () => this.afterClose(),\n      resize: () => {\n        this.resizeBody();\n        return this._limitContentSize();\n      },\n      buttons: [{\n        text: i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('#buttons.cancel', 'Cancel'),\n        click: this.cancel\n      }, {\n        text: i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('#buttons.send', 'Send'),\n        class: 'btn-primary send-message',\n        'data-track-category': 'Compose Message',\n        'data-track-action': 'Edit',\n        'data-track-label': 'Send',\n        click: e => this.sendMessage(e)\n      }]\n    };\n  }\n\n  show(model, options) {\n    this.model = model;\n    this.dialog.dialog('option', 'title', this.model.get('subject'));\n    if (options.trigger) this.returnFocusTo = options.trigger;\n    this.render();\n    super.show(...arguments);\n    this.initializeForm();\n    return this.resizeBody();\n  } // this method handles a layout bug with jqueryUI that occurs when you\n  // attempt to resize the modal beyond the viewport.\n\n\n  _limitContentSize() {\n    if (this.$el.width() > this.$fullDialog.width()) return this.$el.width('100%');\n  } // #\n  // detach events that were dynamically added when the dialog is closed.\n\n\n  afterClose() {\n    this.$fullDialog.off('click', '.message-body');\n    this.trigger('close');\n\n    if (this.returnFocusTo) {\n      this.returnFocusTo.focus();\n      return delete this.returnFocusTo;\n    }\n  }\n\n  sendMessage(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    return this.$form.submit();\n  }\n\n  initialize() {\n    super.initialize(...arguments);\n    this.$fullDialog = this.$el.closest('.ui-dialog'); // Customize titlebar\n\n    const $titlebar = this.$fullDialog.find('.ui-dialog-titlebar');\n    const $closeBtn = $titlebar.find('.ui-dialog-titlebar-close');\n    $closeBtn.html(Object(_jst_composeTitleBar_handlebars__WEBPACK_IMPORTED_MODULE_6__[\"default\"])()); // add custom class to dialog container for\n\n    return this.$fullDialog.addClass('submission-comment-reply-dialog');\n  }\n\n  prepareTextarea($scope) {\n    const $textArea = $scope.find('textarea');\n    return $textArea.elastic();\n  }\n\n  initializeForm() {\n    this.prepareTextarea(this.$el);\n    this.$fullDialog.on('click', '.message-body', e => this.handleBodyClick(e));\n    return this.$form.formSubmit({\n      intent: 'message',\n      formDataTarget: 'url',\n      disableWhileLoading: true,\n      required: ['comment[text_comment]'],\n      onSubmit: (request, submitData) => {\n        // close dialog after submitting the message\n        this.request = request;\n        const dfd = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.Deferred();\n        this.trigger('submitting', dfd);\n        this.close();\n        jquery__WEBPACK_IMPORTED_MODULE_2___default.a.when(this.request).then(response => {\n          dfd.resolve();\n          jquery__WEBPACK_IMPORTED_MODULE_2___default.a.flashMessage(this.messages.flashSuccess);\n          const message = new _models_Message_coffee__WEBPACK_IMPORTED_MODULE_7__[\"default\"](Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, this.model.attributes), {}, {\n            submission_comments: response.submission_comments\n          }), {\n            parse: true\n          });\n          return this.trigger('addMessage', message.get('messages')[0], response);\n        });\n        return jquery__WEBPACK_IMPORTED_MODULE_2___default.a.when(this.request).fail(() => dfd.reject());\n      }\n    });\n  }\n\n  resizeBody() {\n    // Compute desired height of body\n    return this.$messageBody.height(this.$el.offset().top + this.$el.height() - this.$messageBody.offset().top);\n  }\n\n  handleBodyClick(e) {\n    if (e.target === e.currentTarget) return this.$replyBody.focus();\n  }\n\n}\nSubmissionCommentFormDialog.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/SubmissionCommentFormDialog.js?");

/***/ }),

/***/ "thpG":
/*!********************************************************************!*\
  !*** ./ui/features/conversations/jst/autocompleteToken.handlebars ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_conversations_autocomplete_token__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!conversations.autocomplete_token */ \"SN0J\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/features/conversations/jst/autocompleteToken';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<li class=\\\"ac-token\\\">\\n  \";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n\\n  <a href=\\\"#\\\"\\n     class=\\\"ac-token-remove-btn\\\">\\n    <i class=\\\"icon-x icon-messageRecipient--cancel\\\"></i>\\n    <span class=\\\"screenreader-only\\\">\\n      \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'name': ((depth0 && depth0.name)),\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"remove_recipient_name_a6b83cef\", \"Remove recipient %{name}\", options) : helperMissing.call(depth0, \"t\", \"remove_recipient_name_a6b83cef\", \"Remove recipient %{name}\", options)))\n    + \"\\n    </span>\\n  </a>\\n\\n\\n  <input type=\\\"hidden\\\"\\n         name=\\\"recipients[]\\\"\\n         value=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n</li>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/conversations/jst/autocompleteToken.handlebars?");

/***/ }),

/***/ "uOh4":
/*!************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversation_dialog!./ui/shims/dummyI18nResource.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversation_dialog'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversation_dialog");

/***/ }),

/***/ "uZYt":
/*!**************************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.message_form_dialog!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.message_form_dialog'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.message_form_dialog");

/***/ }),

/***/ "warL":
/*!***********************************************************************!*\
  !*** ./ui/features/conversations/backbone/views/MessageFormDialog.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MessageFormDialog; });\n/* harmony import */ var i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!conversation_dialog */ \"uOh4\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _canvas_dialog_base_view__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/dialog-base-view */ \"KIYd\");\n/* harmony import */ var _jst_MessageFormDialog_handlebars__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../jst/MessageFormDialog.handlebars */ \"8ZhW\");\n/* harmony import */ var prevent_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! prevent-default */ \"qqwe\");\n/* harmony import */ var _jst_composeTitleBar_handlebars__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../jst/composeTitleBar.handlebars */ \"9GAG\");\n/* harmony import */ var _jst_composeButtonBar_handlebars__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../jst/composeButtonBar.handlebars */ \"QnQE\");\n/* harmony import */ var _jst_addAttachment_handlebars__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../jst/addAttachment.handlebars */ \"cQqb\");\n/* harmony import */ var _models_Message_coffee__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../models/Message.coffee */ \"blrE\");\n/* harmony import */ var _AutocompleteView__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./AutocompleteView */ \"T7C4\");\n/* harmony import */ var _CourseSelectionView__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./CourseSelectionView */ \"90NG\");\n/* harmony import */ var _ContextMessagesView__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ContextMessagesView */ \"Hm21\");\n/* harmony import */ var jquery_elastic__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jquery.elastic */ \"H/mi\");\n/* harmony import */ var jquery_elastic__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(jquery_elastic__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _canvas_forms_jquery_jquery_instructure_forms_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @canvas/forms/jquery/jquery.instructure_forms.js */ \"Dhso\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n//\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // #\n// reusable message composition dialog\n\nclass MessageFormDialog extends _canvas_dialog_base_view__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n  static initClass() {\n    this.prototype.template = _jst_MessageFormDialog_handlebars__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n    this.prototype.els = {\n      '.message_course': '$messageCourse',\n      '.message_course_ro': '$messageCourseRO',\n      'input[name=context_code]': '$contextCode',\n      '.message_subject': '$messageSubject',\n      '.message_subject_ro': '$messageSubjectRO',\n      '.context_messages': '$contextMessages',\n      '.media_comment': '$mediaComment',\n      'input[name=media_comment_id]': '$mediaCommentId',\n      'input[name=media_comment_type]': '$mediaCommentType',\n      '#bulk_message': '$bulkMessage',\n      '.ac': '$recipients',\n      '.attachment_list': '$attachments',\n      '.attachments-pane': '$attachmentsPane',\n      '.message-body': '$messageBody',\n      '.conversation_body': '$conversationBody',\n      '.compose_form': '$form',\n      '.user_note': '$userNote',\n      '.user_note_info': '$userNoteInfo'\n    };\n    this.prototype.messages = {\n      flashSuccess: i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('message_sent', 'Message sent!')\n    };\n    this.prototype.defaultCourse = null;\n    this.prototype.imageTypes = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'];\n  }\n\n  dialogOptions() {\n    var _window$ENV, _window$ENV$FEATURES;\n\n    const responsive_awareness = !!((_window$ENV = window.ENV) !== null && _window$ENV !== void 0 && (_window$ENV$FEATURES = _window$ENV.FEATURES) !== null && _window$ENV$FEATURES !== void 0 && _window$ENV$FEATURES.responsive_awareness);\n    const smallTablet = window.matchMedia('(min-width: 550px)').matches;\n    const tablet = window.matchMedia('(min-width: 700px)').matches;\n    const responsiveMinWidth = smallTablet ? 550 : 320;\n    const responsiveWidth = tablet ? 700 : smallTablet ? 550 : 320;\n    const responsiveHeight = smallTablet ? 550 : 'auto';\n    return {\n      id: 'compose-new-message',\n      autoOpen: false,\n      minWidth: responsive_awareness ? responsiveMinWidth : 550,\n      width: responsive_awareness ? responsiveWidth : 700,\n      minHeight: 500,\n      height: responsive_awareness ? responsiveHeight : 550,\n      resizable: true,\n      title: i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Compose Message'),\n      // Event handler for catching when the dialog is closed.\n      // Overridding @close() or @cancel() doesn't work alone since\n      // hitting ESC doesn't trigger either of those events.\n      close: () => this.afterClose(),\n      resize: () => {\n        this.resizeBody();\n        return this._limitContentSize();\n      },\n      buttons: [{\n        text: i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('#buttons.cancel', 'Cancel'),\n        click: this.cancel\n      }, {\n        text: i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('#buttons.send', 'Send'),\n        class: 'btn-primary send-message',\n        'data-track-category': 'Compose Message',\n        'data-track-action': 'Edit',\n        'data-track-label': 'Send',\n        'data-text-while-loading': i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Sending...'),\n        click: e => this.sendMessage(e)\n      }]\n    };\n  }\n\n  show(model, options) {\n    if (this.model = model) {\n      this.message = (options != null ? options.message : void 0) || this.model.messageCollection.at(0);\n    }\n\n    this.to = options != null ? options.to : void 0;\n\n    if (options.trigger) {\n      this.returnFocusTo = options.trigger;\n    }\n\n    if (options.remoteLaunch) {\n      this.launchParams = underscore__WEBPACK_IMPORTED_MODULE_2___default.a.pick(options, 'context', 'user');\n    }\n\n    this.render();\n    this.appendAddAttachmentTemplate();\n    super.show(...arguments);\n    this.initializeForm();\n    return this.resizeBody();\n  } // this method handles a layout bug with jqueryUI that occurs when you\n  // attempt to resize the modal beyond the viewport.\n\n\n  _limitContentSize() {\n    if (this.$el.width() > this.$fullDialog.width()) {\n      return this.$el.width('100%');\n    }\n  } // #\n  // detach events that were dynamically added when the dialog is closed.\n\n\n  afterClose() {\n    this.$fullDialog.off('click', '.message-body');\n    this.$fullDialog.off('click', '.attach-file');\n    this.$fullDialog.off('click', '.attachment .remove_link');\n    this.$fullDialog.off('keydown', '.attachment');\n    this.$fullDialog.off('click', '.attachment');\n    this.$fullDialog.off('dblclick', '.attachment');\n    this.$fullDialog.off('change', '.file_input');\n    this.$fullDialog.off('click', '.attach-media');\n    this.$fullDialog.off('click', '.media-comment .remove_link');\n    this.launchParams = null;\n    this.trigger('close');\n\n    if (this.returnFocusTo) {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()(this.returnFocusTo).focus();\n      return delete this.returnFocusTo;\n    }\n  }\n\n  sendMessage(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.removeEmptyAttachments();\n    return this.$form.submit();\n  }\n\n  initialize() {\n    super.initialize(...arguments);\n    this.$fullDialog = this.$el.closest('.ui-dialog'); // Customize titlebar\n\n    const $titlebar = this.$fullDialog.find('.ui-dialog-titlebar');\n    const $closeBtn = $titlebar.find('.ui-dialog-titlebar-close');\n    $closeBtn.html(Object(_jst_composeTitleBar_handlebars__WEBPACK_IMPORTED_MODULE_7__[\"default\"])()); // add custom class to dialog container for\n\n    this.$fullDialog.addClass('compose-message-dialog'); // add attachment and media buttons to bottom bar\n\n    this.$fullDialog.find('.ui-dialog-buttonpane').prepend(Object(_jst_composeButtonBar_handlebars__WEBPACK_IMPORTED_MODULE_8__[\"default\"])({}));\n    return this.$addMediaComment = this.$fullDialog.find('.attach-media');\n  }\n\n  prepareTextarea($scope) {\n    const $textArea = $scope.find('textarea');\n    return $textArea.elastic();\n  }\n\n  onCourse(course) {\n    this.recipientView.setContext(course, true);\n\n    if (course != null ? course.id : void 0) {\n      this.$contextCode.val(course.id);\n      this.recipientView.disable(false);\n    } else {\n      this.$contextCode.val('');\n    }\n\n    return this.$messageCourseRO.text(course ? course.name : i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('no_course', 'No course'));\n  }\n\n  setDefaultCourse(course) {\n    return this.defaultCourse = course;\n  }\n\n  initializeForm() {\n    let messages, tokens;\n    this.prepareTextarea(this.$el);\n    this.recipientView = new _AutocompleteView__WEBPACK_IMPORTED_MODULE_11__[\"default\"]({\n      el: this.$recipients,\n      disabled: this.model != null ? this.model.get('private') : void 0\n    }).render();\n    this.recipientView.on('changeToken', this.recipientIdsChanged, this);\n    this.recipientView.on('recipientTotalChange', this.recipientTotalChanged, this);\n\n    if (!ENV.CONVERSATIONS.CAN_MESSAGE_ACCOUNT_CONTEXT) {\n      this.$messageCourse.attr('aria-required', true);\n      this.recipientView.disable(true);\n    }\n\n    this.$messageCourse.prop('disabled', !!this.model);\n    this.courseView = new _CourseSelectionView__WEBPACK_IMPORTED_MODULE_12__[\"default\"]({\n      el: this.$messageCourse,\n      courses: this.options.courses,\n      defaultOption: i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('select_course', 'Select course'),\n      messageableOnly: true,\n      excludeConcluded: true\n    });\n\n    if (this.model) {\n      if (this.model.get('context_code')) {\n        this.onCourse({\n          id: this.model.get('context_code'),\n          name: this.model.get('context_name')\n        });\n      } else {\n        this.courseView.on('course', c => this.onCourse(c));\n        this.courseView.setValue(`course_${underscore__WEBPACK_IMPORTED_MODULE_2___default.a.keys(this.model.get('audience_contexts').courses)[0]}`);\n      }\n\n      this.recipientView.disable(false);\n    } else if (this.launchParams) {\n      this.courseView.on('course', c => this.onCourse(c));\n\n      if (this.launchParams.context) {\n        this.courseView.setValue(this.launchParams.context);\n      }\n\n      this.recipientView.disable(false);\n    } else {\n      this.courseView.on('course', c => this.onCourse(c));\n      this.courseView.setValue(this.defaultCourse);\n    }\n\n    if (this.model) {\n      this.courseView.$picker.css('display', 'none');\n    } else {\n      this.$messageCourseRO.css('display', 'none');\n    }\n\n    if (this.tokenInput = this.$el.find('.recipients').data('token_input')) {\n      // since it doesn't infer percentage widths, just whatever the current pixels are\n      this.tokenInput.$fakeInput.css('width', '100%');\n\n      if (this.options.user_id) {\n        const query = {\n          user_id: this.options.user_id,\n          from_conversation_id: this.options.from_conversation_id\n        };\n        jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(this.tokenInput.selector.url, 'GET', query, data => {\n          if (data.length) {\n            return this.tokenInput.addToken({\n              value: data[0].id,\n              text: data[0].name,\n              data: data[0]\n            });\n          }\n        });\n      }\n    }\n\n    if (this.to && this.to !== 'forward' && this.message) {\n      tokens = [];\n      tokens.push(this.message.get('author'));\n\n      if (this.to === 'replyAll' || ENV.current_user_id === this.message.get('author').id) {\n        tokens = tokens.concat(this.message.get('participants'));\n\n        if (tokens.length > 1) {\n          tokens = underscore__WEBPACK_IMPORTED_MODULE_2___default.a.filter(tokens, t => t.id !== ENV.current_user_id);\n        }\n      }\n\n      this.recipientView.setTokens(tokens);\n    }\n\n    if (this.launchParams) {\n      this.recipientView.setTokens([this.launchParams.user]);\n    }\n\n    if (this.model) {\n      this.$messageSubject.css('display', 'none');\n      this.$messageSubject.prop('disabled', true);\n    } else {\n      this.$messageSubjectRO.css('display', 'none');\n    }\n\n    if (this.model != null ? this.model.get('subject') : void 0) {\n      this.$messageSubject.val(this.model.get('subject'));\n      this.$messageSubjectRO.text(this.model.get('subject'));\n    }\n\n    if (messages = this.model != null ? this.model.messageCollection : void 0) {\n      // include only messages which\n      //   1) are older than @message\n      //   2) have as participants a superset of the participants of @message\n      const date = new Date(this.message.get('created_at'));\n      const participants = this.message.get('participating_user_ids');\n      const includedMessages = new _canvas_backbone__WEBPACK_IMPORTED_MODULE_3__[\"Collection\"](messages.filter(m => new Date(m.get('created_at')) <= date && !underscore__WEBPACK_IMPORTED_MODULE_2___default.a.find(participants, p => !underscore__WEBPACK_IMPORTED_MODULE_2___default.a.includes(m.get('participating_user_ids'), p))));\n      const contextView = new _ContextMessagesView__WEBPACK_IMPORTED_MODULE_13__[\"default\"]({\n        el: this.$contextMessages,\n        collection: includedMessages\n      });\n      contextView.render();\n    }\n\n    this.$fullDialog.on('click', '.message-body', e => this.handleBodyClick(e));\n    this.$fullDialog.on('click', '.attach-file', () => this.addAttachment());\n    this.$fullDialog.on('click', '.attachment .remove_link', Object(prevent_default__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(e => this.removeAttachment(jquery__WEBPACK_IMPORTED_MODULE_1___default()(e.currentTarget))));\n    this.$fullDialog.on('keydown', '.attachment', e => this.handleAttachmentKeyDown(e));\n    this.$fullDialog.on('click', '.attachment', e => this.handleAttachmentClick(e));\n    this.$fullDialog.on('dblclick', '.attachment', e => this.handleAttachmentDblClick(e));\n    this.$fullDialog.on('change', '.file_input', e => this.handleAttachment(e));\n    this.$fullDialog.on('click', '.attach-media', Object(prevent_default__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(() => this.addMediaComment()));\n    this.$fullDialog.on('click', '.media_comment .remove_link', Object(prevent_default__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(e => this.removeMediaComment(jquery__WEBPACK_IMPORTED_MODULE_1___default()(e.currentTarget))));\n    this.$addMediaComment[INST.kalturaSettings ? 'show' : 'hide']();\n    return this.$form.formSubmit({\n      fileUpload: () => this.$fullDialog.find('.attachment_list').length > 0,\n      files: () => this.$fullDialog.find('.file_input'),\n      preparedFileUpload: true,\n      context_code: `user_${ENV.current_user_id}`,\n      folder_id: this.options.folderId,\n      intent: 'message',\n      formDataTarget: 'url',\n      required: ['body'],\n      property_validations: {\n        token_capture: () => {\n          if (this.recipientView && !this.recipientView.tokens.length) {\n            return i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Invalid recipient name.');\n          }\n        }\n      },\n\n      handle_files(attachments, data) {\n        data.attachment_ids = attachments.map(a => a.id);\n        return data;\n      },\n\n      processData: formData => {\n        if (!formData.context_code) {\n          formData.context_code = (this.launchParams != null ? this.launchParams.context : void 0) || this.options.account_context_code;\n        }\n\n        return formData;\n      },\n      onSubmit: (request, submitData) => {\n        this.request = request;\n        const dfd = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.Deferred();\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()(this.el).parent().disableWhileLoading(dfd, {\n          buttons: ['[data-text-while-loading] .ui-button-text']\n        });\n        this.trigger('submitting', dfd); // update conversation when message confirmed sent\n        // TODO: construct the new message object and pass it to the MessageDetailView which will need to create a MessageItemView for it\n        // store @to for the closure in case there are multiple outstanding send requests\n\n        const localTo = this.to;\n        this.to = null;\n        jquery__WEBPACK_IMPORTED_MODULE_1___default.a.when(this.request).then(response => {\n          dfd.resolve();\n          jquery__WEBPACK_IMPORTED_MODULE_1___default.a.flashMessage(this.messages.flashSuccess);\n\n          if (localTo) {\n            let message = response.messages[0];\n            message.author = {\n              name: ENV.current_user.display_name,\n              avatar_url: ENV.current_user.avatar_image_url\n            };\n            message = new _models_Message_coffee__WEBPACK_IMPORTED_MODULE_10__[\"default\"](response, {\n              parse: true\n            });\n            this.trigger('addMessage', message.toJSON().conversation.messages[0], response);\n          } else {\n            this.trigger('newConversations', response);\n          }\n\n          return this.close();\n        }); // close after DOM has been updated, so focus is properly restored\n        // also don't close the dialog on failure, so the user's typed message isn't lost\n\n        return jquery__WEBPACK_IMPORTED_MODULE_1___default.a.when(this.request).fail(() => dfd.reject());\n      }\n    });\n  }\n\n  recipientIdsChanged(recipientIds) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_2___default.a.isEmpty(recipientIds) || underscore__WEBPACK_IMPORTED_MODULE_2___default.a.includes(recipientIds, /(teachers|tas|observers)$/)) {\n      return this.toggleUserNote(false);\n    } else {\n      const canAddNotes = underscore__WEBPACK_IMPORTED_MODULE_2___default.a.map(this.recipientView.tokenModels(), tokenModel => this.canAddNotesFor(tokenModel));\n\n      return this.toggleUserNote(underscore__WEBPACK_IMPORTED_MODULE_2___default.a.every(canAddNotes));\n    }\n  }\n\n  recipientTotalChanged(lockBulkMessage) {\n    if (lockBulkMessage && !this.bulkMessageLocked) {\n      this.oldBulkMessageVal = this.$bulkMessage.prop('checked');\n      this.$bulkMessage.prop('checked', true);\n      this.$bulkMessage.prop('disabled', true);\n      return this.bulkMessageLocked = true;\n    } else if (!lockBulkMessage && this.bulkMessageLocked) {\n      this.$bulkMessage.prop('checked', this.oldBulkMessageVal);\n      this.$bulkMessage.prop('disabled', false);\n      return this.bulkMessageLocked = false;\n    }\n  }\n\n  canAddNotesFor(user) {\n    if (!ENV.CONVERSATIONS.NOTES_ENABLED) {\n      return false;\n    }\n\n    if (user == null) {\n      return false;\n    }\n\n    if (user.id.match(/students$/) || user.id.match(/^group/)) return true;\n    const object = user.get('common_courses');\n\n    for (const id in object) {\n      const roles = object[id];\n      if (roles.includes('StudentEnrollment') && (ENV.CONVERSATIONS.CAN_ADD_NOTES_FOR_ACCOUNT || ENV.CONVERSATIONS.CAN_ADD_NOTES_FOR_COURSES[id])) return true;\n    }\n\n    return false;\n  }\n\n  toggleUserNote(state) {\n    this.$userNoteInfo.toggle(state);\n\n    if (state === false) {\n      this.$userNote.prop('checked', false);\n    }\n\n    return this.resizeBody();\n  }\n\n  resizeBody() {\n    this.updateAttachmentOverflow(); // Compute desired height of body\n\n    return this.$messageBody.height(this.$el.offset().top + this.$el.height() - this.$messageBody.offset().top - this.$attachmentsPane.height());\n  }\n\n  attachmentsShouldOverflow() {\n    const $attachments = this.$attachments.children();\n    return $attachments.length * $attachments.outerWidth() > this.$attachmentsPane.width();\n  }\n\n  addAttachment() {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#file_input').attr('id', underscore__WEBPACK_IMPORTED_MODULE_2___default.a.uniqueId('file_input'));\n    this.appendAddAttachmentTemplate();\n    this.updateAttachmentOverflow();\n    return this.$fullDialog.find('.file_input:last').click();\n  }\n\n  appendAddAttachmentTemplate() {\n    const $attachment = jquery__WEBPACK_IMPORTED_MODULE_1___default()(Object(_jst_addAttachment_handlebars__WEBPACK_IMPORTED_MODULE_9__[\"default\"])());\n    this.$attachments.append($attachment);\n    return $attachment.hide();\n  }\n\n  setAttachmentClip($attachment) {\n    const $name = $attachment.find(jquery__WEBPACK_IMPORTED_MODULE_1___default()('.attachment-name'));\n    const $clip = $attachment.find(jquery__WEBPACK_IMPORTED_MODULE_1___default()('.attachment-name-clip'));\n    $clip.height($name.height());\n\n    if ($name.height() < 35) {\n      return $clip.addClass('hidden');\n    }\n  }\n\n  handleBodyClick(e) {\n    if (e.target === e.currentTarget) {\n      return this.$conversationBody.focus();\n    }\n  }\n\n  handleAttachmentClick(e) {\n    // IE doesn't do this automatically\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(e.currentTarget).focus();\n  }\n\n  handleAttachmentDblClick(e) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(e.currentTarget).find('input').click();\n  }\n\n  handleAttachment(e) {\n    const input = e.currentTarget;\n    const $attachment = jquery__WEBPACK_IMPORTED_MODULE_1___default()(input).closest('.attachment');\n    this.updateAttachmentPane();\n\n    if (!input.value) {\n      $attachment.hide();\n      return;\n    }\n\n    this.focusAddAttachment();\n    $attachment.slideDown('fast');\n    const $icon = $attachment.find('.attachment-icon i');\n    $icon.empty();\n    const file = input.files[0];\n    const name = file.name;\n    $attachment.find('.attachment-name').text(name);\n    this.setAttachmentClip($attachment); // have the alert happen later so the focus change doesn't interrupt it\n\n    const attachedFiles = this.$attachmentsPane.find('input:not([value=])');\n    setTimeout(() => {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.screenReaderFlashMessageExclusive(i18n_conversation_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('File %{count} attached: %{name}', {\n        count: attachedFiles.length,\n        name\n      }));\n    }, 1000);\n    const remove = $attachment.find('.remove_link');\n    remove.attr('aria-label', `${remove.attr('title')}: ${name}`);\n    const extension = name.split('.').pop().toLowerCase();\n\n    if (this.imageTypes.includes(extension) && window.FileReader) {\n      const picReader = new FileReader();\n      picReader.addEventListener('load', e => {\n        const picFile = e.target;\n        $icon.attr('class', '');\n        return $icon.append(jquery__WEBPACK_IMPORTED_MODULE_1___default()('<img />').attr('src', picFile.result));\n      });\n      picReader.readAsDataURL(file);\n      return;\n    }\n\n    let icon = 'paperclip';\n\n    if (this.imageTypes.includes(extension)) {\n      icon = 'image';\n    } else if (extension === 'pdf') {\n      icon = 'pdf';\n    } else if (['doc', 'docx'].includes(extension)) {\n      icon = 'ms-word';\n    } else if (['xls', 'xlsx'].includes(extension)) {\n      icon = 'ms-excel';\n    }\n\n    return $icon.attr('class', `icon-${icon}`);\n  }\n\n  handleAttachmentKeyDown(e) {\n    if (e.keyCode === 37) {\n      // left\n      return this.focusPrevAttachment(jquery__WEBPACK_IMPORTED_MODULE_1___default()(e.currentTarget));\n    }\n\n    if (e.keyCode === 39) {\n      // right\n      return this.focusNextAttachment(jquery__WEBPACK_IMPORTED_MODULE_1___default()(e.currentTarget));\n    }\n\n    if ((e.keyCode === 13 || e.keyCode === 32) && !jquery__WEBPACK_IMPORTED_MODULE_1___default()(e.target).hasClass('remove_link')) {\n      // enter, space\n      this.handleAttachmentDblClick(e);\n      return false;\n    } // delete, \"d\", enter, space\n\n\n    if (e.keyCode !== 46 && e.keyCode !== 68 && e.keyCode !== 13 && e.keyCode !== 32) {\n      return;\n    }\n\n    this.removeAttachment(e.currentTarget);\n    return false;\n  }\n\n  removeEmptyAttachments() {\n    return underscore__WEBPACK_IMPORTED_MODULE_2___default.a.each(this.$attachments.find('input[value=]'), node => this.removeAttachment(node));\n  }\n\n  removeAttachment(node) {\n    const $attachment = jquery__WEBPACK_IMPORTED_MODULE_1___default()(node).closest('.attachment');\n\n    if (!this.focusNextAttachment($attachment)) {\n      if (!this.focusPrevAttachment($attachment)) {\n        this.focusAddAttachment();\n      }\n    }\n\n    return $attachment.slideUp('fast', () => {\n      $attachment.remove();\n      return this.updateAttachmentPane();\n    });\n  }\n\n  focusPrevAttachment($attachment) {\n    const $newTarget = $attachment.prevAll(':visible').first();\n\n    if (!$newTarget.length) {\n      return false;\n    }\n\n    return $newTarget.focus();\n  }\n\n  focusNextAttachment($attachment) {\n    const $newTarget = $attachment.nextAll(':visible').first();\n\n    if (!$newTarget.length) {\n      return false;\n    }\n\n    return $newTarget.focus();\n  }\n\n  focusAddAttachment() {\n    return this.$fullDialog.find('.attach-file').focus();\n  }\n\n  addMediaComment() {\n    return this.$mediaComment.mediaComment('create', 'any', (id, type) => {\n      this.$mediaCommentId.val(id);\n      this.$mediaCommentType.val(type);\n      this.$mediaComment.show();\n      return this.$addMediaComment.hide();\n    });\n  }\n\n  removeMediaComment() {\n    this.$mediaCommentId.val('');\n    this.$mediaCommentType.val('');\n    this.$mediaComment.hide();\n    return this.$addMediaComment.show();\n  }\n\n  updateAttachmentOverflow() {\n    return this.$attachmentsPane.toggleClass('overflowed', this.attachmentsShouldOverflow());\n  }\n\n  updateAttachmentPane() {\n    this.$attachmentsPane[this.$attachmentsPane.find('input:not([value=])').length ? 'addClass' : 'removeClass']('has-items');\n    return this.resizeBody();\n  }\n\n}\nMessageFormDialog.initClass();\n\n//# sourceURL=webpack:///./ui/features/conversations/backbone/views/MessageFormDialog.js?");

/***/ }),

/***/ "x6Ec":
/*!**********************************************************************************************!*\
  !*** ./frontend_build/i18n.js?conversations.context_message!./ui/shims/dummyI18nResource.js ***!
  \**********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('conversations.context_message'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?conversations.context_message");

/***/ })

}]);