(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[88],{

/***/ "1qlt":
/*!*****************************************************************************!*\
  !*** ./frontend_build/i18n.js?tree_browser!./ui/shims/dummyI18nResource.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('tree_browser'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?tree_browser");

/***/ }),

/***/ "BxZT":
/*!***************************************************************************!*\
  !*** ./ui/shared/tree-browser-view/backbone/views/TreeBrowserView.coffee ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_treeBrowser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!treeBrowser */ \"S4W8\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _jst_TreeBrowser_handlebars__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../jst/TreeBrowser.handlebars */ \"Xlvu\");\n/* harmony import */ var _TreeView_coffee__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TreeView.coffee */ \"gC3n\");\nvar TreeBrowserView,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TreeBrowserView = (function(superClass) {\n  extend(TreeBrowserView, superClass);\n\n  function TreeBrowserView() {\n    this.focusOnOpen = bind(this.focusOnOpen, this);\n    return TreeBrowserView.__super__.constructor.apply(this, arguments);\n  }\n\n  TreeBrowserView.prototype.template = _jst_TreeBrowser_handlebars__WEBPACK_IMPORTED_MODULE_3__[\"default\"];\n\n  TreeBrowserView.optionProperty('rootModelsFinder');\n\n  TreeBrowserView.optionProperty('onlyShowSubtrees');\n\n  TreeBrowserView.optionProperty('onClick');\n\n  TreeBrowserView.optionProperty('dndOptions');\n\n  TreeBrowserView.optionProperty('href');\n\n  TreeBrowserView.optionProperty('focusStyleClass');\n\n  TreeBrowserView.optionProperty('selectedStyleClass');\n\n  TreeBrowserView.optionProperty('autoFetch');\n\n  TreeBrowserView.optionProperty('fetchItAll');\n\n  TreeBrowserView.prototype.events = {\n    'keydown .tree[role=tree]': function(event) {\n      var $focused, focusedId, key;\n      switch (event.which) {\n        case 35:\n          key = 'end';\n          break;\n        case 36:\n          key = 'home';\n          break;\n        case 37:\n          key = 'left';\n          break;\n        case 38:\n          key = 'up';\n          break;\n        case 39:\n          key = 'right';\n          break;\n        case 40:\n          key = 'down';\n          break;\n        case 13:\n        case 32:\n          key = 'enter';\n          break;\n        default:\n          return true;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n      focusedId = this.$tree.attr('aria-activedescendant');\n      if (!focusedId) {\n        return this.focusFirst();\n      } else {\n        $focused = this.$tree.find(\"#\" + focusedId);\n        switch (key) {\n          case 'up':\n            return this.focusPrev($focused);\n          case 'down':\n            return this.focusNext($focused);\n          case 'left':\n            return this.collapseCurrent($focused);\n          case 'right':\n            return this.expandCurrent($focused);\n          case 'home':\n            return this.focusFirst();\n          case 'end':\n            return this.focusLast($focused);\n          case 'enter':\n            return this.activateCurrent($focused);\n        }\n      }\n    }\n  };\n\n  TreeBrowserView.prototype.setActiveTree = function(tree, dialogTree) {\n    return dialogTree.activeTree = tree;\n  };\n\n  TreeBrowserView.prototype.afterRender = function() {\n    var i, len, ref, rootModel;\n    this.$tree = this.$el.children('.tree');\n    ref = this.rootModelsFinder.find();\n    for (i = 0, len = ref.length; i < len; i++) {\n      rootModel = ref[i];\n      if (rootModel) {\n        new _TreeView_coffee__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n          model: rootModel,\n          onlyShowSubtrees: this.onlyShowSubtrees,\n          onClick: this.onClick,\n          dndOptions: this.dndOptions,\n          href: this.href,\n          selectedStyleClass: this.selectedStyleClass,\n          autoFetch: this.autoFetch,\n          fetchItAll: this.fetchItAll\n        }).$el.appendTo(this.$tree);\n      }\n    }\n    return TreeBrowserView.__super__.afterRender.apply(this, arguments);\n  };\n\n  TreeBrowserView.prototype.destroyView = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.View.prototype.remove.call(this);\n  };\n\n  TreeBrowserView.prototype.setFocus = function($to, $from) {\n    var label, toId;\n    if (!($to != null ? $to.length : void 0) || ($from != null ? typeof $from.is === \"function\" ? $from.is($to) : void 0 : void 0)) {\n      return;\n    }\n    this.$tree.find('[role=treeitem]').not($to).attr('aria-selected', false).removeClass(this.focusStyleClass);\n    $to.attr('aria-selected', true);\n    $to.addClass(this.focusStyleClass);\n    if ((label = $to.attr('aria-label'))) {\n      $.screenReaderFlashMessageExclusive(label);\n    }\n    toId = $to.attr('id');\n    if (!toId) {\n      toId = underscore__WEBPACK_IMPORTED_MODULE_2___default.a.uniqueId('treenode-');\n      $to.attr('id', toId);\n    }\n    this.$tree.attr('aria-activedescendant', toId);\n    if ($to[0].scrollIntoViewIfNeeded) {\n      return $to[0].scrollIntoViewIfNeeded();\n    } else {\n      return $to[0].scrollIntoView();\n    }\n  };\n\n  TreeBrowserView.prototype.focusFirst = function() {\n    return this.setFocus(this.$tree.find('[role=treeitem]:first'));\n  };\n\n  TreeBrowserView.prototype.focusLast = function($from) {\n    var $to, level;\n    $to = this.$tree.find('[role=treeitem][aria-level=1]');\n    level = 1;\n    while (this.ariaPropIsTrue($to, 'aria-expanded') && $to.find('[role=treeitem]:first').length) {\n      level++;\n      $to = $to.find(\"[role=treeitem][aria-level=\" + level + \"]:last\");\n    }\n    this.setFocus($to, $from);\n    return this.setFocus(this.$tree.find('[role=treeitem]:first'));\n  };\n\n  TreeBrowserView.prototype.focusNext = function($from) {\n    var $cur, $to, level, nodeSelector;\n    if (this.ariaPropIsTrue($from, 'aria-expanded')) {\n      $to = $from.find('[role=treeitem]:first');\n      if ($to.length) {\n        return this.setFocus($to, $from);\n      }\n    }\n    $to = null;\n    $cur = $from;\n    level = parseInt($from.attr('aria-level'), 10);\n    while (level > 0) {\n      nodeSelector = \"[role=treeitem][aria-level=\" + level + \"]\";\n      $to = $cur.parentsUntil('[role=treeitem],[role=tree]').andSelf().nextAll().find(nodeSelector).andSelf().filter(nodeSelector).first();\n      if ($to != null ? $to.length : void 0) {\n        return this.setFocus($to, $from);\n      }\n      level--;\n      $cur = $cur.parent().closest(\"[role=treeitem][aria-level=\" + level + \"]\");\n    }\n  };\n\n  TreeBrowserView.prototype.focusPrev = function($from) {\n    var $to, level, nodeSelector;\n    level = parseInt($from.attr('aria-level'), 10);\n    nodeSelector = \"[role=treeitem][aria-level=\" + level + \"]\";\n    $to = $from.parentsUntil('[role=treeitem],[role=tree]').andSelf().prevAll().find(nodeSelector).andSelf().filter(nodeSelector).last();\n    if (!$to.length) {\n      $to = $from.parent().closest('[role=treeitem]');\n      return this.setFocus($to, $from);\n    }\n    while (this.ariaPropIsTrue($to, 'aria-expanded') && $to.find('[role=treeitem]:first').length) {\n      level++;\n      $to = $to.find(\"[role=treeitem][aria-level=\" + level + \"]:last\");\n    }\n    return this.setFocus($to, $from);\n  };\n\n  TreeBrowserView.prototype.expandCurrent = function($current) {\n    if (this.ariaPropIsTrue($current, 'aria-expanded')) {\n      return this.setFocus($current.find('[role=treeitem]:first'), $current);\n    } else {\n      $current.find('.treeLabel:first').click();\n      return this.$tree.focus();\n    }\n  };\n\n  TreeBrowserView.prototype.collapseCurrent = function($current) {\n    if (this.ariaPropIsTrue($current, 'aria-expanded')) {\n      $current.find('.treeLabel:first').click();\n      return this.$tree.focus();\n    } else {\n      return this.setFocus($current.parent().closest('[role=treeitem]'), $current);\n    }\n  };\n\n  TreeBrowserView.prototype.activateCurrent = function($current) {\n    $current.find('a:first').trigger('selectItem');\n    return $.screenReaderFlashMessage(i18n_treeBrowser__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t(\"Selected %{subtree}\", {\n      subtree: $current.attr(\"aria-label\")\n    }));\n  };\n\n  TreeBrowserView.prototype.ariaPropIsTrue = function($e, attrib) {\n    var ref;\n    return ((ref = $e.attr(attrib)) != null ? typeof ref.toLowerCase === \"function\" ? ref.toLowerCase() : void 0 : void 0) === 'true';\n  };\n\n  TreeBrowserView.prototype.focusOnOpen = function() {\n    return this.$tree.focus();\n  };\n\n  return TreeBrowserView;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.View));\n\n\n//# sourceURL=webpack:///./ui/shared/tree-browser-view/backbone/views/TreeBrowserView.coffee?");

/***/ }),

/***/ "KK2i":
/*!************************************************************!*\
  !*** ./ui/shared/progress/backbone/models/Progress.coffee ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\nvar Progress,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Progress = (function(superClass) {\n  extend(Progress, superClass);\n\n  function Progress() {\n    this.onPoll = bind(this.onPoll, this);\n    this.poll = bind(this.poll, this);\n    return Progress.__super__.constructor.apply(this, arguments);\n  }\n\n  Progress.prototype.defaults = {\n    completion: 0,\n    url: null,\n    timeout: 1000\n  };\n\n  Progress.prototype.pollStates = ['queued', 'running'];\n\n  Progress.prototype.isPolling = function() {\n    var ref;\n    return ref = this.get('workflow_state'), indexOf.call(this.pollStates, ref) >= 0;\n  };\n\n  Progress.prototype.isSuccess = function() {\n    return this.get('workflow_state') === 'completed';\n  };\n\n  Progress.prototype.initialize = function() {\n    this.pollDfd = new jquery__WEBPACK_IMPORTED_MODULE_1___default.a.Deferred;\n    this.on('change:url', (function(_this) {\n      return function() {\n        if (_this.isPolling()) {\n          return _this.poll();\n        }\n      };\n    })(this));\n    return jquery__WEBPACK_IMPORTED_MODULE_1___default()(window).on('beforeunload', (function(_this) {\n      return function() {\n        return clearTimeout(_this.timeout);\n      };\n    })(this));\n  };\n\n  Progress.prototype.url = function() {\n    return this.get('url');\n  };\n\n  Progress.prototype.poll = function() {\n    this.fetch().then(this.onPoll, (function(_this) {\n      return function() {\n        return _this.pollDfd.rejectWith(_this, arguments);\n      };\n    })(this));\n    return this.pollDfd;\n  };\n\n  Progress.prototype.onPoll = function(response) {\n    this.pollDfd.notify(response);\n    if (this.isPolling()) {\n      return this.timeout = setTimeout(this.poll, this.get('timeout'));\n    } else {\n      this.pollDfd[this.isSuccess() ? 'resolve' : 'reject'](response);\n      return this.trigger('complete');\n    }\n  };\n\n  return Progress;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0__[\"Model\"]));\n\n\n//# sourceURL=webpack:///./ui/shared/progress/backbone/models/Progress.coffee?");

/***/ }),

/***/ "QD0o":
/*!*******************************************************************!*\
  !*** ./ui/shared/tree-browser-view/jst/TreeCollection.handlebars ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/shared/tree-browser-view/jst/TreeCollection';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"\\n<ul class=\\\"collectionViewItems\\\"></ul>\\n\";\n  }\n\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.collection)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n<div class=\\\"paginatedLoadingIndicator\\\">Loading</div>\\n\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/shared/tree-browser-view/jst/TreeCollection.handlebars?");

/***/ }),

/***/ "S4W8":
/*!****************************************************************************!*\
  !*** ./frontend_build/i18n.js?treeBrowser!./ui/shims/dummyI18nResource.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('treeBrowser'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?treeBrowser");

/***/ }),

/***/ "Xlvu":
/*!****************************************************************!*\
  !*** ./ui/shared/tree-browser-view/jst/TreeBrowser.handlebars ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_tree_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!tree_browser */ \"1qlt\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n/* harmony import */ var _canvas_brandable_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/brandable-css */ \"dbrX\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/shared/tree-browser-view/jst/TreeBrowser';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<ul role=\\\"tree\\\" tabindex=\\\"0\\\" activedescendent=\\\"\\\" class=\\\"tree\\\"\\n  aria-label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"folder_browsing_tree_1f00a3ae\", \"Folder Browsing Tree\", options) : helperMissing.call(depth0, \"t\", \"folder_browsing_tree_1f00a3ae\", \"Folder Browsing Tree\", options)))\n    + \"\\\"\\n></ul>\";\n  return buffer;\n  });\n    ;\n    \n    \n\n    _canvas_brandable_css__WEBPACK_IMPORTED_MODULE_3__[\"default\"].loadStylesheetForJST({\n      id: 'c5',\n      bundle: 'jst/TreeBrowser'\n    });\n  ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/shared/tree-browser-view/jst/TreeBrowser.handlebars?");

/***/ }),

/***/ "gC3n":
/*!********************************************************************!*\
  !*** ./ui/shared/tree-browser-view/backbone/views/TreeView.coffee ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_pagination_backbone_views_PaginatedCollectionView_coffee__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/pagination/backbone/views/PaginatedCollectionView.coffee */ \"5VKQ\");\n/* harmony import */ var _TreeItemView_coffee__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TreeItemView.coffee */ \"qS60\");\n/* harmony import */ var _jst_TreeCollection_handlebars__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../jst/TreeCollection.handlebars */ \"QD0o\");\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! html-escape */ \"gI0r\");\nvar TreeView,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TreeView = (function(superClass) {\n  extend(TreeView, superClass);\n\n  function TreeView() {\n    return TreeView.__super__.constructor.apply(this, arguments);\n  }\n\n  TreeView.prototype.tagName = 'li';\n\n  TreeView.optionProperty('nestingLevel');\n\n  TreeView.optionProperty('onlyShowSubtrees');\n\n  TreeView.optionProperty('onClick');\n\n  TreeView.optionProperty('dndOptions');\n\n  TreeView.optionProperty('href');\n\n  TreeView.optionProperty('focusStyleClass');\n\n  TreeView.optionProperty('selectedStyleClass');\n\n  TreeView.optionProperty('autoFetch');\n\n  TreeView.optionProperty('fetchItAll');\n\n  TreeView.prototype.defaults = {\n    nestingLevel: 1\n  };\n\n  TreeView.prototype.attributes = function() {\n    return {\n      'role': 'treeitem',\n      'data-id': this.model.id,\n      'aria-expanded': \"\" + (!!this.model.isExpanded),\n      'aria-level': this.nestingLevel,\n      'aria-label': this.model.get('custom_name') || this.model.get('name') || this.model.get('title'),\n      id: this.tagId\n    };\n  };\n\n  TreeView.prototype.events = {\n    'click .treeLabel': 'toggle',\n    'selectItem .treeFile, .treeLabel': 'selectItem'\n  };\n\n  TreeView.prototype.initialize = function() {\n    var res;\n    this.tagId = underscore__WEBPACK_IMPORTED_MODULE_2___default.a.uniqueId('treenode-');\n    this.render = underscore__WEBPACK_IMPORTED_MODULE_2___default.a.debounce(this.render);\n    this.model.on('all', this.render, this);\n    this.model.getItems().on('all', this.render, this);\n    this.model.getSubtrees().on('all', this.render, this);\n    res = TreeView.__super__.initialize.apply(this, arguments);\n    this.render();\n    return res;\n  };\n\n  TreeView.prototype.render = function() {\n    this.renderSelf();\n    return this.renderContents();\n  };\n\n  TreeView.prototype.toggle = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.model.toggle({\n      onlyShowSubtrees: this.onlyShowSubtrees\n    });\n    return this.$el.attr(this.attributes());\n  };\n\n  TreeView.prototype.selectItem = function(event) {\n    var $span;\n    $span = jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.target).find('span');\n    return $span.trigger('click');\n  };\n\n  TreeView.prototype.title_text = function() {\n    return this.model.get('custom_name') || this.model.get('name') || this.model.get('title');\n  };\n\n  TreeView.prototype.renderSelf = function() {\n    if (this.model.isNew()) {\n      return;\n    }\n    this.$el.attr(this.attributes());\n    this.$label || (this.$label = (function(_this) {\n      return function() {\n        var $label, icon_class, toggleActive;\n        _this.$labelInner = jquery__WEBPACK_IMPORTED_MODULE_1___default()('<span>').click(function(event) {\n          if (_this.selectedStyleClass) {\n            jquery__WEBPACK_IMPORTED_MODULE_1___default()('.' + _this.selectedStyleClass).each(function(key, element) {\n              return jquery__WEBPACK_IMPORTED_MODULE_1___default()(element).removeClass(_this.selectedStyleClass);\n            });\n            jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.target).addClass(_this.selectedStyleClass);\n          }\n          return typeof _this.onClick === \"function\" ? _this.onClick(event, _this.model) : void 0;\n        });\n        icon_class = _this.model.get('for_submissions') ? 'icon-folder-locked' : 'icon-folder';\n        $label = jquery__WEBPACK_IMPORTED_MODULE_1___default()(\"<a\\n  class=\\\"treeLabel\\\"\\n  role=\\\"presentation\\\"\\n  tabindex=\\\"-1\\\"\\n>\\n  <i class=\\\"icon-mini-arrow-right\\\"></i>\\n  <i class=\\\"\" + (Object(html_escape__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(icon_class)) + \"\\\"></i>\\n</a>\").append(_this.$labelInner).prependTo(_this.$el);\n        if (_this.dndOptions && !_this.model.get('for_submissions')) {\n          toggleActive = function(makeActive) {\n            return function() {\n              return $label.toggleClass('activeDragTarget', makeActive);\n            };\n          };\n          $label.on({\n            'dragenter dragover': function(event) {\n              return _this.dndOptions.onItemDragEnterOrOver(event.originalEvent, toggleActive(true));\n            },\n            'dragleave dragend': function(event) {\n              return _this.dndOptions.onItemDragLeaveOrEnd(event.originalEvent, toggleActive(false));\n            },\n            'drop': function(event) {\n              return _this.dndOptions.onItemDrop(event.originalEvent, _this.model, toggleActive(false));\n            }\n          });\n        }\n        return $label;\n      };\n    })(this)());\n    this.$labelInner.text(this.title_text());\n    this.$label.attr('href', (typeof this.href === \"function\" ? this.href(this.model) : void 0) || '#').toggleClass('expanded', !!this.model.isExpanded).toggleClass('loading after', !!this.model.isExpanding);\n    if (this.selectedStyleClass) {\n      return this.$label.toggleClass(this.selectedStyleClass, window.location.pathname === (typeof this.href === \"function\" ? this.href(this.model) : void 0));\n    }\n  };\n\n  TreeView.prototype.renderContents = function() {\n    var itemsView, subtreesView;\n    if (this.model.isExpanded) {\n      if (!this.$treeContents) {\n        this.$treeContents = jquery__WEBPACK_IMPORTED_MODULE_1___default()(\"<ul role='group' class='treeContents'/>\").appendTo(this.$el);\n        subtreesView = new _canvas_pagination_backbone_views_PaginatedCollectionView_coffee__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n          collection: this.model.getSubtrees(),\n          itemView: TreeView,\n          itemViewOptions: {\n            nestingLevel: this.nestingLevel + 1,\n            onlyShowSubtrees: this.onlyShowSubtrees,\n            onClick: this.onClick,\n            dndOptions: this.dndOptions,\n            href: this.href,\n            focusStyleClass: this.focusStyleClass,\n            selectedStyleClass: this.selectedStyleClass,\n            autoFetch: this.autoFetch,\n            fetchItAll: this.fetchItAll\n          },\n          tagName: 'li',\n          className: 'subtrees',\n          template: _jst_TreeCollection_handlebars__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n          scrollContainer: this.$treeContents.closest('div[role=tabpanel]'),\n          autoFetch: this.autoFetch,\n          fetchItAll: this.fetchItAll\n        });\n        this.$treeContents.append(subtreesView.render().el);\n        if (!this.onlyShowSubtrees) {\n          itemsView = new _canvas_pagination_backbone_views_PaginatedCollectionView_coffee__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n            collection: this.model.getItems(),\n            itemView: _TreeItemView_coffee__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n            itemViewOptions: {\n              nestingLevel: this.nestingLevel + 1\n            },\n            tagName: 'li',\n            className: 'items',\n            template: _jst_TreeCollection_handlebars__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n            scrollContainer: this.$treeContents.closest('div[role=tabpanel]')\n          });\n          this.$treeContents.append(itemsView.render().el);\n        }\n      }\n      return this.$('> .treeContents').removeClass('hidden');\n    } else {\n      return this.$('> .treeContents').addClass('hidden');\n    }\n  };\n\n  return TreeView;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View));\n\n\n//# sourceURL=webpack:///./ui/shared/tree-browser-view/backbone/views/TreeView.coffee?");

/***/ }),

/***/ "qIDp":
/*!*************************************************************!*\
  !*** ./ui/shared/tree-browser-view/jst/TreeItem.handlebars ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/shared/tree-browser-view/jst/TreeItem';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <span class=\\\"preview-thumbnail-holder\\\">\\n      <img class=\\\"preview-thumbnail\\\" src=\\\"\";\n  if (helper = helpers.thumbnail_url) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.thumbnail_url); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    </span>\\n  \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n    <i class=\\\"icon-document\\\"></i>\\n  \";\n  }\n\n  buffer += \"<a href=\\\"#\\\" data-fullsize=\\\"\";\n  if (helper = helpers.rce_preview_url) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.rce_preview_url); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" role=\\\"presentation\\\" tabindex=\\\"-1\\\" class=\\\"treeFile ellipsis\\\" title=\\\"\";\n  if (helper = helpers.display_name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.display_name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.thumbnail_url), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  \";\n  if (helper = helpers.display_name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.display_name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n</a>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/shared/tree-browser-view/jst/TreeItem.handlebars?");

/***/ }),

/***/ "qS60":
/*!************************************************************************!*\
  !*** ./ui/shared/tree-browser-view/backbone/views/TreeItemView.coffee ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _jst_TreeItem_handlebars__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../jst/TreeItem.handlebars */ \"qIDp\");\nvar TreeItemView,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TreeItemView = (function(superClass) {\n  extend(TreeItemView, superClass);\n\n  function TreeItemView() {\n    return TreeItemView.__super__.constructor.apply(this, arguments);\n  }\n\n  TreeItemView.prototype.tagName = 'li';\n\n  TreeItemView.prototype.template = _jst_TreeItem_handlebars__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n\n  TreeItemView.optionProperty('nestingLevel');\n\n  TreeItemView.prototype.attributes = function() {\n    return {\n      role: 'treeitem',\n      id: underscore__WEBPACK_IMPORTED_MODULE_1___default.a.uniqueId('treenode-')\n    };\n  };\n\n  TreeItemView.prototype.afterRender = function() {\n    return this.$el.attr('aria-level', this.nestingLevel);\n  };\n\n  return TreeItemView;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View));\n\n\n//# sourceURL=webpack:///./ui/shared/tree-browser-view/backbone/views/TreeItemView.coffee?");

/***/ })

}]);