(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([["context_roster_usage"],{

/***/ "GHsi":
/*!*******************************************!*\
  !*** ./packages/jquery-pageless/index.js ***!
  \*******************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n// =======================================================================\n// PageLess - endless page\n//\n// Pageless is a jQuery plugin.\n// As you scroll down you see more results coming back at you automatically.\n// It provides an automatic pagination in an accessible way : if javascript \n// is disabled your standard pagination is supposed to work.\n//\n// Licensed under the MIT:\n// http://www.opensource.org/licenses/mit-license.php\n//\n// Parameters:\n//    currentPage: current page (params[:page])\n//    distance: distance to the end of page in px when ajax query is fired\n//    loader: selector of the loader div (ajax activity indicator)\n//    loaderHtml: html code of the div if loader not used\n//    loaderImage: image inside the loader\n//    loaderMsg: displayed ajax message\n//    pagination: selector of the paginator divs. \n//                if javascript is disabled paginator is provided\n//    params: paramaters for the ajax query, you can pass auth_token here\n//    totalPages: total number of pages\n//    url: URL used to request more data\n//\n// Callback Parameters:\n//    scrape: A function to modify the incoming data.\n//    complete: A function to call when a new page has been loaded (optional)\n//    end: A function to call when the last page has been loaded (optional)\n//\n// Usage:\n//   $('#results').pageless({ totalPages: 10\n//                          , url: '/articles/'\n//                          , loaderMsg: 'Loading more results'\n//                          });\n//\n// Requires: jquery\n//\n// Author: Jean-SÃ©bastien Ney (https://github.com/jney)\n//\n// Contributors:\n//   Alexander Lang (https://github.com/langalex)\n//   Lukas Rieder (https://github.com/Overbryd)\n//\n// Thanks to:\n//  * codemonky.com/post/34940898\n//  * www.unspace.ca/discover/pageless/\n//  * famspam.com/facebox\n// =======================================================================\n\n\n\n  var FALSE = !1\n    , TRUE = !FALSE\n    , NAMESPACE = '.pageless'\n    , SCROLL = 'scroll' + NAMESPACE\n    , RESIZE = 'resize' + NAMESPACE\n    , BARE_INSTANCE = null;\n\n  var createClosure = function (opts) {\n    var element\n      , isLoading = FALSE\n      , loader\n      , settings = { container: window\n                   , currentPage: 1\n                   , distance: 100\n                   , pagination: '.pagination'\n                   , params: {}\n                   , url: location.href\n                   , loaderImage: \"/images/load.gif\"\n                   , animate: true\n                   }\n      , container\n      , $container;\n      \n    var activate = function(opts) {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default.a.isFunction(opts) ? opts.call() : init(opts);\n    };\n    \n    var loaderHtml = function () {\n      return settings.loaderHtml || '\\\n<div id=\"pageless-loader\" style=\"display:none;text-align:center;width:100%;\">\\\n  <div class=\"msg\" style=\"color:#e9e9e9;font-size:2em\"></div>\\\n  <img src=\"' + settings.loaderImage + '\" alt=\"loading more results\" style=\"margin:10px auto\" />\\\n</div>';\n    };\n   \n    // settings params: totalPages\n    var init = function (opts) {\n      if (opts) jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend(settings, opts);\n      \n      container = settings.container;\n      $container = jquery__WEBPACK_IMPORTED_MODULE_0___default()(container);\n      \n      // for accessibility we can keep pagination links\n      // but since we have javascript enabled we remove pagination links \n      if(settings.pagination) jquery__WEBPACK_IMPORTED_MODULE_0___default()(settings.pagination).remove();\n      \n      // start the listener\n      startListener();\n    };\n    \n    var applyContext = function ($el, opts) {\n      var $loader = jquery__WEBPACK_IMPORTED_MODULE_0___default()(opts.loader, $el);\n        \n      element = $el;\n      \n      // loader element\n      if (opts.loader && $loader.length) {\n        loader = $loader;\n      } else {\n        loader = jquery__WEBPACK_IMPORTED_MODULE_0___default()(loaderHtml());\n        $el.append(loader);\n        // if we use the default loader, set the message\n        if (!opts.loaderHtml) {\n          jquery__WEBPACK_IMPORTED_MODULE_0___default()('#pageless-loader .msg').html(opts.loaderMsg);\n        }\n      }\n      loading(isLoading);\n    };\n    \n    //\n    var loading = function (bool) {\n      isLoading = bool;\n      if (!loader) { return; }\n      if (isLoading) {\n        if (loader.parents().first().is(':visible') && settings.animate) {\n          // visible parent, animate it\n          loader.fadeIn('normal');\n        } else {\n          // invisible parent, just show so it's visible when parent is shown\n          loader.show();\n        }\n      } else {\n        if (loader.parents().first().is(':visible') && settings.animate) {\n          // visible parent, animate it\n          loader.fadeOut('normal');\n        } else {\n          // invisible parent, just hide so it remains invisible when parent is\n          // shown\n          loader.hide();\n        }\n      }\n    };\n    \n    // distance to end of the container\n    var distanceToBottom = function () {\n      return (container === window)\n           ? jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).height() \n           - $container.scrollTop() \n           - $container.height()\n           : $container[0].scrollHeight \n           - $container.scrollTop() \n           - $container.height();\n    };\n\n    var stopListener = function() {\n      $container.unbind(NAMESPACE);\n    };\n    \n    // * bind a scroll event\n    // * trigger is once in case of reload\n    var startListener = function() {\n      $container.bind(SCROLL+' '+RESIZE, watch)\n                .trigger(SCROLL);\n    };\n    \n    var watch = function() {\n      // listener was stopped or we've run out of pages\n      if (settings.totalPages <= settings.currentPage) {\n        stopListener();\n        // if there is a afterStopListener callback we call it\n        if (settings.end) settings.end.call();\n        return;\n      }\n      \n      // if slider past our scroll offset, then fire a request for more data\n      if(!isLoading && (distanceToBottom() < settings.distance)) {\n        loading(TRUE);\n        // move to next page\n        settings.currentPage++;\n        // set up ajax query params\n        jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend( settings.params\n                , { page: settings.currentPage });\n        // finally ajax query\n        jquery__WEBPACK_IMPORTED_MODULE_0___default.a.get( settings.url\n             , settings.params\n             , function (data, text, xhr) {\n                 var data = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.isFunction(settings.scrape) ? settings.scrape(data, xhr) : data;\n                 loader ? loader.before(data) : element.append(data);\n                 loading(FALSE);\n                 // if there is a complete callback we call it\n                 if (settings.complete) settings.complete.call();\n             }, 'html');\n      }\n    };\n\n    return {activate: activate, applyContext: applyContext};\n  };\n\n  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.pageless = function(opts) {\n    if (BARE_INSTANCE === null) {\n      BARE_INSTANCE = createClosure(opts);\n      BARE_INSTANCE.activate(opts);\n    }\n    return BARE_INSTANCE;\n  };\n\n  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.pageless = function(opts) {\n    if (!this.hasOwnProperty('pagelessInstance')) {\n      this.pagelessInstance = createClosure(opts);\n      this.pagelessInstance.activate(opts);\n    }\n    this.pagelessInstance.applyContext(jquery__WEBPACK_IMPORTED_MODULE_0___default()(this), opts);\n    return this;\n  };\n  \n\n\n//# sourceURL=webpack:///./packages/jquery-pageless/index.js?");

/***/ }),

/***/ "TvTI":
/*!****************************************!*\
  !*** ./ui/shared/util/templateData.js ***!
  \****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_helpers */ \"8JEM\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n/* replaceTags */\n// Fills the selected object(s) with data values as specified.  Plaintext values should be specified in the\n//  data: data used to fill template.\n//  id: set the id attribute of the template object\n//  textValues: a list of strings, which values should be plaintext\n//  htmlValues: a list of strings, which values should be html\n//  hrefValues: List of string.  Searches for all anchor tags in the template\n//    and globally replaces \"{{ value }}\" with data[value].  Useful for adding\n//    new elements asynchronously, when you don't know what their URL will be\n//    until they're created.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData = function (options) {\n  if (this.length && options) {\n    if (options.iterator) {\n      //  todo: replace .andSelf with .addBack when JQuery is upgraded.\n      this.find('*').andSelf().each(function () {\n        const $el = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n        jquery__WEBPACK_IMPORTED_MODULE_0___default.a.each(['name', 'id', 'class'], (i, attr) => {\n          if ($el.attr(attr)) {\n            $el.attr(attr, $el.attr(attr).replace(/-iterator-/, options.iterator));\n          }\n        });\n      });\n    }\n\n    if (options.id) {\n      this.attr('id', options.id);\n    }\n\n    let contentChange = false;\n\n    if (options.data) {\n      for (var item in options.data) {\n        if (options.except && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.except) != -1) {\n          continue;\n        }\n\n        if (options.data[item] && options.dataValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.dataValues) != -1) {\n          this.data(item, options.data[item].toString());\n        }\n\n        const $found_all = this.find('.' + item);\n        var avoid = options.avoid || '';\n        $found_all.each(function () {\n          const $found = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n\n          if ($found.length > 0 && $found.closest(avoid).length === 0) {\n            if (typeof options.data[item] === 'undefined' || options.data[item] === null) {\n              options.data[item] = '';\n            }\n\n            if (options.htmlValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.htmlValues) != -1) {\n              $found.html(jquery__WEBPACK_IMPORTED_MODULE_0___default.a.raw(options.data[item].toString()));\n\n              if ($found.hasClass('user_content')) {\n                contentChange = true;\n                $found.removeClass('enhanced');\n                $found.data('unenhanced_content_html', options.data[item].toString());\n              }\n            } else if ($found[0].tagName.toUpperCase() == 'INPUT') {\n              $found.val(options.data[item]);\n            } else {\n              try {\n                const str = options.data[item].toString();\n                $found.html(Object(html_escape__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(str));\n              } catch (e) {}\n            }\n          }\n        });\n      }\n    }\n\n    if (options.hrefValues && options.data) {\n      this.find('a,span[rel]').each(function () {\n        let $obj = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this),\n            oldHref,\n            oldRel,\n            oldName;\n\n        for (const i in options.hrefValues) {\n          if (!options.hrefValues.hasOwnProperty(i)) {\n            continue;\n          }\n\n          const name = options.hrefValues[i];\n\n          if (oldHref = $obj.attr('href')) {\n            const newHref = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldHref, name, encodeURIComponent(options.data[name]));\n            const orig = $obj.text() === $obj.html() ? $obj.text() : null;\n\n            if (oldHref !== newHref) {\n              $obj.attr('href', newHref);\n\n              if (orig) {\n                $obj.text(orig);\n              }\n            }\n          }\n\n          if (oldRel = $obj.attr('rel')) {\n            $obj.attr('rel', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldRel, name, options.data[name]));\n          }\n\n          if (oldName = $obj.attr('name')) {\n            $obj.attr('name', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldName, name, options.data[name]));\n          }\n        }\n      });\n    }\n\n    if (contentChange) {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).triggerHandler('user_content_change');\n    }\n  }\n\n  return this;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData.defaults = {\n  htmlValues: null,\n  hrefValues: null\n}; // Reverse version of fillTemplateData.  Lets you pull out the string versions of values held in divs, spans, etc.\n// Based on the usage of class names within an object to specify an object's sub-parts.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateData = function (options) {\n  if (!this.length || !options) {\n    return {};\n  }\n\n  var result = {},\n      item,\n      val;\n\n  if (options.textValues) {\n    const _this = this;\n\n    options.textValues.forEach(item => {\n      const $item = _this.find('.' + item.replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n\n      val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($item.text());\n\n      if ($item.html() === '&nbsp;') {\n        val = '';\n      }\n\n      if (val.length === 1 && val.charCodeAt(0) === 160) {\n        val = '';\n      }\n\n      result[item] = val;\n    });\n  }\n\n  if (options.dataValues) {\n    for (item in options.dataValues) {\n      var val = this.data(options.dataValues[item]);\n\n      if (val) {\n        result[options.dataValues[item]] = val;\n      }\n    }\n  }\n\n  if (options.htmlValues) {\n    for (item in options.htmlValues) {\n      const $elem = this.find('.' + options.htmlValues[item].replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n      val = null;\n\n      if ($elem.hasClass('user_content') && $elem.data('unenhanced_content_html')) {\n        val = $elem.data('unenhanced_content_html');\n      } else {\n        val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($elem.html());\n      }\n\n      result[options.htmlValues[item]] = val;\n    }\n  }\n\n  return result;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateValue = function (value, options) {\n  const opts = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, options, {\n    textValues: [value]\n  });\n  return this.getTemplateData(opts)[value];\n};\n\n//# sourceURL=webpack:///./ui/shared/util/templateData.js?");

/***/ }),

/***/ "tLpJ":
/*!******************************************************************************************!*\
  !*** ./frontend_build/i18n.js?context.roster_user_usage!./ui/shims/dummyI18nResource.js ***!
  \******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('context.roster_user_usage'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?context.roster_user_usage");

/***/ }),

/***/ "yHC9":
/*!***************************************************!*\
  !*** ./ui/features/context_roster_usage/index.js ***!
  \***************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_context_roster_user_usage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!context.roster_user_usage */ \"tLpJ\");\n/* harmony import */ var _canvas_datetime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/datetime */ \"7AEQ\");\n/* harmony import */ var _canvas_util_templateData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/util/templateData */ \"TvTI\");\n/* harmony import */ var jquery_pageless__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery-pageless */ \"GHsi\");\n//\n// Copyright (C) 2014 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\njquery__WEBPACK_IMPORTED_MODULE_0___default()(() => {\n  const url = ENV.context_url;\n  jquery__WEBPACK_IMPORTED_MODULE_0___default()('#usage_report').pageless({\n    totalPages: ENV.accesses_total_pages,\n    url,\n    loaderMsg: i18n_context_roster_user_usage__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('loading_more_results', 'Loading more results'),\n\n    scrape(data) {\n      if (typeof data === 'string') {\n        try {\n          data = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.parseJSON(data);\n        } catch (e) {\n          data = [];\n        }\n      }\n\n      for (const idx in data) {\n        const $access = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#usage_report .access.blank:first').clone(true).removeClass('blank');\n        const access = data[idx].asset_user_access;\n        $access.addClass(access.asset_class_name);\n        $access.find('.icon').addClass(access.icon);\n        delete access.icon;\n        access.readable_name = access.readable_name || access.display_name || access.asset_code;\n        access.last_viewed = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.datetimeString(access.last_access);\n        $access.fillTemplateData({\n          data: access\n        });\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#usage_report table tbody').append($access.show());\n      }\n\n      return '';\n    }\n\n  });\n});\n\n//# sourceURL=webpack:///./ui/features/context_roster_usage/index.js?");

/***/ })

}]);