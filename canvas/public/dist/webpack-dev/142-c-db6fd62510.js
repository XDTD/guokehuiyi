(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[142],{

/***/ "9P8q":
/*!********************************************************!*\
  !*** ./ui/shared/wiki/backbone/models/WikiPage.coffee ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _WikiPageRevision_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WikiPageRevision.coffee */ \"W2TM\");\n/* harmony import */ var _canvas_assignments_backbone_models_Assignment_coffee__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/assignments/backbone/models/Assignment.coffee */ \"ygkh\");\n/* harmony import */ var _canvas_backbone_DefaultUrlMixin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/backbone/DefaultUrlMixin */ \"2gWY\");\n/* harmony import */ var _canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/util/splitAssetString */ \"s9Pr\");\n/* harmony import */ var i18n_pages__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! i18n!pages */ \"lH+4\");\nvar WikiPage, pageOptions,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npageOptions = ['contextAssetString', 'revision'];\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (WikiPage = (function(superClass) {\n  extend(WikiPage, superClass);\n\n  function WikiPage() {\n    return WikiPage.__super__.constructor.apply(this, arguments);\n  }\n\n  WikiPage.mixin(_canvas_backbone_DefaultUrlMixin__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n\n  WikiPage.prototype.resourceName = 'pages';\n\n  WikiPage.prototype.idAttribute = 'page_id';\n\n  WikiPage.prototype.initialize = function(attributes, options) {\n    var ref;\n    WikiPage.__super__.initialize.apply(this, arguments);\n    Object.assign(this, underscore__WEBPACK_IMPORTED_MODULE_0___default.a.pick(options || {}, pageOptions));\n    if (this.contextAssetString) {\n      ref = Object(_canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(this.contextAssetString), this.contextName = ref[0], this.contextId = ref[1];\n    }\n    this.on('change:front_page', this.setPublishable);\n    this.on('change:published', this.setPublishable);\n    return this.setPublishable();\n  };\n\n  WikiPage.prototype.setPublishable = function() {\n    var deletable, front_page, publishable, published;\n    front_page = this.get('front_page');\n    published = this.get('published');\n    publishable = !front_page || !published;\n    deletable = !front_page;\n    this.set('publishable', publishable);\n    this.set('deletable', deletable);\n    if (publishable) {\n      return this.unset('publishableMessage');\n    } else {\n      return this.set('publishableMessage', i18n_pages__WEBPACK_IMPORTED_MODULE_6__[\"default\"].t('cannot_unpublish_front_page', 'Cannot unpublish the front page'));\n    }\n  };\n\n  WikiPage.prototype.disabledMessage = function() {\n    return this.get('publishableMessage');\n  };\n\n  WikiPage.prototype.urlRoot = function() {\n    return \"/api/v1/\" + (this._contextPath()) + \"/pages\";\n  };\n\n  WikiPage.prototype.url = function() {\n    if (this.get('url')) {\n      return (this.urlRoot()) + \"/\" + (this.get('url'));\n    } else {\n      return this.urlRoot();\n    }\n  };\n\n  WikiPage.prototype.latestRevision = function(options) {\n    var revisionOptions;\n    if (!this._latestRevision && this.get('url')) {\n      if (!this._latestRevision) {\n        revisionOptions = Object.assign({}, {\n          contextAssetString: this.contextAssetString,\n          page: this,\n          pageUrl: this.get('url'),\n          latest: true,\n          summary: true\n        }, options);\n        this._latestRevision = new _WikiPageRevision_coffee__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n          revision_id: this.revision\n        }, revisionOptions);\n      }\n    }\n    return this._latestRevision;\n  };\n\n  WikiPage.prototype.parse = function(response, options) {\n    var assign_attributes;\n    if (response.wiki_page) {\n      response = underscore__WEBPACK_IMPORTED_MODULE_0___default.a.extend(underscore__WEBPACK_IMPORTED_MODULE_0___default.a.omit(response, 'wiki_page'), response.wiki_page);\n    }\n    response.set_assignment = (response.assignment != null) && response.assignment.only_visible_to_overrides;\n    assign_attributes = response.assignment || {};\n    response.assignment = this.createAssignment(assign_attributes);\n    return response;\n  };\n\n  WikiPage.prototype.createAssignment = function(attributes) {\n    var a;\n    a = new _canvas_assignments_backbone_models_Assignment_coffee__WEBPACK_IMPORTED_MODULE_3__[\"default\"](attributes);\n    a.alreadyScoped = true;\n    return a;\n  };\n\n  WikiPage.prototype.toJSON = function() {\n    var json, ref;\n    json = WikiPage.__super__.toJSON.apply(this, arguments);\n    if (!json.set_assignment) {\n      delete json.assignment;\n    }\n    json.assignment = (ref = json.assignment) != null ? ref.toJSON() : void 0;\n    return {\n      wiki_page: json\n    };\n  };\n\n  WikiPage.prototype.present = function() {\n    return Object.assign({}, this.attributes, {\n      contextName: this.contextName,\n      contextId: this.contextId,\n      new_record: !this.get('url')\n    });\n  };\n\n  WikiPage.prototype.duplicate = function(courseId, callback) {\n    return $.ajaxJSON(\"/api/v1/courses/\" + courseId + \"/pages/\" + this.id + \"/duplicate\", 'POST', {}, callback);\n  };\n\n  WikiPage.prototype.publish = function() {\n    var attrs;\n    attrs = {\n      wiki_page: {\n        published: true\n      }\n    };\n    return this.save(attrs, {\n      attrs: attrs,\n      wait: true\n    });\n  };\n\n  WikiPage.prototype.unpublish = function() {\n    var attrs;\n    attrs = {\n      wiki_page: {\n        published: false\n      }\n    };\n    return this.save(attrs, {\n      attrs: attrs,\n      wait: true\n    });\n  };\n\n  WikiPage.prototype.setFrontPage = function(callback) {\n    var attrs;\n    attrs = {\n      wiki_page: {\n        front_page: true\n      }\n    };\n    return this.save(attrs, {\n      attrs: attrs,\n      wait: true,\n      complete: callback\n    });\n  };\n\n  WikiPage.prototype.unsetFrontPage = function() {\n    var attrs;\n    attrs = {\n      wiki_page: {\n        front_page: false\n      }\n    };\n    return this.save(attrs, {\n      attrs: attrs,\n      wait: true\n    });\n  };\n\n  return WikiPage;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.Model));\n\n\n//# sourceURL=webpack:///./ui/shared/wiki/backbone/models/WikiPage.coffee?");

/***/ }),

/***/ "B1CE":
/*!****************************************************!*\
  !*** ./ui/shared/wiki/jst/WikiPageEdit.handlebars ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_wiki_wiki_page_edit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!wiki.wiki_page_edit */ \"yg9m\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/guokehuiyi/canvas/ui/shared/wiki/jst/WikiPageEdit';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n      \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.content_is_locked), {hash:{},inverse:self.program(4, program4, data),fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n        <h1>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h1>\\n        <input name=\\\"title\\\" type=\\\"hidden\\\" value=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n      \";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        <label for=\\\"title\\\" class=\\\"screenreader-only\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"title_label\", \"Page Title\", options) : helperMissing.call(depth0, \"t\", \"title_label\", \"Page Title\", options)))\n    + \"</label>\\n        <input id=\\\"title\\\" name=\\\"title\\\" type=\\\"text\\\" class=\\\"span4 title\\\" value=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" maxlength=\\\"255\\\" autofocus>\\n      \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n      <h2>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\\n    \";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    \";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  \";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n    <label for=\\\"wiki_page_body\\\" class=\\\"hidden-readable\\\" aria-hidden=\\\"true\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"raw_html_editor_e3993e41\", \"Raw HTML Editor\", options) : helperMissing.call(depth0, \"t\", \"raw_html_editor_e3993e41\", \"Raw HTML Editor\", options)))\n    + \"</label>\\n    <textarea id=\\\"wiki_page_body\\\" rows=\\\"20\\\" cols=\\\"40\\\" name=\\\"body\\\" class=\\\"body\\\" aria-hidden=\\\"true\\\"\";\n  stack1 = helpers.unless.call(depth0, ((stack1 = (depth0 && depth0.PAGE_RIGHTS)),stack1 == null || stack1 === false ? stack1 : stack1.update), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression((helper = helpers.convertApiUserContent || (depth0 && depth0.convertApiUserContent),options={hash:{\n    'forEditing': (1)\n  },data:data},helper ? helper.call(depth0, (depth0 && depth0.body), options) : helperMissing.call(depth0, \"convertApiUserContent\", (depth0 && depth0.body), options)))\n    + \"</textarea>\\n  \";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  \n  return \" autofocus\";\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n    <div class=\\\"responsive-control-group options\\\">\\n      <label class=\\\"control-label\\\"><strong>\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"options_label\", \"Options\", options) : helperMissing.call(depth0, \"t\", \"options_label\", \"Options\", options)))\n    + \"</strong></label>\\n      <div class=\\\"controls\\\">\\n        <label id=\\\"editing_roles_label\\\"  for=\\\"editing_roles\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"Users allowed to edit this page\", options) : helperMissing.call(depth0, \"t\", \"Users allowed to edit this page\", options)))\n    + \"</label>\\n        <select id=\\\"editing_roles\\\" aria-label=\\\"\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"Users allowed to edit this page\", options) : helperMissing.call(depth0, \"t\", \"Users allowed to edit this page\", options)))\n    + \"\\\" name=\\\"editing_roles\\\" class=\\\"responsive-width\\\">\\n          \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.SHOW)),stack1 == null || stack1 === false ? stack1 : stack1.COURSE_ROLES), {hash:{},inverse:self.program(17, program17, data),fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </select>\\n        \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.ENV)),stack1 == null || stack1 === false ? stack1 : stack1.CAN_SET_TODO_DATE), {hash:{},inverse:self.noop,fn:self.program(19, program19, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.ENV)),stack1 == null || stack1 === false ? stack1 : stack1.CONDITIONAL_RELEASE_SERVICE_ENABLED), {hash:{},inverse:self.noop,fn:self.program(21, program21, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </div>\\n    </div>\\n  \";\n  return buffer;\n  }\nfunction program14(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <option value=\\\"teachers\\\"\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.IS)),stack1 == null || stack1 === false ? stack1 : stack1.TEACHER_ROLE), {hash:{},inverse:self.noop,fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"course_editing_roles.only_teachers\", \"Only teachers\", options) : helperMissing.call(depth0, \"t\", \"course_editing_roles.only_teachers\", \"Only teachers\", options)))\n    + \"</option>\\n            <option value=\\\"teachers,students\\\"\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.IS)),stack1 == null || stack1 === false ? stack1 : stack1.STUDENT_ROLE), {hash:{},inverse:self.noop,fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"course_editing_roles.teachers_and_students\", \"Teachers and students\", options) : helperMissing.call(depth0, \"t\", \"course_editing_roles.teachers_and_students\", \"Teachers and students\", options)))\n    + \"</option>\\n            <option value=\\\"teachers,students,public\\\"\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.IS)),stack1 == null || stack1 === false ? stack1 : stack1.ANYONE_ROLE), {hash:{},inverse:self.noop,fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"course_editing_roles.anyone\", \"Anyone\", options) : helperMissing.call(depth0, \"t\", \"course_editing_roles.anyone\", \"Anyone\", options)))\n    + \"</option>\\n          \";\n  return buffer;\n  }\nfunction program15(depth0,data) {\n  \n  \n  return \" selected\";\n  }\n\nfunction program17(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <option value=\\\"members\\\"\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.IS)),stack1 == null || stack1 === false ? stack1 : stack1.MEMBER_ROLE), {hash:{},inverse:self.noop,fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"editing_roles.only_members\", \"Only members\", options) : helperMissing.call(depth0, \"t\", \"editing_roles.only_members\", \"Only members\", options)))\n    + \"</option>\\n            <option value=\\\"members,public\\\"\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.IS)),stack1 == null || stack1 === false ? stack1 : stack1.ANYONE_ROLE), {hash:{},inverse:self.noop,fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"editing_roles.anyone\", \"Anyone\", options) : helperMissing.call(depth0, \"t\", \"editing_roles.anyone\", \"Anyone\", options)))\n    + \"</option>\\n          \";\n  return buffer;\n  }\n\nfunction program19(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n          <div class=\\\"controls-section\\\">\\n            <label for=\\\"student_planner_checkbox\\\" class=\\\"checkbox\\\">\\n            <input value=\\\"1\\\" type=\\\"checkbox\\\" id=\\\"student_planner_checkbox\\\" name=\\\"student_planner_checkbox\\\" \"\n    + escapeExpression((helper = helpers.checkedIf || (depth0 && depth0.checkedIf),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.todo_date), options) : helperMissing.call(depth0, \"checkedIf\", (depth0 && depth0.todo_date), options)))\n    + \" />\\n              \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"add_to_student_to_do_58e66b4b\", \"Add to student to-do\", options) : helperMissing.call(depth0, \"t\", \"add_to_student_to_do_58e66b4b\", \"Add to student to-do\", options)))\n    + \"\\n            </label>\\n            <div id=\\\"todo_date_container\\\" />\\n          </div>\\n        \";\n  return buffer;\n  }\n\nfunction program21(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n          <div class=\\\"controls-section\\\">\\n            <label class=\\\"checkbox\\\" for=\\\"conditional_content\\\">\\n              \"\n    + escapeExpression((helper = helpers.checkbox || (depth0 && depth0.checkbox),options={hash:{\n    'id': (\"conditional_content\"),\n    'class': (\"element_toggler\"),\n    'checked': ((depth0 && depth0.set_assignment))\n  },data:data},helper ? helper.call(depth0, \"assignment.set_assignment\", options) : helperMissing.call(depth0, \"checkbox\", \"assignment.set_assignment\", options)))\n    + \"\\n              \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"allow_in_mastery_paths_5332c786\", \"Allow in mastery paths\", options) : helperMissing.call(depth0, \"t\", \"allow_in_mastery_paths_5332c786\", \"Allow in mastery paths\", options)))\n    + \"\\n            </label>\\n          </div>\\n        \";\n  return buffer;\n  }\n\nfunction program23(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        <button class=\\\"btn btn-default save_and_publish\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"buttons.save_and_publish\", \"Save & Publish\", options) : helperMissing.call(depth0, \"t\", \"buttons.save_and_publish\", \"Save & Publish\", options)))\n    + \"</button>\\n      \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"edit-content\\\">\\n  <div class=\\\"edit-header\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.CAN)),stack1 == null || stack1 === false ? stack1 : stack1.EDIT_TITLE), {hash:{},inverse:self.program(6, program6, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </div>\\n\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.content_is_locked), {hash:{},inverse:self.program(10, program10, data),fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n  \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.CAN)),stack1 == null || stack1 === false ? stack1 : stack1.EDIT_ROLES), {hash:{},inverse:self.noop,fn:self.program(13, program13, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n\\n<div class=\\\"form-actions clearfix\\\">\\n  <div>\\n    <label for=\\\"notify_of_update\\\" class=\\\"checkbox clearfix pull-left\\\" style=\\\"margin-top:5px\\\">\\n      \"\n    + escapeExpression((helper = helpers.checkbox || (depth0 && depth0.checkbox),options={hash:{},data:data},helper ? helper.call(depth0, \"notify_of_update\", options) : helperMissing.call(depth0, \"checkbox\", \"notify_of_update\", options)))\n    + \"\\n      \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"notify_users_text\", \"Notify users that this content has changed\", options) : helperMissing.call(depth0, \"t\", \"notify_users_text\", \"Notify users that this content has changed\", options)))\n    + \"\\n    </label>\\n    <div class=\\\"page-edit__action_buttons\\\">\\n      <button class=\\\"btn cancel\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"buttons.cancel\", \"Cancel\", options) : helperMissing.call(depth0, \"t\", \"buttons.cancel\", \"Cancel\", options)))\n    + \"</button>\\n      \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.CAN)),stack1 == null || stack1 === false ? stack1 : stack1.PUBLISH_NOW), {hash:{},inverse:self.noop,fn:self.program(23, program23, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      <button class=\\\"btn btn-primary submit\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"wiki.wiki_page_edit\")\n  },data:data},helper ? helper.call(depth0, \"buttons.save\", \"Save\", options) : helperMissing.call(depth0, \"t\", \"buttons.save\", \"Save\", options)))\n    + \"</button>\\n    </div>\\n  </div>\\n</div>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/shared/wiki/jst/WikiPageEdit.handlebars?");

/***/ }),

/***/ "IiHG":
/*!***************************************************************!*\
  !*** ./ui/shared/wiki/backbone/views/WikiPageDeleteDialog.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WikiPageDeleteDialog; });\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"VTBJ\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var i18n_pages__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! i18n!pages */ \"lH+4\");\n/* harmony import */ var _canvas_forms_backbone_views_DialogFormView_coffee__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/forms/backbone/views/DialogFormView.coffee */ \"mT8+\");\n\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\nconst dialogDefaults = {\n  fixDialogButtons: false,\n  title: i18n_pages__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('delete_dialog_title', 'Delete Page'),\n  width: Object(_canvas_forms_backbone_views_DialogFormView_coffee__WEBPACK_IMPORTED_MODULE_3__[\"getResponsiveWidth\"])(240, 400),\n  height: 'auto'\n};\nclass WikiPageDeleteDialog extends _canvas_forms_backbone_views_DialogFormView_coffee__WEBPACK_IMPORTED_MODULE_3__[\"default\"] {\n  static initClass() {\n    this.prototype.setViewProperties = false;\n    this.optionProperty('wiki_pages_path');\n    this.optionProperty('focusOnCancel');\n    this.optionProperty('onDelete');\n  }\n\n  wrapperTemplate() {\n    return '<div class=\"outlet\"></div>';\n  }\n\n  template() {\n    return i18n_pages__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('delete_confirmation', 'Are you sure you want to delete this page?');\n  }\n\n  initialize(options) {\n    return super.initialize(Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, dialogDefaults), options));\n  }\n\n  submit(event) {\n    if (event != null) {\n      event.preventDefault();\n    }\n\n    const destroyDfd = this.model.destroy({\n      wait: true\n    });\n    const dfd = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.Deferred();\n    const page_title = this.model.get('title');\n    const wiki_pages_path = this.wiki_pages_path;\n    destroyDfd.then(() => {\n      if (wiki_pages_path) {\n        const expires = new Date();\n        expires.setMinutes(expires.getMinutes() + 1);\n        const path = '/'; // should be wiki_pages_path, but IE will only allow *sub*directries to read the cookie, not the directory itself...\n\n        jquery__WEBPACK_IMPORTED_MODULE_1___default.a.cookie('deleted_page_title', page_title, {\n          expires,\n          path\n        });\n        return window.location.href = wiki_pages_path;\n      } else {\n        jquery__WEBPACK_IMPORTED_MODULE_1___default.a.flashMessage(i18n_pages__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('notices.page_deleted', 'The page \"%{title}\" has been deleted.', {\n          title: page_title\n        }));\n        dfd.resolve();\n        return this.close();\n      }\n    });\n    destroyDfd.fail(() => {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.flashError(i18n_pages__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('notices.delete_failed', 'The page \"%{title}\" could not be deleted.', {\n        title: page_title\n      }));\n      return dfd.reject();\n    });\n    return this.$el.disableWhileLoading(dfd);\n  }\n\n  close() {\n    if (this.dialog != null ? this.dialog.isOpen() : void 0) {\n      this.dialog.close();\n    }\n\n    if (this.buttonClicked === 'delete') {\n      return this.onDelete != null ? this.onDelete() : void 0;\n    } else {\n      return this.focusOnCancel != null ? this.focusOnCancel.focus() : void 0;\n    }\n  }\n\n  setupDialog() {\n    super.setupDialog(...arguments);\n    const form = this;\n    const buttons = [{\n      class: 'btn',\n      text: i18n_pages__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('cancel_button', 'Cancel'),\n      click: () => {\n        this.buttonClicked = 'cancel';\n        return form.$el.dialog('close');\n      }\n    }, {\n      class: 'btn btn-danger',\n      text: i18n_pages__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('delete_button', 'Delete'),\n      'data-text-while-loading': i18n_pages__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('deleting_button', 'Deleting...'),\n      click: () => {\n        this.buttonClicked = 'delete';\n        return form.submit();\n      }\n    }];\n    return this.$el.dialog('option', 'buttons', buttons);\n  }\n\n}\nWikiPageDeleteDialog.initClass();\n\n//# sourceURL=webpack:///./ui/shared/wiki/backbone/views/WikiPageDeleteDialog.js?");

/***/ }),

/***/ "W2TM":
/*!****************************************************************!*\
  !*** ./ui/shared/wiki/backbone/models/WikiPageRevision.coffee ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var i18n_pages__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!pages */ \"lH+4\");\n/* harmony import */ var _canvas_backbone_DefaultUrlMixin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/backbone/DefaultUrlMixin */ \"2gWY\");\n/* harmony import */ var _canvas_panda_pub_poller__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/panda-pub-poller */ \"cRz0\");\n/* harmony import */ var _canvas_rails_flash_notifications__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/rails-flash-notifications */ \"r2Yr\");\n/* harmony import */ var _canvas_jquery_jquery_disableWhileLoading__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @canvas/jquery/jquery.disableWhileLoading */ \"sXof\");\nvar WikiPageRevision, pageRevisionOptions,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npageRevisionOptions = ['contextAssetString', 'page', 'pageUrl', 'latest', 'summary'];\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (WikiPageRevision = (function(superClass) {\n  extend(WikiPageRevision, superClass);\n\n  function WikiPageRevision() {\n    this.doPoll = bind(this.doPoll, this);\n    return WikiPageRevision.__super__.constructor.apply(this, arguments);\n  }\n\n  WikiPageRevision.mixin(_canvas_backbone_DefaultUrlMixin__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n\n  WikiPageRevision.prototype.initialize = function(attributes, options) {\n    WikiPageRevision.__super__.initialize.apply(this, arguments);\n    underscore__WEBPACK_IMPORTED_MODULE_1___default.a.extend(this, underscore__WEBPACK_IMPORTED_MODULE_1___default.a.pick(options || {}, pageRevisionOptions));\n    if (underscore__WEBPACK_IMPORTED_MODULE_1___default.a.has(this, 'url')) {\n      return delete this.url;\n    }\n  };\n\n  WikiPageRevision.prototype.urlRoot = function() {\n    return \"/api/v1/\" + (this._contextPath()) + \"/pages/\" + this.pageUrl + \"/revisions\";\n  };\n\n  WikiPageRevision.prototype.url = function() {\n    var base;\n    base = this.urlRoot();\n    if (this.latest) {\n      return base + \"/latest\";\n    }\n    if (this.get('revision_id')) {\n      return base + \"/\" + (this.get('revision_id'));\n    }\n    return base;\n  };\n\n  WikiPageRevision.prototype.fetch = function(options) {\n    var base1;\n    if (options == null) {\n      options = {};\n    }\n    if (this.summary) {\n      if (options.data == null) {\n        options.data = {};\n      }\n      if ((base1 = options.data).summary == null) {\n        base1.summary = true;\n      }\n    }\n    return WikiPageRevision.__super__.fetch.call(this, options);\n  };\n\n  WikiPageRevision.prototype.pollForChanges = function(interval) {\n    var pp, throttledPoll;\n    if (interval == null) {\n      interval = 30000;\n    }\n    if (!this._poller) {\n      throttledPoll = underscore__WEBPACK_IMPORTED_MODULE_1___default.a.throttle(this.doPoll, interval);\n      this._poller = new _canvas_panda_pub_poller__WEBPACK_IMPORTED_MODULE_5__[\"default\"](interval, interval * 10, throttledPoll);\n      if (pp = window.ENV.WIKI_PAGE_PANDAPUB) {\n        this._poller.setToken(pp.CHANNEL, pp.TOKEN);\n      }\n      this._poller.setOnData((function(_this) {\n        return function() {\n          return throttledPoll();\n        };\n      })(this));\n      return this._poller.start();\n    }\n  };\n\n  WikiPageRevision.prototype.startPolling = function() {\n    if (this._poller) {\n      return this._poller.start();\n    }\n  };\n\n  WikiPageRevision.prototype.stopPolling = function() {\n    if (this._poller) {\n      return this._poller.stop();\n    }\n  };\n\n  WikiPageRevision.prototype.doPoll = function(done) {\n    if (!(this._poller && this._poller.isRunning())) {\n      return;\n    }\n    return this.fetch().done(function(data, status, xhr) {\n      status = xhr.status.toString();\n      if (status[0] === '4' || status[0] === '5') {\n        this._poller.stop();\n      }\n      if (done) {\n        return done();\n      }\n    });\n  };\n\n  WikiPageRevision.prototype.parse = function(response, options) {\n    if (response.url) {\n      response.id = response.url;\n    }\n    return response;\n  };\n\n  WikiPageRevision.prototype.toJSON = function() {\n    return underscore__WEBPACK_IMPORTED_MODULE_1___default.a.omit(WikiPageRevision.__super__.toJSON.apply(this, arguments), 'id');\n  };\n\n  WikiPageRevision.prototype.restore = function() {\n    var d;\n    d = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.ajaxJSON(this.url(), 'POST').fail(function() {\n      return jquery__WEBPACK_IMPORTED_MODULE_0___default.a.flashError(i18n_pages__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('restore_failed', 'Failed to restore page revision'));\n    });\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#wiki_page_revisions').disableWhileLoading(jquery__WEBPACK_IMPORTED_MODULE_0___default.a.Deferred());\n    return d;\n  };\n\n  return WikiPageRevision;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_2___default.a.Model));\n\n\n//# sourceURL=webpack:///./ui/shared/wiki/backbone/models/WikiPageRevision.coffee?");

/***/ }),

/***/ "dDTa":
/*!*****************************************************!*\
  !*** ./ui/shared/external-apps/iframeAllowances.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst iframeAllowances = () => {\n  const allowances = ENV.LTI_LAUNCH_FRAME_ALLOWANCES || [];\n  return allowances.join('; ');\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (iframeAllowances);\n\n//# sourceURL=webpack:///./ui/shared/external-apps/iframeAllowances.js?");

/***/ }),

/***/ "dUNX":
/*!***********************************************************!*\
  !*** ./ui/shared/wiki/backbone/views/WikiPageEditView.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WikiPageEditView; });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/rce/RichContentEditor */ \"Ce78\");\n/* harmony import */ var _jst_WikiPageEdit_handlebars__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../jst/WikiPageEdit.handlebars */ \"B1CE\");\n/* harmony import */ var _canvas_forms_backbone_views_ValidatedFormView_coffee__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/forms/backbone/views/ValidatedFormView.coffee */ \"br6r\");\n/* harmony import */ var _WikiPageDeleteDialog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./WikiPageDeleteDialog */ \"IiHG\");\n/* harmony import */ var _WikiPageReloadView__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./WikiPageReloadView */ \"do4u\");\n/* harmony import */ var i18n_pages__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! i18n!pages */ \"lH+4\");\n/* harmony import */ var _canvas_due_dates_react_DueDateCalendarPicker__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @canvas/due-dates/react/DueDateCalendarPicker */ \"1r48\");\n/* harmony import */ var _canvas_datetime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @canvas/datetime */ \"7AEQ\");\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\n\n\n\n\n\n\n_canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_3__[\"default\"].preloadRemoteModule();\nclass WikiPageEditView extends _canvas_forms_backbone_views_ValidatedFormView_coffee__WEBPACK_IMPORTED_MODULE_5__[\"default\"] {\n  constructor(...args) {\n    super(...args);\n\n    this.handleStudentTodoUpdate = newDate => {\n      this.studentTodoAtDateValue = newDate;\n      return this.renderStudentTodoAtDate();\n    };\n  }\n\n  static initClass() {\n    this.mixin({\n      els: {\n        '[name=\"body\"]': '$wikiPageBody',\n        '.header-bar-outer-container': '$headerBarOuterContainer',\n        '.page-changed-alert': '$pageChangedAlert',\n        '.help_dialog': '$helpDialog',\n        '#todo_date_container': '$studentTodoAtContainer',\n        '#student_planner_checkbox': '$studentPlannerCheckbox'\n      },\n      events: {\n        'click a.switch_views': 'switchViews',\n        'click .delete_page': 'deleteWikiPage',\n        'click .form-actions .cancel': 'cancel',\n        'click .form-actions .save_and_publish': 'saveAndPublish',\n        'click #student_planner_checkbox': 'toggleStudentTodo'\n      }\n    });\n    this.prototype.template = _jst_WikiPageEdit_handlebars__WEBPACK_IMPORTED_MODULE_4__[\"default\"];\n    this.prototype.className = 'form-horizontal edit-form validated-form-view';\n    this.prototype.dontRenableAfterSaveSuccess = true;\n    this.optionProperty('wiki_pages_path');\n    this.optionProperty('WIKI_RIGHTS');\n    this.optionProperty('PAGE_RIGHTS');\n  }\n\n  initialize(options = {}) {\n    super.initialize(...arguments);\n    if (!this.WIKI_RIGHTS) this.WIKI_RIGHTS = {};\n    if (!this.PAGE_RIGHTS) this.PAGE_RIGHTS = {};\n    this.on('success', args => window.location.href = this.model.get('html_url'));\n    this.lockedItems = options.lockedItems || {};\n    const todoDate = this.model.get('todo_date');\n    return this.studentTodoAtDateValue = todoDate ? new Date(todoDate) : '';\n  }\n\n  toJSON() {\n    let IS;\n    const json = super.toJSON(...arguments);\n    json.IS = IS = {\n      TEACHER_ROLE: false,\n      STUDENT_ROLE: false,\n      MEMBER_ROLE: false,\n      ANYONE_ROLE: false\n    }; // rather than requiring the editing_roles to match a\n    // string exactly, we check for individual editing roles\n\n    let editing_roles = json.editing_roles || '';\n    editing_roles = editing_roles.split(',').map(s => s.trim());\n\n    if (editing_roles.includes('public')) {\n      IS.ANYONE_ROLE = true;\n    } else if (editing_roles.includes('members')) {\n      IS.MEMBER_ROLE = true;\n    } else if (editing_roles.includes('students')) {\n      IS.STUDENT_ROLE = true;\n    } else {\n      IS.TEACHER_ROLE = true;\n    }\n\n    json.CAN = {\n      PUBLISH: !!this.WIKI_RIGHTS.publish_page,\n      // Annoying name conflict - PUBLISH means we're allowed to publish wiki\n      // pages in general, PUBLISH_NOW means we can publish this page right\n      // now (i.e. we can PUBLISH and this page is currently unpublished)\n      PUBLISH_NOW: !!this.WIKI_RIGHTS.publish_page && !this.model.get('published'),\n      DELETE: !!this.PAGE_RIGHTS.delete,\n      EDIT_TITLE: !!this.PAGE_RIGHTS.update || json.new_record,\n      EDIT_ROLES: !!this.WIKI_RIGHTS.update\n    };\n    json.SHOW = {\n      COURSE_ROLES: json.contextName === 'courses'\n    };\n    json.assignment = json.assignment != null ? json.assignment.toView() : void 0;\n    json.content_is_locked = this.lockedItems.content;\n    return json;\n  }\n\n  onUnload(ev) {\n    // don't open the \"are you sure\" dialog unless we're still rendered in the page\n    // so that, for example, our specs that don't clean up after themselves don't\n    // fire this unintentionally\n    if (this && this.checkUnsavedOnLeave && this.hasUnsavedChanges() && document.body.contains(this.el)) {\n      const warning = this.unsavedWarning();\n      (ev || window.event).returnValue = warning;\n      return warning;\n    }\n  } // handles the toggling of the student todo date picker\n\n\n  toggleStudentTodo(e) {\n    return this.$studentTodoAtContainer.toggle();\n  }\n\n  renderStudentTodoAtDate() {\n    const elt = this.$studentTodoAtContainer[0];\n\n    if (elt) {\n      return react_dom__WEBPACK_IMPORTED_MODULE_2___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_canvas_due_dates_react_DueDateCalendarPicker__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n        dateType: \"todo_date\",\n        name: \"student_todo_at\",\n        handleUpdate: this.handleStudentTodoUpdate,\n        rowKey: \"student_todo_at_date\",\n        labelledBy: \"student_todo_at_date_label\",\n        inputClasses: \"\",\n        disabled: false,\n        isFancyMidnight: true,\n        dateValue: this.studentTodoAtDateValue,\n        labelText: \"Student Planner Date\",\n        labelClasses: \"screenreader-only\"\n      }), elt);\n    }\n  } // After the page loads, ensure the that wiki sidebar gets initialized\n  // correctly.\n  // @api custom backbone override\n\n\n  afterRender() {\n    super.afterRender(...arguments);\n    this.renderStudentTodoAtDate();\n\n    if (this.toJSON().todo_date == null) {\n      this.$studentTodoAtContainer.hide();\n    }\n\n    _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_3__[\"default\"].loadNewEditor(this.$wikiPageBody, {\n      focus: true,\n      manageParent: true\n    });\n    this.checkUnsavedOnLeave = true;\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).on('beforeunload', this.onUnload.bind(this));\n\n    if (!this.firstRender) {\n      this.firstRender = true;\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()(() => jquery__WEBPACK_IMPORTED_MODULE_0___default()('[autofocus]:not(:focus)').eq(0).focus());\n    }\n\n    this.reloadPending = false;\n    this.reloadView = new _WikiPageReloadView__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n      el: this.$pageChangedAlert,\n      model: this.model,\n      interval: 60000,\n      reloadMessage: i18n_pages__WEBPACK_IMPORTED_MODULE_8__[\"default\"].t('reload_editing_page', 'This page has changed since you started editing it. *Reloading* will lose all of your changes.', {\n        wrapper: '<a class=\"reload\" href=\"#\">$1</a>'\n      }),\n      warning: true\n    });\n    this.reloadView.on('changed', () => {\n      this.$headerBarOuterContainer.addClass('page-changed');\n      return this.reloadPending = true;\n    });\n    this.reloadView.on('reload', () => this.render());\n    this.reloadView.pollForChanges();\n  }\n\n  destroyEditor() {\n    _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_3__[\"default\"].destroyRCE(this.$wikiPageBody);\n    return this.$el.remove();\n  }\n\n  switchViews(event) {\n    if (event != null) {\n      event.preventDefault();\n    }\n\n    _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_3__[\"default\"].callOnRCE(this.$wikiPageBody, 'toggle'); // hide the clicked link, and show the other toggle link.\n    // todo: replace .andSelf with .addBack when JQuery is upgraded.\n\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.currentTarget).siblings('a').andSelf().toggle().focus();\n  } // Validate they entered in a title.\n  // @api ValidatedFormView override\n\n\n  validateFormData(data) {\n    const errors = {};\n\n    if (data.title === '') {\n      errors.title = [{\n        type: 'required',\n        message: i18n_pages__WEBPACK_IMPORTED_MODULE_8__[\"default\"].t('errors.require_title', 'You must enter a title')\n      }];\n    }\n\n    const studentTodoAtValid = data.student_todo_at != null && data.student_todo_at !== '';\n\n    if (data.student_planner_checkbox && !studentTodoAtValid) {\n      errors.student_todo_at = [{\n        type: 'required',\n        message: i18n_pages__WEBPACK_IMPORTED_MODULE_8__[\"default\"].t('You must enter a date')\n      }];\n    }\n\n    return errors;\n  }\n\n  hasUnsavedChanges() {\n    const hasEditor = _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_3__[\"default\"].callOnRCE(this.$wikiPageBody, 'exists?');\n    let dirty = hasEditor && _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_3__[\"default\"].callOnRCE(this.$wikiPageBody, 'is_dirty');\n\n    if (!dirty && this.toJSON().CAN.EDIT_TITLE) {\n      dirty = (this.model.get('title') || '') !== (this.getFormData().title || '');\n    }\n\n    return dirty;\n  }\n\n  unsavedWarning() {\n    return i18n_pages__WEBPACK_IMPORTED_MODULE_8__[\"default\"].t('warnings.unsaved_changes', 'You have unsaved changes. Do you want to continue without saving these changes?');\n  }\n\n  submit(event) {\n    this.checkUnsavedOnLeave = false;\n\n    if (this.reloadPending) {\n      if (!confirm(i18n_pages__WEBPACK_IMPORTED_MODULE_8__[\"default\"].t('warnings.overwrite_changes', 'You are about to overwrite other changes that have been made since you started editing.\\n\\nOverwrite these changes?'))) {\n        if (event != null) {\n          event.preventDefault();\n        }\n\n        return;\n      }\n    }\n\n    if (this.reloadView != null) {\n      this.reloadView.stopPolling();\n    }\n\n    return super.submit(...arguments);\n  }\n\n  saveAndPublish(event) {\n    this.shouldPublish = true;\n    return this.submit(event);\n  }\n\n  onSaveFail(xhr) {\n    this.shouldPublish = false;\n    return super.onSaveFail(xhr);\n  }\n\n  getFormData() {\n    const page_data = super.getFormData(...arguments);\n    const assign_data = page_data.assignment;\n\n    if ((assign_data != null ? assign_data.set_assignment : void 0) === '1') {\n      assign_data.only_visible_to_overrides = true;\n      page_data.assignment = this.model.get('assignment') || this.model.createAssignment();\n      page_data.assignment.set(assign_data);\n    } else {\n      page_data.assignment = this.model.createAssignment({\n        set_assignment: '0'\n      });\n    }\n\n    page_data.set_assignment = page_data.assignment.get('set_assignment');\n    page_data.student_planner_checkbox = this.$studentPlannerCheckbox.is(':checked');\n\n    if (page_data.student_planner_checkbox) {\n      page_data.student_todo_at = this.studentTodoAtDateValue;\n    } else {\n      page_data.student_todo_at = null;\n    }\n\n    if (this.shouldPublish) page_data.published = true;\n    return page_data;\n  }\n\n  cancel(event) {\n    if (event != null) {\n      event.preventDefault();\n    }\n\n    if (!this.hasUnsavedChanges() || confirm(this.unsavedWarning())) {\n      this.checkUnsavedOnLeave = false;\n      _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_3__[\"default\"].closeRCE(this.$wikiPageBody);\n      return this.trigger('cancel');\n    }\n  }\n\n  deleteWikiPage(event) {\n    if (event != null) {\n      event.preventDefault();\n    }\n\n    if (!this.model.get('deletable')) return;\n    const deleteDialog = new _WikiPageDeleteDialog__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      model: this.model,\n      wiki_pages_path: this.wiki_pages_path\n    });\n    return deleteDialog.open();\n  }\n\n}\nWikiPageEditView.initClass();\n\n//# sourceURL=webpack:///./ui/shared/wiki/backbone/views/WikiPageEditView.js?");

/***/ }),

/***/ "do4u":
/*!*************************************************************!*\
  !*** ./ui/shared/wiki/backbone/views/WikiPageReloadView.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WikiPageReloadView; });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\n//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\nconst pageReloadOptions = ['reloadMessage', 'warning', 'interval'];\nclass WikiPageReloadView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.View {\n  static initClass() {\n    this.prototype.setViewProperties = false;\n    this.prototype.defaults = {\n      modelAttributes: ['title', 'url', 'body'],\n      warning: false\n    };\n    this.prototype.events = {\n      'click a.reload': 'reload'\n    };\n  }\n\n  template() {\n    return `<div class='alert alert-${$.raw(this.options.warning ? 'warning' : 'info')} reload-changed-page'>${$.raw(this.reloadMessage)}</div>`;\n  }\n\n  initialize(options) {\n    super.initialize(...arguments);\n    return underscore__WEBPACK_IMPORTED_MODULE_0___default.a.extend(this, underscore__WEBPACK_IMPORTED_MODULE_0___default.a.pick(options || {}, pageReloadOptions));\n  }\n\n  pollForChanges() {\n    if (!this.model) return;\n    const view = this;\n    const model = this.model;\n    const latestRevision = this.latestRevision = model.latestRevision();\n\n    if (latestRevision && !model.isNew()) {\n      latestRevision.on('change:revision_id', () => // when the revision changes, query the full record\n      latestRevision.fetch({\n        data: {\n          summary: false\n        }\n      }).done(() => {\n        view.render();\n        view.trigger('changed');\n        return view.stopPolling();\n      }));\n      return latestRevision.pollForChanges(this.interval);\n    }\n  }\n\n  stopPolling() {\n    return this.latestRevision != null ? this.latestRevision.stopPolling() : void 0;\n  }\n\n  reload(ev) {\n    if (ev != null) {\n      ev.preventDefault();\n    }\n\n    this.model.set(underscore__WEBPACK_IMPORTED_MODULE_0___default.a.pick(this.latestRevision.attributes, this.options.modelAttributes));\n    this.trigger('reload');\n    return this.latestRevision.startPolling();\n  }\n\n}\nWikiPageReloadView.initClass();\n\n//# sourceURL=webpack:///./ui/shared/wiki/backbone/views/WikiPageReloadView.js?");

/***/ }),

/***/ "lH+4":
/*!**********************************************************************!*\
  !*** ./frontend_build/i18n.js?pages!./ui/shims/dummyI18nResource.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('pages'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?pages");

/***/ }),

/***/ "yg9m":
/*!************************************************************************************!*\
  !*** ./frontend_build/i18n.js?wiki.wiki_page_edit!./ui/shims/dummyI18nResource.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('wiki.wiki_page_edit'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?wiki.wiki_page_edit");

/***/ })

}]);