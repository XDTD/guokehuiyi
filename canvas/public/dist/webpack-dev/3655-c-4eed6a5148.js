(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3655],{

/***/ "06Z0":
/*!************************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/MoveDatesModal.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MoveDatesModal; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ \"Ff2n\");\n/* harmony import */ var i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! i18n!assignments_bulk_edit */ \"nlrC\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-checkbox */ \"Kdwl\");\n/* harmony import */ var _instructure_ui_radio_input__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-radio-input */ \"2n2h\");\n/* harmony import */ var _instructure_ui_number_input__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-number-input */ \"V0Cs\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_view__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @instructure/ui-view */ \"OkHH\");\n/* harmony import */ var _canvas_instui_bindings_react_Modal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @canvas/instui-bindings/react/Modal */ \"HeaX\");\n/* harmony import */ var _hooks_useNumberInputDriver__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../hooks/useNumberInputDriver */ \"UC/F\");\n\n\nconst _excluded = [\"onShiftDays\", \"onRemoveDates\", \"onCancel\"];\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\nfunction MoveDatesModal(_ref) {\n  let onShiftDays = _ref.onShiftDays,\n      onRemoveDates = _ref.onRemoveDates,\n      onCancel = _ref.onCancel,\n      otherModalProps = Object(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_ref, _excluded);\n\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])('shift'),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        mode = _useState2[0],\n        setMode = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(['dueDates']),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        datesToRemove = _useState4[0],\n        setDatesToRemove = _useState4[1];\n\n  const _useNumberInputDriver = Object(_hooks_useNumberInputDriver__WEBPACK_IMPORTED_MODULE_12__[\"default\"])({\n    initialNumberValue: 1,\n    minNumberValue: 1,\n    maxNumberValue: 999\n  }),\n        _useNumberInputDriver2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useNumberInputDriver, 2),\n        shiftDaysState = _useNumberInputDriver2[0],\n        shiftDaysProps = _useNumberInputDriver2[1];\n\n  const handleOk = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useCallback\"])(() => {\n    if (mode === 'shift' && shiftDaysState.numberValue) onShiftDays(shiftDaysState.numberValue);\n\n    if (mode === 'remove') {\n      const outputDatesToRemove = [];\n      if (datesToRemove.includes('dueDates')) outputDatesToRemove.push('due_at');\n\n      if (datesToRemove.includes('lockDates')) {\n        outputDatesToRemove.push('unlock_at');\n        outputDatesToRemove.push('lock_at');\n      }\n\n      if (outputDatesToRemove.length) onRemoveDates(outputDatesToRemove);\n    } // else, unrecognized mode or bad data, so do nothing\n\n  }, [datesToRemove, mode, onShiftDays, onRemoveDates, shiftDaysState.numberValue]);\n  const handleModeChange = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useCallback\"])(e => {\n    setMode(e.target.value);\n  }, []);\n  const handleDatesToRemoveChange = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useCallback\"])(newValue => {\n    setDatesToRemove(newValue);\n  }, []);\n\n  const okDisabled = function () {\n    if (mode === 'shift' && shiftDaysState.numberValue === null) return true;\n    if (mode === 'remove' && datesToRemove.length === 0) return true;\n    return false;\n  }();\n\n  const renderFooter = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useCallback\"])(() => {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_4__[\"Button\"], {\n      onClick: onCancel,\n      \"data-testid\": \"cancel-batch-edit\"\n    }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Cancel')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_4__[\"Button\"], {\n      margin: \"0 0 0 small\",\n      variant: \"primary\",\n      onClick: handleOk,\n      interaction: okDisabled ? 'disabled' : 'enabled'\n    }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Ok')));\n  }, [handleOk, okDisabled, onCancel]);\n\n  function renderShiftDaysInput() {\n    if (mode === 'shift') {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_number_input__WEBPACK_IMPORTED_MODULE_7__[\"NumberInput\"], Object.assign({\n        width: \"200px\",\n        renderLabel: \"Days\"\n      }, shiftDaysProps));\n    }\n\n    return null;\n  }\n\n  function renderRemoveCheckboxes() {\n    if (mode === 'remove') {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_5__[\"CheckboxGroup\"], {\n        name: \"remove\",\n        value: datesToRemove,\n        onChange: handleDatesToRemoveChange,\n        description: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_8__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Select dates to remove'))\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_5__[\"Checkbox\"], {\n        label: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Due Dates'),\n        value: \"dueDates\"\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_5__[\"Checkbox\"], {\n        label: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Availability Dates'),\n        value: \"lockDates\"\n      }));\n    }\n\n    return null;\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_canvas_instui_bindings_react_Modal__WEBPACK_IMPORTED_MODULE_11__[\"default\"], Object.assign({\n    label: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Batch Edit Dates'),\n    footer: renderFooter,\n    onDismiss: onCancel,\n    size: \"small\",\n    padding: \"medium\"\n  }, otherModalProps), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_radio_input__WEBPACK_IMPORTED_MODULE_6__[\"RadioInputGroup\"], {\n    name: \"operation\",\n    description: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_8__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Select an edit operation')),\n    value: mode,\n    onChange: handleModeChange\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_radio_input__WEBPACK_IMPORTED_MODULE_6__[\"RadioInput\"], {\n    value: \"shift\",\n    label: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Shift Dates')\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_10__[\"View\"], {\n    as: \"div\",\n    margin: \"0 0 large large\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_9__[\"Text\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"p\", null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Shift due dates and assignment availability dates forward by a number of days.'))), renderShiftDaysInput()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_radio_input__WEBPACK_IMPORTED_MODULE_6__[\"RadioInput\"], {\n    value: \"remove\",\n    label: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Remove Dates')\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_10__[\"View\"], {\n    as: \"div\",\n    margin: \"0 0 0 large\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_9__[\"Text\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"p\", null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Remove due dates and assignment availability dates.'))), renderRemoveCheckboxes())));\n}\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/MoveDatesModal.js?");

/***/ }),

/***/ "4JN3":
/*!***********************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/BulkEditTable.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BulkEditTable; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!assignments_bulk_edit */ \"nlrC\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-checkbox */ \"Kdwl\");\n/* harmony import */ var _instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-table */ \"+DUA\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _instructure_ui_responsive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-responsive */ \"r1Ut\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @instructure/ui-tooltip */ \"HU+D\");\n/* harmony import */ var _instructure_ui_view__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @instructure/ui-view */ \"OkHH\");\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @instructure/ui-icons */ \"oMAr\");\n/* harmony import */ var _BulkDateInput__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./BulkDateInput */ \"XonJ\");\n/* harmony import */ var _BulkEditOverrideTitle__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./BulkEditOverrideTitle */ \"s63r\");\n/* harmony import */ var _BulkAssignmentShape__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./BulkAssignmentShape */ \"il+4\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils */ \"EB+c\");\n\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DATE_INPUT_META = {\n  due_at: {\n    label: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Due At'),\n    fancyMidnight: true\n  },\n  unlock_at: {\n    label: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Available From'),\n    fancyMidnight: false\n  },\n  lock_at: {\n    label: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Available Until'),\n    fancyMidnight: true\n  }\n};\nBulkEditTable.propTypes = {\n  assignments: Object(prop_types__WEBPACK_IMPORTED_MODULE_3__[\"arrayOf\"])(_BulkAssignmentShape__WEBPACK_IMPORTED_MODULE_15__[\"AssignmentShape\"]).isRequired,\n  // ({\n  //   dateKey: one of null, \"due_at\", \"lock_at\", or \"unlock_at\"\n  //   newDate: iso8601 date string\n  //   assignmentId: assignment id string\n  //\n  //   overrideId: override id string, if this is an override.\n  //   - or -\n  //   base: true if this is the base assignment dates\n  // }) => {...}\n  updateAssignmentDate: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"func\"].isRequired,\n  // {assignmentId, overrideId or base: true}\n  clearOverrideEdits: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"func\"].isRequired,\n  setAssignmentSelected: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"func\"].isRequired // (assignmentId, selected) => {}\n\n};\nfunction BulkEditTable({\n  assignments,\n  updateAssignmentDate,\n  setAssignmentSelected,\n  selectAllAssignments,\n  clearOverrideEdits\n}) {\n  const CHECKBOX_COLUMN_WIDTH_REMS = 2;\n  const DATE_COLUMN_WIDTH_REMS = 14;\n  const ACTION_COLUMN_WIDTH_REMS = 4;\n  const NOTE_COLUMN_WIDTH_REMS = 3;\n  const someAssignmentsSelected = assignments.some(a => a.selected);\n  const allAssignmentsSelected = someAssignmentsSelected && assignments.every(a => a.selected || !Object(_utils__WEBPACK_IMPORTED_MODULE_16__[\"canEditAll\"])(a));\n\n  function processErrors(errors, dateKey) {\n    if (!errors || !errors.hasOwnProperty(dateKey)) {\n      return [];\n    }\n\n    return [{\n      text: errors[dateKey],\n      type: 'error'\n    }];\n  }\n\n  function renderDateInput(assignmentId, dateKey, dates, overrideId = null) {\n    const label = DATE_INPUT_META[dateKey].label;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_BulkDateInput__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n      label: label,\n      selectedDateString: dates[dateKey],\n      messages: processErrors(dates.errors, dateKey),\n      dateKey: dateKey,\n      assignmentId: assignmentId,\n      overrideId: overrideId,\n      updateAssignmentDate: updateAssignmentDate,\n      fancyMidnight: DATE_INPUT_META[dateKey].fancyMidnight,\n      interaction: dates.can_edit ? 'enabled' : 'disabled'\n    });\n  }\n\n  function renderOverrideTitle(assignment, override) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_BulkEditOverrideTitle__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n      assignmentName: assignment.name,\n      overrideTitle: override.title,\n      overrideBase: override.base\n    });\n  }\n\n  function renderNoDefaultDates(hasTooManyDates) {\n    // The goal here is to create a cell that spans multiple columns. You can't do that with InstUI\n    // yet, so we're going to fake it with a View that's as wide as all the other columns and\n    // depend on the cell overflow as being visible. I think that's pretty safe since that's the\n    // default overflow.\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_10__[\"View\"], {\n      as: \"div\",\n      minWidth: `${DATE_COLUMN_WIDTH_REMS * 3 + ACTION_COLUMN_WIDTH_REMS + NOTE_COLUMN_WIDTH_REMS}rem`\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_8__[\"Text\"], {\n      size: \"medium\",\n      fontStyle: \"italic\"\n    }, hasTooManyDates ? i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('This assignment has too many dates to display.') : i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('This assignment has no default dates.')));\n  }\n\n  function renderAssignmentCheckbox(assignment) {\n    if (assignment.hasOwnProperty('all_dates_count')) {\n      return null;\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_4__[\"Checkbox\"], {\n      label: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_6__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Select assignment: %{title}', {\n        title: assignment.name\n      })),\n      checked: !!assignment.selected,\n      onChange: () => setAssignmentSelected(assignment.id, !assignment.selected),\n      disabled: !Object(_utils__WEBPACK_IMPORTED_MODULE_16__[\"canEditAll\"])(assignment)\n    });\n  }\n\n  function renderActions(assignment, override) {\n    const overrideHasBeenEdited = ['due_at', 'unlock_at', 'lock_at'].map(field => Object(_utils__WEBPACK_IMPORTED_MODULE_16__[\"originalDateField\"])(field)).some(originalField => override.hasOwnProperty(originalField));\n\n    if (overrideHasBeenEdited) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__[\"Tooltip\"], {\n        renderTip: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Revert date changes')\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_11__[\"IconButton\"], {\n        renderIcon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_12__[\"IconXSolid\"],\n        screenReaderLabel: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Revert date changes'),\n        withBackground: false,\n        withBorder: false,\n        onClick: event => handleRevertClick(assignment, override, event)\n      }));\n    } else {\n      return null;\n    }\n  }\n\n  function renderNote(assignment, dateSet) {\n    if (!dateSet.can_edit) {\n      let explanation;\n\n      if (dateSet.in_closed_grading_period) {\n        explanation = i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('In closed grading period');\n      } else if (assignment.moderated_grading) {\n        explanation = i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Only the moderator can edit this assignment');\n      } else {\n        explanation = i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('You do not have permission to edit this assignment');\n      }\n\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__[\"Tooltip\"], {\n        renderTip: explanation\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_icons__WEBPACK_IMPORTED_MODULE_12__[\"IconWarningLine\"], {\n        color: \"warning\",\n        title: explanation\n      }));\n    } else {\n      return null;\n    }\n  }\n\n  function renderBaseRow(assignment) {\n    const baseOverride = assignment.all_dates.find(dates => dates.base === true); // It's a bit repetitive this way, but Table.Row borks if it has anything but Table.Cell children.\n\n    if (baseOverride) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Row, {\n        key: `assignment_${assignment.id}`\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderAssignmentCheckbox(assignment)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderOverrideTitle(assignment, baseOverride)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderDateInput(assignment.id, 'due_at', baseOverride)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderDateInput(assignment.id, 'unlock_at', baseOverride)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderDateInput(assignment.id, 'lock_at', baseOverride)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderActions(assignment, baseOverride)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderNote(assignment, baseOverride)));\n    } else {\n      // Need all Table.Cells or you get weird borders on this row\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Row, {\n        key: `assignment_${assignment.id}`\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderAssignmentCheckbox(assignment)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderOverrideTitle(assignment, {\n        base: true\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderNoDefaultDates(assignment.hasOwnProperty('all_dates_count'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null));\n    }\n  }\n\n  function renderOverrideRows(assignment) {\n    const overrides = assignment.all_dates.filter(dates => !dates.base);\n    return overrides.map(override => {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Row, {\n        key: `override_${override.id}`\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_6__[\"ScreenReaderContent\"], null, assignment.selected ? i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('parent assignment is selected') : i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('parent assignment is not selected'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderOverrideTitle(assignment, override)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderDateInput(assignment.id, 'due_at', override, override.id)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderDateInput(assignment.id, 'unlock_at', override, override.id)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderDateInput(assignment.id, 'lock_at', override, override.id)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderActions(assignment, override)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Cell, null, renderNote(assignment, override)));\n    });\n  }\n\n  function renderAssignments() {\n    const rows = [];\n    assignments.forEach(assignment => {\n      rows.push(renderBaseRow(assignment));\n      rows.push(...renderOverrideRows(assignment));\n    });\n    return rows;\n  }\n\n  const handleSelectAllAssignments = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(() => selectAllAssignments(!allAssignmentsSelected), [allAssignmentsSelected, selectAllAssignments]);\n\n  const handleRevertClick = (assignment, override, event) => {\n    // assuming the revert button is going away, so we reset focus to the prior input before that\n    // happens.\n    const tableRow = event.target.closest('tr');\n    const rowInputs = tableRow.querySelectorAll('input');\n    if (rowInputs.length) rowInputs[rowInputs.length - 1].focus();\n    clearOverrideEdits({\n      assignmentId: assignment.id,\n      overrideId: override.id\n    });\n  };\n\n  function renderTable(_props = {}, matches = []) {\n    const checkboxWidthProp = `${CHECKBOX_COLUMN_WIDTH_REMS}rem`;\n    const widthProp = `${DATE_COLUMN_WIDTH_REMS}rem`;\n    const actionsWidthProp = `${ACTION_COLUMN_WIDTH_REMS}rem`;\n    const noteWidthProp = `${NOTE_COLUMN_WIDTH_REMS}rem`;\n    const layoutProp = matches.includes('small') ? 'stacked' : 'fixed'; // The select all checkbox can't be in the table header because we don't want a SR to read it on\n    // every row, and in a stacked layout it would appear on every row. But we want it to visually\n    // be in the header in a fixed layout, so we're going to manually position it. Hard coding a\n    // visual offset like this sucks and is brittle, but I'm not sure what else to do right now.\n\n    const _ref = layoutProp === 'stacked' ? [{}, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Select all assignments'), i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Selected')] : [{\n      position: 'absolute',\n      top: '8px',\n      left: '13px'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_6__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Select all assignments')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_6__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Selected'))],\n          _ref2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_ref, 3),\n          selectAllStyles = _ref2[0],\n          selectAllLabel = _ref2[1],\n          selectedHeader = _ref2[2];\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n      style: {\n        position: 'relative'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n      style: selectAllStyles\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_4__[\"Checkbox\"], {\n      label: selectAllLabel,\n      checked: allAssignmentsSelected,\n      indeterminate: !allAssignmentsSelected && someAssignmentsSelected,\n      onChange: handleSelectAllAssignments\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"], {\n      caption: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Assignment Dates'),\n      hover: true,\n      layout: layoutProp\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Head, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].ColHeader, {\n      id: \"select\",\n      width: checkboxWidthProp\n    }, selectedHeader), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].ColHeader, {\n      id: \"title\"\n    }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Title')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].ColHeader, {\n      width: widthProp,\n      id: \"due\"\n    }, DATE_INPUT_META.due_at.label), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].ColHeader, {\n      width: widthProp,\n      id: \"unlock\"\n    }, DATE_INPUT_META.unlock_at.label), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].ColHeader, {\n      width: widthProp,\n      id: \"lock\"\n    }, DATE_INPUT_META.lock_at.label), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].ColHeader, {\n      id: \"actions\",\n      width: actionsWidthProp\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_6__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Actions'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].ColHeader, {\n      id: \"note\",\n      width: noteWidthProp\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_6__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Notes'))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_table__WEBPACK_IMPORTED_MODULE_5__[\"Table\"].Body, null, renderAssignments())));\n  } // For test environments that don't have matchMedia\n\n\n  if (window.matchMedia) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_responsive__WEBPACK_IMPORTED_MODULE_7__[\"Responsive\"], {\n      match: \"media\",\n      query: {\n        small: {\n          maxWidth: `${5 * DATE_COLUMN_WIDTH_REMS + ACTION_COLUMN_WIDTH_REMS + NOTE_COLUMN_WIDTH_REMS}rem`\n        }\n      },\n      render: renderTable\n    });\n  } else {\n    return renderTable();\n  }\n}\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/BulkEditTable.js?");

/***/ }),

/***/ "D4sn":
/*!****************************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/BulkEditDateSelect.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!assignments_bulk_edit */ \"nlrC\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_timezone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/timezone */ \"3H9/\");\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_flex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-flex */ \"N46v\");\n/* harmony import */ var _instructure_ui_form_field__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-form-field */ \"sTNg\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_view__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @instructure/ui-view */ \"OkHH\");\n/* harmony import */ var _canvas_datetime_react_components_DateInput__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @canvas/datetime/react/components/DateInput */ \"4P7D\");\n\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\nfunction formatDate(date) {\n  return _canvas_timezone__WEBPACK_IMPORTED_MODULE_3__[\"default\"].format(date, 'date.formats.medium_with_weekday');\n}\n\nfunction BulkEditDateSelect({\n  selectDateRange\n}) {\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(null),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        startDate = _useState2[0],\n        setStartDate = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(null),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        endDate = _useState4[0],\n        setEndDate = _useState4[1];\n\n  const handleApply = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(() => {\n    const start = startDate || new Date(-100000, 1);\n    const end = endDate || new Date(100000, 0);\n    selectDateRange(start, end);\n  }, [endDate, startDate, selectDateRange]);\n\n  function outOfOrder() {\n    return startDate && endDate && startDate > endDate;\n  }\n\n  function canApply() {\n    return (startDate || endDate) && !outOfOrder();\n  }\n\n  function messages() {\n    return outOfOrder() ? [{\n      text: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('The end date must be after the start date'),\n      type: 'error'\n    }] : [];\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_5__[\"Flex\"], {\n    margin: \"0 0 medium 0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_5__[\"Flex\"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_form_field__WEBPACK_IMPORTED_MODULE_6__[\"FormFieldGroup\"], {\n    description: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Select by date range'),\n    layout: \"columns\",\n    colSpacing: \"small\",\n    messages: messages()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_9__[\"View\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_datetime_react_components_DateInput__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    selectedDate: startDate,\n    renderLabel: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Selection start date')),\n    formatDate: formatDate,\n    onSelectedDateChange: setStartDate\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_9__[\"View\"], {\n    as: \"span\",\n    margin: \"0 small\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_8__[\"Text\"], {\n    weight: \"bold\"\n  }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('to'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_datetime_react_components_DateInput__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    selectedDate: endDate,\n    renderLabel: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Selection end date')),\n    formatDate: formatDate,\n    onSelectedDateChange: setEndDate\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_4__[\"Button\"], {\n    margin: \"0 0 0 small\",\n    size: \"small\",\n    interaction: canApply() ? 'enabled' : 'disabled',\n    onClick: handleApply\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__[\"ScreenReaderContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Apply date range selection')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__[\"PresentationContent\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Apply')))))));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (BulkEditDateSelect);\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/BulkEditDateSelect.js?");

/***/ }),

/***/ "DWas":
/*!***********************************************!*\
  !*** ./ui/shared/use-immediate-hook/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return useImmediate; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"LvDl\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var shallow_equal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shallow-equal */ \"bHqI\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n// This hook is much like useEffect, except it doesn't wait for the DOM to\n// render and runs the function immediately. It also takes an additional options\n// parameter where you can specify {deep: true} to make it run a deep comparison\n// on the dependencies instead of the default shallow comparison.\n//\n// This is useful for starting asynchronous operations that don't depend on the\n// new DOM, such as api fetches. Because it runs immediately, it may also reduce\n// flicker in the browser by avoiding multiple DOM updates.\n\n\n\n\nfunction depsHaveChanged(priorDeps, newDeps, opts) {\n  return !opts.deep && !Object(shallow_equal__WEBPACK_IMPORTED_MODULE_2__[\"shallowEqualArrays\"])(priorDeps, newDeps) || opts.deep && !Object(lodash__WEBPACK_IMPORTED_MODULE_1__[\"isEqual\"])(priorDeps, newDeps);\n}\n\nfunction useImmediate(fn, newDeps, opts = {}) {\n  const priorDeps = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  const cleanupFn = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null); // schedule the final cleanup for when the component unmounts\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => () => {\n    if (cleanupFn.current) cleanupFn.current();\n  }, []); // Like useEffect, we want to run the fn and its cleanup every time if deps are not specified\n\n  const depsChanged = !newDeps || depsHaveChanged(priorDeps.current, newDeps, opts);\n\n  if (depsChanged) {\n    if (cleanupFn.current) cleanupFn.current();\n    cleanupFn.current = fn();\n    priorDeps.current = newDeps;\n  }\n}\n\n//# sourceURL=webpack:///./ui/shared/use-immediate-hook/index.js?");

/***/ }),

/***/ "EB+c":
/*!***************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/utils.js ***!
  \***************************************************************/
/*! exports provided: originalDateField, extractFetchErrorMessage, canEditAll */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"originalDateField\", function() { return originalDateField; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"extractFetchErrorMessage\", function() { return extractFetchErrorMessage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"canEditAll\", function() { return canEditAll; });\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nfunction originalDateField(dateField) {\n  return `original_${dateField}`;\n}\nasync function extractFetchErrorMessage(err, fallback) {\n  var _errorJson$errors;\n\n  if (!err.response) return err.message;\n  const errorJson = await err.response.json();\n  if (errorJson !== null && errorJson !== void 0 && (_errorJson$errors = errorJson.errors) !== null && _errorJson$errors !== void 0 && _errorJson$errors.length) return errorJson.errors[0].message;\n  return fallback;\n}\nfunction canEditAll(assignment) {\n  return assignment.can_edit && assignment.all_dates.every(override => override.can_edit);\n}\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/utils.js?");

/***/ }),

/***/ "HeUl":
/*!**********************************************************************************************************!*\
  !*** ./frontend_build/i18n.js?assignments_bulk_edit_use_save_assignment!./ui/shims/dummyI18nResource.js ***!
  \**********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('assignments_bulk_edit_use_save_assignment'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?assignments_bulk_edit_use_save_assignment");

/***/ }),

/***/ "UC/F":
/*!**************************************************************************!*\
  !*** ./ui/features/assignment_index/react/hooks/useNumberInputDriver.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return useNumberInputDriver; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n // initialNumberValue may be null for a blank input, or it should be a number\n\nfunction useNumberInputDriver({\n  initialNumberValue,\n  // may be null to indicate the initial text value should be blank\n  minNumberValue = 1,\n  // may be null to indicate no minimum value\n  maxNumberValue = null\n}) {\n  // numberValue may be null to indicate the input is not a valid number\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(initialNumberValue),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        numberValue = _useState2[0],\n        setNumberValue = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(initialNumberValue ? initialNumberValue.toString() : ''),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        inputValue = _useState4[0],\n        setInputValue = _useState4[1];\n\n  const isSameSideAndCloserToZeroThanRange = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(newNumberValue => {\n    if (minNumberValue !== null && minNumberValue > 0) {\n      return newNumberValue > 0 && newNumberValue < minNumberValue;\n    } else if (maxNumberValue !== null && maxNumberValue < 0) {\n      return newNumberValue < 0 && newNumberValue > maxNumberValue;\n    } else {\n      // else 0 is in range. Therefore the new value can't be closer to 0 than the range.\n      return false;\n    }\n  }, [maxNumberValue, minNumberValue]);\n  const isInRange = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(newNumberValue => {\n    let isAboveMin = true;\n    let isBelowMax = true;\n    if (minNumberValue !== null) isAboveMin = newNumberValue >= minNumberValue;\n    if (maxNumberValue !== null) isBelowMax = newNumberValue <= maxNumberValue;\n    return isAboveMin && isBelowMax;\n  }, [maxNumberValue, minNumberValue]);\n  const onChange = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(e => {\n    const newNumberValue = parseInt(e.target.value, 10);\n\n    if (e.target.value === '') {\n      // special case for empty string so they can back out and restart typing\n      setNumberValue(null);\n      setInputValue('');\n    } else if (e.target.value === '-') {\n      // special case for single minus. they might be in the middle of typing a number\n      if (minNumberValue === null || minNumberValue < 0) {\n        setNumberValue(null);\n        setInputValue('-');\n      } // else, do nothing to disallow minus\n\n    } else if (Number.isNaN(newNumberValue)) {// do nothing; don't allow them to type nonsense\n    } else if (isSameSideAndCloserToZeroThanRange(newNumberValue)) {\n      // allow them to type a number that is too close to zero because they may be in the middle\n      // of typing a number that is in range. But set number value to null to signal to the\n      // component that the number is not valid right now.\n      setNumberValue(null);\n      setInputValue(newNumberValue.toString());\n    } else if (!isInRange(newNumberValue)) {// do nothing; don't allow them to type a number that outside the range\n    } else {\n      // all is good, set the new values\n      setNumberValue(newNumberValue);\n      setInputValue(newNumberValue.toString());\n    }\n  }, [isInRange, isSameSideAndCloserToZeroThanRange, minNumberValue]); // We want 1, 0, or the in range value closest to 0\n\n  const incrementOrDecrementStartingPoint = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(() => {\n    if (isInRange(1)) return 1;\n    if (isInRange(0)) return 0;\n    if (minNumberValue !== null && minNumberValue >= 0) return minNumberValue;\n    if (maxNumberValue !== null && maxNumberValue <= 0) return maxNumberValue; // The above should cover all cases, but just in case:\n\n    return 1;\n  }, [isInRange, maxNumberValue, minNumberValue]);\n  const onIncrement = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(() => {\n    const newNumberValue = numberValue !== null ? numberValue + 1 : incrementOrDecrementStartingPoint();\n\n    if (isInRange(newNumberValue)) {\n      setNumberValue(newNumberValue);\n      setInputValue(newNumberValue.toString());\n    }\n  }, [incrementOrDecrementStartingPoint, isInRange, numberValue]);\n  const onDecrement = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(() => {\n    const newNumberValue = numberValue ? numberValue - 1 : incrementOrDecrementStartingPoint();\n\n    if (isInRange(newNumberValue)) {\n      setNumberValue(newNumberValue);\n      setInputValue(newNumberValue.toString());\n    }\n  }, [incrementOrDecrementStartingPoint, isInRange, numberValue]); // [{state values}, {props for number input}]\n\n  return [{\n    numberValue,\n    setNumberValue,\n    inputValue,\n    setInputValue\n  }, {\n    value: inputValue,\n    onChange,\n    onIncrement,\n    onDecrement\n  }];\n}\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/hooks/useNumberInputDriver.js?");

/***/ }),

/***/ "V/h/":
/*!*************************************************!*\
  !*** ./node_modules/immer/dist/immer.module.js ***!
  \*************************************************/
/*! exports provided: default, Immer, applyPatches, createDraft, finishDraft, immerable, isDraft, isDraftable, nothing, original, produce, produceWithPatches, setAutoFreeze, setUseProxies */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Immer\", function() { return Immer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"applyPatches\", function() { return applyPatches$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createDraft\", function() { return createDraft; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"finishDraft\", function() { return finishDraft; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"immerable\", function() { return DRAFTABLE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isDraft\", function() { return isDraft; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isDraftable\", function() { return isDraftable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"nothing\", function() { return NOTHING; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"original\", function() { return original; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"produce\", function() { return produce; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"produceWithPatches\", function() { return produceWithPatches; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setAutoFreeze\", function() { return setAutoFreeze; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setUseProxies\", function() { return setUseProxies; });\nvar obj;\nvar NOTHING = typeof Symbol !== \"undefined\" ? Symbol(\"immer-nothing\") : ( obj = {}, obj[\"immer-nothing\"] = true, obj );\nvar DRAFTABLE = typeof Symbol !== \"undefined\" && Symbol.for ? Symbol.for(\"immer-draftable\") : \"__$immer_draftable\";\nvar DRAFT_STATE = typeof Symbol !== \"undefined\" && Symbol.for ? Symbol.for(\"immer-state\") : \"__$immer_state\";\nfunction isDraft(value) {\n  return !!value && !!value[DRAFT_STATE];\n}\nfunction isDraftable(value) {\n  if (!value) { return false; }\n  return isPlainObject(value) || !!value[DRAFTABLE] || !!value.constructor[DRAFTABLE];\n}\nfunction isPlainObject(value) {\n  if (!value || typeof value !== \"object\") { return false; }\n  if (Array.isArray(value)) { return true; }\n  var proto = Object.getPrototypeOf(value);\n  return !proto || proto === Object.prototype;\n}\nfunction original(value) {\n  if (value && value[DRAFT_STATE]) {\n    return value[DRAFT_STATE].base;\n  } // otherwise return undefined\n\n}\nvar assign = Object.assign || function assign(target, value) {\n  for (var key in value) {\n    if (has(value, key)) {\n      target[key] = value[key];\n    }\n  }\n\n  return target;\n};\nvar ownKeys = typeof Reflect !== \"undefined\" && Reflect.ownKeys ? Reflect.ownKeys : typeof Object.getOwnPropertySymbols !== \"undefined\" ? function (obj) { return Object.getOwnPropertyNames(obj).concat(Object.getOwnPropertySymbols(obj)); } : Object.getOwnPropertyNames;\nfunction shallowCopy(base, invokeGetters) {\n  if ( invokeGetters === void 0 ) invokeGetters = false;\n\n  if (Array.isArray(base)) { return base.slice(); }\n  var clone = Object.create(Object.getPrototypeOf(base));\n  ownKeys(base).forEach(function (key) {\n    if (key === DRAFT_STATE) {\n      return; // Never copy over draft state.\n    }\n\n    var desc = Object.getOwnPropertyDescriptor(base, key);\n    var value = desc.value;\n\n    if (desc.get) {\n      if (!invokeGetters) {\n        throw new Error(\"Immer drafts cannot have computed properties\");\n      }\n\n      value = desc.get.call(base);\n    }\n\n    if (desc.enumerable) {\n      clone[key] = value;\n    } else {\n      Object.defineProperty(clone, key, {\n        value: value,\n        writable: true,\n        configurable: true\n      });\n    }\n  });\n  return clone;\n}\nfunction each(value, cb) {\n  if (Array.isArray(value)) {\n    for (var i = 0; i < value.length; i++) { cb(i, value[i], value); }\n  } else {\n    ownKeys(value).forEach(function (key) { return cb(key, value[key], value); });\n  }\n}\nfunction isEnumerable(base, prop) {\n  var desc = Object.getOwnPropertyDescriptor(base, prop);\n  return !!desc && desc.enumerable;\n}\nfunction has(thing, prop) {\n  return Object.prototype.hasOwnProperty.call(thing, prop);\n}\nfunction is(x, y) {\n  // From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nfunction clone(obj) {\n  if (!isDraftable(obj)) { return obj; }\n  if (Array.isArray(obj)) { return obj.map(clone); }\n  var cloned = Object.create(Object.getPrototypeOf(obj));\n\n  for (var key in obj) { cloned[key] = clone(obj[key]); }\n\n  return cloned;\n}\n\n/** Each scope represents a `produce` call. */\n\nvar ImmerScope = function ImmerScope(parent) {\n  this.drafts = [];\n  this.parent = parent; // Whenever the modified draft contains a draft from another scope, we\n  // need to prevent auto-freezing so the unowned draft can be finalized.\n\n  this.canAutoFreeze = true; // To avoid prototype lookups:\n\n  this.patches = null;\n};\n\nImmerScope.prototype.usePatches = function usePatches (patchListener) {\n  if (patchListener) {\n    this.patches = [];\n    this.inversePatches = [];\n    this.patchListener = patchListener;\n  }\n};\n\nImmerScope.prototype.revoke = function revoke$1 () {\n  this.leave();\n  this.drafts.forEach(revoke);\n  this.drafts = null; // Make draft-related methods throw.\n};\n\nImmerScope.prototype.leave = function leave () {\n  if (this === ImmerScope.current) {\n    ImmerScope.current = this.parent;\n  }\n};\nImmerScope.current = null;\n\nImmerScope.enter = function () {\n  return this.current = new ImmerScope(this.current);\n};\n\nfunction revoke(draft) {\n  draft[DRAFT_STATE].revoke();\n}\n\n// but share them all instead\n\nvar descriptors = {};\nfunction willFinalize(scope, result, isReplaced) {\n  scope.drafts.forEach(function (draft) {\n    draft[DRAFT_STATE].finalizing = true;\n  });\n\n  if (!isReplaced) {\n    if (scope.patches) {\n      markChangesRecursively(scope.drafts[0]);\n    } // This is faster when we don't care about which attributes changed.\n\n\n    markChangesSweep(scope.drafts);\n  } // When a child draft is returned, look for changes.\n  else if (isDraft(result) && result[DRAFT_STATE].scope === scope) {\n      markChangesSweep(scope.drafts);\n    }\n}\nfunction createProxy(base, parent) {\n  var isArray = Array.isArray(base);\n  var draft = clonePotentialDraft(base);\n  each(draft, function (prop) {\n    proxyProperty(draft, prop, isArray || isEnumerable(base, prop));\n  }); // See \"proxy.js\" for property documentation.\n\n  var scope = parent ? parent.scope : ImmerScope.current;\n  var state = {\n    scope: scope,\n    modified: false,\n    finalizing: false,\n    // es5 only\n    finalized: false,\n    assigned: {},\n    parent: parent,\n    base: base,\n    draft: draft,\n    copy: null,\n    revoke: revoke$1,\n    revoked: false // es5 only\n\n  };\n  createHiddenProperty(draft, DRAFT_STATE, state);\n  scope.drafts.push(draft);\n  return draft;\n}\n\nfunction revoke$1() {\n  this.revoked = true;\n}\n\nfunction source(state) {\n  return state.copy || state.base;\n} // Access a property without creating an Immer draft.\n\n\nfunction peek(draft, prop) {\n  var state = draft[DRAFT_STATE];\n\n  if (state && !state.finalizing) {\n    state.finalizing = true;\n    var value = draft[prop];\n    state.finalizing = false;\n    return value;\n  }\n\n  return draft[prop];\n}\n\nfunction get(state, prop) {\n  assertUnrevoked(state);\n  var value = peek(source(state), prop);\n  if (state.finalizing) { return value; } // Create a draft if the value is unmodified.\n\n  if (value === peek(state.base, prop) && isDraftable(value)) {\n    prepareCopy(state);\n    return state.copy[prop] = createProxy(value, state);\n  }\n\n  return value;\n}\n\nfunction set(state, prop, value) {\n  assertUnrevoked(state);\n  state.assigned[prop] = true;\n\n  if (!state.modified) {\n    if (is(value, peek(source(state), prop))) { return; }\n    markChanged(state);\n    prepareCopy(state);\n  }\n\n  state.copy[prop] = value;\n}\n\nfunction markChanged(state) {\n  if (!state.modified) {\n    state.modified = true;\n    if (state.parent) { markChanged(state.parent); }\n  }\n}\n\nfunction prepareCopy(state) {\n  if (!state.copy) { state.copy = clonePotentialDraft(state.base); }\n}\n\nfunction clonePotentialDraft(base) {\n  var state = base && base[DRAFT_STATE];\n\n  if (state) {\n    state.finalizing = true;\n    var draft = shallowCopy(state.draft, true);\n    state.finalizing = false;\n    return draft;\n  }\n\n  return shallowCopy(base);\n}\n\nfunction proxyProperty(draft, prop, enumerable) {\n  var desc = descriptors[prop];\n\n  if (desc) {\n    desc.enumerable = enumerable;\n  } else {\n    descriptors[prop] = desc = {\n      configurable: true,\n      enumerable: enumerable,\n\n      get: function get$1() {\n        return get(this[DRAFT_STATE], prop);\n      },\n\n      set: function set$1(value) {\n        set(this[DRAFT_STATE], prop, value);\n      }\n\n    };\n  }\n\n  Object.defineProperty(draft, prop, desc);\n}\n\nfunction assertUnrevoked(state) {\n  if (state.revoked === true) { throw new Error(\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + JSON.stringify(source(state))); }\n} // This looks expensive, but only proxies are visited, and only objects without known changes are scanned.\n\n\nfunction markChangesSweep(drafts) {\n  // The natural order of drafts in the `scope` array is based on when they\n  // were accessed. By processing drafts in reverse natural order, we have a\n  // better chance of processing leaf nodes first. When a leaf node is known to\n  // have changed, we can avoid any traversal of its ancestor nodes.\n  for (var i = drafts.length - 1; i >= 0; i--) {\n    var state = drafts[i][DRAFT_STATE];\n\n    if (!state.modified) {\n      if (Array.isArray(state.base)) {\n        if (hasArrayChanges(state)) { markChanged(state); }\n      } else if (hasObjectChanges(state)) { markChanged(state); }\n    }\n  }\n}\n\nfunction markChangesRecursively(object) {\n  if (!object || typeof object !== \"object\") { return; }\n  var state = object[DRAFT_STATE];\n  if (!state) { return; }\n  var base = state.base;\n  var draft = state.draft;\n  var assigned = state.assigned;\n\n  if (!Array.isArray(object)) {\n    // Look for added keys.\n    Object.keys(draft).forEach(function (key) {\n      // The `undefined` check is a fast path for pre-existing keys.\n      if (base[key] === undefined && !has(base, key)) {\n        assigned[key] = true;\n        markChanged(state);\n      } else if (!assigned[key]) {\n        // Only untouched properties trigger recursion.\n        markChangesRecursively(draft[key]);\n      }\n    }); // Look for removed keys.\n\n    Object.keys(base).forEach(function (key) {\n      // The `undefined` check is a fast path for pre-existing keys.\n      if (draft[key] === undefined && !has(draft, key)) {\n        assigned[key] = false;\n        markChanged(state);\n      }\n    });\n  } else if (hasArrayChanges(state)) {\n    markChanged(state);\n    assigned.length = true;\n\n    if (draft.length < base.length) {\n      for (var i = draft.length; i < base.length; i++) { assigned[i] = false; }\n    } else {\n      for (var i$1 = base.length; i$1 < draft.length; i$1++) { assigned[i$1] = true; }\n    }\n\n    for (var i$2 = 0; i$2 < draft.length; i$2++) {\n      // Only untouched indices trigger recursion.\n      if (assigned[i$2] === undefined) { markChangesRecursively(draft[i$2]); }\n    }\n  }\n}\n\nfunction hasObjectChanges(state) {\n  var base = state.base;\n  var draft = state.draft; // Search for added keys and changed keys. Start at the back, because\n  // non-numeric keys are ordered by time of definition on the object.\n\n  var keys = Object.keys(draft);\n\n  for (var i = keys.length - 1; i >= 0; i--) {\n    var key = keys[i];\n    var baseValue = base[key]; // The `undefined` check is a fast path for pre-existing keys.\n\n    if (baseValue === undefined && !has(base, key)) {\n      return true;\n    } // Once a base key is deleted, future changes go undetected, because its\n    // descriptor is erased. This branch detects any missed changes.\n    else {\n        var value = draft[key];\n        var state$1 = value && value[DRAFT_STATE];\n\n        if (state$1 ? state$1.base !== baseValue : !is(value, baseValue)) {\n          return true;\n        }\n      }\n  } // At this point, no keys were added or changed.\n  // Compare key count to determine if keys were deleted.\n\n\n  return keys.length !== Object.keys(base).length;\n}\n\nfunction hasArrayChanges(state) {\n  var draft = state.draft;\n  if (draft.length !== state.base.length) { return true; } // See #116\n  // If we first shorten the length, our array interceptors will be removed.\n  // If after that new items are added, result in the same original length,\n  // those last items will have no intercepting property.\n  // So if there is no own descriptor on the last position, we know that items were removed and added\n  // N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n  // the last one\n\n  var descriptor = Object.getOwnPropertyDescriptor(draft, draft.length - 1); // descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n\n  if (descriptor && !descriptor.get) { return true; } // For all other cases, we don't have to compare, as they would have been picked up by the index setters\n\n  return false;\n}\n\nfunction createHiddenProperty(target, prop, value) {\n  Object.defineProperty(target, prop, {\n    value: value,\n    enumerable: false,\n    writable: true\n  });\n}\n\nvar legacyProxy = /*#__PURE__*/Object.freeze({\n\twillFinalize: willFinalize,\n\tcreateProxy: createProxy\n});\n\nfunction willFinalize$1() {}\nfunction createProxy$1(base, parent) {\n  var scope = parent ? parent.scope : ImmerScope.current;\n  var state = {\n    // Track which produce call this is associated with.\n    scope: scope,\n    // True for both shallow and deep changes.\n    modified: false,\n    // Used during finalization.\n    finalized: false,\n    // Track which properties have been assigned (true) or deleted (false).\n    assigned: {},\n    // The parent draft state.\n    parent: parent,\n    // The base state.\n    base: base,\n    // The base proxy.\n    draft: null,\n    // Any property proxies.\n    drafts: {},\n    // The base copy with any updated values.\n    copy: null,\n    // Called by the `produce` function.\n    revoke: null\n  };\n  var ref = Array.isArray(base) ? // [state] is used for arrays, to make sure the proxy is array-ish and not violate invariants,\n  // although state itself is an object\n  Proxy.revocable([state], arrayTraps) : Proxy.revocable(state, objectTraps);\n  var revoke = ref.revoke;\n  var proxy = ref.proxy;\n  state.draft = proxy;\n  state.revoke = revoke;\n  scope.drafts.push(proxy);\n  return proxy;\n}\nvar objectTraps = {\n  get: get$1,\n\n  has: function has(target, prop) {\n    return prop in source$1(target);\n  },\n\n  ownKeys: function ownKeys(target) {\n    return Reflect.ownKeys(source$1(target));\n  },\n\n  set: set$1,\n  deleteProperty: deleteProperty,\n  getOwnPropertyDescriptor: getOwnPropertyDescriptor,\n\n  defineProperty: function defineProperty() {\n    throw new Error(\"Object.defineProperty() cannot be used on an Immer draft\"); // prettier-ignore\n  },\n\n  getPrototypeOf: function getPrototypeOf(target) {\n    return Object.getPrototypeOf(target.base);\n  },\n\n  setPrototypeOf: function setPrototypeOf() {\n    throw new Error(\"Object.setPrototypeOf() cannot be used on an Immer draft\"); // prettier-ignore\n  }\n\n};\nvar arrayTraps = {};\neach(objectTraps, function (key, fn) {\n  arrayTraps[key] = function () {\n    arguments[0] = arguments[0][0];\n    return fn.apply(this, arguments);\n  };\n});\n\narrayTraps.deleteProperty = function (state, prop) {\n  if (isNaN(parseInt(prop))) {\n    throw new Error(\"Immer only supports deleting array indices\"); // prettier-ignore\n  }\n\n  return objectTraps.deleteProperty.call(this, state[0], prop);\n};\n\narrayTraps.set = function (state, prop, value) {\n  if (prop !== \"length\" && isNaN(parseInt(prop))) {\n    throw new Error(\"Immer only supports setting array indices and the 'length' property\"); // prettier-ignore\n  }\n\n  return objectTraps.set.call(this, state[0], prop, value);\n}; // returns the object we should be reading the current value from, which is base, until some change has been made\n\n\nfunction source$1(state) {\n  return state.copy || state.base;\n} // Access a property without creating an Immer draft.\n\n\nfunction peek$1(draft, prop) {\n  var state = draft[DRAFT_STATE];\n  var desc = Reflect.getOwnPropertyDescriptor(state ? source$1(state) : draft, prop);\n  return desc && desc.value;\n}\n\nfunction get$1(state, prop) {\n  if (prop === DRAFT_STATE) { return state; }\n  var drafts = state.drafts; // Check for existing draft in unmodified state.\n\n  if (!state.modified && has(drafts, prop)) {\n    return drafts[prop];\n  }\n\n  var value = source$1(state)[prop];\n\n  if (state.finalized || !isDraftable(value)) {\n    return value;\n  } // Check for existing draft in modified state.\n\n\n  if (state.modified) {\n    // Assigned values are never drafted. This catches any drafts we created, too.\n    if (value !== peek$1(state.base, prop)) { return value; } // Store drafts on the copy (when one exists).\n\n    drafts = state.copy;\n  }\n\n  return drafts[prop] = createProxy$1(value, state);\n}\n\nfunction set$1(state, prop, value) {\n  if (!state.modified) {\n    var baseValue = peek$1(state.base, prop); // Optimize based on value's truthiness. Truthy values are guaranteed to\n    // never be undefined, so we can avoid the `in` operator. Lastly, truthy\n    // values may be drafts, but falsy values are never drafts.\n\n    var isUnchanged = value ? is(baseValue, value) || value === state.drafts[prop] : is(baseValue, value) && prop in state.base;\n    if (isUnchanged) { return true; }\n    markChanged$1(state);\n  }\n\n  state.assigned[prop] = true;\n  state.copy[prop] = value;\n  return true;\n}\n\nfunction deleteProperty(state, prop) {\n  // The `undefined` check is a fast path for pre-existing keys.\n  if (peek$1(state.base, prop) !== undefined || prop in state.base) {\n    state.assigned[prop] = false;\n    markChanged$1(state);\n  } else if (state.assigned[prop]) {\n    // if an originally not assigned property was deleted\n    delete state.assigned[prop];\n  }\n\n  if (state.copy) { delete state.copy[prop]; }\n  return true;\n} // Note: We never coerce `desc.value` into an Immer draft, because we can't make\n// the same guarantee in ES5 mode.\n\n\nfunction getOwnPropertyDescriptor(state, prop) {\n  var owner = source$1(state);\n  var desc = Reflect.getOwnPropertyDescriptor(owner, prop);\n\n  if (desc) {\n    desc.writable = true;\n    desc.configurable = !Array.isArray(owner) || prop !== \"length\";\n  }\n\n  return desc;\n}\n\nfunction markChanged$1(state) {\n  if (!state.modified) {\n    state.modified = true;\n    state.copy = assign(shallowCopy(state.base), state.drafts);\n    state.drafts = null;\n    if (state.parent) { markChanged$1(state.parent); }\n  }\n}\n\nvar modernProxy = /*#__PURE__*/Object.freeze({\n\twillFinalize: willFinalize$1,\n\tcreateProxy: createProxy$1\n});\n\nfunction generatePatches(state, basePath, patches, inversePatches) {\n  Array.isArray(state.base) ? generateArrayPatches(state, basePath, patches, inversePatches) : generateObjectPatches(state, basePath, patches, inversePatches);\n}\n\nfunction generateArrayPatches(state, basePath, patches, inversePatches) {\n  var assign, assign$1;\n\n  var base = state.base;\n  var copy = state.copy;\n  var assigned = state.assigned; // Reduce complexity by ensuring `base` is never longer.\n\n  if (copy.length < base.length) {\n    (assign = [copy, base], base = assign[0], copy = assign[1]);\n    (assign$1 = [inversePatches, patches], patches = assign$1[0], inversePatches = assign$1[1]);\n  }\n\n  var delta = copy.length - base.length; // Find the first replaced index.\n\n  var start = 0;\n\n  while (base[start] === copy[start] && start < base.length) {\n    ++start;\n  } // Find the last replaced index. Search from the end to optimize splice patches.\n\n\n  var end = base.length;\n\n  while (end > start && base[end - 1] === copy[end + delta - 1]) {\n    --end;\n  } // Process replaced indices.\n\n\n  for (var i = start; i < end; ++i) {\n    if (assigned[i] && copy[i] !== base[i]) {\n      var path = basePath.concat([i]);\n      patches.push({\n        op: \"replace\",\n        path: path,\n        value: copy[i]\n      });\n      inversePatches.push({\n        op: \"replace\",\n        path: path,\n        value: base[i]\n      });\n    }\n  }\n\n  var replaceCount = patches.length; // Process added indices.\n\n  for (var i$1 = end + delta - 1; i$1 >= end; --i$1) {\n    var path$1 = basePath.concat([i$1]);\n    patches[replaceCount + i$1 - end] = {\n      op: \"add\",\n      path: path$1,\n      value: copy[i$1]\n    };\n    inversePatches.push({\n      op: \"remove\",\n      path: path$1\n    });\n  }\n}\n\nfunction generateObjectPatches(state, basePath, patches, inversePatches) {\n  var base = state.base;\n  var copy = state.copy;\n  each(state.assigned, function (key, assignedValue) {\n    var origValue = base[key];\n    var value = copy[key];\n    var op = !assignedValue ? \"remove\" : key in base ? \"replace\" : \"add\";\n    if (origValue === value && op === \"replace\") { return; }\n    var path = basePath.concat(key);\n    patches.push(op === \"remove\" ? {\n      op: op,\n      path: path\n    } : {\n      op: op,\n      path: path,\n      value: value\n    });\n    inversePatches.push(op === \"add\" ? {\n      op: \"remove\",\n      path: path\n    } : op === \"remove\" ? {\n      op: \"add\",\n      path: path,\n      value: origValue\n    } : {\n      op: \"replace\",\n      path: path,\n      value: origValue\n    });\n  });\n}\n\nvar applyPatches = function (draft, patches) {\n  for (var i$1 = 0, list = patches; i$1 < list.length; i$1 += 1) {\n    var patch = list[i$1];\n\n    var path = patch.path;\n    var op = patch.op;\n    var value = clone(patch.value); // used to clone patch to ensure original patch is not modified, see #411\n\n    if (!path.length) { throw new Error(\"Illegal state\"); }\n    var base = draft;\n\n    for (var i = 0; i < path.length - 1; i++) {\n      base = base[path[i]];\n      if (!base || typeof base !== \"object\") { throw new Error(\"Cannot apply patch, path doesn't resolve: \" + path.join(\"/\")); } // prettier-ignore\n    }\n\n    var key = path[path.length - 1];\n\n    switch (op) {\n      case \"replace\":\n        // if value is an object, then it's assigned by reference\n        // in the following add or remove ops, the value field inside the patch will also be modifyed\n        // so we use value from the cloned patch\n        base[key] = value;\n        break;\n\n      case \"add\":\n        if (Array.isArray(base)) {\n          // TODO: support \"foo/-\" paths for appending to an array\n          base.splice(key, 0, value);\n        } else {\n          base[key] = value;\n        }\n\n        break;\n\n      case \"remove\":\n        if (Array.isArray(base)) {\n          base.splice(key, 1);\n        } else {\n          delete base[key];\n        }\n\n        break;\n\n      default:\n        throw new Error(\"Unsupported patch operation: \" + op);\n    }\n  }\n\n  return draft;\n};\n\nfunction verifyMinified() {}\n\nvar configDefaults = {\n  useProxies: typeof Proxy !== \"undefined\" && typeof Reflect !== \"undefined\",\n  autoFreeze: typeof process !== \"undefined\" ? \"development\" !== \"production\" : verifyMinified.name === \"verifyMinified\",\n  onAssign: null,\n  onDelete: null,\n  onCopy: null\n};\nvar Immer = function Immer(config) {\n  assign(this, configDefaults, config);\n  this.setUseProxies(this.useProxies);\n  this.produce = this.produce.bind(this);\n};\n\nImmer.prototype.produce = function produce (base, recipe, patchListener) {\n    var this$1 = this;\n\n  // curried invocation\n  if (typeof base === \"function\" && typeof recipe !== \"function\") {\n    var defaultBase = recipe;\n    recipe = base;\n    var self = this;\n    return function curriedProduce(base) {\n        var this$1 = this;\n        if ( base === void 0 ) base = defaultBase;\n        var args = [], len = arguments.length - 1;\n        while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n      return self.produce(base, function (draft) { return recipe.call.apply(recipe, [ this$1, draft ].concat( args )); }); // prettier-ignore\n    };\n  } // prettier-ignore\n\n\n  {\n    if (typeof recipe !== \"function\") {\n      throw new Error(\"The first or second argument to `produce` must be a function\");\n    }\n\n    if (patchListener !== undefined && typeof patchListener !== \"function\") {\n      throw new Error(\"The third argument to `produce` must be a function or undefined\");\n    }\n  }\n  var result; // Only plain objects, arrays, and \"immerable classes\" are drafted.\n\n  if (isDraftable(base)) {\n    var scope = ImmerScope.enter();\n    var proxy = this.createProxy(base);\n    var hasError = true;\n\n    try {\n      result = recipe(proxy);\n      hasError = false;\n    } finally {\n      // finally instead of catch + rethrow better preserves original stack\n      if (hasError) { scope.revoke(); }else { scope.leave(); }\n    }\n\n    if (result instanceof Promise) {\n      return result.then(function (result) {\n        scope.usePatches(patchListener);\n        return this$1.processResult(result, scope);\n      }, function (error) {\n        scope.revoke();\n        throw error;\n      });\n    }\n\n    scope.usePatches(patchListener);\n    return this.processResult(result, scope);\n  } else {\n    result = recipe(base);\n    if (result === undefined) { return base; }\n    return result !== NOTHING ? result : undefined;\n  }\n};\n\nImmer.prototype.produceWithPatches = function produceWithPatches (arg1, arg2, arg3) {\n    var this$1 = this;\n\n  if (typeof arg1 === \"function\") {\n    return function (state) {\n        var args = [], len = arguments.length - 1;\n        while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n        return this$1.produceWithPatches(state, function (draft) { return arg1.apply(void 0, [ draft ].concat( args )); });\n      };\n  } // non-curried form\n\n\n  if (arg3) { throw new Error(\"A patch listener cannot be passed to produceWithPatches\"); }\n  var patches, inversePatches;\n  var nextState = this.produce(arg1, arg2, function (p, ip) {\n    patches = p;\n    inversePatches = ip;\n  });\n  return [nextState, patches, inversePatches];\n};\n\nImmer.prototype.createDraft = function createDraft (base) {\n  if (!isDraftable(base)) {\n    throw new Error(\"First argument to `createDraft` must be a plain object, an array, or an immerable object\"); // prettier-ignore\n  }\n\n  var scope = ImmerScope.enter();\n  var proxy = this.createProxy(base);\n  proxy[DRAFT_STATE].isManual = true;\n  scope.leave();\n  return proxy;\n};\n\nImmer.prototype.finishDraft = function finishDraft (draft, patchListener) {\n  var state = draft && draft[DRAFT_STATE];\n\n  if (!state || !state.isManual) {\n    throw new Error(\"First argument to `finishDraft` must be a draft returned by `createDraft`\"); // prettier-ignore\n  }\n\n  if (state.finalized) {\n    throw new Error(\"The given draft is already finalized\"); // prettier-ignore\n  }\n\n  var scope = state.scope;\n  scope.usePatches(patchListener);\n  return this.processResult(undefined, scope);\n};\n\nImmer.prototype.setAutoFreeze = function setAutoFreeze (value) {\n  this.autoFreeze = value;\n};\n\nImmer.prototype.setUseProxies = function setUseProxies (value) {\n  this.useProxies = value;\n  assign(this, value ? modernProxy : legacyProxy);\n};\n\nImmer.prototype.applyPatches = function applyPatches$1 (base, patches) {\n  // If a patch replaces the entire state, take that replacement as base\n  // before applying patches\n  var i;\n\n  for (i = patches.length - 1; i >= 0; i--) {\n    var patch = patches[i];\n\n    if (patch.path.length === 0 && patch.op === \"replace\") {\n      base = patch.value;\n      break;\n    }\n  }\n\n  if (isDraft(base)) {\n    // N.B: never hits if some patch a replacement, patches are never drafts\n    return applyPatches(base, patches);\n  } // Otherwise, produce a copy of the base state.\n\n\n  return this.produce(base, function (draft) { return applyPatches(draft, patches.slice(i + 1)); });\n};\n/** @internal */\n\n\nImmer.prototype.processResult = function processResult (result, scope) {\n  var baseDraft = scope.drafts[0];\n  var isReplaced = result !== undefined && result !== baseDraft;\n  this.willFinalize(scope, result, isReplaced);\n\n  if (isReplaced) {\n    if (baseDraft[DRAFT_STATE].modified) {\n      scope.revoke();\n      throw new Error(\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\"); // prettier-ignore\n    }\n\n    if (isDraftable(result)) {\n      // Finalize the result in case it contains (or is) a subset of the draft.\n      result = this.finalize(result, null, scope);\n    }\n\n    if (scope.patches) {\n      scope.patches.push({\n        op: \"replace\",\n        path: [],\n        value: result\n      });\n      scope.inversePatches.push({\n        op: \"replace\",\n        path: [],\n        value: baseDraft[DRAFT_STATE].base\n      });\n    }\n  } else {\n    // Finalize the base draft.\n    result = this.finalize(baseDraft, [], scope);\n  }\n\n  scope.revoke();\n\n  if (scope.patches) {\n    scope.patchListener(scope.patches, scope.inversePatches);\n  }\n\n  return result !== NOTHING ? result : undefined;\n};\n/**\n * @internal\n * Finalize a draft, returning either the unmodified base state or a modified\n * copy of the base state.\n */\n\n\nImmer.prototype.finalize = function finalize (draft, path, scope) {\n    var this$1 = this;\n\n  var state = draft[DRAFT_STATE];\n\n  if (!state) {\n    if (Object.isFrozen(draft)) { return draft; }\n    return this.finalizeTree(draft, null, scope);\n  } // Never finalize drafts owned by another scope.\n\n\n  if (state.scope !== scope) {\n    return draft;\n  }\n\n  if (!state.modified) {\n    return state.base;\n  }\n\n  if (!state.finalized) {\n    state.finalized = true;\n    this.finalizeTree(state.draft, path, scope);\n\n    if (this.onDelete) {\n      // The `assigned` object is unreliable with ES5 drafts.\n      if (this.useProxies) {\n        var assigned = state.assigned;\n\n        for (var prop in assigned) {\n          if (!assigned[prop]) { this.onDelete(state, prop); }\n        }\n      } else {\n        var base = state.base;\n          var copy = state.copy;\n        each(base, function (prop) {\n          if (!has(copy, prop)) { this$1.onDelete(state, prop); }\n        });\n      }\n    }\n\n    if (this.onCopy) {\n      this.onCopy(state);\n    } // At this point, all descendants of `state.copy` have been finalized,\n    // so we can be sure that `scope.canAutoFreeze` is accurate.\n\n\n    if (this.autoFreeze && scope.canAutoFreeze) {\n      Object.freeze(state.copy);\n    }\n\n    if (path && scope.patches) {\n      generatePatches(state, path, scope.patches, scope.inversePatches);\n    }\n  }\n\n  return state.copy;\n};\n/**\n * @internal\n * Finalize all drafts in the given state tree.\n */\n\n\nImmer.prototype.finalizeTree = function finalizeTree (root, rootPath, scope) {\n    var this$1 = this;\n\n  var state = root[DRAFT_STATE];\n\n  if (state) {\n    if (!this.useProxies) {\n      // Create the final copy, with added keys and without deleted keys.\n      state.copy = shallowCopy(state.draft, true);\n    }\n\n    root = state.copy;\n  }\n\n  var needPatches = !!rootPath && !!scope.patches;\n\n  var finalizeProperty = function (prop, value, parent) {\n    if (value === parent) {\n      throw Error(\"Immer forbids circular references\");\n    } // In the `finalizeTree` method, only the `root` object may be a draft.\n\n\n    var isDraftProp = !!state && parent === root;\n\n    if (isDraft(value)) {\n      var path = isDraftProp && needPatches && !state.assigned[prop] ? rootPath.concat(prop) : null; // Drafts owned by `scope` are finalized here.\n\n      value = this$1.finalize(value, path, scope); // Drafts from another scope must prevent auto-freezing.\n\n      if (isDraft(value)) {\n        scope.canAutoFreeze = false;\n      } // Preserve non-enumerable properties.\n\n\n      if (Array.isArray(parent) || isEnumerable(parent, prop)) {\n        parent[prop] = value;\n      } else {\n        Object.defineProperty(parent, prop, {\n          value: value\n        });\n      } // Unchanged drafts are never passed to the `onAssign` hook.\n\n\n      if (isDraftProp && value === state.base[prop]) { return; }\n    } // Unchanged draft properties are ignored.\n    else if (isDraftProp && is(value, state.base[prop])) {\n        return;\n      } // Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n      else if (isDraftable(value) && !Object.isFrozen(value)) {\n          each(value, finalizeProperty);\n        }\n\n    if (isDraftProp && this$1.onAssign) {\n      this$1.onAssign(state, prop, value);\n    }\n  };\n\n  each(root, finalizeProperty);\n  return root;\n};\n\nvar immer = new Immer();\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\n\nvar produce = immer.produce;\n/**\n * Like `produce`, but `produceWithPatches` always returns a tuple\n * [nextState, patches, inversePatches] (instead of just the next state)\n */\n\nvar produceWithPatches = immer.produceWithPatches.bind(immer);\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * By default, auto-freezing is disabled in production.\n */\n\nvar setAutoFreeze = immer.setAutoFreeze.bind(immer);\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\n\nvar setUseProxies = immer.setUseProxies.bind(immer);\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\n\nvar applyPatches$1 = immer.applyPatches.bind(immer);\n/**\n * Create an Immer draft from the given base state, which may be a draft itself.\n * The draft can be modified until you finalize it with the `finishDraft` function.\n */\n\nvar createDraft = immer.createDraft.bind(immer);\n/**\n * Finalize an Immer draft from a `createDraft` call, returning the base state\n * (if no changes were made) or a modified copy. The draft must *not* be\n * mutated afterwards.\n *\n * Pass a function as the 2nd argument to generate Immer patches based on the\n * changes that were made.\n */\n\nvar finishDraft = immer.finishDraft.bind(immer);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (produce);\n\n//# sourceMappingURL=immer.module.js.map\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ \"8oxB\")))\n\n//# sourceURL=webpack:///./node_modules/immer/dist/immer.module.js?");

/***/ }),

/***/ "XonJ":
/*!***********************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/BulkDateInput.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment-timezone */ \"f0Wu\");\n/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _instructure_ui_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/ui-i18n */ \"nlL2\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _canvas_datetime_react_components_DateInput__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/datetime/react/components/DateInput */ \"4P7D\");\n/* harmony import */ var _canvas_use_date_time_format_hook__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/use-date-time-format-hook */ \"XxXR\");\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nBulkDateInput.propTypes = {\n  label: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"].isRequired,\n  selectedDateString: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"],\n  dateKey: Object(prop_types__WEBPACK_IMPORTED_MODULE_1__[\"oneOf\"])(['due_at', 'unlock_at', 'lock_at']),\n  assignmentId: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"].isRequired,\n  overrideId: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"],\n  // may be null\n  updateAssignmentDate: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"func\"].isRequired,\n  timezone: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"],\n  fancyMidnight: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"bool\"],\n  interaction: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"],\n  messages: Object(prop_types__WEBPACK_IMPORTED_MODULE_1__[\"arrayOf\"])(Object(prop_types__WEBPACK_IMPORTED_MODULE_1__[\"shape\"])({\n    type: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"],\n    text: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"]\n  }))\n};\nBulkDateInput.defaultProps = {\n  timezone: null,\n  fancyMidnight: false,\n  interaction: 'enabled'\n};\n\nfunction BulkDateInput({\n  label,\n  selectedDateString,\n  messages,\n  dateKey,\n  assignmentId,\n  overrideId,\n  updateAssignmentDate,\n  timezone,\n  fancyMidnight,\n  interaction\n}) {\n  var _ENV;\n\n  // do this here so tests can modify ENV.TIMEZONE\n  timezone = timezone || ((_ENV = ENV) === null || _ENV === void 0 ? void 0 : _ENV.TIMEZONE) || _instructure_ui_i18n__WEBPACK_IMPORTED_MODULE_3__[\"DateTime\"].browserTimeZone();\n  const formatDate = Object(_canvas_use_date_time_format_hook__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('date.formats.medium_with_weekday', timezone);\n  const setDate = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(newDate => updateAssignmentDate({\n    newDate,\n    dateKey,\n    assignmentId,\n    overrideId\n  }), [updateAssignmentDate, dateKey, assignmentId, overrideId]);\n  const handleSelectedDateChange = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(newDate => {\n    if (!newDate) {\n      setDate(null);\n    } else if (selectedDateString) {\n      // preserve the existing selected time\n      const selectedMoment = moment_timezone__WEBPACK_IMPORTED_MODULE_2___default.a.tz(selectedDateString, timezone);\n      const _ref = [selectedMoment.hour(), selectedMoment.minute(), selectedMoment.second(), selectedMoment.millisecond()],\n            h = _ref[0],\n            m = _ref[1],\n            s = _ref[2],\n            ms = _ref[3];\n      const newMoment = moment_timezone__WEBPACK_IMPORTED_MODULE_2___default.a.tz(newDate, timezone);\n      newMoment.hour(h);\n      newMoment.minute(m);\n      newMoment.second(s);\n      newMoment.millisecond(ms);\n      setDate(newMoment.toDate());\n    } else {\n      // assign a default time to the new date\n      const newMoment = moment_timezone__WEBPACK_IMPORTED_MODULE_2___default.a.tz(newDate, timezone);\n      if (fancyMidnight) newMoment.endOf('day');else newMoment.startOf('day');\n      setDate(newMoment.toDate());\n    }\n  }, [fancyMidnight, selectedDateString, setDate, timezone]);\n  const renderLabel = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(() => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_4__[\"ScreenReaderContent\"], null, label), [label]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_canvas_datetime_react_components_DateInput__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n    renderLabel: renderLabel,\n    selectedDate: selectedDateString,\n    formatDate: formatDate,\n    onSelectedDateChange: handleSelectedDateChange,\n    timezone: timezone,\n    interaction: interaction,\n    messages: messages,\n    withRunningValue: true\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(BulkDateInput));\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/BulkDateInput.js?");

/***/ }),

/***/ "XxXR":
/*!******************************************************!*\
  !*** ./ui/shared/use-date-time-format-hook/index.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return useDateTimeFormat; });\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"VTBJ\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst DEFAULT_FORMAT = 'time.formats.default';\nconst optionsList = {\n  'time.formats.default': {\n    // ddd, D MMM YYYY HH:mm:ss Z\n    weekday: 'short',\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    second: 'numeric',\n    timeZoneName: 'short'\n  },\n  'date.formats.full': {\n    // MMM D, YYYY h:mma\n    name: 'date.formats.full',\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric'\n  },\n  'date.formats.date_at_time': {\n    // MMM D [at] h:mma\n    name: 'date.formats.date_at_time',\n    dateStyle: 'long',\n    timeStyle: 'short'\n  },\n  'date.formats.long_with_weekday': {\n    // dddd, MMMM D\n    weekday: 'long',\n    month: 'long',\n    day: 'numeric'\n  },\n  'date.formats.medium_with_weekday': {\n    // ddd MMM D, YYYY\n    weekday: 'short',\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric'\n  },\n  'date.formats.short_with_weekday': {\n    // ddd, MMM D\n    weekday: 'short',\n    month: 'short',\n    day: 'numeric'\n  },\n  'date.formats.short': {\n    // MMM D\n    month: 'short',\n    day: 'numeric'\n  }\n};\nObject.keys(optionsList).forEach(x => Object.freeze(optionsList[x]));\nObject.freeze(optionsList);\nfunction useDateTimeFormat(formatName, timeZone, locale) {\n  var _ENV, _ENV2;\n\n  locale = locale || ((_ENV = ENV) === null || _ENV === void 0 ? void 0 : _ENV.LOCALE) || navigator.language;\n  timeZone = timeZone || ((_ENV2 = ENV) === null || _ENV2 === void 0 ? void 0 : _ENV2.TIMEZONE) || Intl.DateTimeFormat().resolvedOptions().timeZone;\n  const formatter = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useMemo\"])(() => {\n    const options = Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, optionsList[formatName] || optionsList[DEFAULT_FORMAT]);\n\n    return new Intl.DateTimeFormat(locale, Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, options), {}, {\n      timeZone\n    }));\n  }, [formatName, locale, timeZone]);\n  return Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(date => {\n    try {\n      if (date === null) return '';\n      return formatter.format(date instanceof Date ? date : new Date(date));\n    } catch (e) {\n      if (e instanceof RangeError) return '';\n      throw e;\n    }\n  }, [formatter]);\n}\n\n//# sourceURL=webpack:///./ui/shared/use-date-time-format-hook/index.js?");

/***/ }),

/***/ "YiHc":
/*!***************************************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/hooks/useMonitorJobCompletion.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return useMonitorJobCompletion; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var i18n_assignments_bulk_edit_use_save_assignment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!assignments_bulk_edit_use_save_assignment */ \"HeUl\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/do-fetch-api-effect */ \"Ipg6\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"EB+c\");\n\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction useMonitorJobCompletion({\n  progressUrl,\n  pollingInterval = 2000\n}) {\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(0),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        jobCompletion = _useState2[0],\n        setJobCompletion = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(false),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        jobRunning = _useState4[0],\n        setJobRunning = _useState4[1];\n\n  const _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(false),\n        _useState6 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n        jobSuccess = _useState6[0],\n        setJobSuccess = _useState6[1];\n\n  const _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(null),\n        _useState8 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState7, 2),\n        jobErrors = _useState8[0],\n        setJobErrors = _useState8[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(() => {\n    let timeoutId = null;\n    let ignoreFetchResults = false;\n\n    function scheduleNextCompletionPoll() {\n      timeoutId = setTimeout(startCompletionPoll, pollingInterval);\n    }\n\n    function reportJobErrors(json) {\n      setJobRunning(false);\n      setJobErrors(json.results);\n    }\n\n    async function reportFetchError(err) {\n      setJobRunning(false); // this is also the results format if the job fails due to an exception\n\n      setJobErrors({\n        message: await Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"extractFetchErrorMessage\"])(err, i18n_assignments_bulk_edit_use_save_assignment__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('There was an error retrieving job progress'))\n      });\n    }\n\n    function interpretCompletionResponse({\n      json\n    }) {\n      if (ignoreFetchResults) return;\n      setJobCompletion(Math.floor(json.completion));\n\n      if (json.workflow_state === 'failed') {\n        setJobRunning(false);\n        reportJobErrors(json);\n      } else if (['queued', 'running'].includes(json.workflow_state)) {\n        scheduleNextCompletionPoll();\n      } else {\n        setJobSuccess(true);\n        setJobRunning(false);\n      }\n    }\n\n    function startCompletionPoll() {\n      setJobRunning(true);\n      setJobSuccess(false);\n      setJobErrors(null);\n      Object(_canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n        path: progressUrl\n      }).then(interpretCompletionResponse).catch(reportFetchError);\n    } // We really only want to start a polling session if the progressUrl changes, and not if just\n    // one of the other dependencies change.\n\n\n    if (progressUrl && progressUrl !== previousProgressUrlRef.current) {\n      setJobCompletion(0);\n      startCompletionPoll();\n      return () => {\n        // Either we're waiting on a fetch or on a timeout, so clear them both.\n        ignoreFetchResults = true;\n        if (timeoutId) clearTimeout(timeoutId);\n        setJobRunning(false);\n      };\n    }\n  }, [progressUrl, pollingInterval]); // This effect has to be declared second, or the above effect can't detect changes\n\n  const previousProgressUrlRef = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(null);\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(() => {\n    previousProgressUrlRef.current = progressUrl;\n  });\n  return {\n    jobCompletion,\n    setJobCompletion,\n    jobRunning,\n    setJobRunning,\n    jobSuccess,\n    setJobSuccess,\n    jobErrors,\n    setJobErrors\n  };\n}\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/hooks/useMonitorJobCompletion.js?");

/***/ }),

/***/ "bHqI":
/*!******************************************************!*\
  !*** ./node_modules/shallow-equal/dist/index.esm.js ***!
  \******************************************************/
/*! exports provided: shallowEqualArrays, shallowEqualObjects */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shallowEqualArrays\", function() { return shallowEqualArrays; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shallowEqualObjects\", function() { return shallowEqualObjects; });\nfunction shallowEqualObjects(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  var aKeys = Object.keys(objA);\n  var bKeys = Object.keys(objB);\n  var len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    var key = aKeys[i];\n\n    if (objA[key] !== objB[key] || !Object.prototype.hasOwnProperty.call(objB, key)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction shallowEqualArrays(arrA, arrB) {\n  if (arrA === arrB) {\n    return true;\n  }\n\n  if (!arrA || !arrB) {\n    return false;\n  }\n\n  var len = arrA.length;\n\n  if (arrB.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (arrA[i] !== arrB[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n\n\n\n//# sourceURL=webpack:///./node_modules/shallow-equal/dist/index.esm.js?");

/***/ }),

/***/ "il+4":
/*!*****************************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/BulkAssignmentShape.js ***!
  \*****************************************************************************/
/*! exports provided: AllDates, AssignmentShape */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AllDates\", function() { return AllDates; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AssignmentShape\", function() { return AssignmentShape; });\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst AllDates = Object(prop_types__WEBPACK_IMPORTED_MODULE_0__[\"shape\"])({\n  id: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"string\"],\n  // Override id. Not required. Missing if base: true.\n  base: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"bool\"],\n  due_at: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"string\"],\n  // iso8601 strings or null\n  lock_at: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"string\"],\n  unlock_at: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"string\"]\n});\nconst AssignmentShape = Object(prop_types__WEBPACK_IMPORTED_MODULE_0__[\"shape\"])({\n  id: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"string\"].isRequired,\n  all_dates: Object(prop_types__WEBPACK_IMPORTED_MODULE_0__[\"arrayOf\"])(AllDates)\n});\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/BulkAssignmentShape.js?");

/***/ }),

/***/ "juyr":
/*!***********************************************!*\
  !*** ./ui/shared/alerts/react/InlineAlert.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CanvasInlineAlert; });\n/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ \"Ff2n\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/ui-alerts */ \"spba\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n\nconst _excluded = [\"children\", \"liveAlert\", \"screenReaderOnly\", \"politeness\"];\n\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nCanvasInlineAlert.propTypes = {\n  liveAlert: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"bool\"],\n  screenReaderOnly: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"bool\"],\n  politeness: Object(prop_types__WEBPACK_IMPORTED_MODULE_2__[\"oneOf\"])(['assertive', 'polite']),\n  children: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"node\"]\n};\nfunction CanvasInlineAlert(_ref) {\n  let children = _ref.children,\n      liveAlert = _ref.liveAlert,\n      screenReaderOnly = _ref.screenReaderOnly,\n      _ref$politeness = _ref.politeness,\n      politeness = _ref$politeness === void 0 ? 'assertive' : _ref$politeness,\n      alertProps = Object(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_ref, _excluded);\n\n  let body = children;\n\n  if (liveAlert || screenReaderOnly) {\n    body = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"span\", {\n      role: \"alert\",\n      \"aria-live\": politeness,\n      \"aria-atomic\": true\n    }, body);\n  }\n\n  if (screenReaderOnly) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_4__[\"ScreenReaderContent\"], null, body);\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_3__[\"Alert\"], alertProps, body);\n}\n\n//# sourceURL=webpack:///./ui/shared/alerts/react/InlineAlert.js?");

/***/ }),

/***/ "klC3":
/*!******************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/BulkEdit.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BulkEdit; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!assignments_bulk_edit */ \"nlrC\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment-timezone */ \"f0Wu\");\n/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! immer */ \"V/h/\");\n/* harmony import */ var _instructure_ui_i18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-i18n */ \"nlL2\");\n/* harmony import */ var _canvas_alerts_react_InlineAlert__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @canvas/alerts/react/InlineAlert */ \"juyr\");\n/* harmony import */ var _canvas_loading_indicator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @canvas/loading-indicator */ \"7hyl\");\n/* harmony import */ var _canvas_use_fetch_api_hook__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @canvas/use-fetch-api-hook */ \"yoUd\");\n/* harmony import */ var _BulkEditDateSelect__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./BulkEditDateSelect */ \"D4sn\");\n/* harmony import */ var _BulkEditHeader__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./BulkEditHeader */ \"vMKU\");\n/* harmony import */ var _BulkEditTable__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./BulkEditTable */ \"4JN3\");\n/* harmony import */ var _MoveDatesModal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MoveDatesModal */ \"06Z0\");\n/* harmony import */ var _hooks_useSaveAssignments__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hooks/useSaveAssignments */ \"xEKq\");\n/* harmony import */ var _hooks_useMonitorJobCompletion__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hooks/useMonitorJobCompletion */ \"YiHc\");\n/* harmony import */ var _canvas_datetime_DateValidator__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @canvas/datetime/DateValidator */ \"Eoq/\");\n/* harmony import */ var _canvas_grading_jquery_gradingPeriodsApi__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @canvas/grading/jquery/gradingPeriodsApi */ \"xxvz\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./utils */ \"EB+c\");\n\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBulkEdit.propTypes = {\n  courseId: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"string\"].isRequired,\n  onCancel: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"func\"].isRequired,\n  onSave: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"func\"] // for now, this is just informational that save has been clicked\n\n};\nBulkEdit.defaultProps = {\n  onSave: () => {}\n};\nfunction BulkEdit({\n  courseId,\n  onCancel,\n  onSave\n}) {\n  const dateValidator = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useMemo\"])(() => new _canvas_datetime_DateValidator__WEBPACK_IMPORTED_MODULE_16__[\"default\"]({\n    date_range: ENV.VALID_DATE_RANGE || {\n      start_at: {\n        date: null,\n        date_context: 'term'\n      },\n      end_at: {\n        date: null,\n        date_context: 'term'\n      }\n    },\n    hasGradingPeriods: !!ENV.HAS_GRADING_PERIODS,\n    gradingPeriods: _canvas_grading_jquery_gradingPeriodsApi__WEBPACK_IMPORTED_MODULE_17__[\"default\"].deserializePeriods(ENV.active_grading_periods || []),\n    userIsAdmin: (ENV.current_user_roles || []).includes('admin')\n  }), []);\n\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])([]),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        assignments = _useState2[0],\n        setAssignments = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(null),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        loadingError = _useState4[0],\n        setLoadingError = _useState4[1];\n\n  const _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(true),\n        _useState6 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n        loading = _useState6[0],\n        setLoading = _useState6[1];\n\n  const _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(false),\n        _useState8 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState7, 2),\n        moveDatesModalOpen = _useState8[0],\n        setMoveDatesModalOpen = _useState8[1];\n\n  const _useSaveAssignments = Object(_hooks_useSaveAssignments__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(courseId),\n        saveAssignments = _useSaveAssignments.saveAssignments,\n        startingSave = _useSaveAssignments.startingSave,\n        startingSaveError = _useSaveAssignments.startingSaveError,\n        progressUrl = _useSaveAssignments.progressUrl,\n        setProgressUrl = _useSaveAssignments.setProgressUrl;\n\n  const _useMonitorJobComplet = Object(_hooks_useMonitorJobCompletion__WEBPACK_IMPORTED_MODULE_15__[\"default\"])({\n    progressUrl\n  }),\n        jobCompletion = _useMonitorJobComplet.jobCompletion,\n        jobRunning = _useMonitorJobComplet.jobRunning,\n        jobSuccess = _useMonitorJobComplet.jobSuccess,\n        jobErrors = _useMonitorJobComplet.jobErrors,\n        setJobSuccess = _useMonitorJobComplet.setJobSuccess;\n\n  const filterAssignments = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(assignments => {\n    assignments.forEach(assignment => {\n      if (!assignment.hasOwnProperty('all_dates')) {\n        assignment.all_dates = [];\n      }\n    });\n    return assignments;\n  }, []);\n  Object(_canvas_use_fetch_api_hook__WEBPACK_IMPORTED_MODULE_9__[\"default\"])({\n    success: setAssignments,\n    error: setLoadingError,\n    loading: setLoading,\n    convert: filterAssignments,\n    path: `/api/v1/courses/${courseId}/assignments/`,\n    fetchAllPages: true,\n    params: {\n      per_page: 50,\n      include: ['all_dates', 'can_edit'],\n      order_by: 'due_at'\n    }\n  });\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(() => {\n    function clearOriginalDates() {\n      setAssignments(currentAssignments => Object(immer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentAssignments, draftAssignments => {\n        const draftOverrides = draftAssignments.flatMap(assignment => assignment.all_dates);\n        draftOverrides.forEach(draftOverride => {\n          delete draftOverride[Object(_utils__WEBPACK_IMPORTED_MODULE_18__[\"originalDateField\"])('due_at')];\n          delete draftOverride[Object(_utils__WEBPACK_IMPORTED_MODULE_18__[\"originalDateField\"])('unlock_at')];\n          delete draftOverride[Object(_utils__WEBPACK_IMPORTED_MODULE_18__[\"originalDateField\"])('lock_at')];\n        });\n      }));\n    }\n\n    if (jobSuccess) clearOriginalDates();\n  }, [jobSuccess]);\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(() => {\n    function recordJobErrors(errors) {\n      setAssignments(currentAssignments => Object(immer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentAssignments, draftAssignments => {\n        draftAssignments.forEach(draftAssignment => {\n          draftAssignment.all_dates.forEach(draftOverride => {\n            let error;\n\n            if (draftOverride.base) {\n              error = errors.find(e => e.assignment_id == draftAssignment.id && !e.assignment_override_id // eslint-disable-line eqeqeq\n              );\n            } else {\n              error = errors.find(e => e.assignment_override_id == draftOverride.id); // eslint-disable-line eqeqeq\n            }\n\n            if (error && error.errors) {\n              draftOverride.errors = {};\n\n              for (const dateKey in error.errors) {\n                draftOverride.errors[dateKey] = error.errors[dateKey][0].message;\n              }\n            } else {\n              delete draftOverride.errors;\n            }\n          });\n        });\n      }));\n    }\n\n    if (jobErrors && !jobErrors.hasOwnProperty('message')) recordJobErrors(jobErrors);\n  }, [jobErrors]);\n  const setDateOnOverride = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])((override, dateFieldName, newDate) => {\n    const currentDate = override[dateFieldName];\n    const newDateISO = (newDate === null || newDate === void 0 ? void 0 : newDate.toISOString()) || null;\n    if (currentDate === newDateISO || moment_timezone__WEBPACK_IMPORTED_MODULE_4___default()(currentDate).isSame(moment_timezone__WEBPACK_IMPORTED_MODULE_4___default()(newDateISO))) return;\n    const originalField = Object(_utils__WEBPACK_IMPORTED_MODULE_18__[\"originalDateField\"])(dateFieldName);\n\n    if (!override.hasOwnProperty(originalField)) {\n      override[originalField] = override[dateFieldName];\n    }\n\n    override[dateFieldName] = newDateISO;\n    override.persisted = false;\n    override.errors = dateValidator.validateDatetimes(override);\n  }, [dateValidator]);\n  const shiftDateOnOverride = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])((override, dateFieldName, nDays) => {\n    const currentDate = override[dateFieldName];\n\n    if (currentDate) {\n      const newDate = moment_timezone__WEBPACK_IMPORTED_MODULE_4___default()(currentDate).add(nDays, 'days').toDate();\n      setDateOnOverride(override, dateFieldName, newDate);\n    }\n  }, [setDateOnOverride]);\n  const clearPreviousSave = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(() => {\n    // Clear anything from the previous save operation so those elements don't show anymore and so\n    // the above effect doesn't try to clear the original dates.\n    setJobSuccess(false);\n    setProgressUrl(null);\n  }, [setJobSuccess, setProgressUrl]);\n  const findOverride = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])((someAssignments, assignmentId, overrideId) => {\n    const isBaseOverride = !overrideId;\n    const assignment = someAssignments.find(a => a.id === assignmentId);\n    const override = assignment.all_dates.find(o => isBaseOverride ? o.base : o.id === overrideId);\n    return override;\n  }, []);\n  const updateAssignmentDate = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(({\n    dateKey,\n    newDate,\n    assignmentId,\n    overrideId\n  }) => {\n    clearPreviousSave();\n    setAssignments(currentAssignments => Object(immer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentAssignments, draftAssignments => {\n      const override = findOverride(draftAssignments, assignmentId, overrideId);\n      setDateOnOverride(override, dateKey, newDate);\n    }));\n  }, [clearPreviousSave, findOverride, setDateOnOverride]);\n  const clearOverrideEdits = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(({\n    assignmentId,\n    overrideId\n  }) => {\n    setAssignments(currentAssignments => Object(immer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentAssignments, draftAssignments => {\n      const override = findOverride(draftAssignments, assignmentId, overrideId);\n      ['due_at', 'unlock_at', 'lock_at'].forEach(dateField => {\n        const originalField = Object(_utils__WEBPACK_IMPORTED_MODULE_18__[\"originalDateField\"])(dateField);\n\n        if (override.hasOwnProperty(originalField)) {\n          override[dateField] = override[originalField];\n          delete override[originalField];\n        }\n      });\n      delete override.errors;\n      delete override.persisted;\n    }));\n  }, [findOverride]);\n  const setAssignmentSelected = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])((assignmentId, selected) => {\n    setAssignments(currentAssignments => Object(immer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentAssignments, draftAssignments => {\n      const assignment = draftAssignments.find(a => a.id === assignmentId);\n      assignment.selected = selected;\n    }));\n  }, []);\n  const selectAllAssignments = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(selected => {\n    setAssignments(currentAssignments => Object(immer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentAssignments, draftAssignments => {\n      draftAssignments.forEach(a => {\n        if (Object(_utils__WEBPACK_IMPORTED_MODULE_18__[\"canEditAll\"])(a)) a.selected = selected;\n      });\n    }));\n  }, []);\n  const selectDateRange = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])((startDate, endDate) => {\n    var _ENV;\n\n    const timezone = ((_ENV = ENV) === null || _ENV === void 0 ? void 0 : _ENV.TIMEZONE) || _instructure_ui_i18n__WEBPACK_IMPORTED_MODULE_6__[\"DateTime\"].browserTimeZone();\n    const startMoment = moment_timezone__WEBPACK_IMPORTED_MODULE_4___default.a.tz(startDate, timezone).startOf('day');\n    const endMoment = moment_timezone__WEBPACK_IMPORTED_MODULE_4___default.a.tz(endDate, timezone).endOf('day');\n    setAssignments(currentAssignments => Object(immer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentAssignments, draftAssignments => {\n      draftAssignments.forEach(draftAssignment => {\n        const shouldSelect = draftAssignment.all_dates.some(draftOverride => ['due_at', 'lock_at', 'unlock_at'].some(dateField => moment_timezone__WEBPACK_IMPORTED_MODULE_4___default()(draftOverride[dateField]).isBetween(startMoment, endMoment, null, '[]')));\n        draftAssignment.selected = shouldSelect;\n      });\n    }));\n  }, []);\n  const handleSave = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(() => {\n    onSave();\n    saveAssignments(assignments);\n  }, [assignments, onSave, saveAssignments]);\n  const handleOpenBatchEdit = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])((value = true) => {\n    setMoveDatesModalOpen(!!value);\n  }, []);\n  const handleBatchEditShift = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(nDays => {\n    setAssignments(currentAssignments => Object(immer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentAssignments, draftAssignments => {\n      draftAssignments.forEach(draftAssignment => {\n        if (draftAssignment.selected) {\n          draftAssignment.all_dates.forEach(draftOverride => {\n            shiftDateOnOverride(draftOverride, 'due_at', nDays);\n            shiftDateOnOverride(draftOverride, 'unlock_at', nDays);\n            shiftDateOnOverride(draftOverride, 'lock_at', nDays);\n          });\n        }\n      });\n    }));\n    setMoveDatesModalOpen(false);\n  }, [shiftDateOnOverride]);\n  const handleBatchEditRemove = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(datesToRemove => {\n    setAssignments(currentAssignments => Object(immer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentAssignments, draftAssignments => {\n      draftAssignments.forEach(draftAssignment => {\n        if (draftAssignment.selected) {\n          draftAssignment.all_dates.forEach(draftOverride => {\n            if (datesToRemove.includes('due_at')) setDateOnOverride(draftOverride, 'due_at', null);\n            if (datesToRemove.includes('unlock_at')) setDateOnOverride(draftOverride, 'unlock_at', null);\n            if (datesToRemove.includes('lock_at')) setDateOnOverride(draftOverride, 'lock_at', null);\n          });\n        }\n      });\n    }));\n    setMoveDatesModalOpen(false);\n  }, [setDateOnOverride]);\n\n  function renderHeader() {\n    const headerProps = {\n      assignments,\n      startingSave,\n      jobRunning,\n      jobCompletion,\n      jobSuccess,\n      onSave: handleSave,\n      onCancel,\n      onOpenBatchEdit: handleOpenBatchEdit\n    };\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_BulkEditHeader__WEBPACK_IMPORTED_MODULE_11__[\"default\"], headerProps);\n  }\n\n  function renderDateSelect() {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_BulkEditDateSelect__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n      selectDateRange: selectDateRange\n    });\n  }\n\n  function renderSaveSuccess() {\n    if (jobSuccess) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_alerts_react_InlineAlert__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n        variant: \"success\",\n        liveAlert: true\n      }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Assignment dates saved successfully.'));\n    }\n  }\n\n  function renderFetchError() {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_alerts_react_InlineAlert__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n      variant: \"error\",\n      liveAlert: true\n    }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('There was an error retrieving assignment dates.'));\n  }\n\n  function renderSaveError() {\n    if (startingSaveError) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_alerts_react_InlineAlert__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n        variant: \"error\",\n        liveAlert: true\n      }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Error starting save operation:'), \" \", startingSaveError);\n    } else if (jobErrors) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_alerts_react_InlineAlert__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n        variant: \"error\",\n        liveAlert: true\n      }, jobErrors.hasOwnProperty('message') ? i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Error saving assignment dates: ') + jobErrors.message : i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Invalid dates were found. Please correct them and try again.'));\n    }\n  }\n\n  function renderMoveDatesModal() {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_MoveDatesModal__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n      open: moveDatesModalOpen,\n      onShiftDays: handleBatchEditShift,\n      onRemoveDates: handleBatchEditRemove,\n      onCancel: () => handleOpenBatchEdit(false)\n    });\n  }\n\n  function renderBody() {\n    if (loading) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_alerts_react_InlineAlert__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n        liveAlert: true,\n        screenReaderOnly: true\n      }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Loading assignments')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_loading_indicator__WEBPACK_IMPORTED_MODULE_8__[\"default\"], null));\n    }\n\n    if (loadingError) return renderFetchError();\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_alerts_react_InlineAlert__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n      liveAlert: true,\n      screenReaderOnly: true\n    }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('Assignments loaded')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_BulkEditTable__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n      assignments: assignments,\n      updateAssignmentDate: updateAssignmentDate,\n      setAssignmentSelected: setAssignmentSelected,\n      selectAllAssignments: selectAllAssignments,\n      clearOverrideEdits: clearOverrideEdits\n    }));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, renderMoveDatesModal(), renderSaveSuccess(), renderSaveError(), renderHeader(), renderDateSelect(), renderBody());\n}\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/BulkEdit.js?");

/***/ }),

/***/ "nlrC":
/*!**************************************************************************************!*\
  !*** ./frontend_build/i18n.js?assignments_bulk_edit!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('assignments_bulk_edit'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?assignments_bulk_edit");

/***/ }),

/***/ "s63r":
/*!*******************************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/BulkEditOverrideTitle.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!assignments_bulk_edit */ \"nlrC\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-tooltip */ \"HU+D\");\n/* harmony import */ var _instructure_ui_view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-view */ \"OkHH\");\n\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nfunction BulkEditOverrideTitle({\n  assignmentName,\n  overrideTitle,\n  overrideBase\n}) {\n  const _ref = overrideBase ? [assignmentName, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('default dates'), 'medium', '0'] : [overrideTitle, overrideTitle, 'small', 'medium'],\n        _ref2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_ref, 4),\n        visibleTitle = _ref2[0],\n        srSubTitle = _ref2[1],\n        size = _ref2[2],\n        indent = _ref2[3];\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_6__[\"View\"], {\n    as: \"div\",\n    padding: `0 0 0 ${indent}`\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__[\"Tooltip\"], {\n    renderTip: visibleTitle\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_4__[\"Text\"], {\n    as: \"div\",\n    lineHeight: \"double\",\n    size: size\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_3__[\"PresentationContent\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"ellipsis\"\n  }, visibleTitle)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_3__[\"ScreenReaderContent\"], null, `${assignmentName}: ${srSubTitle}`))));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(BulkEditOverrideTitle));\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/BulkEditOverrideTitle.js?");

/***/ }),

/***/ "vMKU":
/*!************************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/BulkEditHeader.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BulkEditHeader; });\n/* harmony import */ var i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!assignments_bulk_edit */ \"nlrC\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_flex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-flex */ \"N46v\");\n/* harmony import */ var _instructure_ui_heading__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-heading */ \"nwNI\");\n/* harmony import */ var _instructure_ui_progress__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-progress */ \"EzO3\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_view__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-view */ \"OkHH\");\n/* harmony import */ var _canvas_alerts_react_InlineAlert__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @canvas/alerts/react/InlineAlert */ \"juyr\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils */ \"EB+c\");\n/* harmony import */ var _BulkAssignmentShape__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./BulkAssignmentShape */ \"il+4\");\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\nBulkEditHeader.propTypes = {\n  assignments: Object(prop_types__WEBPACK_IMPORTED_MODULE_2__[\"arrayOf\"])(_BulkAssignmentShape__WEBPACK_IMPORTED_MODULE_11__[\"AssignmentShape\"]).isRequired,\n  startingSave: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"bool\"].isRequired,\n  jobRunning: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"bool\"].isRequired,\n  jobCompletion: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"number\"].isRequired,\n  jobSuccess: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"bool\"].isRequired,\n  onSave: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"].isRequired,\n  onCancel: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"].isRequired,\n  onOpenBatchEdit: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"].isRequired\n};\nfunction BulkEditHeader({\n  assignments,\n  startingSave,\n  jobRunning,\n  jobCompletion,\n  jobSuccess,\n  onSave,\n  onCancel,\n  onOpenBatchEdit\n}) {\n  function renderProgressValue({\n    valueNow\n  }) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_7__[\"Text\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('%{percent}%', {\n      percent: valueNow\n    }));\n  }\n\n  const anyAssignmentsEdited = (() => {\n    const overrides = assignments.flatMap(a => a.all_dates);\n    return overrides.some(override => [Object(_utils__WEBPACK_IMPORTED_MODULE_10__[\"originalDateField\"])('due_at'), Object(_utils__WEBPACK_IMPORTED_MODULE_10__[\"originalDateField\"])('unlock_at'), Object(_utils__WEBPACK_IMPORTED_MODULE_10__[\"originalDateField\"])('lock_at')].some(originalField => override.hasOwnProperty(originalField)));\n  })();\n\n  const validationErrorsExist = (() => {\n    return assignments.some(assignment => assignment.all_dates.some(override => Object.keys(override.errors || {}).length > 0));\n  })();\n\n  const selectedAssignmentsCount = assignments.filter(a => a.selected).length;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_heading__WEBPACK_IMPORTED_MODULE_5__[\"Heading\"], {\n    level: \"h2\"\n  }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Edit Assignment Dates')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_4__[\"Flex\"], {\n    as: \"div\",\n    padding: \"0 0 medium 0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_4__[\"Flex\"].Item, {\n    shouldGrow: true\n  }, jobRunning && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_8__[\"View\"], {\n    as: \"div\",\n    maxWidth: \"500px\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_progress__WEBPACK_IMPORTED_MODULE_6__[\"ProgressBar\"], {\n    screenReaderLabel: i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Saving assignment dates progress'),\n    valueNow: jobCompletion,\n    renderValue: renderProgressValue\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_canvas_alerts_react_InlineAlert__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    liveAlert: true,\n    screenReaderOnly: true,\n    variant: \"info\"\n  }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Saving assignment dates progress: %{percent}%', {\n    percent: jobCompletion\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_4__[\"Flex\"].Item, {\n    margin: \"0 0 0 small\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_7__[\"Text\"], null, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t({\n    one: '%{count} assignment selected',\n    other: '%{count} assignments selected'\n  }, {\n    count: selectedAssignmentsCount\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_4__[\"Flex\"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_3__[\"Button\"], {\n    margin: \"0 0 0 small\",\n    onClick: onOpenBatchEdit,\n    interaction: selectedAssignmentsCount > 0 ? 'enabled' : 'disabled'\n  }, i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Batch Edit'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_4__[\"Flex\"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_3__[\"Button\"], {\n    margin: \"0 0 0 small\",\n    onClick: onCancel\n  }, jobSuccess ? i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Close') : i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Cancel'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_4__[\"Flex\"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_3__[\"Button\"], {\n    margin: \"0 0 0 small\",\n    variant: \"primary\",\n    interaction: startingSave || jobRunning || !anyAssignmentsEdited || validationErrorsExist ? 'disabled' : 'enabled',\n    onClick: onSave\n  }, startingSave || jobRunning ? i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Saving...') : i18n_assignments_bulk_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Save')))));\n}\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/BulkEditHeader.js?");

/***/ }),

/***/ "xEKq":
/*!**********************************************************************************!*\
  !*** ./ui/features/assignment_index/react/bulk_edit/hooks/useSaveAssignments.js ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return useSaveAssignments; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var i18n_assignments_bulk_edit_use_save_assignment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!assignments_bulk_edit_use_save_assignment */ \"HeUl\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/do-fetch-api-effect */ \"Ipg6\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"EB+c\");\n\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nconst DATE_FIELDS = ['due_at', 'lock_at', 'unlock_at'];\n\nfunction extractEditedAssignmentsAndOverrides(assignments) {\n  const editedAssignments = assignments.reduce((filteredAssignments, assignment) => {\n    const editedOverrides = assignment.all_dates.reduce((filteredOverrides, override) => {\n      if (!DATE_FIELDS.some(field => override.hasOwnProperty(Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"originalDateField\"])(field)))) {\n        return filteredOverrides;\n      }\n\n      const outputOverride = {\n        id: override.id,\n        base: override.base\n      }; // have to copy all the date fields because otherwise the API gives the missing ones their default value\n\n      DATE_FIELDS.forEach(dateField => outputOverride[dateField] = override[dateField]);\n      return [...filteredOverrides, outputOverride];\n    }, []);\n    if (!editedOverrides.length) return filteredAssignments;\n    const outputAssignment = {\n      id: assignment.id,\n      all_dates: editedOverrides\n    };\n    return [...filteredAssignments, outputAssignment];\n  }, []);\n  return editedAssignments;\n}\n\nfunction useSaveAssignments(courseId) {\n  const _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(false),\n        _useState2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n        startingSave = _useState2[0],\n        setStartingSave = _useState2[1];\n\n  const _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(null),\n        _useState4 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n        startingSaveError = _useState4[0],\n        setStartingSaveError = _useState4[1];\n\n  const _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(null),\n        _useState6 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n        progressUrl = _useState6[0],\n        setProgressUrl = _useState6[1];\n\n  const saveAssignments = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"])(async assignments => {\n    const editedAssignments = extractEditedAssignmentsAndOverrides(assignments);\n    if (!editedAssignments.length) return;\n    setStartingSave(true);\n    setStartingSaveError(null);\n\n    try {\n      const _await$doFetchApi = await Object(_canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n        path: `/api/v1/courses/${courseId}/assignments/bulk_update`,\n        method: 'PUT',\n        body: editedAssignments\n      }),\n            json = _await$doFetchApi.json;\n\n      setProgressUrl(json.url);\n    } catch (err) {\n      setStartingSaveError(await Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"extractFetchErrorMessage\"])(err, i18n_assignments_bulk_edit_use_save_assignment__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('There was an error starting the save assignment dates job')));\n    } finally {\n      setStartingSave(false);\n    }\n  }, [courseId]);\n  return {\n    saveAssignments,\n    startingSave,\n    setStartingSave,\n    startingSaveError,\n    setStartingSaveError,\n    progressUrl,\n    setProgressUrl\n  };\n}\n\n//# sourceURL=webpack:///./ui/features/assignment_index/react/bulk_edit/hooks/useSaveAssignments.js?");

/***/ }),

/***/ "yoUd":
/*!***********************************************!*\
  !*** ./ui/shared/use-fetch-api-hook/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return useFetchApi; });\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"VTBJ\");\n/* harmony import */ var _canvas_use_immediate_hook__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/use-immediate-hook */ \"DWas\");\n/* harmony import */ var _canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/do-fetch-api-effect */ \"Ipg6\");\n\n\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n // utility for making it easy to abort the fetch\n\nfunction abortable({\n  success,\n  error,\n  loading,\n  meta\n}) {\n  const aborter = new AbortController();\n  let active = true;\n  return {\n    activeSuccess: (...p) => {\n      if (active && success) success(...p);\n    },\n    activeError: (...p) => {\n      if (active && error) error(...p);\n    },\n    activeLoading: (...p) => {\n      if (active && loading) loading(...p);\n    },\n    activeMeta: (...p) => {\n      if (active && meta) meta(...p);\n    },\n    abort: () => {\n      active = false;\n      aborter.abort();\n    },\n    signal: aborter.signal\n  };\n} // NOTE: if identity of any of the output functions changes, the prior fetch will be aborted and a\n// new fetch will start, just as if you had changed an input parameter. This will result in a react\n// error: \"too many rerenders\". An common example of this problem is this:\n//\n// useFetchApi({path: '/api/v1/foo', success: json => setSomeState(mungeApi(json))})\n//\n// The success function is recreated every time this is called, so it has a new identity. Instead of\n// doing this, you could use the convert parameter:\n//\n// useFetchApi({path: '/api/v1/foo', success: setSomeState, convert: mungeApi})\n//\n// If that doesn't suit your use case, another approach would be the useCallback hook to preserve\n// the identity of your callbacks.\n\n\nfunction useFetchApi({\n  // data output callbacks\n  success,\n  // (parsed json object of the response body) => {}\n  error,\n  // (Error object from doFetchApi) => {}\n  loading,\n  // (boolean that specifies whether a fetch is in progress) => {}\n  meta,\n  // other information about the fetch: ({link, response}) => {}. called only when success is called.\n  // inputs\n  path,\n  // the url to fetch; often a relative path\n  convert,\n  // allows you to convert the json response data into another format before calling success\n  forceResult,\n  // specify this to bypass the fetch and report this to success instead. meta is not called.\n  params = {},\n  // url parameters\n  headers = {},\n  // additional request headers\n  // Setting fetchAllPages makes useFetchApi continually fetch pages while the Link header indicates\n  // there is a next page. The success callback will be invoked for each page with a flattened array\n  // of the results accumulated thus far. The meta callback will also be called once for each page.\n  // If an error occurs on any page, the error callback will be called and pagination will stop. The\n  // loading callback will only be called with false when pagination ends. If any of the parameters\n  // change, the pagination starts over. Overrides fetchNumPages.\n  fetchAllPages = false,\n  // Setting fetchNumPages makes useFetchApi continually fetch the next page while the Link header\n  // supplies the next page or until the provided limit is reached. The same implications listed in\n  // comments for fetchAllPages option apply. Overridden by fetchAllPages, if that param is true.\n  fetchNumPages = 0,\n  fetchOpts = {} // other options to pass to fetch\n\n}) {\n  // useImmediate for deep comparisons and may help avoid browser flickering\n  Object(_canvas_use_immediate_hook__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(() => {\n    if (typeof forceResult !== 'undefined') {\n      success(forceResult);\n      return;\n    } // prevent sending results and errors from stale queries\n\n\n    const _abortable = abortable({\n      success,\n      error,\n      loading,\n      meta\n    }),\n          activeSuccess = _abortable.activeSuccess,\n          activeError = _abortable.activeError,\n          activeLoading = _abortable.activeLoading,\n          activeMeta = _abortable.activeMeta,\n          abort = _abortable.abort,\n          signal = _abortable.signal;\n\n    async function fetchLoop() {\n      try {\n        activeLoading(true);\n        let nextPage = false;\n        let accummulatedResults = [];\n        let pagesRemaining = fetchNumPages;\n\n        do {\n          const paramsWithPage = Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, params);\n\n          if (nextPage) paramsWithPage.page = nextPage; // we don't want to flood the server with parallel requests, and we need to wait for the\n          // \"next\" link header before we know what the next page url is, so we actually want to\n          // await in the loop.\n          // eslint-disable-next-line no-await-in-loop\n\n          const _await$doFetchApi = await Object(_canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            path,\n            headers,\n            params: paramsWithPage,\n            fetchOpts: Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n              signal\n            }, fetchOpts)\n          }),\n                json = _await$doFetchApi.json,\n                response = _await$doFetchApi.response,\n                link = _await$doFetchApi.link;\n\n          const result = convert && json ? convert(json) : json;\n          accummulatedResults = accummulatedResults.concat(result);\n          activeMeta({\n            response,\n            link\n          });\n\n          if (fetchAllPages || pagesRemaining) {\n            var _link$next;\n\n            activeSuccess(accummulatedResults);\n            nextPage = fetchAllPages || --pagesRemaining ? link === null || link === void 0 ? void 0 : (_link$next = link.next) === null || _link$next === void 0 ? void 0 : _link$next.page : false;\n          } else {\n            activeSuccess(result);\n          }\n        } while (nextPage);\n      } catch (err) {\n        activeError(err);\n      } finally {\n        activeLoading(false);\n      }\n    }\n\n    fetchLoop();\n    return abort;\n  }, [success, error, loading, meta, path, convert, forceResult, params, headers, fetchAllPages, fetchNumPages, fetchOpts], {\n    deep: true\n  });\n}\n\n//# sourceURL=webpack:///./ui/shared/use-fetch-api-hook/index.js?");

/***/ })

}]);