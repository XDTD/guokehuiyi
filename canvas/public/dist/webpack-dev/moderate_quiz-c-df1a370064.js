(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([["moderate_quiz"],{

/***/ "/JhV":
/*!*********************************************************************************!*\
  !*** ./frontend_build/i18n.js?quizzes.moderate!./ui/shims/dummyI18nResource.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('quizzes.moderate'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?quizzes.moderate");

/***/ }),

/***/ "897F":
/*!***************************************************!*\
  !*** ./ui/shared/util/jquery/fixDialogButtons.js ***!
  \***************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prevent_default__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prevent-default */ \"qqwe\");\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fixDialogButtons = function () {\n  return this.each(function () {\n    const $dialog = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n    const $buttons = $dialog.find('.button-container:last .btn, button[type=submit]');\n\n    if ($buttons.length) {\n      $dialog.find('.button-container:last, button[type=submit]').hide();\n      let buttons = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.map($buttons.toArray(), button => {\n        const $button = jquery__WEBPACK_IMPORTED_MODULE_0___default()(button);\n        let classes = $button.attr('class') || '';\n        const id = $button.attr('id'); // if you add the class 'dialog_closer' to any of the buttons,\n        // clicking it will cause the dialog to close\n\n        if ($button.is('.dialog_closer')) {\n          $button.off('.fixdialogbuttons');\n          $button.on('click.fixdialogbuttons', Object(prevent_default__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(() => $dialog.dialog('close')));\n        }\n\n        if ($button.prop('type') === 'submit' && $button[0].form) {\n          classes += ' button_type_submit';\n        }\n\n        return {\n          text: $button.text(),\n          'data-text-while-loading': $button.data('textWhileLoading'),\n          click: () => $button.click(),\n          class: classes,\n          id\n        };\n      }); // put the primary button(s) on the far right\n\n      buttons = underscore__WEBPACK_IMPORTED_MODULE_1___default.a.sortBy(buttons, button => button.class.match(/btn-primary/) ? 1 : 0);\n      $dialog.dialog('option', 'buttons', buttons);\n    }\n  });\n};\n\n//# sourceURL=webpack:///./ui/shared/util/jquery/fixDialogButtons.js?");

/***/ }),

/***/ "Dch0":
/*!********************************************!*\
  !*** ./ui/features/moderate_quiz/index.js ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _jquery_quiz_timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jquery/quiz_timing */ \"PW0G\");\n/* harmony import */ var _jquery_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jquery/index */ \"vHC9\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n//# sourceURL=webpack:///./ui/features/moderate_quiz/index.js?");

/***/ }),

/***/ "PW0G":
/*!*********************************************************!*\
  !*** ./ui/features/moderate_quiz/jquery/quiz_timing.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_quizzes_timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!quizzes.timing */ \"utG1\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var date__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date */ \"wX3B\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n/* Date.parse */\n\nvar timing = {\n  initialTime: new Date(),\n\n  initTimes() {\n    if (timing.timesReady) {\n      return timing.clientServerDiff;\n    }\n\n    const serverNow = Date.parse(jquery__WEBPACK_IMPORTED_MODULE_1___default()('.now').text()) || timing.initialTime || new Date();\n    const clientNow = timing.initialTime || new Date();\n    timing.clientServerDiff = serverNow.getTime() - clientNow.getTime();\n    timing.timesReady = true;\n  },\n\n  setReferenceDate(started_at, end_at, now) {\n    if (!timing.timesReady) {\n      timing.initTimes();\n    }\n\n    const result = {};\n    result.referenceDate = Date.parse(end_at);\n    result.isDeadline = true;\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.time_header').text(i18n_quizzes_timing__WEBPACK_IMPORTED_MODULE_0__[\"default\"].beforeLabel(i18n_quizzes_timing__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('labels.time_remaining', 'Time Remaining')));\n\n    if (!result.referenceDate) {\n      result.isDeadline = false;\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('.time_header').text(i18n_quizzes_timing__WEBPACK_IMPORTED_MODULE_0__[\"default\"].beforeLabel(i18n_quizzes_timing__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('labels.time_elapsed', 'Time Elapsed')));\n      result.referenceDate = Date.parse(started_at);\n    }\n\n    result.clientServerDiff = timing.clientServerDiff;\n    return result;\n  }\n\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (timing);\n\n//# sourceURL=webpack:///./ui/features/moderate_quiz/jquery/quiz_timing.js?");

/***/ }),

/***/ "TvTI":
/*!****************************************!*\
  !*** ./ui/shared/util/templateData.js ***!
  \****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_helpers */ \"8JEM\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n/* replaceTags */\n// Fills the selected object(s) with data values as specified.  Plaintext values should be specified in the\n//  data: data used to fill template.\n//  id: set the id attribute of the template object\n//  textValues: a list of strings, which values should be plaintext\n//  htmlValues: a list of strings, which values should be html\n//  hrefValues: List of string.  Searches for all anchor tags in the template\n//    and globally replaces \"{{ value }}\" with data[value].  Useful for adding\n//    new elements asynchronously, when you don't know what their URL will be\n//    until they're created.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData = function (options) {\n  if (this.length && options) {\n    if (options.iterator) {\n      //  todo: replace .andSelf with .addBack when JQuery is upgraded.\n      this.find('*').andSelf().each(function () {\n        const $el = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n        jquery__WEBPACK_IMPORTED_MODULE_0___default.a.each(['name', 'id', 'class'], (i, attr) => {\n          if ($el.attr(attr)) {\n            $el.attr(attr, $el.attr(attr).replace(/-iterator-/, options.iterator));\n          }\n        });\n      });\n    }\n\n    if (options.id) {\n      this.attr('id', options.id);\n    }\n\n    let contentChange = false;\n\n    if (options.data) {\n      for (var item in options.data) {\n        if (options.except && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.except) != -1) {\n          continue;\n        }\n\n        if (options.data[item] && options.dataValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.dataValues) != -1) {\n          this.data(item, options.data[item].toString());\n        }\n\n        const $found_all = this.find('.' + item);\n        var avoid = options.avoid || '';\n        $found_all.each(function () {\n          const $found = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n\n          if ($found.length > 0 && $found.closest(avoid).length === 0) {\n            if (typeof options.data[item] === 'undefined' || options.data[item] === null) {\n              options.data[item] = '';\n            }\n\n            if (options.htmlValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.htmlValues) != -1) {\n              $found.html(jquery__WEBPACK_IMPORTED_MODULE_0___default.a.raw(options.data[item].toString()));\n\n              if ($found.hasClass('user_content')) {\n                contentChange = true;\n                $found.removeClass('enhanced');\n                $found.data('unenhanced_content_html', options.data[item].toString());\n              }\n            } else if ($found[0].tagName.toUpperCase() == 'INPUT') {\n              $found.val(options.data[item]);\n            } else {\n              try {\n                const str = options.data[item].toString();\n                $found.html(Object(html_escape__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(str));\n              } catch (e) {}\n            }\n          }\n        });\n      }\n    }\n\n    if (options.hrefValues && options.data) {\n      this.find('a,span[rel]').each(function () {\n        let $obj = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this),\n            oldHref,\n            oldRel,\n            oldName;\n\n        for (const i in options.hrefValues) {\n          if (!options.hrefValues.hasOwnProperty(i)) {\n            continue;\n          }\n\n          const name = options.hrefValues[i];\n\n          if (oldHref = $obj.attr('href')) {\n            const newHref = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldHref, name, encodeURIComponent(options.data[name]));\n            const orig = $obj.text() === $obj.html() ? $obj.text() : null;\n\n            if (oldHref !== newHref) {\n              $obj.attr('href', newHref);\n\n              if (orig) {\n                $obj.text(orig);\n              }\n            }\n          }\n\n          if (oldRel = $obj.attr('rel')) {\n            $obj.attr('rel', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldRel, name, options.data[name]));\n          }\n\n          if (oldName = $obj.attr('name')) {\n            $obj.attr('name', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldName, name, options.data[name]));\n          }\n        }\n      });\n    }\n\n    if (contentChange) {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).triggerHandler('user_content_change');\n    }\n  }\n\n  return this;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData.defaults = {\n  htmlValues: null,\n  hrefValues: null\n}; // Reverse version of fillTemplateData.  Lets you pull out the string versions of values held in divs, spans, etc.\n// Based on the usage of class names within an object to specify an object's sub-parts.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateData = function (options) {\n  if (!this.length || !options) {\n    return {};\n  }\n\n  var result = {},\n      item,\n      val;\n\n  if (options.textValues) {\n    const _this = this;\n\n    options.textValues.forEach(item => {\n      const $item = _this.find('.' + item.replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n\n      val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($item.text());\n\n      if ($item.html() === '&nbsp;') {\n        val = '';\n      }\n\n      if (val.length === 1 && val.charCodeAt(0) === 160) {\n        val = '';\n      }\n\n      result[item] = val;\n    });\n  }\n\n  if (options.dataValues) {\n    for (item in options.dataValues) {\n      var val = this.data(options.dataValues[item]);\n\n      if (val) {\n        result[options.dataValues[item]] = val;\n      }\n    }\n  }\n\n  if (options.htmlValues) {\n    for (item in options.htmlValues) {\n      const $elem = this.find('.' + options.htmlValues[item].replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n      val = null;\n\n      if ($elem.hasClass('user_content') && $elem.data('unenhanced_content_html')) {\n        val = $elem.data('unenhanced_content_html');\n      } else {\n        val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($elem.html());\n      }\n\n      result[options.htmlValues[item]] = val;\n    }\n  }\n\n  return result;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateValue = function (value, options) {\n  const opts = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, options, {\n    textValues: [value]\n  });\n  return this.getTemplateData(opts)[value];\n};\n\n//# sourceURL=webpack:///./ui/shared/util/templateData.js?");

/***/ }),

/***/ "al1q":
/*!**************************************************************************************************!*\
  !*** ./frontend_build/i18n.js?quizzes.openModerateStudentDialog!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('quizzes.openModerateStudentDialog'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?quizzes.openModerateStudentDialog");

/***/ }),

/***/ "rE+r":
/*!***********************************************************************!*\
  !*** ./ui/features/moderate_quiz/jquery/openModerateStudentDialog.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_quizzes_openModerateStudentDialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!quizzes.openModerateStudentDialog */ \"al1q\");\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\n/* harmony import */ var _canvas_util_jquery_fixDialogButtons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/util/jquery/fixDialogButtons */ \"897F\");\n/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nconst openModerateStudentDialog = ($dialog, dialogWidth) => {\n  const dialog = $dialog.dialog({\n    title: i18n_quizzes_openModerateStudentDialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Student Extensions'),\n    width: dialogWidth\n  }).fixDialogButtons();\n  return dialog;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (openModerateStudentDialog);\n\n//# sourceURL=webpack:///./ui/features/moderate_quiz/jquery/openModerateStudentDialog.js?");

/***/ }),

/***/ "utG1":
/*!*******************************************************************************!*\
  !*** ./frontend_build/i18n.js?quizzes.timing!./ui/shims/dummyI18nResource.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('quizzes.timing'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?quizzes.timing");

/***/ }),

/***/ "vHC9":
/*!***************************************************!*\
  !*** ./ui/features/moderate_quiz/jquery/index.js ***!
  \***************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!quizzes.moderate */ \"/JhV\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _quiz_timing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./quiz_timing */ \"PW0G\");\n/* harmony import */ var _openModerateStudentDialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openModerateStudentDialog */ \"rE+r\");\n/* harmony import */ var _canvas_jquery_jquery_ajaxJSON__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/jquery/jquery.ajaxJSON */ \"dhbk\");\n/* harmony import */ var _canvas_datetime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/datetime */ \"7AEQ\");\n/* harmony import */ var _canvas_forms_jquery_jquery_instructure_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/forms/jquery/jquery.instructure_forms */ \"Dhso\");\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\n/* harmony import */ var _canvas_util_jquery_fixDialogButtons__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @canvas/util/jquery/fixDialogButtons */ \"897F\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_helpers */ \"8JEM\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_plugins__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_plugins */ \"aq8L\");\n/* harmony import */ var _canvas_rails_flash_notifications__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @canvas/rails-flash-notifications */ \"r2Yr\");\n/* harmony import */ var _canvas_util_templateData__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @canvas/util/templateData */ \"TvTI\");\n/* harmony import */ var date__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date */ \"wX3B\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n/* datetimeString */\n\n\n/* fillFormData, getFormData */\n\n\n\n\n/* replaceTags */\n\n\n/* showIf */\n\n\n\n/* fillTemplateData */\n\n\n/* Date.parse */\n\nconst DIALOG_WIDTH = 490;\n/**\n * Updates the digit(s) in the \"gets X extra minutes\" message in a student's\n * block.\n *\n * @param {jQuery} $studentBlock\n *        Selector to the student block you're updating.\n *\n * @param {Number} extraTime\n *        The submission's extra allotted time.\n */\n\nconst updateExtraTime = function ($studentBlock, extraTime) {\n  const $extraTime = $studentBlock.find('.extra_time_allowed');\n\n  if (extraTime > 0) {\n    $extraTime.text($extraTime.text().replace(/\\s\\d+\\s/, ' ' + extraTime + ' '));\n  }\n\n  $extraTime.toggle(extraTime > 0);\n};\n/* global moderation */\n\n\nwindow.moderation = {\n  updateTimes() {\n    const now = new Date();\n    moderation.studentsCurrentlyTakingQuiz = !!jquery__WEBPACK_IMPORTED_MODULE_1___default()('#students .student.in_progress');\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#students .student.in_progress').each(function () {\n      const $row = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this);\n      const row = $row.data('timing') || {};\n      const started_at = $row.attr('data-started-at');\n      const end_at = $row.attr('data-end-at');\n\n      if (!row.referenceDate) {\n        jquery__WEBPACK_IMPORTED_MODULE_1___default.a.extend(row, _quiz_timing__WEBPACK_IMPORTED_MODULE_2__[\"default\"].setReferenceDate(started_at, end_at, now));\n      }\n\n      if (!row.referenceDate) {\n        return;\n      }\n\n      $row.data('timing', row);\n      const diff = row.referenceDate.getTime() - now.getTime() - row.clientServerDiff;\n\n      if (row.isDeadline && diff < 0) {\n        $row.find('.time').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('time_up', 'Time Up!'));\n        return;\n      }\n\n      $row.data('minutes_left', diff / 60000);\n      const date = new Date(Math.abs(diff));\n      const yr = date.getUTCFullYear() - 1970;\n      let mon = date.getUTCMonth();\n      mon += 12 * yr;\n      const day = date.getUTCDate() - 1;\n      const hr = date.getUTCHours();\n      const min = date.getUTCMinutes();\n      const sec = date.getUTCSeconds();\n      const times = [];\n\n      if (mon) {\n        times.push(mon < 10 ? '0' + mon : mon);\n      }\n\n      if (day) {\n        times.push(day < 10 ? '0' + day : day);\n      }\n\n      if (hr) {\n        times.push(hr < 10 ? '0' + hr : hr);\n      }\n\n      if (true) {\n        times.push(min < 10 ? '0' + min : min);\n      }\n\n      if (true) {\n        times.push(sec < 10 ? '0' + sec : sec);\n      }\n\n      $row.find('.time').text(times.join(':'));\n    });\n  },\n\n  updateSubmission(submission, updateLastUpdatedAt) {\n    const $student = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#student_' + submission.user_id);\n\n    if (updateLastUpdatedAt) {\n      moderation.lastUpdatedAt = new Date(Math.max(Date.parse(submission.updated_at), moderation.lastUpdatedAt));\n    }\n\n    let state_text = '';\n\n    if (submission.workflow_state == 'complete' || submission.workflow_state == 'pending_review') {\n      state_text = i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('finished_in_duration', 'finished in %{duration}', {\n        duration: submission.finished_in_words\n      });\n    }\n\n    const data = {\n      attempt: submission.attempt || '--',\n      extra_time: submission.extra_time,\n      extra_attempts: submission.extra_attempts,\n      score: submission.kept_score == null ? null : i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].n(submission.kept_score)\n    };\n\n    if (submission.attempts_left == -1) {\n      data.attempts_left = '--';\n    } else if (submission.attempts_left) {\n      data.attempts_left = submission.attempts_left;\n    }\n\n    if (submission.workflow_state != 'untaken') {\n      data.time = state_text;\n    }\n\n    $student.fillTemplateData({\n      data\n    }).toggleClass('extendable', submission['extendable?']).toggleClass('in_progress', submission.workflow_state == 'untaken').toggleClass('manually_unlocked', !!submission.manually_unlocked).attr('data-started-at', submission.started_at || '').attr('data-end-at', submission.end_at || '').data('timing', null).find('.unlocked').showIf(submission.manually_unlocked);\n    updateExtraTime($student, submission.extra_time);\n  },\n\n  lastUpdatedAt: '',\n  studentsCurrentlyTakingQuiz: false\n};\njquery__WEBPACK_IMPORTED_MODULE_1___default()(document).ready(function (event) {\n  _quiz_timing__WEBPACK_IMPORTED_MODULE_2__[\"default\"].initTimes();\n  setInterval(moderation.updateTimes, 500);\n  let updateErrors = 0;\n  const moderate_url = jquery__WEBPACK_IMPORTED_MODULE_1___default()('.update_url').attr('href');\n  moderation.lastUpdatedAt = Date.parse(jquery__WEBPACK_IMPORTED_MODULE_1___default()('.last_updated_at').text());\n  let currently_updating = false;\n  const $updating_img = jquery__WEBPACK_IMPORTED_MODULE_1___default()('.reload_link img');\n\n  function updating(bool) {\n    currently_updating = bool;\n\n    if (bool) {\n      $updating_img.attr('src', $updating_img.attr('src').replace('ajax-reload.gif', 'ajax-reload-animated.gif'));\n    } else {\n      $updating_img.attr('src', $updating_img.attr('src').replace('ajax-reload-animated.gif', 'ajax-reload.gif'));\n    }\n  }\n\n  function updateSubmissions(repeat) {\n    if (currently_updating) {\n      return;\n    }\n\n    updating(true);\n    const last_updated_at = moderation.lastUpdatedAt && moderation.lastUpdatedAt.toISOString();\n    jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(jquery__WEBPACK_IMPORTED_MODULE_1___default.a.replaceTags(moderate_url, 'update', last_updated_at), 'GET', {}, data => {\n      updating(false);\n\n      if (repeat) {\n        if (data.length || moderation.studentsCurrentlyTakingQuiz) {\n          setTimeout(() => {\n            updateSubmissions(true);\n          }, 60000);\n        } else {\n          setTimeout(() => {\n            updateSubmissions(true);\n          }, 180000);\n        }\n      }\n\n      for (const idx in data) {\n        moderation.updateSubmission(data[idx], true);\n      }\n    }, data => {\n      updating(false);\n      updateErrors++;\n\n      if (updateErrors > 5) {\n        jquery__WEBPACK_IMPORTED_MODULE_1___default.a.flashMessage(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('errors.server_communication_failed', 'There was a problem communicating with the server.  The system will try again in five minutes, or you can reload the page'));\n        updateErrors = 0;\n\n        if (repeat) {\n          setTimeout(() => {\n            updateSubmissions(true);\n          }, 300000);\n        }\n      } else if (repeat) {\n        setTimeout(() => {\n          updateSubmissions(true);\n        }, 120000);\n      }\n    });\n  }\n\n  setTimeout(() => {\n    updateSubmissions(true);\n  }, 1000);\n\n  function checkChange() {\n    const cnt = jquery__WEBPACK_IMPORTED_MODULE_1___default()('.student_check:checked').length;\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#checked_count').text(cnt);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.moderate_multiple_link').showIf(cnt);\n  }\n\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#check_all').change(function () {\n    const isChecked = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).is(':checked');\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.student_check').each((index, elem) => {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()(elem).prop('checked', isChecked);\n    });\n    checkChange();\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('.student_check').change(function () {\n    if (!jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).attr('checked')) {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#check_all').attr('checked', false);\n    }\n\n    checkChange();\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('.moderate_multiple_link').live('click', function (event) {\n    event.preventDefault();\n    const student_ids = [];\n    const data = {};\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.student_check:checked').each(function () {\n      const $student = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).parents('.student');\n      student_ids.push(jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).attr('data-id'));\n      const student_data = {\n        manually_unlocked: $student.hasClass('manually_unlocked') ? '1' : '0',\n        extra_attempts: parseInt($student.find('.extra_attempts').text(), 10) || '',\n        extra_time: parseInt($student.find('.extra_time').text(), 10) || ''\n      };\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.each(['manually_unlocked', 'extra_attempts', 'extra_time'], function () {\n        if (data[this] == null) {\n          data[this] = student_data[this].toString();\n        } else if (data[this] != student_data[this].toString()) {\n          data[this] = '';\n        }\n      });\n    });\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_form').data('ids', student_ids);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_dialog h2').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('extensions_for_students', {\n      one: 'Extensions for 1 Student',\n      other: 'Extensions for %{count} Students'\n    }, {\n      count: student_ids.length\n    }));\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_form').fillFormData(data);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_dialog').dialog({\n      title: i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('titles.student_extensions', 'Student Extensions'),\n      width: DIALOG_WIDTH\n    }).fixDialogButtons();\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('.moderate_student_link').live('click', function (event) {\n    event.preventDefault();\n    const $student = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).parents('.student');\n    const data = {\n      manually_unlocked: $student.hasClass('manually_unlocked') ? '1' : '0',\n      extra_attempts: parseInt($student.find('.extra_attempts').text(), 10) || '',\n      extra_time: parseInt($student.find('.extra_time_allowed').text().replace(/[^\\d]/g, ''), 10) || ''\n    };\n    const name = $student.find('.student_name').text();\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_form').fillFormData(data);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_form').data('ids', [$student.attr('data-user-id')]);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_form').find('button').attr('disabled', false);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_dialog h2').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('extensions_for_student', 'Extensions for %{student}', {\n      student: name\n    }));\n    Object(_openModerateStudentDialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_dialog'), DIALOG_WIDTH);\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('.reload_link').click(event => {\n    event.preventDefault();\n    updateSubmissions();\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extension_extra_time').on('invalid:not_a_number', function (e) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).errorBox(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('errors.quiz_submission_extra_time_not_a_number', 'Extra time must be a number.'));\n  }).on('invalid:greater_than', function (e) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).errorBox(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('errors.quiz_submission_extra_time_too_short', 'Extra time must be greater than 0.'));\n  }).on('invalid:less_than', function (e) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).errorBox(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('errors.quiz_submission_extra_time_too_long', 'Extra time must be less than than 10080.'));\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extension_extra_attempts').on('invalid:not_a_number', function (e) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).errorBox(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('errors.quiz_submission_extra_attempts_not_a_number', 'Extra attempts must be a number.'));\n  }).on('invalid:greater_than', function (e) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).errorBox(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('errors.quiz_submission_extra_attempts_too_short', 'Extra attempts must be greater than 0.'));\n  }).on('invalid:less_than', function (e) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).errorBox(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('errors.quiz_submission_extra_attempts_too_long', 'Extra attempts must be less than than 1000.'));\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_form').submit(function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const ids = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).data('ids');\n\n    if (ids.length == 0) {\n      return;\n    }\n\n    const $form = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this);\n    $form.find('button').attr('disabled', true).filter('.save_button').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.saving', 'Saving...'));\n    let finished = 0,\n        errors = 0;\n    const formData = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).getFormData();\n\n    function valid(data) {\n      let extraAttempts = parseInt(data.extra_attempts),\n          extraTime = parseInt(data.extra_time),\n          valid = true;\n\n      if (data.extra_attempts && isNaN(extraAttempts)) {\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extension_extra_attempts').trigger('invalid:not_a_number');\n        valid = false;\n      } else if (extraAttempts > 1000) {\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extension_extra_attempts').trigger('invalid:less_than');\n        valid = false;\n      } else if (extraAttempts < 0) {\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extension_extra_attempts').trigger('invalid:greater_than');\n        valid = false;\n      }\n\n      if (data.extra_time && isNaN(extraTime)) {\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extension_extra_time').trigger('invalid:not_a_number');\n        valid = false;\n      } else if (extraTime > 10080) {\n        // 1 week\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extension_extra_time').trigger('invalid:less_than');\n        valid = false;\n      } else if (extraTime < 0) {\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extension_extra_time').trigger('invalid:greater_than');\n        valid = false;\n      }\n\n      return valid;\n    }\n\n    if (!valid(formData)) {\n      $form.find('button').attr('disabled', false).filter('.save_button').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.save', 'Save'));\n      return;\n    }\n\n    function checkIfFinished() {\n      if (finished >= ids.length) {\n        if (errors > 0) {\n          if (ids.length == 1) {\n            $form.find('button').attr('disabled', false).filter('.save_button').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.save_failed', 'Save Failed, please try again'));\n          } else {\n            $form.find('button').attr('disabled', false).filter('.save_button').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.save_failed_n_updates_lost', 'Save Failed, %{n} Students were not updated', {\n              n: errors\n            }));\n          }\n        } else {\n          $form.find('button').attr('disabled', false).filter('.save_button').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.save', 'Save'));\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_dialog').dialog('close');\n        }\n      }\n    }\n\n    for (const idx in ids) {\n      const id = ids[idx];\n      const url = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.replaceTags(jquery__WEBPACK_IMPORTED_MODULE_1___default()('.extension_url').attr('href'), 'user_id', id);\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(url, 'POST', formData, data => {\n        finished++;\n        moderation.updateSubmission(data);\n        checkIfFinished();\n      }, data => {\n        finished++;\n        errors++;\n        checkIfFinished();\n      });\n    }\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_dialog').find('.cancel_button').click(() => {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#moderate_student_dialog').dialog('close');\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('.extend_time_link').live('click', event => {\n    event.preventDefault();\n    const $row = jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.target).parents('.student');\n    const end_at = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.datetimeString($row.attr('data-end-at'));\n    const started_at = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.datetimeString($row.attr('data-started-at'));\n    const $dialog = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extend_time_dialog');\n    $dialog.data('row', $row);\n    $dialog.fillTemplateData({\n      data: {\n        end_at,\n        started_at\n      }\n    });\n    $dialog.find('button').attr('disabled', false);\n    $dialog.dialog({\n      title: i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('titles.extend_quiz_time', 'Extend Quiz Time'),\n      width: DIALOG_WIDTH\n    }).fixDialogButtons();\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extend_time_dialog').find('.cancel_button').click(() => {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extend_time_dialog').dialog('close');\n  }).end().find('.save_button').click(() => {\n    const $dialog = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#extend_time_dialog');\n    const data = $dialog.getFormData();\n    const params = {};\n    data.time = parseInt(data.time, 10) || 0;\n\n    if (data.time <= 0) {\n      return;\n    }\n\n    if (data.time_type == 'extend_from_now' && data.time < $dialog.data('row').data('minutes_left')) {\n      const result = confirm(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('confirms.taking_time_away', 'That would be less time than the student currently has.  Continue anyway?'));\n\n      if (!result) {\n        return;\n      }\n    }\n\n    params[data.time_type] = data.time;\n    $dialog.find('button').attr('disabled', true).filter('.save_button').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.extending_time', 'Extending Time...'));\n    const url = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.replaceTags(jquery__WEBPACK_IMPORTED_MODULE_1___default()('.extension_url').attr('href'), 'user_id', $dialog.data('row').attr('data-user-id'));\n    jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(url, 'POST', params, data => {\n      $dialog.find('button').attr('disabled', false).filter('.save_button').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.extend_time', 'Extend Time'));\n      moderation.updateSubmission(data);\n      $dialog.dialog('close');\n    }, data => {\n      $dialog.find('button').attr('disabled', false).filter('.save_button').text(i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.time_extension_failed', 'Extend Time Failed, please try again'));\n    });\n  });\n  const outstanding = {\n    init(event) {\n      event.preventDefault();\n      this.$container = jquery__WEBPACK_IMPORTED_MODULE_1___default()('.child_container');\n      this.showDialog();\n      this.showResultsList(this.data);\n    },\n\n    fetchData() {\n      const indexUrl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('.outstanding_index_url').attr('href');\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(indexUrl, 'GET', null, this.storeDataAndShowAlert.bind(this));\n    },\n\n    storeDataAndShowAlert(data) {\n      if (data.quiz_submissions.length > 0) {\n        this.toggleAlertHeader();\n        this.data = data;\n      }\n    },\n\n    toggleAlertHeader() {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('.alert').toggle();\n    },\n\n    showResultsList(data) {\n      this.adjustDialogHeight(data);\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_content_description_things_to_do').show();\n      this.buildResultList(data);\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_form_submit_btn').prop('disabled', false);\n    },\n\n    adjustDialogHeight(data) {\n      let height = 80;\n      height += data.quiz_submissions.length * 29;\n\n      if (height > 270) {\n        height = 270;\n      }\n\n      this.dialog.animate({\n        height: height + 'px'\n      });\n    },\n\n    buildResultList(data) {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.each(data.quiz_submissions, (index, qs) => {\n        const clone = jquery__WEBPACK_IMPORTED_MODULE_1___default()('.example_autosubmit_row').clone().removeClass('example_autosubmit_row').appendTo('.outstanding_submissions_list').show();\n        clone.children('input').val(qs.id);\n        clone.find('input').prop('checked', true).attr('id', 'id_' + index);\n        clone.children('label').attr('for', 'id_' + index).text(data.users[index].sortable_name);\n        clone.show();\n      });\n    },\n\n    submitOutstandings() {\n      const gradeUrl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('.outstanding_grade_url').attr('href');\n      const ids = this.$container.find('input:checked').map(function extractQSIds() {\n        return this.value;\n      }).get();\n      const json = {\n        quiz_submission_ids: ids\n      };\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(gradeUrl, 'POST', json, function successReporting(data, xhr) {\n        if (xhr.status === 204) {\n          if (ids.length == this.data.users.length) {\n            this.toggleAlertHeader();\n          }\n\n          jquery__WEBPACK_IMPORTED_MODULE_1___default.a.flashMessage('Successfully graded outstanding quizzes');\n          this.closeDialog();\n          updateSubmissions();\n        }\n      }.bind(this));\n    },\n\n    cleanUpEventListeners() {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_form_cancel_btn').off();\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_form_submit_btn').off();\n    },\n\n    closeDialog() {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_content_description_things_to_do').hide();\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_content_description_all_done').hide();\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('.autosubmit_data_row').not('.example_autosubmit_row').remove();\n      this.cleanUpEventListeners();\n      this.dialog.dialog('close');\n    },\n\n    setFocusOnLoad(event, ui) {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_form').focus();\n    },\n\n    showDialog() {\n      this.dialog = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_form').dialog({\n        title: i18n_quizzes_moderate__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('titles.autosubmit_dialog', 'Outstanding Quiz Submissions'),\n        modal: true,\n        width: DIALOG_WIDTH,\n        height: 200,\n        close: this.closeDialog.bind(this)\n      }).dialog('open').fixDialogButtons(); // Set up button behaviors\n\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_form_cancel_btn').on('click keyclick', () => {\n        this.closeDialog();\n      });\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#autosubmit_form_submit_btn').on('click keyclick', this.submitOutstandings.bind(this));\n      this.setFocusOnLoad();\n    }\n\n  };\n  outstanding.fetchData();\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#check_outstanding').click(outstanding.init.bind(outstanding));\n});\n\n//# sourceURL=webpack:///./ui/features/moderate_quiz/jquery/index.js?");

/***/ })

}]);