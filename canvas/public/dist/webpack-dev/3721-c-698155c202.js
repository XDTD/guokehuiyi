(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3721],{

/***/ "5FQ4":
/*!***************************************************************************************!*\
  !*** ./ui/features/assignments_show_student/react/components/AttemptType/UrlEntry.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_alerts_react_AlertManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/alerts/react/AlertManager */ \"5ynn\");\n/* harmony import */ var _canvas_assignments_graphql_student_Assignment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/assignments/graphql/student/Assignment */ \"yXnT\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var i18n_assignments_2_url_entry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!assignments_2_url_entry */ \"PTpR\");\n/* harmony import */ var _helpers_SubmissionHelpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers/SubmissionHelpers */ \"RPsh\");\n/* harmony import */ var _MoreOptions_index__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MoreOptions/index */ \"4R5M\");\n/* harmony import */ var _canvas_assignments_graphql_student_Submission__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/assignments/graphql/student/Submission */ \"uqZB\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _instructure_canvas_theme__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/canvas-theme */ \"7np9\");\n/* harmony import */ var _instructure_ui_billboard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @instructure/ui-billboard */ \"CEBC\");\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_view__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @instructure/ui-view */ \"OkHH\");\n/* harmony import */ var _instructure_ui_flex__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @instructure/ui-flex */ \"N46v\");\n/* harmony import */ var _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @instructure/ui-icons */ \"oMAr\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_link__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @instructure/ui-link */ \"dlTp\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _instructure_ui_text_input__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @instructure/ui-text-input */ \"/09A\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst ERROR_MESSAGE = [{\n  text: i18n_assignments_2_url_entry__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Please enter a valid url (e.g. http://example.com)'),\n  type: 'error'\n}];\n\nclass UrlEntry extends react__WEBPACK_IMPORTED_MODULE_7___default.a.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      messages: [],\n      typingTimeout: 0,\n      url: '',\n      valid: false\n    };\n    this._urlInputRef = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_7__[\"createRef\"])();\n\n    this.updateInputState = () => {\n      const url = this.props.submission.submissionDraft.url;\n      const valid = this.props.submission.submissionDraft.meetsUrlCriteria;\n      this.setState({\n        messages: valid ? [] : ERROR_MESSAGE,\n        url,\n        valid\n      });\n    };\n\n    this.handleLTIURLs = async e => {\n      if (e.data.messageType === 'LtiDeepLinkingResponse') {\n        if (e.data.errormsg) {\n          this.context.setOnFailure(e.data.errormsg);\n          return;\n        }\n\n        if (e.data.content_items.length) {\n          const url = e.data.content_items[0].url;\n          this.createSubmissionDraft(url);\n        }\n      } // Since LTI 1.0 handles its own message alerting we don't have to\n\n\n      if (e.data.messageType === 'A2ExternalContentReady') {\n        if (!e.data.errormsg && e.data.content_items.length) {\n          const url = e.data.content_items[0].url;\n          this.createSubmissionDraft(url);\n        }\n      }\n    };\n\n    this.beforeunload = e => {\n      var _this$props$submissio, _this$props$submissio2;\n\n      if (this.state.url && this.state.url !== ((_this$props$submissio = this.props.submission) === null || _this$props$submissio === void 0 ? void 0 : (_this$props$submissio2 = _this$props$submissio.submissionDraft) === null || _this$props$submissio2 === void 0 ? void 0 : _this$props$submissio2.url)) {\n        e.preventDefault();\n        e.returnValue = true;\n      }\n    };\n\n    this.handleBlur = e => {\n      this.props.updateEditingDraft(false);\n\n      if (this.state.typingTimeout) {\n        clearTimeout(this.state.typingTimeout);\n      }\n\n      this.createSubmissionDraft(e.target.value);\n    };\n\n    this.handleChange = e => {\n      this.props.updateEditingDraft(true);\n\n      if (this.state.typingTimeout) {\n        clearTimeout(this.state.typingTimeout);\n      }\n\n      const url = e.target.value;\n      this.setState({\n        typingTimeout: setTimeout(async () => {\n          await this.createSubmissionDraft(url);\n          this.props.updateEditingDraft(false);\n        }, 1000),\n        // set a timeout of 1 second\n        url\n      });\n    };\n\n    this.createSubmissionDraft = async url => {\n      await this.props.createSubmissionDraft({\n        variables: {\n          id: this.props.submission.id,\n          activeSubmissionType: 'online_url',\n          attempt: this.props.submission.attempt || 1,\n          url\n        }\n      });\n    };\n\n    this.renderURLInput = () => {\n      const inputStyle = {\n        maxWidth: '700px',\n        marginLeft: 'auto',\n        marginRight: 'auto'\n      };\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_12__[\"Flex\"], {\n        direction: \"column\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_12__[\"Flex\"].Item, {\n        overflowY: \"visible\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(\"div\", {\n        style: inputStyle\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_12__[\"Flex\"], {\n        justifyItems: \"center\",\n        alignItems: \"start\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_12__[\"Flex\"].Item, {\n        grow: true\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_text_input__WEBPACK_IMPORTED_MODULE_17__[\"TextInput\"], {\n        renderLabel: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_16__[\"ScreenReaderContent\"], null, i18n_assignments_2_url_entry__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Website url input')),\n        type: \"url\",\n        placeholder: i18n_assignments_2_url_entry__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('http://'),\n        value: this.state.url,\n        onBlur: this.handleBlur,\n        onChange: this.handleChange,\n        messages: this.state.messages,\n        ref: this._urlInputRef,\n        \"data-testid\": \"url-input\"\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_12__[\"Flex\"].Item, null, this.state.valid && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_10__[\"Button\"], {\n        icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_13__[\"IconEyeLine\"],\n        margin: \"0 0 0 x-small\",\n        onClick: () => window.open(this.state.url),\n        \"data-testid\": \"preview-button\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_16__[\"ScreenReaderContent\"], null, i18n_assignments_2_url_entry__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Preview website url'))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_12__[\"Flex\"].Item, {\n        margin: \"small 0\",\n        overflowY: \"visible\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_MoreOptions_index__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n        assignmentID: this.props.assignment._id,\n        courseID: this.props.assignment.env.courseId,\n        userID: this.props.assignment.env.currentUser.id\n      })));\n    };\n\n    this.renderAttempt = () => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_11__[\"View\"], {\n      as: \"div\",\n      borderWidth: \"small\",\n      \"data-testid\": \"url-entry\",\n      margin: \"0 0 medium 0\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_billboard__WEBPACK_IMPORTED_MODULE_9__[\"Billboard\"], {\n      heading: i18n_assignments_2_url_entry__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Enter Web URL'),\n      headingAs: \"h4\",\n      headingLevel: \"h4\",\n      message: this.renderURLInput(),\n      theme: {\n        backgroundColor: _instructure_canvas_theme__WEBPACK_IMPORTED_MODULE_8__[\"default\"].variables.colors.porcelain\n      }\n    }));\n\n    this.renderSubmission = () => {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_12__[\"Flex\"], {\n        direction: \"column\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_12__[\"Flex\"].Item, {\n        textAlign: \"center\",\n        margin: \"small 0 medium 0\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_14__[\"Text\"], {\n        size: \"large\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_instructure_ui_link__WEBPACK_IMPORTED_MODULE_15__[\"Link\"], {\n        icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_13__[\"IconExternalLinkLine\"],\n        iconPlacement: \"end\",\n        margin: \"small\",\n        onClick: () => window.open(this.props.submission.url)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(\"span\", {\n        \"data-testid\": \"url-submission-text\"\n      }, this.props.submission.url)))));\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    var _this$props$submissio3, _this$props$submissio4, _prevProps$submission, _prevProps$submission2;\n\n    if ((_this$props$submissio3 = this.props.submission) !== null && _this$props$submissio3 !== void 0 && (_this$props$submissio4 = _this$props$submissio3.submissionDraft) !== null && _this$props$submissio4 !== void 0 && _this$props$submissio4.url && this.props.submission.submissionDraft.url !== ((_prevProps$submission = prevProps.submission) === null || _prevProps$submission === void 0 ? void 0 : (_prevProps$submission2 = _prevProps$submission.submissionDraft) === null || _prevProps$submission2 === void 0 ? void 0 : _prevProps$submission2.url)) {\n      this.updateInputState();\n    }\n  }\n\n  componentDidMount() {\n    var _this$props$submissio5, _this$props$submissio6;\n\n    window.addEventListener('beforeunload', this.beforeunload);\n\n    if ((_this$props$submissio5 = this.props.submission) !== null && _this$props$submissio5 !== void 0 && (_this$props$submissio6 = _this$props$submissio5.submissionDraft) !== null && _this$props$submissio6 !== void 0 && _this$props$submissio6.url) {\n      this.updateInputState();\n    }\n\n    window.addEventListener('message', this.handleLTIURLs);\n\n    if (this.props.focusOnInit && !Object(_helpers_SubmissionHelpers__WEBPACK_IMPORTED_MODULE_4__[\"isSubmitted\"])(this.props.submission)) {\n      this._urlInputRef.current.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('beforeunload', this.beforeunload);\n    window.removeEventListener('message', this.handleLTIURLs);\n  }\n\n  render() {\n    if (Object(_helpers_SubmissionHelpers__WEBPACK_IMPORTED_MODULE_4__[\"isSubmitted\"])(this.props.submission)) {\n      return this.renderSubmission();\n    } else {\n      return this.renderAttempt();\n    }\n  }\n\n}\n\nUrlEntry.propTypes = {\n  assignment: _canvas_assignments_graphql_student_Assignment__WEBPACK_IMPORTED_MODULE_1__[\"Assignment\"].shape,\n  createSubmissionDraft: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"],\n  focusOnInit: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"bool\"].isRequired,\n  submission: _canvas_assignments_graphql_student_Submission__WEBPACK_IMPORTED_MODULE_6__[\"Submission\"].shape,\n  updateEditingDraft: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"]\n};\nUrlEntry.contextType = _canvas_alerts_react_AlertManager__WEBPACK_IMPORTED_MODULE_0__[\"AlertManagerContext\"];\n/* harmony default export */ __webpack_exports__[\"default\"] = (UrlEntry);\n\n//# sourceURL=webpack:///./ui/features/assignments_show_student/react/components/AttemptType/UrlEntry.js?");

/***/ }),

/***/ "PTpR":
/*!****************************************************************************************!*\
  !*** ./frontend_build/i18n.js?assignments_2_url_entry!./ui/shims/dummyI18nResource.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('assignments_2_url_entry'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?assignments_2_url_entry");

/***/ })

}]);