(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[33],{

/***/ "4BsA":
/*!***************************************************************************************!*\
  !*** ./frontend_build/i18n.js?closedCaptionLanguages!./ui/shims/dummyI18nResource.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('closedCaptionLanguages'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?closedCaptionLanguages");

/***/ }),

/***/ "AtY9":
/*!*****************************************************************!*\
  !*** ./ui/shared/tinymce-external-tools/ExternalToolsHelper.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_ExternalToolsPlugin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!ExternalToolsPlugin */ \"O76O\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n // setting ENV.MAX_MRU_LTI_TOOLS can make it easier to test\n\nconst MAX_MRU_LTI_TOOLS = ENV.MAX_MRU_LTI_TOOLS || 5;\n/**\n * A module for holding helper functions pulled out of the instructure_external_tools/plugin.\n *\n * This should make it easy to seperate and test logic as this evolves\n * without splitting out another module, and since the plugin gets\n * registered with tinymce rather than returned, we can return this\n * object at the end of the module definition as an export for unit testing.\n *\n * @exports\n */\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  /**\n   * build the TinyMCE configuration hash for each\n   * LTI button.  Call once for each button to add\n   * to the toolbar\n   *\n   * the \"widget\" and \"btn\" classes are what tinymce\n   * provides by default and the theme makes use of them,\n   * if you don't include them than our custom class\n   * overwrites the default classes and all the styles break\n   *\n   * @param {Hash (representing a button)} button a collection of name, id,\n   *   icon_url to use for building the right config for an external plugin\n   *\n   * @returns {Hash} appropriate configuration for a tinymce addButton call,\n   *   complete with title, cmd, image, and classes\n   */\n  buttonConfig(button, editor) {\n    const config = {\n      title: button.name,\n      classes: 'widget btn instructure_external_tool_button'\n    };\n    config.id = button.id;\n\n    config.onAction = () => {\n      editor.execCommand(`instructureExternalButton${button.id}`);\n      this.updateMRUList(button.id);\n      this.showHideButtons(editor);\n    };\n\n    config.description = button.description;\n    config.favorite = button.favorite;\n    config.image = button.icon_url;\n    return config;\n  },\n\n  showHideButtons(ed) {\n    var _window$localStorage;\n\n    const label = i18n_ExternalToolsPlugin__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Apps');\n    const menubutton = ed.$(ed.editorContainer.querySelector(`.tox-tbtn--select[aria-label=\"${label}\"]`));\n    const button = ed.$(ed.editorContainer.querySelector(`.tox-tbtn[aria-label=\"${label}\"]`));\n\n    if ((_window$localStorage = window.localStorage) !== null && _window$localStorage !== void 0 && _window$localStorage.getItem('ltimru')) {\n      menubutton.attr('aria-hidden', 'false');\n      button.attr('aria-hidden', 'true');\n      menubutton.show();\n      button.hide();\n    } else {\n      menubutton.attr('aria-hidden', 'true');\n      button.attr('aria-hidden', 'false');\n      menubutton.hide();\n      button.show();\n    }\n  },\n\n  updateMRUList(toolId) {\n    let mrulist;\n\n    try {\n      var _window$localStorage2;\n\n      mrulist = JSON.parse(((_window$localStorage2 = window.localStorage) === null || _window$localStorage2 === void 0 ? void 0 : _window$localStorage2.getItem('ltimru')) || '[]');\n    } catch (ex) {\n      // eslint-disable-next-line no-console\n      console.log('Found bad LTI MRU data', ex.message);\n    } finally {\n      if (!Array.isArray(mrulist)) {\n        mrulist = [];\n      }\n    }\n\n    try {\n      if (!mrulist.includes(toolId)) {\n        var _window$localStorage3;\n\n        mrulist.unshift(toolId);\n        mrulist.splice(MAX_MRU_LTI_TOOLS, mrulist.length);\n        (_window$localStorage3 = window.localStorage) === null || _window$localStorage3 === void 0 ? void 0 : _window$localStorage3.setItem('ltimru', JSON.stringify(mrulist));\n      }\n    } catch (ex) {\n      // swallow it\n      // eslint-disable-next-line no-console\n      console.log('Cannot save LTI MRU list', ex.message);\n    }\n  }\n\n});\n\n//# sourceURL=webpack:///./ui/shared/tinymce-external-tools/ExternalToolsHelper.js?");

/***/ }),

/***/ "ErZx":
/*!********************************************************!*\
  !*** ./packages/canvas-rce/es/defaultTinymceConfig.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst defaultTinymceConfig = {\n  // ============================================================================\n  // Values in this section have acceptable defaults which you may want\n  // to override (though you really should provide content_css)\n  // ============================================================================\n  auto_focus: false,\n  // any values provided (in an array) will be merged into the standard then sorted\n  // you provide the translations\n  block_formats: void 0,\n  // replace to provide your own\n  body_class: 'default-theme',\n  // urls to branding css go here\n  content_css: [],\n  // these are up to you\n  directionality: 'ltr',\n  height: void 0,\n  // '400px' is s the standard height\n  language: 'en',\n  // any menubar entries here will be appended to the standard menubar\n  menubar: void 0,\n  // any menus here will be merged into the standard menubar menus\n  menu: void 0,\n  // any toolbar data here will be merged into the standard toolbars\n  toolbar: void 0,\n  // plugins included here will be added to the standard set\n  plugins: void 0,\n  // ==================================================================================\n  // values below this line define standard behavior and probably shouldn't be changed\n  // but will be used if you do\n  // ==================================================================================\n  branding: false,\n  browser_spellcheck: true,\n  content_style: void 0,\n  // this will always be provided by the RCE\n  convert_urls: false,\n  font_formats: \"Lato=lato,Helvetica Neue,Helvetica,Arial,sans-serif; Balsamiq Sans=Balsamiq Sans,lato,Helvetica Neue,Helvetica,Arial,sans-serif; Architect's Daughter=Architects Daughter,lato,Helvetica Neue,Helvetica,Arial,sans-serif; Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats\",\n  language_load: false,\n  language_url: 'none',\n  toolbar_mode: 'floating',\n  toolbar_ticky: true,\n  mobile: {\n    theme: 'silver'\n  },\n  preview_styles: 'font-family font-size font-weight font-style text-decoration text-transform border border-radius outline text-shadow',\n  remove_script_host: true,\n  resize: true,\n  // will get set from textareaId\n  // selector: '#textarea2',\n  skin: false,\n  statusbar: false,\n  // part of unifying tinymce and canvas_sanitize's element whitelist\n  // copied from\n  // https://www.tiny.cloud/docs-3x/reference/configuration/Configuration3x@valid_elements/#defaultruleset\n  // then edited.\n  //\n  // this list needs to be kept in sync with the list in gems/canvas_sanitize/lib/canvas_sanitize/canvas_sanitize.rb\n  valid_elements: '@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|role],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt|title|hspace|vspace|width|height|align|role],-sub,-sup,-blockquote[cite],-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value|_value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,kbd,label[for],legend,q[cite],samp,small,tt,var,big,figure,figcaption,source[media|sizes|src|srcset|type],track,mark,article,aside,details,footer,header,nav,section,summary,time',\n  extended_valid_elements: \"@[id|accesskey|class|dir|lang|style|tabindex|title|contenteditable|contextmenu|draggable|dropzone|hidden|longdesc|spellcheck|translate|align|role|aria-labelledby|aria-atomic|aria-busy|aria-controls|aria-describedby|aria-disabled|aria-dropeffect|aria-flowto|aria-grabbed|aria-haspopup|aria-hidden|aria-invalid|aria-label|aria-labelledby|aria-live|aria-owns|aria-relevant|aria-autocomplete|aria-checked|aria-disabled|aria-expanded|aria-haspopup|aria-hidden|aria-invalid|aria-label|aria-level|aria-multiline|aria-multiselectable|aria-orientation|aria-pressed|aria-readonly|aria-required|aria-selected|aria-sort|aria-valuemax|aria-valuemin|aria-valuenow|aria-valuetext],iframe[id|data-media-type|title|src|width|height|name|align|style|class|sandbox|allowfullscreen|webkitallowfullscreen|mozallowfullscreen|allow],i[iclass],a[hidden|href|target|rel|media|hreflang|type|charset|name|rev|shape|coords|download|alt],#p,li[value],-ol[reversed|start|type|compact],pre[width],table[border|summary|width|frame|rules|cellspacing|cellpadding|bgcolor],tbody[char|charoff|valign],td[colspan|rowspan|headers|abbr|axis|scope|align|char|charoff|valign|nowrap|bgcolor|width|height],tfoot[char|charoff|valign],th[colspan|rowspan|headers|scope|abbr|axis|align|char|charoff|valign|nowrap|bgcolor|width|height],thead[char|charoff|valign],tr[char|charoff|valign|bgcolor],-ul[compact],video[name|src|allowfullscreen|muted|poster|width|height|controls|playsinline],audio[name|src|muted|controls],annotation[href|xref|definitionURL|encoding|cd|name|src],annotation-xml[href|xref|definitionURL|encoding|cd|name|src],maction[href|xref|mathcolor|mathbackground|actiontype|selection],maligngroup[href|xref|mathcolor|mathbackground|groupalign],malignmark[href|xref|mathcolor|mathbackground|edge],math[xmlns|href|xref|display|maxwidth|overflow|altimg|altimg-width|altimg-height|altimg-valign|alttext|cdgroup|mathcolor|mathbackground|scriptlevel|displaystyle|scriptsizemultiplier|scriptminsize|infixlinebreakstyle|decimalpoint|mathvariant|mathsize|width|height|valign|form|fence|separator|lspace|rspace|stretchy|symmetric|maxsize|minsize|largeop|movablelimits|accent|linebreak|lineleading|linebreakstyle|linebreakmultchar|indentalign|indentshift|indenttarget|indentalignfirst|indentshiftfirst|indentalignlast|indentshiftlast|depth|lquote|rquote|linethickness|munalign|denomalign|bevelled|voffset|open|close|separators|notation|subscriptshift|superscriptshift|accentunder|align|rowalign|columnalign|groupalign|alignmentscope|columnwidth|rowspacing|columnspacing|rowlines|columnlines|frame|framespacing|equalrows|equalcolumns|side|minlabelspacing|rowspan|columnspan|edge|stackalign|charalign|charspacing|longdivstyle|position|shift|location|crossout|length|leftoverhang|rightoverhang|mslinethickness|selection],menclose[href|xref|mathcolor|mathbackground|notation],merror[href|xref|mathcolor|mathbackground],mfenced[href|xref|mathcolor|mathbackground|open|close|separators],mfrac[href|xref|mathcolor|mathbackground|linethickness|munalign|denomalign|bevelled],mglyph[href|xref|mathcolor|mathbackground|src|alt|width|height|valign],mi[href|xref|mathcolor|mathbackground|mathvariant|mathsize],mlabeledtr[href|xref|mathcolor|mathbackground],mlongdiv[href|xref|mathcolor|mathbackground|longdivstyle|align|stackalign|charalign|charspacing],mmultiscripts[href|xref|mathcolor|mathbackground|subscriptshift|superscriptshift],mn[href|xref|mathcolor|mathbackground|mathvariant|mathsize],mo[href|xref|mathcolor|mathbackground|mathvariant|mathsize|form|fence|separator|lspace|rspace|stretchy|symmetric|maxsize|minsize|largeop|movablelimits|accent|linebreak|lineleading|linebreakstyle|linebreakmultchar|indentalign|indentshift|indenttarget|indentalignfirst|indentshiftfirst|indentalignlast|indentshiftlast],mover[href|xref|mathcolor|mathbackground|accent|align],mpadded[href|xref|mathcolor|mathbackground|height|depth|width|lspace|voffset],mphantom[href|xref|mathcolor|mathbackground],mprescripts[href|xref|mathcolor|mathbackground],mroot[href|xref|mathcolor|mathbackground],mrow[href|xref|mathcolor|mathbackground],ms[href|xref|mathcolor|mathbackground|mathvariant|mathsize|lquote|rquote],mscarries[href|xref|mathcolor|mathbackground|position|location|crossout|scriptsizemultiplier],mscarry[href|xref|mathcolor|mathbackground|location|crossout],msgroup[href|xref|mathcolor|mathbackground|position|shift],msline[href|xref|mathcolor|mathbackground|position|length|leftoverhang|rightoverhang|mslinethickness],mspace[href|xref|mathcolor|mathbackground|mathvariant|mathsize],msqrt[href|xref|mathcolor|mathbackground],msrow[href|xref|mathcolor|mathbackground|position],mstack[href|xref|mathcolor|mathbackground|align|stackalign|charalign|charspacing],mstyle[href|xref|mathcolor|mathbackground|scriptlevel|displaystyle|scriptsizemultiplier|scriptminsize|infixlinebreakstyle|decimalpoint|mathvariant|mathsize|width|height|valign|form|fence|separator|lspace|rspace|stretchy|symmetric|maxsize|minsize|largeop|movablelimits|accent|linebreak|lineleading|linebreakstyle|linebreakmultchar|indentalign|indentshift|indenttarget|indentalignfirst|indentshiftfirst|indentalignlast|indentshiftlast|depth|lquote|rquote|linethickness|munalign|denomalign|bevelled|voffset|open|close|separators|notation|subscriptshift|superscriptshift|accentunder|align|rowalign|columnalign|groupalign|alignmentscope|columnwidth|rowspacing|columnspacing|rowlines|columnlines|frame|framespacing|equalrows|equalcolumns|side|minlabelspacing|rowspan|columnspan|edge|stackalign|charalign|charspacing|longdivstyle|position|shift|location|crossout|length|leftoverhang|rightoverhang|mslinethickness|selection],msub[href|xref|mathcolor|mathbackground|subscriptshift],msubsup[href|xref|mathcolor|mathbackground|subscriptshift|superscriptshift],msup[href|xref|mathcolor|mathbackground|superscriptshift],mtable[href|xref|mathcolor|mathbackground|align|rowalign|columnalign|groupalign|alignmentscope|columnwidth|width|rowspacing|columnspacing|rowlines|columnlines|frame|framespacing|equalrows|equalcolumns|displaystyle|side|minlabelspacing],mtd[href|xref|mathcolor|mathbackground|rowspan|columnspan|rowalign|columnalign|groupalign],mtext[href|xref|mathcolor|mathbackground|mathvariant|mathsize|width|height|depth|linebreak],mtr[href|xref|mathcolor|mathbackground|rowalign|columnalign|groupalign],munder[href|xref|mathcolor|mathbackground|accentunder|align],munderover[href|xref|mathcolor|mathbackground|accent|accentunder|align],none[href|xref|mathcolor|mathbackground],semantics[href|xref|definitionURL|encoding],picture,ruby,rp,rt,svg[*],g[*],circle[*]\",\n  non_empty_elements: 'td th iframe video audio object script a i area base basefont br col frame hr img input isindex link meta param embed source wbr track ruby',\n  // tiny's external link create/edit dialog config\n  target_list: false,\n  // don't show the target list when creating/editing links\n  link_title: false,\n  // don't show the title input when creating/editing links\n  default_link_target: '_blank'\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (defaultTinymceConfig);\n\n//# sourceURL=webpack:///./packages/canvas-rce/es/defaultTinymceConfig.js?");

/***/ }),

/***/ "FNQM":
/*!*********************************************!*\
  !*** ./ui/shared/rce/loadEventListeners.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return loadEventListeners; });\n/* harmony import */ var _canvas_tinymce_external_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/tinymce-external-tools */ \"u7sk\");\n/* harmony import */ var browser_sniffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! browser-sniffer */ \"ik22\");\n/* harmony import */ var i18n_loadEventListeners__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! i18n!loadEventListeners */ \"rAU/\");\n/* harmony import */ var _canvas_alerts_react_FlashAlert__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/alerts/react/FlashAlert */ \"uloQ\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction loadEventListeners(callbacks = {}) {\n  const validCallbacks = ['equationCB', 'equellaCB', 'externalToolCB'];\n  validCallbacks.forEach(cbName => {\n    if (callbacks[cbName] === void 0) {\n      callbacks[cbName] = function () {\n        /* no-op */\n      };\n    }\n  });\n  document.addEventListener('tinyRCE/initEquation', ({\n    detail\n  }) => {\n    Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(1), __webpack_require__.e(3), __webpack_require__.e(12), __webpack_require__.e(3663)]).then(__webpack_require__.bind(null, /*! ./backbone/views/EquationEditorView */ \"dIBj\")).then(({\n      default: EquationEditorView\n    }) => {\n      const view = new EquationEditorView(detail.ed);\n      callbacks.equationCB(view);\n    }).catch(Object(_canvas_alerts_react_FlashAlert__WEBPACK_IMPORTED_MODULE_3__[\"showFlashError\"])(i18n_loadEventListeners__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Something went wrong loading the equation editor')));\n  });\n  document.addEventListener('tinyRCE/initEquella', e => {\n    Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(1), __webpack_require__.e(3778)]).then(__webpack_require__.bind(null, /*! @canvas/tinymce-equella */ \"IOhY\")).then(({\n      default: initializeEquella\n    }) => {\n      initializeEquella(e.detail.ed);\n      callbacks.equellaCB();\n    }).catch(Object(_canvas_alerts_react_FlashAlert__WEBPACK_IMPORTED_MODULE_3__[\"showFlashError\"])(i18n_loadEventListeners__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Something went wrong loading Equella')));\n  });\n  document.addEventListener('tinyRCE/initExternalTools', e => {\n    _canvas_tinymce_external_tools__WEBPACK_IMPORTED_MODULE_0__[\"default\"].init(e.detail.ed, e.detail.url, browser_sniffer__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n    callbacks.externalToolCB();\n  });\n}\n\n//# sourceURL=webpack:///./ui/shared/rce/loadEventListeners.js?");

/***/ }),

/***/ "JiFB":
/*!*****************************************!*\
  !*** ./ui/shared/rce/tinymce.config.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EditorConfig; });\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"VTBJ\");\n/* harmony import */ var _canvas_i18n_rtlHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/i18n/rtlHelper */ \"uYtQ\");\n/* harmony import */ var _instructure_canvas_rce_es_defaultTinymceConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @instructure/canvas-rce/es/defaultTinymceConfig */ \"ErZx\");\n\n\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nclass EditorConfig {\n  /**\n   * Create an editor config instance, with some internal state passed in\n   *   so the object knows how to generate a dynamic hash of default\n   *   configuration parameters.  May get overridden by merging\n   *   with another hash of overwriting config parameters.\n   *\n   *  @param {tinymce} tinymce the tinymce global which we use to pull\n   *    some config info off of like the BaseURL for refrencing the skin css\n   *  @param {INST} inst a config hash defined in public/javascripts/INST.js,\n   *    provides feature information like whether notorious is enabled for\n   *    their account.  Generally you can just pass it in after requiring it.\n   *  @param {int} width The width of the viewport the editor is in, this is\n   *    useful for deciding how many buttons to show per toolbar line\n   *  @param {string} domId the \"id\" attribute of the element that's going\n   *    to be transformed with a tinymce editor\n   *\n   *  @exports\n   *  @constructor\n   *  @return {EditorConfig}\n   */\n  constructor(tinymce, inst, width, domId) {\n    this.baseURL = tinymce.baseURL;\n    this.extraButtons = inst.editorButtons;\n    this.instConfig = inst;\n    this.viewportWidth = width;\n    this.idAttribute = domId;\n  }\n  /**\n   * export an appropriate config hash for this config instance.\n   * This returns a simple javascript object with our default\n   * configuration parameters enabled.  You can override\n   * any configuration parameters you want by combining this hash\n   * with an override hash at runtime using \"$.extend\" or similar:\n   *\n   *   var overrides = { resize: false };\n   *   var tinyOptions = $.extend(editorConfig.defaultConfig(), overrides);\n   *   tinymce.init(tinyOptions);\n   *\n   * @return {Hash}\n   */\n\n\n  defaultConfig() {\n    var _window$ENV$FEATURES;\n\n    return Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, _instructure_canvas_rce_es_defaultTinymceConfig__WEBPACK_IMPORTED_MODULE_2__[\"default\"]), {}, {\n      body_class: (_window$ENV$FEATURES = window.ENV.FEATURES) !== null && _window$ENV$FEATURES !== void 0 && _window$ENV$FEATURES.canvas_k6_theme || window.ENV.K5_SUBJECT_COURSE || window.ENV.K5_HOMEROOM_COURSE ? 'elementary-theme' : 'default-theme',\n      selector: `#${this.idAttribute}`,\n      directionality: Object(_canvas_i18n_rtlHelper__WEBPACK_IMPORTED_MODULE_1__[\"getDirection\"])(),\n      // RCEWrapper includes instructure_equation, so it shouldn't be necessary here\n      // but if I leave it out equation_spec.rb and new_ui_spec selenium specs fail\n      // in jenkins (but not locally) and I can't explain why. Doesn't hurt to put it here\n      plugins: ['instructure_equation'],\n      content_css: window.ENV.url_to_what_gets_loaded_inside_the_tinymce_editor_css,\n      style_formats: [{\n        title: 'Heading 2',\n        format: 'h2'\n      }, {\n        title: 'Heading 3',\n        format: 'h3'\n      }, {\n        title: 'Heading 4',\n        format: 'h4'\n      }, {\n        title: 'Heading 5',\n        format: 'h5'\n      }, {\n        title: 'Heading 6',\n        format: 'h6'\n      }],\n      init_instance_callback: ed => {\n        $(`#tinymce-parent-of-${ed.id}`) // eslint-disable-line no-undef\n        .css('visibility', 'visible');\n      },\n      // if kalturaSettings is missing, we have no kaltura to upload to\n      // if present, user may have chosen to hide the button anyway.\n      show_media_upload: !!INST.kalturaSettings && !INST.kalturaSettings.hide_rte_button\n    });\n  }\n\n}\n\n//# sourceURL=webpack:///./ui/shared/rce/tinymce.config.js?");

/***/ }),

/***/ "O76O":
/*!************************************************************************************!*\
  !*** ./frontend_build/i18n.js?ExternalToolsPlugin!./ui/shims/dummyI18nResource.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('ExternalToolsPlugin'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?ExternalToolsPlugin");

/***/ }),

/***/ "eVns":
/*!**************************************!*\
  !*** ./ui/shared/rce/getRCSProps.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return getRCSProps; });\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var _jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jwt */ \"yZiY\");\n/* harmony import */ var _canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/util/splitAssetString */ \"s9Pr\");\n\n\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nfunction getRCSProps() {\n  if (!ENV.context_asset_string) {\n    return null;\n  }\n\n  let _splitAssetString = Object(_canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(ENV.context_asset_string, false),\n      _splitAssetString2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_splitAssetString, 2),\n      contextType = _splitAssetString2[0],\n      contextId = _splitAssetString2[1];\n\n  const userId = ENV.current_user_id;\n  const containingContext = {\n    contextType,\n    contextId,\n    userId\n  }; // set in rich_content.rb if user has :manage_files_add right\n  // though comment says it may (eventually) be in the jwt\n  // TODO: look into that.\n\n  const canUploadFiles = ENV.RICH_CONTENT_CAN_UPLOAD_FILES;\n\n  if (!canUploadFiles || contextType === 'account') {\n    contextId = userId;\n    contextType = 'user';\n  }\n\n  return {\n    canUploadFiles: ENV.RICH_CONTENT_CAN_UPLOAD_FILES,\n    containingContext,\n    // this will remain constant\n    contextType,\n    // these will change via the UI\n    contextId,\n    filesTabDisabled: ENV.RICH_CONTENT_FILES_TAB_DISABLED,\n    host: ENV.RICH_CONTENT_APP_HOST,\n    jwt: ENV.JWT,\n    refreshToken: Object(_jwt__WEBPACK_IMPORTED_MODULE_1__[\"refreshFn\"])(ENV.JWT),\n    themeUrl: ENV.active_brand_config_json_url\n  };\n}\n\n//# sourceURL=webpack:///./ui/shared/rce/getRCSProps.js?");

/***/ }),

/***/ "rAU/":
/*!***********************************************************************************!*\
  !*** ./frontend_build/i18n.js?loadEventListeners!./ui/shims/dummyI18nResource.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('loadEventListeners'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?loadEventListeners");

/***/ }),

/***/ "stQK":
/*!**************************************************!*\
  !*** ./ui/shared/util/closedCaptionLanguages.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!closedCaptionLanguages */ \"4BsA\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst closedCaptionLanguages = {\n  get af() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Afrikaans');\n  },\n\n  get sq() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Albanian');\n  },\n\n  get ar() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Arabic');\n  },\n\n  get be() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Belarusian');\n  },\n\n  get bg() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Bulgarian');\n  },\n\n  get ca() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Catalan');\n  },\n\n  get zh() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Chinese');\n  },\n\n  get hr() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Croatian');\n  },\n\n  get cs() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Czech');\n  },\n\n  get da() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Danish');\n  },\n\n  get nl() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Dutch');\n  },\n\n  get en() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('English');\n  },\n\n  get et() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Estonian');\n  },\n\n  get fl() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Filipino');\n  },\n\n  get fi() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Finnish');\n  },\n\n  get fr() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('French');\n  },\n\n  get gl() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Galician');\n  },\n\n  get de() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('German');\n  },\n\n  get el() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Greek');\n  },\n\n  get ht() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Haitian Creole');\n  },\n\n  get hi() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Hindi');\n  },\n\n  get hu() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Hungarian');\n  },\n\n  get is() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Icelandic');\n  },\n\n  get id() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Indonesian');\n  },\n\n  get ga() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Irish');\n  },\n\n  get it() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Italian');\n  },\n\n  get ja() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Japanese');\n  },\n\n  get ko() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Korean');\n  },\n\n  get lv() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Latvian');\n  },\n\n  get lt() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Lithuanian');\n  },\n\n  get mk() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Macedonian');\n  },\n\n  get ms() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Malay');\n  },\n\n  get mt() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Maltese');\n  },\n\n  get no() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Norwegian');\n  },\n\n  get fa() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Persian');\n  },\n\n  get pl() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Polish');\n  },\n\n  get pt() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Portuguese');\n  },\n\n  get ro() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Romanian');\n  },\n\n  get ru() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Russian');\n  },\n\n  get sr() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Serbian');\n  },\n\n  get sk() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Slovak');\n  },\n\n  get sl() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Slovenian');\n  },\n\n  get es() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Spanish');\n  },\n\n  get sw() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Swahili');\n  },\n\n  get sv() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Swedish');\n  },\n\n  get tl() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Tagalog');\n  },\n\n  get th() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Thai');\n  },\n\n  get tr() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Turkish');\n  },\n\n  get uk() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Ukrainian');\n  },\n\n  get vi() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Vietnamese');\n  },\n\n  get cy() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Welsh');\n  },\n\n  get yi() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Yiddish');\n  },\n\n  get 'en-CA'() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('English (Canada)');\n  },\n\n  // added when we expanded CC languages to all\n  // those supported in canvas\n  get 'en-AU'() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('English (Australia)');\n  },\n\n  get 'en-GB'() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('English (United Kingdom)');\n  },\n\n  get 'fr-CA'() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('French (Canada)');\n  },\n\n  get he() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Hebrew');\n  },\n\n  get hy() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Armenian');\n  },\n\n  get mi() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Māori (New Zealand)');\n  },\n\n  get nb() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Norwegian Bokmål');\n  },\n\n  get nn() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Norwegian Nynorsk');\n  },\n\n  get 'zh-Hans'() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Chinese Simplified');\n  },\n\n  get 'zh-Hant'() {\n    return i18n_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Chinese Traditional');\n  }\n\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (closedCaptionLanguages);\n\n//# sourceURL=webpack:///./ui/shared/util/closedCaptionLanguages.js?");

/***/ }),

/***/ "u7sk":
/*!***************************************************!*\
  !*** ./ui/shared/tinymce-external-tools/index.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_ExternalToolsPlugin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!ExternalToolsPlugin */ \"O76O\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _ExternalToolsHelper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ExternalToolsHelper */ \"AtY9\");\n/* harmony import */ var _canvas_external_apps_iframeAllowances__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/external-apps/iframeAllowances */ \"dDTa\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_6__);\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nconst TRANSLATIONS = {\n  get more_external_tools() {\n    return Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_ExternalToolsPlugin__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('more_external_tools', 'More External Tools'));\n  }\n\n};\nconst ExternalToolsPlugin = {\n  init(ed, url, _INST) {\n    if (!_INST || !_INST.editorButtons || !_INST.editorButtons.length) {\n      return;\n    }\n\n    let dialog = {\n      // if somehow open gets called early, keep trying until it is ready\n      open: (...args) => setTimeout(() => dialog.open(...args), 50)\n    };\n    Promise.all(/*! import() */[__webpack_require__.e(5), __webpack_require__.e(6), __webpack_require__.e(8), __webpack_require__.e(9), __webpack_require__.e(10), __webpack_require__.e(11), __webpack_require__.e(18), __webpack_require__.e(32), __webpack_require__.e(83), __webpack_require__.e(3665)]).then(__webpack_require__.bind(null, /*! ./react/components/ExternalToolDialog */ \"PrO8\")).then(({\n      default: ExternalToolDialog\n    }) => {\n      const dialogContainer = document.createElement('div');\n      document.body.appendChild(dialogContainer);\n      react_dom__WEBPACK_IMPORTED_MODULE_6___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(ExternalToolDialog, {\n        win: window,\n        editor: ed,\n        contextAssetString: ENV.context_asset_string,\n        iframeAllowances: Object(_canvas_external_apps_iframeAllowances__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(),\n        resourceSelectionUrl: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#context_external_tool_resource_selection_url').attr('href'),\n        deepLinkingOrigin: ENV.DEEP_LINKING_POST_MESSAGE_ORIGIN\n      }), dialogContainer, function () {\n        dialog = this;\n      });\n    });\n    const ltiButtons = [];\n\n    for (let idx = 0; _INST.editorButtons && idx < _INST.editorButtons.length; idx++) {\n      const current_button = _INST.editorButtons[idx]; // eslint-disable-next-line no-loop-func\n\n      const openDialog = () => dialog.open(current_button);\n\n      ltiButtons.push(_ExternalToolsHelper__WEBPACK_IMPORTED_MODULE_3__[\"default\"].buttonConfig(current_button, ed));\n      ed.addCommand(`instructureExternalButton${current_button.id}`, openDialog);\n    }\n\n    if (ltiButtons.length) {\n      buildToolsButton(ed, ltiButtons);\n      buildFavoriteToolsButtons(ed, ltiButtons);\n      buildMRUMenuButton(ed, ltiButtons);\n      buildMenubarItem(ed, ltiButtons);\n    }\n  }\n\n};\n\nfunction registerToolIcon(ed, button) {\n  if (!button.iconSVG && button.image) {\n    // Sanitize input against XSS\n    const svg = document.createElement('svg');\n    svg.setAttribute('viewBox', '0 0 16 16');\n    svg.setAttribute('version', '1.1');\n    svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n    const image = document.createElement('image');\n    image.setAttribute('xlink:href', button.image);\n    image.style.width = '100%';\n    image.style.height = '100%';\n    svg.appendChild(image);\n    button.iconSVG = svg.outerHTML;\n    button.icon = `lti_tool_${button.id}`;\n  }\n\n  if (button.iconSVG) {\n    ed.ui.registry.addIcon(button.icon, button.iconSVG);\n  }\n} // What I'd really like to do is start with a plain Apps button in the toolbar\n// and menubar's Tools menu, then replace it with a menu button/nested menu item\n// when there are MRU tools but I don't see a way to do that in tinymce.\n// What this does is:\n// for the toolbar: create both buttons and use CSS to show the one we want and hide the other\n// for the item in the menubar's Tools menu: always show a nexted menu. With no MRU tools,\n//    the submenu just shows \"View All\"\n// register the Apps menu item in the menubar's Tools menu\n\n\nfunction buildMenubarItem(ed, ltiButtons) {\n  if (ltiButtons.length) {\n    ed.ui.registry.addNestedMenuItem('lti_tools_menuitem', {\n      text: i18n_ExternalToolsPlugin__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Apps'),\n      icon: 'lti',\n      getSubmenuItems: () => getLtiMRUItems(ed, ltiButtons)\n    });\n  }\n} // register the Apps toolbar button for when there are no MRU apps\n\n\nfunction buildToolsButton(ed, ltiButtons) {\n  const tooltip = i18n_ExternalToolsPlugin__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Apps');\n  ed.ui.registry.addButton('lti_tool_dropdown', {\n    onAction: () => {\n      const ev = new CustomEvent('tinyRCE/onExternalTools', {\n        detail: {\n          ltiButtons\n        }\n      });\n      document.dispatchEvent(ev);\n    },\n    icon: 'lti',\n    tooltip,\n\n    onSetup(_api) {\n      // start off with the right button visible\n      _ExternalToolsHelper__WEBPACK_IMPORTED_MODULE_3__[\"default\"].showHideButtons(ed);\n    }\n\n  });\n} // register the favorite lti tools toolbar buttons\n\n\nfunction buildFavoriteToolsButtons(ed, ltiButtons) {\n  ltiButtons.forEach(button => {\n    if (!button.favorite) return;\n    registerToolIcon(ed, button);\n    ed.ui.registry.addButton(`instructure_external_button_${button.id}`, {\n      onAction: button.onAction,\n      tooltip: button.title,\n      icon: button.icon,\n      title: button.title\n    });\n  });\n} // register the Apps toolbar button for when there are MRU apps\n\n\nfunction buildMRUMenuButton(ed, ltiButtons) {\n  const tooltip = i18n_ExternalToolsPlugin__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Apps');\n  ed.ui.registry.addMenuButton('lti_mru_button', {\n    tooltip,\n    icon: 'lti',\n\n    fetch(callback) {\n      callback(getLtiMRUItems(ed, ltiButtons));\n    },\n\n    onSetup(_api) {\n      _ExternalToolsHelper__WEBPACK_IMPORTED_MODULE_3__[\"default\"].showHideButtons(ed);\n    }\n\n  });\n} // build the array of MRU app menu items\n\n\nfunction getLtiMRUItems(ed, ltiButtons) {\n  const mruMenuItems = [];\n\n  try {\n    const mruIds = JSON.parse(window.localStorage.getItem('ltimru'));\n\n    if (mruIds && Array.isArray(mruIds) && mruIds.length) {\n      const mruButtons = ltiButtons.filter(b => mruIds.includes(b.id));\n      mruButtons.forEach(b => {\n        registerToolIcon(ed, b);\n\n        if (!b.menuItem) {\n          b.menuItem = {\n            type: 'menuitem',\n            text: b.title,\n            icon: b.icon,\n            onAction: b.onAction\n          };\n        }\n\n        mruMenuItems.push(b.menuItem);\n      });\n      mruMenuItems.sort((a, b) => a.text.localeCompare(b.text));\n    }\n  } catch (ex) {\n    // eslint-disable-next-line no-console\n    console.log('Failed building mru menu', ex.message);\n  } finally {\n    mruMenuItems.push({\n      type: 'menuitem',\n      text: i18n_ExternalToolsPlugin__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('View All'),\n      onAction: () => {\n        const ev = new CustomEvent('tinyRCE/onExternalTools', {\n          detail: {\n            ltiButtons\n          }\n        });\n        document.dispatchEvent(ev);\n      }\n    });\n  }\n\n  return mruMenuItems;\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ExternalToolsPlugin);\n\n//# sourceURL=webpack:///./ui/shared/tinymce-external-tools/index.js?");

/***/ }),

/***/ "yZiY":
/*!******************************!*\
  !*** ./ui/shared/rce/jwt.js ***!
  \******************************/
/*! exports provided: refreshFn */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"refreshFn\", function() { return refreshFn; });\n/* harmony import */ var _canvas_axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/axios */ \"BrAc\");\n/*\n * Copyright (C) 2017 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nfunction refreshFn(initialToken) {\n  let token = initialToken;\n  let promise = null;\n  return done => {\n    if (promise === null) {\n      promise = _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post('/api/v1/jwts/refresh', {\n        jwt: token\n      }).then(resp => {\n        promise = null;\n        token = resp.data.token;\n        return token;\n      });\n    }\n\n    if (typeof done === 'function') {\n      promise.then(done);\n    }\n\n    return promise;\n  };\n}\n\n//# sourceURL=webpack:///./ui/shared/rce/jwt.js?");

/***/ })

}]);