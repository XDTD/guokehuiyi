(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[61],{

/***/ "L2KU":
/*!******************************************************************!*\
  !*** ./packages/link-header-parsing/parseLinkHeaderFromAxios.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * This is a version of ./parseLinkHeaderFromXHR\n * designed to work with axios instead of jQuery.\n *\n */\n\nconst regex = /<(http.*?)>; rel=\"([a-z]*)\"/g\n\nconst parseLinkHeader = axiosResponse => {\n  const links = {}\n  const header = axiosResponse.headers ? axiosResponse.headers.link : null\n  if (!header) {\n    return links\n  }\n  let link = regex.exec(header)\n  while (link) {\n    links[link[2]] = link[1]\n    link = regex.exec(header)\n  }\n  return links\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (parseLinkHeader);\n\n\n//# sourceURL=webpack:///./packages/link-header-parsing/parseLinkHeaderFromAxios.js?");

/***/ }),

/***/ "poaC":
/*!********************************************************!*\
  !*** ./ui/shared/blueprint-courses/react/apiClient.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/axios */ \"BrAc\");\n/* harmony import */ var link_header_parsing_parseLinkHeaderFromAxios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! link-header-parsing/parseLinkHeaderFromAxios */ \"L2KU\");\n/* harmony import */ var _migrationStates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./migrationStates */ \"rf2n\");\n/*\n * Copyright (C) 2017 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nconst ApiClient = {\n  _depaginate(url, maxPages = Infinity, allResults = []) {\n    return _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(url).then(res => {\n      const results = allResults.concat(res.data);\n      const remainingPages = maxPages - 1;\n\n      if (res.headers.link && remainingPages > 0) {\n        const links = Object(link_header_parsing_parseLinkHeaderFromAxios__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(res);\n\n        if (links.next) {\n          return this._depaginate(links.next, remainingPages, results);\n        }\n      }\n\n      res.data = results;\n      return res;\n    });\n  },\n\n  _queryString(params) {\n    return params.map(param => {\n      const key = Object.keys(param)[0];\n      const value = param[key];\n      return value ? `${key}=${value}` : null;\n    }).filter(param => !!param).join('&');\n  },\n\n  getCourses({\n    accountId\n  }, {\n    search = '',\n    term = '',\n    subAccount = ''\n  } = {}) {\n    const params = this._queryString([{\n      per_page: '100'\n    }, {\n      blueprint: 'false'\n    }, {\n      blueprint_associated: 'false'\n    }, {\n      'include[]': 'term'\n    }, {\n      'include[]': 'teachers'\n    }, {\n      teacher_limit: '5'\n    }, {\n      search_term: search\n    }, {\n      enrollment_term_id: term\n    }]);\n\n    return this._depaginate(`/api/v1/accounts/${subAccount || accountId}/courses?${params}`, 1);\n  },\n\n  getAssociations({\n    masterCourse\n  }) {\n    const params = this._queryString([{\n      per_page: '100'\n    }, {\n      teacher_limit: '5'\n    }]);\n\n    return this._depaginate(`/api/v1/courses/${masterCourse.id}/blueprint_templates/default/associated_courses?${params}`);\n  },\n\n  saveAssociations({\n    masterCourse,\n    addedAssociations,\n    removedAssociations\n  }) {\n    return _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].put(`/api/v1/courses/${masterCourse.id}/blueprint_templates/default/update_associations`, {\n      course_ids_to_add: addedAssociations.map(c => c.id),\n      course_ids_to_remove: removedAssociations.map(c => c.id)\n    });\n  },\n\n  getMigrations({\n    masterCourse\n  }) {\n    return _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`/api/v1/courses/${masterCourse.id}/blueprint_templates/default/migrations`);\n  },\n\n  beginMigration({\n    masterCourse,\n    willSendNotification,\n    willIncludeCustomNotificationMessage,\n    notificationMessage,\n    willIncludeCourseSettings,\n    willPublishCourses\n  }) {\n    const params = {\n      send_notification: willSendNotification\n    };\n\n    if (willIncludeCourseSettings) {\n      params.copy_settings = true; // don't send parameter if not checked\n    }\n\n    if (willIncludeCustomNotificationMessage && notificationMessage) {\n      params.comment = notificationMessage;\n    }\n\n    if (willPublishCourses) {\n      params.publish_after_initial_sync = true;\n    }\n\n    return _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`/api/v1/courses/${masterCourse.id}/blueprint_templates/default/migrations`, params);\n  },\n\n  checkMigration(state) {\n    return this.getMigrations(state).then(res => {\n      let status = _migrationStates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].void;\n\n      if (res.data[0]) {\n        status = res.data[0].workflow_state;\n      }\n\n      res.data = status;\n      return res;\n    });\n  },\n\n  getMigration({\n    course\n  }, {\n    blueprintType = 'blueprint_templates',\n    templateId = 'default',\n    changeId\n  }) {\n    return _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`/api/v1/courses/${course.id}/${blueprintType}/${templateId}/migrations/${changeId}`);\n  },\n\n  getMigrationDetails({\n    course\n  }, {\n    blueprintType = 'blueprint_templates',\n    templateId = 'default',\n    changeId\n  }) {\n    return _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`/api/v1/courses/${course.id}/${blueprintType}/${templateId}/migrations/${changeId}/details`);\n  },\n\n  getFullMigration({\n    course\n  }, params) {\n    return this.getMigration({\n      course\n    }, params).then(({\n      data\n    }) => this.getMigrationDetails({\n      course\n    }, params).then(res => Object.assign(data, {\n      changeId: params.changeId,\n      changes: res.data\n    })));\n  },\n\n  getSyncHistory({\n    masterCourse\n  }) {\n    return this.getMigrations({\n      masterCourse\n    }).then(({\n      data\n    }) => Promise.all( // limit to last 5 migrations\n    data.slice(0, 5).map(mig => this.getMigrationDetails({\n      course: masterCourse\n    }, {\n      changeId: mig.id\n    }).then(res => Object.assign(mig, {\n      changes: res.data\n    })))));\n  },\n\n  toggleLocked({\n    courseId,\n    itemType,\n    itemId,\n    isLocked\n  }) {\n    return _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].put(`/api/v1/courses/${courseId}/blueprint_templates/default/restrict_item`, {\n      content_type: itemType,\n      content_id: itemId,\n      restricted: isLocked\n    });\n  },\n\n  loadUnsyncedChanges({\n    masterCourse\n  }) {\n    return _canvas_axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`/api/v1/courses/${masterCourse.id}/blueprint_templates/default/unsynced_changes`);\n  }\n\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (ApiClient);\n\n//# sourceURL=webpack:///./ui/shared/blueprint-courses/react/apiClient.js?");

/***/ }),

/***/ "rf2n":
/*!**************************************************************!*\
  !*** ./ui/shared/blueprint-courses/react/migrationStates.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*\n * Copyright (C) 2017 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst loadingStates = ['queued', 'exporting', 'imports_queued'];\nconst endStates = ['completed', 'exports_failed', 'imports_failed'];\nconst statesList = ['void', 'unknown', ...loadingStates, ...endStates];\nconst migrationStates = {\n  statesList,\n  states: statesList.reduce((map, state) => Object.assign(map, {\n    [state]: state\n  }), {})\n};\n\nmigrationStates.isEndState = state => endStates.includes(state);\n\nmigrationStates.isLoadingState = state => loadingStates.includes(state);\n\nmigrationStates.getLoadingValue = state => loadingStates.indexOf(state) + 1;\n\nmigrationStates.isSuccessful = state => state === 'completed';\n\nmigrationStates.maxLoadingValue = loadingStates.length + 1;\n/* harmony default export */ __webpack_exports__[\"default\"] = (migrationStates);\n\n//# sourceURL=webpack:///./ui/shared/blueprint-courses/react/migrationStates.js?");

/***/ }),

/***/ "tlDv":
/*!********************************************************!*\
  !*** ./ui/shared/blueprint-courses/react/propTypes.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _migrationStates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./migrationStates */ \"rf2n\");\n/*\n * Copyright (C) 2017 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nconst shape = prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.shape,\n      string = prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.string,\n      arrayOf = prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.arrayOf,\n      oneOf = prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.oneOf,\n      bool = prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.bool,\n      instanceOf = prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.instanceOf;\nconst propTypes = {};\npropTypes.migrationState = oneOf(_migrationStates__WEBPACK_IMPORTED_MODULE_1__[\"default\"].statesList);\npropTypes.term = shape({\n  id: string.isRequired,\n  name: string.isRequired\n});\npropTypes.termList = arrayOf(propTypes.term);\npropTypes.account = shape({\n  id: string.isRequired,\n  name: string.isRequired\n});\npropTypes.accountList = arrayOf(propTypes.account);\npropTypes.course = shape({\n  id: string.isRequired,\n  name: string.isRequired,\n  course_code: string.isRequired,\n  term: propTypes.term.isRequired,\n  teachers: arrayOf(shape({\n    display_name: string.isRequired\n  })),\n  teacher_count: string,\n  sis_course_id: string\n});\npropTypes.courseList = arrayOf(propTypes.course);\npropTypes.courseInfo = shape({\n  id: string.isRequired,\n  name: string.isRequired,\n  enrollment_term_id: string.isRequired,\n  sis_course_id: string\n});\npropTypes.lockableAttribute = oneOf(['points', 'content', 'due_dates', 'availability_dates', 'settings', 'deleted']);\npropTypes.lockableAttributeList = arrayOf(propTypes.lockableAttribute);\npropTypes.migrationException = shape({\n  course_id: string.isRequired,\n  conflicting_changes: propTypes.lockableAttributeList\n});\npropTypes.migrationExceptionList = arrayOf(propTypes.migrationException);\npropTypes.migrationChange = shape({\n  asset_id: string.isRequired,\n  asset_type: oneOf(['assignment', 'quiz', 'discussion_topic', 'wiki_page', 'attachment', 'context_module', 'learning_outcome', 'learning_outcome_group', 'announcement', 'rubric', 'syllabus']).isRequired,\n  asset_name: string.isRequired,\n  change_type: oneOf(['created', 'updated', 'deleted']).isRequired,\n  htnl_url: string,\n  exceptions: propTypes.migrationExceptionList\n});\npropTypes.migrationChangeList = arrayOf(propTypes.migrationChange);\npropTypes.migration = shape({\n  id: string.isRequired,\n  workflow_state: propTypes.migrationState.isRequired,\n  comment: string,\n  created_at: string.isRequired,\n  exports_started_at: string,\n  imports_queued_at: string,\n  imports_completed_at: string,\n  changes: propTypes.migrationChangeList\n});\npropTypes.migrationList = arrayOf(propTypes.migration);\npropTypes.unsyncedChange = shape({\n  asset_id: string.isRequired,\n  asset_type: string.isRequired,\n  asset_name: string.isRequired,\n  change_type: string.isRequired,\n  html_url: string.isRequired,\n  locked: bool.isRequired\n});\npropTypes.unsyncedChanges = arrayOf(propTypes.unsyncedChange);\npropTypes.notification = shape({\n  id: string.isRequired,\n  message: string.isRequired,\n  err: instanceOf(Error)\n});\npropTypes.notificationList = arrayOf(propTypes.notification);\npropTypes.itemLocks = shape({\n  content: bool,\n  points: bool,\n  due_dates: bool,\n  availability_dates: bool\n});\npropTypes.itemLocksByObject = shape({\n  assignment: propTypes.itemLocks,\n  discussion_topic: propTypes.itemLocks,\n  wiki_page: propTypes.itemLocks,\n  quiz: propTypes.itemLocks,\n  attachment: propTypes.itemLocks\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (propTypes);\n\n//# sourceURL=webpack:///./ui/shared/blueprint-courses/react/propTypes.js?");

/***/ })

}]);