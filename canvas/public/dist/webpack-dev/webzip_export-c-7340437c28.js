(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([["webzip_export"],{

/***/ "9Qmj":
/*!************************************************************!*\
  !*** ./ui/shared/progress/react/components/ProgressBar.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ProgressBar; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ \"TSYQ\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nfunction ProgressBar(props) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({\n      'progress-bar__bar-container': true,\n      'almost-done': props.progress === 100\n    })\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({\n      'progress-bar__bar': true,\n      'almost-done': props.progress === 100\n    }),\n    role: \"progressbar\",\n    \"aria-valuenow\": props.progress,\n    \"aria-valuemin\": \"0\",\n    \"aria-valuemax\": \"100\",\n    \"aria-label\": props['aria-label'] || '',\n    style: {\n      width: `${Math.min(props.progress, 100)}%`\n    }\n  }));\n}\nProgressBar.propTypes = {\n  'aria-label': prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"],\n  progress: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"number\"].isRequired\n};\n\n//# sourceURL=webpack:///./ui/shared/progress/react/components/ProgressBar.js?");

/***/ }),

/***/ "BrAc":
/*!**********************************!*\
  !*** ./ui/shared/axios/index.js ***!
  \**********************************/
/*! exports provided: AxiosPromise, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"vDqi\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"AxiosPromise\", function() { return axios__WEBPACK_IMPORTED_MODULE_0__[\"AxiosPromise\"]; });\n\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n // Add CSRF stuffs to make Canvas happy when we are making requests with axios\n\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.xsrfCookieName = '_csrf_token';\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.xsrfHeaderName = 'X-CSRF-Token'; // Handle stringified IDs for JSON responses\n\nconst originalDefaults = axios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.headers.common.Accept;\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.headers.common.Accept = 'application/json+canvas-string-ids, ' + originalDefaults; // Rails checks this header to decide if a request is an xhr request\n\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n/* harmony default export */ __webpack_exports__[\"default\"] = (axios__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n//# sourceURL=webpack:///./ui/shared/axios/index.js?");

/***/ }),

/***/ "CDSL":
/*!********************************************!*\
  !*** ./ui/features/webzip_export/index.js ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _instructure_ready__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @instructure/ready */ \"3lLS\");\n/* harmony import */ var _instructure_ready__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_instructure_ready__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _react_App__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./react/App */ \"YOSJ\");\n/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n_instructure_ready__WEBPACK_IMPORTED_MODULE_1___default()(() => {\n  react_dom__WEBPACK_IMPORTED_MODULE_3___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_react_App__WEBPACK_IMPORTED_MODULE_4__[\"default\"], null), jquery__WEBPACK_IMPORTED_MODULE_0___default()('#course-webzip-export-app')[0]);\n});\n\n//# sourceURL=webpack:///./ui/features/webzip_export/index.js?");

/***/ }),

/***/ "E0zN":
/*!****************************************************!*\
  !*** ./ui/shared/progress/stores/ProgressStore.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_util_createStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/util/createStore */ \"onq7\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nconst ProgressStore = Object(_canvas_util_createStore__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}),\n      _progresses = {};\n\nProgressStore.get = function (progress_id) {\n  const url = '/api/v1/progress/' + progress_id;\n  jquery__WEBPACK_IMPORTED_MODULE_1___default.a.getJSON(url, data => {\n    _progresses[data.id] = data;\n    ProgressStore.setState(_progresses);\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ProgressStore);\n\n//# sourceURL=webpack:///./ui/shared/progress/stores/ProgressStore.js?");

/***/ }),

/***/ "LfLb":
/*!**********************************************************************!*\
  !*** ./ui/features/webzip_export/react/components/ExportListItem.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! i18n!webzip_exports */ \"V7S3\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _canvas_datetime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/datetime */ \"7AEQ\");\n/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\nclass ExportListItem extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  render() {\n    let text = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Package export from'));\n    let body = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n      href: this.props.link\n    }, jquery__WEBPACK_IMPORTED_MODULE_3___default.a.datetimeString(this.props.date));\n\n    if (this.props.workflowState === 'failed') {\n      text = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"text-error\"\n      }, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Export failed'));\n      body = jquery__WEBPACK_IMPORTED_MODULE_3___default.a.datetimeString(this.props.date);\n    } else if (this.props.newExport) {\n      text = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('Most recent export'));\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n      className: \"webzipexport__list__item\"\n    }, text, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, \": \", body));\n  }\n\n}\n\nExportListItem.propTypes = {\n  date: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,\n  link: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,\n  workflowState: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,\n  newExport: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool.isRequired\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (ExportListItem);\n\n//# sourceURL=webpack:///./ui/features/webzip_export/react/components/ExportListItem.js?");

/***/ }),

/***/ "NLUy":
/*!***************************************************************!*\
  !*** ./ui/shared/progress/react/components/ApiProgressBar.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _stores_ProgressStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../stores/ProgressStore */ \"E0zN\");\n/* harmony import */ var _ProgressBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ProgressBar */ \"9Qmj\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\nclass ApiProgressBar extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      completion: 0,\n      workflow_state: null\n    };\n    this.intervalID = null;\n\n    this.handleStoreChange = () => {\n      const progress = _stores_ProgressStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getState()[this.props.progress_id];\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_2___default.a.isObject(progress)) {\n        this.setState({\n          completion: progress.completion,\n          workflow_state: progress.workflow_state\n        });\n      }\n    };\n\n    this.isComplete = () => ['completed', 'failed'].includes(this.state.workflow_state);\n\n    this.isInProgress = () => ['queued', 'running'].includes(this.state.workflow_state);\n\n    this.poll = () => {\n      if (this.props.progress_id !== void 0) {\n        _stores_ProgressStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(this.props.progress_id);\n      }\n    };\n  }\n\n  //\n  // Lifecycle\n  //\n  componentDidMount() {\n    _stores_ProgressStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].addChangeListener(this.handleStoreChange);\n    this.intervalID = setInterval(this.poll, this.props.delay);\n  }\n\n  componentWillUnmount() {\n    _stores_ProgressStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].removeChangeListener(this.handleStoreChange);\n\n    if (this.intervalID !== null) {\n      clearInterval(this.intervalID);\n      this.intervalID = null;\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.state.workflow_state != nextState.workflow_state || this.state.completion != nextState.completion || this.props.progress_id != nextProps.progress_id;\n  }\n\n  componentDidUpdate() {\n    if (this.isComplete()) {\n      if (this.intervalID !== null) {\n        clearInterval(this.intervalID);\n        this.intervalID = null;\n      }\n\n      if (this.props.onComplete !== void 0) {\n        this.props.onComplete();\n      }\n    }\n  } //\n  // Custom Helpers\n  //\n\n\n  //\n  // Render\n  //\n  render() {\n    if (!this.isInProgress()) {\n      return null;\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      style: {\n        width: '300px'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ProgressBar__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n      progress: this.state.completion\n    }));\n  }\n\n}\n\nApiProgressBar.displayName = 'ProgressBar';\nApiProgressBar.propTypes = {\n  progress_id: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,\n  onComplete: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,\n  delay: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number\n};\nApiProgressBar.defaultProps = {\n  delay: 1000\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (ApiProgressBar);\n\n//# sourceURL=webpack:///./ui/shared/progress/react/components/ApiProgressBar.js?");

/***/ }),

/***/ "V7S3":
/*!*******************************************************************************!*\
  !*** ./frontend_build/i18n.js?webzip_exports!./ui/shims/dummyI18nResource.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('webzip_exports'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?webzip_exports");

/***/ }),

/***/ "YOSJ":
/*!************************************************!*\
  !*** ./ui/features/webzip_export/react/App.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/axios */ \"BrAc\");\n/* harmony import */ var _instructure_ui_spinner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @instructure/ui-spinner */ \"cPO5\");\n/* harmony import */ var i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!webzip_exports */ \"V7S3\");\n/* harmony import */ var _canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/util/splitAssetString */ \"s9Pr\");\n/* harmony import */ var _components_ExportList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/ExportList */ \"mc/K\");\n/* harmony import */ var _components_ExportInProgress__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/ExportInProgress */ \"tV3l\");\n/* harmony import */ var _components_Errors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/Errors */ \"v7Fo\");\n/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\nclass WebZipExportApp extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  static webZipFormat(webZipExports, newExportId = null) {\n    return webZipExports.map(webZipExport => {\n      const url = webZipExport.zip_attachment ? webZipExport.zip_attachment.url : null;\n      const isNewExport = newExportId === webZipExport.progress_id;\n      return {\n        date: webZipExport.created_at,\n        link: url,\n        workflowState: webZipExport.workflow_state,\n        progressId: webZipExport.progress_id,\n        newExport: isNewExport\n      };\n    }).reverse();\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.getExports = (newExportId = null) => {\n      const courseId = Object(_canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(ENV.context_asset_string)[1];\n      this.loadExistingExports(courseId, newExportId);\n    };\n\n    this.finishedStates = ['generated', 'failed'];\n    this.state = {\n      exports: [],\n      errors: [],\n      loaded: false\n    };\n  }\n\n  componentDidMount() {\n    this.getExports();\n  }\n\n  componentDidUpdate() {\n    const newExport = this.findNewExport();\n\n    if (newExport && newExport.link) {\n      this.downloadLink(newExport.link);\n    }\n  }\n\n  getExportsInProgress() {\n    return this.state.exports.find(ex => !this.finishedStates.includes(ex.workflowState));\n  }\n\n  getFinishedExports() {\n    return this.state.exports.filter(ex => this.finishedStates.includes(ex.workflowState));\n  }\n\n  findNewExport() {\n    return this.state.exports.find(ex => ex.newExport);\n  }\n\n  loadExistingExports(courseId, newExportId = null) {\n    _canvas_axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(`/api/v1/courses/${courseId}/web_zip_exports`).then(response => {\n      this.setState({\n        loaded: true,\n        exports: WebZipExportApp.webZipFormat(response.data, newExportId),\n        errors: []\n      });\n    }).catch(response => {\n      this.setState({\n        exports: [],\n        errors: [response],\n        loaded: true\n      });\n    });\n  }\n\n  downloadLink(link) {\n    window.location = link;\n  }\n\n  render() {\n    let app = null;\n    const webzipInProgress = this.getExportsInProgress();\n    const finishedExports = this.getFinishedExports();\n\n    if (!this.state.loaded) {\n      app = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_spinner__WEBPACK_IMPORTED_MODULE_2__[\"Spinner\"], {\n        size: \"small\",\n        renderTitle: i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Loading')\n      });\n    } else if (this.state.errors.length > 0) {\n      app = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_Errors__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n        errors: this.state.errors\n      });\n    } else if (finishedExports.length > 0 || !webzipInProgress) {\n      app = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_ExportList__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n        exports: finishedExports\n      });\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h1\", null, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Exported Package History')), app, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"strong\", null, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t(`You may not reproduce or communicate any of the content on\n            this course, including files exported from this course without the prior written\n            permission of your institution.  Check with your institution for specific online\n            user agreement guidelines.`))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"hr\", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_ExportInProgress__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n      webzip: webzipInProgress,\n      loadExports: this.getExports\n    }));\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (WebZipExportApp);\n\n//# sourceURL=webpack:///./ui/features/webzip_export/react/App.js?");

/***/ }),

/***/ "mc/K":
/*!******************************************************************!*\
  !*** ./ui/features/webzip_export/react/components/ExportList.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! i18n!webzip_exports */ \"V7S3\");\n/* harmony import */ var _ExportListItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ExportListItem */ \"LfLb\");\n/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\nclass ExportList extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  renderExportListItems() {\n    return this.props.exports.map((webzip, key) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ExportListItem__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n      key: key,\n      link: webzip.link,\n      date: webzip.date,\n      workflowState: webzip.workflowState,\n      newExport: webzip.newExport\n    }));\n  }\n\n  render() {\n    if (this.props.exports.length === 0) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", {\n        className: \"webzipexport__list\"\n      }, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_2__[\"default\"].t('No exports to display'));\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n      className: \"webzipexport__list\"\n    }, this.renderExportListItems());\n  }\n\n}\n\nExportList.propTypes = {\n  exports: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.shape({\n    date: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,\n    link: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,\n    workflowState: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,\n    newExport: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool.isRequired\n  })).isRequired\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (ExportList);\n\n//# sourceURL=webpack:///./ui/features/webzip_export/react/components/ExportList.js?");

/***/ }),

/***/ "onq7":
/*!***************************************!*\
  !*** ./ui/shared/util/createStore.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"VTBJ\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\n\n\n/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Creates a data store with some initial state.\n *\n * ```js\n * var UserStore = createStore({loaded: false, users: []});\n *\n * UserStore.load = function() {\n *   $.getJSON('/users', function(users) {\n *     UserStore.setState({loaded: true, users});\n *   });\n * };\n * ```\n *\n * Then in a component:\n *\n * ```js\n * var UsersView = React.createClass({\n *   getInitialState () {\n *     return UserStore.getState();\n *   },\n *\n *   componentDidMount () {\n *     UserStore.addChangeListener(this.handleStoreChange);\n *     UserStore.load();\n *   },\n *\n *   handleStoreChange () {\n *     this.setState(UserStore.getState());\n *   }\n * });\n * ```\n */\n\nfunction createStore(initialState) {\n  const events = Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.Events);\n\n  let state = initialState || {};\n  return {\n    setState(newState) {\n      Object.assign(state, newState);\n      this.emitChange();\n    },\n\n    getState() {\n      return state;\n    },\n\n    clearState() {\n      state = {};\n      this.emitChange();\n    },\n\n    addChangeListener(listener) {\n      events.on('change', listener);\n    },\n\n    removeChangeListener(listener) {\n      events.off('change', listener);\n    },\n\n    emitChange() {\n      events.trigger('change');\n    }\n\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (createStore);\n\n//# sourceURL=webpack:///./ui/shared/util/createStore.js?");

/***/ }),

/***/ "tV3l":
/*!************************************************************************!*\
  !*** ./ui/features/webzip_export/react/components/ExportInProgress.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _canvas_progress_react_components_ApiProgressBar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/progress/react/components/ApiProgressBar */ \"NLUy\");\n/* harmony import */ var i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!webzip_exports */ \"V7S3\");\n/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\nclass ExportInProgress extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  constructor(props) {\n    super(props);\n\n    this.onComplete = () => {\n      this.setState({\n        completed: true\n      });\n      this.props.loadExports(this.props.webzip.progressId);\n    };\n\n    this.state = {\n      completed: false\n    };\n  }\n\n  render() {\n    if (!this.props.webzip || this.state.completed) {\n      return null;\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"webzipexport__inprogress\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Processing')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", null, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('this may take a bit...')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_canvas_progress_react_components_ApiProgressBar__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      progress_id: this.props.webzip.progressId,\n      onComplete: this.onComplete,\n      key: this.props.webzip.progressId\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", null, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t(`The download process has started. This\n          can take awhile for large courses. You can leave the\n          page and you'll get a notification when the download\n          is complete.`)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"hr\", null));\n  }\n\n}\n\nExportInProgress.propTypes = {\n  webzip: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.shape({\n    progressId: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired\n  }),\n  loadExports: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func.isRequired\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (ExportInProgress);\n\n//# sourceURL=webpack:///./ui/features/webzip_export/react/components/ExportInProgress.js?");

/***/ }),

/***/ "v7Fo":
/*!**************************************************************!*\
  !*** ./ui/features/webzip_export/react/components/Errors.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!webzip_exports */ \"V7S3\");\n/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nconst Errors = props => {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", {\n    className: \"webzipexport__errors\"\n  }, i18n_webzip_exports__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('An error occurred. Please try again later.'));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Errors);\n\n//# sourceURL=webpack:///./ui/features/webzip_export/react/components/Errors.js?");

/***/ })

}]);