(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[90],{

/***/ "CsJK":
/*!************************************************!*\
  !*** ./ui/shared/doc-previews/jquery/index.js ***!
  \************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var browser_sniffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! browser-sniffer */ \"ik22\");\n/* harmony import */ var i18n_jquery_doc_previews__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!jquery_doc_previews */ \"isTh\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _canvas_jquery_jquery_ajaxJSON__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/jquery/jquery.ajaxJSON */ \"dhbk\");\n/* harmony import */ var _canvas_google_analytics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/google-analytics */ \"M+ds\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_helpers */ \"8JEM\");\n/* harmony import */ var _canvas_loading_image__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @canvas/loading-image */ \"lBOK\");\n/* harmony import */ var sanitize_url__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sanitize-url */ \"/oRJ\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n/*  /\\$\\.uniq/, capitalize */\n\n\n // first element in array is if scribd can handle it, second is if google can.\n\nconst previewableMimeTypes = {\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.template': [1, 1],\n  'application/vnd.oasis.opendocument.spreadsheet': [1, 1],\n  'application/vnd.sun.xml.writer': [1, 1],\n  'application/excel': [1, 1],\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': [1, 1],\n  'text/rtf': [1, 1],\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.template': [1, 1],\n  'application/vnd.sun.xml.impress': [1, 1],\n  'application/vnd.sun.xml.calc': [1, 1],\n  'application/vnd.ms-excel': [1, 1],\n  'application/msword': [1, 1],\n  'application/mspowerpoint': [1, 1],\n  'application/rtf': [1, 1],\n  'application/vnd.oasis.opendocument.presentation': [1, 1],\n  'application/vnd.oasis.opendocument.text': [1, 1],\n  'application/vnd.openxmlformats-officedocument.presentationml.template': [1, 1],\n  'application/vnd.openxmlformats-officedocument.presentationml.slideshow': [1, 1],\n  'text/plain': [1, 1],\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation': [1, 1],\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document': [1, 1],\n  'application/postscript': [1, 1],\n  'application/pdf': [1, 1],\n  'application/vnd.ms-powerpoint': [1, 1]\n}; // check to see if a file of a certan mimeType is previewable inline in the browser by either scribd or googleDocs\n// ex: $.isPreviewable(\"application/mspowerpoint\")  -> true\n//     $.isPreviewable(\"application/rtf\", 'google') -> false\n\njquery__WEBPACK_IMPORTED_MODULE_2___default.a.isPreviewable = function (mimeType, service) {\n  return previewableMimeTypes[mimeType] && (!service || !browser_sniffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]['disable' + jquery__WEBPACK_IMPORTED_MODULE_2___default.a.capitalize(service) + 'Previews'] && previewableMimeTypes[mimeType][{\n    scribd: 0,\n    google: 1\n  }[service]]);\n};\n\njquery__WEBPACK_IMPORTED_MODULE_2___default.a.fn.loadDocPreview = function (options) {\n  return this.each(function () {\n    const $this = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this),\n          opts = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.extend({\n      width: '100%',\n      height: '400px'\n    }, $this.data(), options);\n\n    function tellAppIViewedThisInline(serviceUsed) {\n      // if I have a url to ping back to the app that I viewed this file inline, ping it.\n      if (opts.attachment_view_inline_ping_url) {\n        jquery__WEBPACK_IMPORTED_MODULE_2___default.a.ajaxJSON(opts.attachment_view_inline_ping_url, 'POST', {}, () => {}, () => {});\n        Object(_canvas_google_analytics__WEBPACK_IMPORTED_MODULE_6__[\"trackEvent\"])('Doc Previews', serviceUsed, JSON.stringify(opts, ['attachment_id', 'submission_id', 'mimetype', 'crocodoc_session_url', 'canvadoc_session_url']));\n      }\n    }\n\n    if (opts.crocodoc_session_url) {\n      const sanitizedUrl = Object(sanitize_url__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(opts.crocodoc_session_url);\n      var iframe = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<iframe/>', {\n        src: sanitizedUrl,\n        width: opts.width,\n        height: opts.height,\n        allowfullscreen: '1',\n        id: opts.id\n      });\n      iframe.appendTo($this);\n      iframe.load(() => {\n        tellAppIViewedThisInline('crocodoc');\n        if (jquery__WEBPACK_IMPORTED_MODULE_2___default.a.isFunction(opts.ready)) opts.ready();\n      });\n    } else if (opts.canvadoc_session_url) {\n      const canvadocWrapper = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<div style=\"overflow: auto; resize: vertical;\\\n        border: 1px solid transparent; height: 100%;\"/>');\n      canvadocWrapper.appendTo($this);\n      const minHeight = opts.iframe_min_height !== void 0 ? opts.iframe_min_height : '800px';\n      const sanitizedUrl = Object(sanitize_url__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(opts.canvadoc_session_url);\n      var iframe = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<iframe/>', {\n        src: sanitizedUrl,\n        width: opts.width,\n        allowfullscreen: '1',\n        css: {\n          border: 0,\n          overflow: 'auto',\n          height: '99%',\n          'min-height': minHeight\n        },\n        id: opts.id\n      });\n      iframe.appendTo(canvadocWrapper);\n      iframe.load(() => {\n        tellAppIViewedThisInline('canvadocs');\n        if (jquery__WEBPACK_IMPORTED_MODULE_2___default.a.isFunction(opts.ready)) opts.ready();\n      });\n    } else if (!browser_sniffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"].disableGooglePreviews && (!opts.mimetype || jquery__WEBPACK_IMPORTED_MODULE_2___default.a.isPreviewable(opts.mimetype, 'google')) && opts.attachment_id || opts.public_url) {\n      // else if it's something google docs preview can handle and we can get a public url to this document.\n      const loadGooglePreview = function () {\n        // this handles both ssl and plain http.\n        const googleDocPreviewUrl = '//docs.google.com/viewer?' + jquery__WEBPACK_IMPORTED_MODULE_2___default.a.param({\n          embedded: true,\n          url: opts.public_url\n        });\n\n        if (!opts.ajax_valid || opts.ajax_valid()) {\n          jquery__WEBPACK_IMPORTED_MODULE_2___default()('<iframe src=\"' + Object(html_escape__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(googleDocPreviewUrl) + '\" height=\"' + opts.height + '\" width=\"100%\" />').appendTo($this).load(() => {\n            tellAppIViewedThisInline('google');\n\n            if (jquery__WEBPACK_IMPORTED_MODULE_2___default.a.isFunction(opts.ready)) {\n              opts.ready();\n            }\n          });\n        }\n      };\n\n      if (opts.public_url) {\n        loadGooglePreview();\n      } else if (opts.attachment_id) {\n        let url = `/api/v1/files/${opts.attachment_id}/public_url.json`;\n\n        if (opts.submission_id) {\n          url += '?' + jquery__WEBPACK_IMPORTED_MODULE_2___default.a.param({\n            submission_id: opts.submission_id\n          });\n        }\n\n        if (opts.verifier) {\n          url += `${opts.submission_id ? '&' : '?'}verifier=${opts.verifier}`;\n        } else {\n          const match = window.location.search.match(/verifier=([^&]+)(?:&|$)/);\n          const ver = match && match[1];\n\n          if (ver) {\n            url += `${opts.submission_id ? '&' : '?'}verifier=${ver}`;\n          }\n        }\n\n        $this.loadingImage();\n        jquery__WEBPACK_IMPORTED_MODULE_2___default.a.ajaxJSON(url, 'GET', {}, data => {\n          $this.loadingImage('remove');\n\n          if (data && data.public_url) {\n            jquery__WEBPACK_IMPORTED_MODULE_2___default.a.extend(opts, data);\n            loadGooglePreview();\n          }\n        });\n      }\n    } else {\n      // else fall back with a message that the document can't be viewed inline\n      if (opts.attachment_preview_processing) {\n        $this.html('<p>' + Object(html_escape__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(i18n_jquery_doc_previews__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('errors.document_preview_processing', 'The document preview is currently being processed. Please try again later.')) + '</p>');\n      } else {\n        $this.html('<p>' + Object(html_escape__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(i18n_jquery_doc_previews__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('errors.cannot_view_document_in_canvas', 'This document cannot be displayed within Canvas.')) + '</p>');\n      }\n    }\n  });\n};\n\n//# sourceURL=webpack:///./ui/shared/doc-previews/jquery/index.js?");

/***/ }),

/***/ "isTh":
/*!************************************************************************************!*\
  !*** ./frontend_build/i18n.js?jquery_doc_previews!./ui/shims/dummyI18nResource.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('jquery_doc_previews'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?jquery_doc_previews");

/***/ }),

/***/ "lBOK":
/*!*************************************************!*\
  !*** ./ui/shared/loading-image/jquery/index.js ***!
  \*************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n // Shows an ajax-loading image on the given object.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg = function (options) {\n  if (!this || this.length === 0) {\n    return this;\n  }\n\n  const dir = window.getComputedStyle(this[0]).direction || 'ltr';\n  const $obj = this.filter(':first');\n  let list;\n\n  if (options === 'hide' || options === 'remove') {\n    $obj.children('.loading_image').remove();\n    list = $obj.data('loading_images') || [];\n    list.forEach(item => {\n      if (item) {\n        item.remove();\n      }\n    });\n    $obj.data('loading_images', null);\n    this.css('margin-inline-end', '');\n    return this;\n  } else if (options === 'remove_once') {\n    $obj.children('.loading_image').remove();\n    list = $obj.data('loading_images') || [];\n    const img = list.pop();\n\n    if (img) {\n      img.remove();\n    }\n\n    $obj.data('loading_images', list);\n    return this;\n  } else if (options === 'register_image' && arguments.length === 3) {\n    jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files[arguments[1]] = arguments[2];\n    return this;\n  }\n\n  options = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.defaults, options);\n  let image = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files.normal;\n\n  if (options.image_size && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files[options.image_size]) {\n    image = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files[options.image_size];\n  }\n\n  if (options.paddingTop) {\n    options.vertical = options.paddingTop;\n  }\n\n  let paddingTop = 0;\n\n  if (options.vertical) {\n    if (options.vertical === 'top') {// nothing to do\n    } else if (options.vertical === 'bottom') {\n      paddingTop = $obj.outerHeight();\n    } else if (options.vertical === 'middle') {\n      paddingTop = $obj.outerHeight() / 2 - image.height / 2;\n    } else {\n      paddingTop = parseInt(options.vertical, 10); // eslint-disable-next-line no-restricted-globals\n\n      if (isNaN(paddingTop)) {\n        paddingTop = 0;\n      }\n    }\n  }\n\n  let paddingLeft = 0;\n\n  if (options.horizontal) {\n    if (options.horizontal === 'left') {// nothing to do\n    } else if (options.horizontal === 'right') {\n      paddingLeft = $obj.outerWidth() - image.width;\n    } else if (options.horizontal === 'right!') {\n      paddingLeft = dir === 'ltr' ? $obj.outerWidth() + 5 : -5 - (image.width || 16);\n      this.css({\n        'margin-inline-end': '16px'\n      });\n    } else if (options.horizontal === 'middle') {\n      paddingLeft = $obj.outerWidth() / 2 - image.width / 2;\n    } else {\n      paddingLeft = parseInt(options.horizontal, 10); // eslint-disable-next-line no-restricted-globals\n\n      if (isNaN(paddingLeft)) {\n        paddingLeft = 0;\n      }\n    }\n  }\n\n  const zIndex = $obj.zIndex() + 1;\n  const $imageHolder = jquery__WEBPACK_IMPORTED_MODULE_0___default()(document.createElement('div')).addClass('loading_image_holder');\n  const $image = jquery__WEBPACK_IMPORTED_MODULE_0___default()(document.createElement('img')).attr('src', image.url);\n  $imageHolder.append($image);\n  list = $obj.data('loading_images') || [];\n  list.push($imageHolder);\n  $obj.data('loading_images', list);\n\n  if (!$obj.css('position') || $obj.css('position') === 'static') {\n    const offset = $obj.offset();\n    let top = offset.top,\n        left = offset.left;\n\n    if (options.vertical) {\n      top += paddingTop;\n    }\n\n    if (options.horizontal) {\n      left += paddingLeft;\n    }\n\n    $imageHolder.css({\n      zIndex,\n      position: 'absolute',\n      top,\n      left\n    });\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($imageHolder);\n  } else {\n    $imageHolder.css({\n      zIndex,\n      position: 'absolute',\n      top: paddingTop,\n      left: paddingLeft\n    });\n    $obj.append($imageHolder);\n  }\n\n  return jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.defaults = {\n  paddingTop: 0,\n  image_size: 'normal',\n  vertical: 0,\n  horizontal: 0\n};\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files = {\n  normal: {\n    url: '/images/ajax-loader.gif',\n    width: 32,\n    height: 32\n  },\n  small: {\n    url: '/images/ajax-loader-small.gif',\n    width: 16,\n    height: 16\n  }\n};\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImage = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg;\n\n//# sourceURL=webpack:///./ui/shared/loading-image/jquery/index.js?");

/***/ })

}]);