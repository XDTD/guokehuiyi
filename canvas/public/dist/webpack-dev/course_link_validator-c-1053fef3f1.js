(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([["course_link_validator"],{

/***/ "/573":
/*!*********************************************************************!*\
  !*** ./ui/features/course_link_validator/react/ValidatorResults.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ValidatorResults; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _canvas_rails_flash_notifications__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/rails-flash-notifications */ \"r2Yr\");\n/* harmony import */ var i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!link_validator */ \"ajJ8\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _ValidatorResultsRow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ValidatorResultsRow */ \"YMZg\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\nclass ValidatorResults extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showUnpublished: true\n    };\n\n    this.toggleShowUnpublished = () => {\n      this.setState({\n        showUnpublished: !this.state.showUnpublished\n      });\n    };\n\n    this.getDisplayMessage = number => i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t({\n      one: 'Found 1 broken link',\n      other: 'Found %{count} broken links'\n    }, {\n      count: number\n    });\n  }\n\n  render() {\n    let alertMessage,\n        numberofBrokenLinks = 0,\n        showUnpublishedBox;\n    const allResults = [],\n          errorMessage = i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('An error occured. Please try again.'),\n          noBrokenLinksMessage = i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('No broken links found');\n\n    if (this.props.error) {\n      alertMessage = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"alert alert-error\"\n      }, errorMessage);\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.flashError(errorMessage);\n    } else if (!this.props.displayResults) {\n      return null;\n    } else {\n      showUnpublishedBox = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"ic-Checkbox-group\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"ic-Form-control ic-Form-control--checkbox\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        id: \"show_unpublished\",\n        type: \"checkbox\",\n        checked: this.state.showUnpublished,\n        onChange: this.toggleShowUnpublished\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        htmlFor: \"show_unpublished\",\n        className: \"ic-Label\"\n      }, i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Show links to unpublished content'))));\n      let results = this.props.results;\n\n      if (!this.state.showUnpublished) {\n        // filter out unpublished results\n        results = underscore__WEBPACK_IMPORTED_MODULE_4___default.a.map(results, result => {\n          const new_result = underscore__WEBPACK_IMPORTED_MODULE_4___default.a.clone(result);\n\n          new_result.invalid_links = underscore__WEBPACK_IMPORTED_MODULE_4___default.a.filter(result.invalid_links, link => link.reason !== 'unpublished_item');\n          return new_result;\n        });\n        results = underscore__WEBPACK_IMPORTED_MODULE_4___default.a.filter(results, result => result.invalid_links.length > 0);\n      }\n\n      if (results.length === 0) {\n        alertMessage = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"alert alert-success\"\n        }, noBrokenLinksMessage);\n        jquery__WEBPACK_IMPORTED_MODULE_1___default.a.screenReaderFlashMessage(noBrokenLinksMessage);\n      } else {\n        results.forEach(result => {\n          allResults.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ValidatorResultsRow__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n            key: result.content_url,\n            result: result\n          }));\n          numberofBrokenLinks += result.invalid_links.length;\n        });\n        alertMessage = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"alert alert-info\"\n        }, this.getDisplayMessage(numberofBrokenLinks));\n        jquery__WEBPACK_IMPORTED_MODULE_1___default.a.screenReaderFlashMessage(this.getDisplayMessage(numberofBrokenLinks));\n      }\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      id: \"all-results\"\n    }, !!showUnpublishedBox && showUnpublishedBox, alertMessage, allResults);\n  }\n\n}\n\n//# sourceURL=webpack:///./ui/features/course_link_validator/react/ValidatorResults.js?");

/***/ }),

/***/ "/oRJ":
/*!****************************************!*\
  !*** ./packages/sanitize-url/index.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return sanitizeUrl; });\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Replaces bad urls with harmless urls in cases where bad urls might cause harm\n * @param {string} url\n */\nfunction sanitizeUrl(url) {\n  const defaultUrl = 'about:blank'\n  try {\n    const parsedUrl = new URL(url, window.location.origin)\n    // eslint-disable-next-line no-script-url\n    if (parsedUrl.protocol === 'javascript:') {\n      return defaultUrl\n    }\n    return url\n  } catch (e) {\n    // URL() throws TypeError if url is not a valid URL\n    return defaultUrl\n  }\n}\n\n\n//# sourceURL=webpack:///./packages/sanitize-url/index.js?");

/***/ }),

/***/ "YMZg":
/*!************************************************************************!*\
  !*** ./ui/features/course_link_validator/react/ValidatorResultsRow.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ValidatorResultsRow; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _instructure_ui_flex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @instructure/ui-flex */ \"N46v\");\n/* harmony import */ var _instructure_ui_heading__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @instructure/ui-heading */ \"nwNI\");\n/* harmony import */ var _instructure_ui_link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/ui-link */ \"dlTp\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_list__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-list */ \"dbzd\");\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-icons */ \"oMAr\");\n/* harmony import */ var sanitize_url__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sanitize-url */ \"/oRJ\");\n/* harmony import */ var i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! i18n!link_validator */ \"ajJ8\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\nconst TYPE_INFO = {\n  course_card_image: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconSettingsLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Course Settings')\n  },\n  syllabus: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconSyllabusLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Syllabus')\n  },\n  assignment: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconAssignmentLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Assignment')\n  },\n  calendar_event: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconCalendarMonthLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Event')\n  },\n  discussion_topic: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconDiscussionLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Discussion')\n  },\n  module: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconModuleLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Module')\n  },\n  quiz: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconQuizLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Quiz')\n  },\n  wiki_page: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconDocumentLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Page')\n  },\n  assessment_question: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconQuestionLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Assessment Question')\n  },\n  quiz_question: {\n    icon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconQuestionLine\"],\n    label: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Quiz Question')\n  }\n};\nconst REASON_DESCRIPTION = {\n  course_mismatch: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Links to other courses in this resource may not be accessible by the students in this course:'),\n  unpublished_item: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Unpublished content referenced in this resource:'),\n  missing_item: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Non-existent content referenced in this resource:'),\n  broken_link: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('External links in this resource were unreachable:'),\n  broken_image: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('External images in this resource were unreachable:'),\n  deleted: i18n_link_validator__WEBPACK_IMPORTED_MODULE_9__[\"default\"].t('Deleted content referenced in this resource:')\n};\n\nfunction simplifyReason(link) {\n  switch (link.reason) {\n    case 'course_mismatch':\n    case 'unpublished_item':\n    case 'deleted':\n    case 'missing_item':\n      return link.reason;\n\n    default:\n      return link.image ? 'broken_image' : 'broken_link';\n  }\n}\n\nfunction getLinkText(link) {\n  if (link.link_text) {\n    return link.link_text;\n  }\n\n  return link.url.substring(link.url.lastIndexOf('/') + 1);\n}\n\nfunction ValidatorResultsRow(props) {\n  const invalid_links = props.result.invalid_links;\n  const errorsByReason = {};\n  invalid_links.forEach(link => {\n    const reason = simplifyReason(link);\n    errorsByReason[reason] = errorsByReason[reason] || [];\n    errorsByReason[reason].push(link);\n  });\n  const rows = [];\n  Object.keys(errorsByReason).forEach(reason => {\n    const errors = errorsByReason[reason];\n    const links = [];\n    errors.forEach(error => {\n      const IconClass = error.image ? _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconImageSolid\"] : _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconLinkSolid\"];\n      const link_text = getLinkText(error);\n      const link = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_list__WEBPACK_IMPORTED_MODULE_5__[\"List\"].Item, {\n        key: error.url\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconClass, {\n        color: \"success\"\n      }), \"\\u2002\", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_link__WEBPACK_IMPORTED_MODULE_3__[\"Link\"], {\n        href: Object(sanitize_url__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(error.url)\n      }, link_text));\n      links.push(link);\n    });\n    rows.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_list__WEBPACK_IMPORTED_MODULE_5__[\"List\"].Item, {\n      key: reason\n    }, REASON_DESCRIPTION[reason], /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_list__WEBPACK_IMPORTED_MODULE_5__[\"List\"], {\n      variant: \"unstyled\",\n      margin: \"none x-small small small\"\n    }, links)));\n  });\n  let TypeIcon, label;\n  const typeInfo = TYPE_INFO[props.result.type];\n\n  if (typeInfo) {\n    TypeIcon = typeInfo.icon;\n    label = typeInfo.label;\n  } else {\n    TypeIcon = _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_7__[\"IconDocumentLine\"];\n    label = props.result.type;\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"result\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_1__[\"Flex\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_1__[\"Flex\"].Item, {\n    align: \"start\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TypeIcon, {\n    color: \"success\",\n    size: \"small\"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_1__[\"Flex\"].Item, {\n    margin: \"none none none small\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_heading__WEBPACK_IMPORTED_MODULE_2__[\"Heading\"], {\n    level: \"h3\",\n    as: \"h2\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_6__[\"Button\"], {\n    variant: \"link\",\n    href: props.result.content_url,\n    theme: {\n      mediumPadding: '0',\n      mediumHeight: '1.25rem'\n    }\n  }, props.result.name)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_4__[\"Text\"], {\n    size: \"x-small\",\n    transform: \"uppercase\",\n    lineHeight: \"condensed\",\n    letterSpacing: \"expanded\"\n  }, label))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_list__WEBPACK_IMPORTED_MODULE_5__[\"List\"], {\n    margin: \"none x-small small x-large\"\n  }, rows));\n}\n\n//# sourceURL=webpack:///./ui/features/course_link_validator/react/ValidatorResultsRow.js?");

/***/ }),

/***/ "ajJ8":
/*!*******************************************************************************!*\
  !*** ./frontend_build/i18n.js?link_validator!./ui/shims/dummyI18nResource.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('link_validator'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?link_validator");

/***/ }),

/***/ "bM6I":
/*!******************************************************************!*\
  !*** ./ui/features/course_link_validator/react/LinkValidator.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_rails_flash_notifications__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/rails-flash-notifications */ \"r2Yr\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!link_validator */ \"ajJ8\");\n/* harmony import */ var _ValidatorResults__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ValidatorResults */ \"/573\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _canvas_confetti__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/confetti */ \"N4F6\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\nclass LinkValidator extends react__WEBPACK_IMPORTED_MODULE_2___default.a.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      results: [],\n      displayResults: false,\n      error: false,\n      showConfetti: false\n    };\n\n    this.getResults = initial_load => {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default.a.ajax({\n        url: ENV.validation_api_url,\n        dataType: 'json',\n        success: data => {\n          // Keep trying until the request has been completed\n          if (data.workflow_state === 'queued' || data.workflow_state === 'running') {\n            setTimeout(() => {\n              this.getResults();\n            }, this.props.pollTimeout);\n          } else if (data.workflow_state === 'completed' && data.results.version == 2) {\n            this.setState({\n              buttonMessage: i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Restart Link Validation'),\n              buttonDisabled: false,\n              results: data.results.issues,\n              displayResults: true,\n              error: false,\n              showConfetti: !initial_load && data.results.issues.length === 0\n            });\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('#all-results').show();\n          } else {\n            this.setState({\n              buttonMessage: i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Start Link Validation'),\n              buttonDisabled: false\n            });\n\n            if (data.workflow_state === 'failed' && !initial_load) {\n              this.setState({\n                error: true\n              });\n            }\n          }\n        },\n        error: () => {\n          this.setState({\n            error: true\n          });\n        }\n      });\n    };\n\n    this.setLoadingState = () => {\n      this.setState({\n        buttonMessage: i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Loading...'),\n        buttonDisabled: true,\n        displayResults: false,\n        results: []\n      });\n    };\n\n    this.startValidation = () => {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()('#all-results').hide();\n      this.setState({\n        showConfetti: false\n      });\n      this.setLoadingState();\n      jquery__WEBPACK_IMPORTED_MODULE_0___default.a.screenReaderFlashMessage(i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Link validation is running')); // You need to send a POST request to the API to initialize validation\n\n      jquery__WEBPACK_IMPORTED_MODULE_0___default.a.ajax({\n        url: ENV.validation_api_url,\n        type: 'POST',\n        data: {},\n        success: () => {\n          const getResults = this.getResults;\n          setTimeout(() => {\n            getResults();\n          }, this.props.pollTimeoutInitial);\n        },\n        error: () => {\n          this.setState({\n            error: true\n          });\n        }\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.setLoadingState();\n    this.getResults(true);\n  }\n\n  render() {\n    let loadingImage;\n\n    if (this.state.buttonDisabled) {\n      loadingImage = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"img\", {\n        src: \"/images/ajax-loader.gif\",\n        alt: i18n_link_validator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Link validation is running')\n      });\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"button\", {\n      onClick: this.startValidation,\n      className: \"Button Button--primary\",\n      disabled: this.state.buttonDisabled,\n      style: this.state.buttonMessageStyle,\n      type: \"button\",\n      role: \"button\"\n    }, this.state.buttonMessage), loadingImage, window.ENV.VALIDATION_CONFETTI_ENABLED && this.state.showConfetti && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_canvas_confetti__WEBPACK_IMPORTED_MODULE_6__[\"Confetti\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ValidatorResults__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n      results: this.state.results,\n      displayResults: this.state.displayResults,\n      error: this.state.error\n    }));\n  }\n\n}\n\nLinkValidator.propTypes = {\n  pollTimeout: prop_types__WEBPACK_IMPORTED_MODULE_5__[\"number\"].isRequired,\n  pollTimeoutInitial: prop_types__WEBPACK_IMPORTED_MODULE_5__[\"number\"].isRequired\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (LinkValidator);\n\n//# sourceURL=webpack:///./ui/features/course_link_validator/react/LinkValidator.js?");

/***/ }),

/***/ "eDkj":
/*!****************************************************!*\
  !*** ./ui/features/course_link_validator/index.js ***!
  \****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_LinkValidator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./react/LinkValidator */ \"bM6I\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nconst linkValidatorWrapper = document.getElementById('link_validator_wrapper');\nreact_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_react_LinkValidator__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n  pollTimeout: ENV.validation_poll_timeout,\n  pollTimeoutInitial: ENV.validation_poll_timeout_initial\n}), linkValidatorWrapper);\n\n//# sourceURL=webpack:///./ui/features/course_link_validator/index.js?");

/***/ })

}]);