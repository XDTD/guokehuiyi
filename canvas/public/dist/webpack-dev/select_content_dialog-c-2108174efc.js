(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([["select_content_dialog"],{

/***/ "+3JQ":
/*!*************************************************************!*\
  !*** ./ui/shared/select-content-dialog/stores/FileStore.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ObjectStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ObjectStore */ \"x1QO\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nclass FileStore extends _ObjectStore__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  /**\n   * contextAndId should be in the format 'context/id'\n   * Options is an object containing additional options for the store:\n   *    - perPage - indicates the number of records that should be pulled per\n   *                request.\n   */\n  constructor(contextAndId, options) {\n    const apiUrl = '/api/v1/' + contextAndId + '/files';\n    super(apiUrl, options);\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FileStore);\n\n//# sourceURL=webpack:///./ui/shared/select-content-dialog/stores/FileStore.js?");

/***/ }),

/***/ "10eL":
/*!*******************************************************************************!*\
  !*** ./frontend_build/i18n.js?ajaxflashalert!./ui/shims/dummyI18nResource.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('ajaxflashalert'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?ajaxflashalert");

/***/ }),

/***/ "4C5l":
/*!********************************************************************************!*\
  !*** ./frontend_build/i18n.js?lib.text_helper!./ui/shims/dummyI18nResource.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('lib.text_helper'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?lib.text_helper");

/***/ }),

/***/ "6jd9":
/*!**************************************************************************************!*\
  !*** ./frontend_build/i18n.js?select_content_dialog!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('select_content_dialog'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?select_content_dialog");

/***/ }),

/***/ "7r6P":
/*!***************************************************************************!*\
  !*** ./ui/shared/select-content-dialog/react/components/FileSelectBox.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FileSelectBox; });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var i18n_context_modulesFileSelectBox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!context_modulesFileSelectBox */ \"CNAO\");\n/* harmony import */ var _stores_FileStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../stores/FileStore */ \"+3JQ\");\n/* harmony import */ var _stores_FolderStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../stores/FolderStore */ \"l1dm\");\n/* harmony import */ var _canvas_util_natcompare__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @canvas/util/natcompare */ \"plYi\");\n/* harmony import */ var _canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @canvas/util/splitAssetString */ \"s9Pr\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\nclass FileSelectBox extends react__WEBPACK_IMPORTED_MODULE_1___default.a.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      folders: []\n    };\n    this.isDirty = true;\n\n    this.getFolderById = id => {\n      return this.state.folders.find(folder => folder.id.toString() === id);\n    };\n\n    this.isLoading = () => this.fileStore.getState().isLoading || this.folderStore.getState().isLoading;\n\n    this.createFolderFileTreeStructure = () => {\n      let _this$state = this.state,\n          folders = _this$state.folders,\n          files = _this$state.files; // Put files into the right folders.\n\n      const groupedFiles = underscore__WEBPACK_IMPORTED_MODULE_0___default.a.groupBy(files, 'folder_id');\n\n      for (const key in groupedFiles) {\n        const folder = underscore__WEBPACK_IMPORTED_MODULE_0___default.a.findWhere(folders, {\n          id: parseInt(key, 10)\n        });\n\n        if (folder) {\n          folder.files = groupedFiles[key];\n        }\n      }\n\n      folders = folders.sort((a, b) => // Make sure we use a sane sorting mechanism.\n      _canvas_util_natcompare__WEBPACK_IMPORTED_MODULE_6__[\"default\"].strings(a.full_name, b.full_name));\n      return folders;\n    };\n\n    this.renderFilesAndFolders = () => {\n      const tree = this.createFolderFileTreeStructure();\n\n      if (this.isLoading()) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"option\", null, i18n_context_modulesFileSelectBox__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Loading...'));\n      }\n\n      const renderFiles = function (folder) {\n        return folder.files.map(file => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"option\", {\n          key: `file-${file.id}`,\n          value: file.id\n        }, file.display_name));\n      };\n\n      return tree.map(folder => {\n        if (folder.files) {\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"optgroup\", {\n            key: `folder-${folder.id}`,\n            label: folder.full_name\n          }, renderFiles(folder));\n        }\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.refresh();\n  }\n\n  setDirty() {\n    this.isDirty = true;\n  }\n\n  refresh() {\n    if (this.isDirty) {\n      // Get a decent url partial in order to create the store.\n      const contextUrl = Object(_canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(this.props.contextString).join('/'); // Create the stores, and add change listeners to them.\n\n      this.fileStore = new _stores_FileStore__WEBPACK_IMPORTED_MODULE_4__[\"default\"](contextUrl, {\n        perPage: 50,\n        only: ['names']\n      });\n      this.folderStore = new _stores_FolderStore__WEBPACK_IMPORTED_MODULE_5__[\"default\"](contextUrl, {\n        perPage: 50\n      });\n      this.fileStore.addChangeListener(() => {\n        this.setState({\n          files: this.fileStore.getState().items\n        });\n      });\n      this.folderStore.addChangeListener(() => {\n        this.setState({\n          folders: this.folderStore.getState().items\n        });\n      }); // Fetch the data.\n\n      this.fileStore.fetch({\n        fetchAll: true\n      });\n      this.folderStore.fetch({\n        fetchAll: true\n      });\n      this.isDirty = false;\n    }\n  }\n\n  render() {\n    var _window, _window$ENV;\n\n    const newQuizzesModulesSupport = (_window = window) === null || _window === void 0 ? void 0 : (_window$ENV = _window.ENV) === null || _window$ENV === void 0 ? void 0 : _window$ENV.new_quizzes_modules_support;\n    const ariaLabel = newQuizzesModulesSupport ? i18n_context_modulesFileSelectBox__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Select the files you want to associate, or add files by selecting \"Create File(s)\".') : i18n_context_modulesFileSelectBox__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Select the files you want to associate, or add files by selecting \"New File(s)\".');\n    const newFile = newQuizzesModulesSupport ? i18n_context_modulesFileSelectBox__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('[ Create File(s) ]') : i18n_context_modulesFileSelectBox__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('[ New File(s) ]');\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"select\", {\n      ref: \"selectBox\",\n      \"aria-busy\": this.isLoading(),\n      className: \"module_item_select\",\n      \"aria-label\": ariaLabel,\n      multiple: true\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"option\", {\n      value: \"new\"\n    }, newFile), this.renderFilesAndFolders()));\n  }\n\n}\nFileSelectBox.propTypes = {\n  contextString: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"string\"].isRequired\n};\n\n//# sourceURL=webpack:///./ui/shared/select-content-dialog/react/components/FileSelectBox.js?");

/***/ }),

/***/ "897F":
/*!***************************************************!*\
  !*** ./ui/shared/util/jquery/fixDialogButtons.js ***!
  \***************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prevent_default__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prevent-default */ \"qqwe\");\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fixDialogButtons = function () {\n  return this.each(function () {\n    const $dialog = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n    const $buttons = $dialog.find('.button-container:last .btn, button[type=submit]');\n\n    if ($buttons.length) {\n      $dialog.find('.button-container:last, button[type=submit]').hide();\n      let buttons = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.map($buttons.toArray(), button => {\n        const $button = jquery__WEBPACK_IMPORTED_MODULE_0___default()(button);\n        let classes = $button.attr('class') || '';\n        const id = $button.attr('id'); // if you add the class 'dialog_closer' to any of the buttons,\n        // clicking it will cause the dialog to close\n\n        if ($button.is('.dialog_closer')) {\n          $button.off('.fixdialogbuttons');\n          $button.on('click.fixdialogbuttons', Object(prevent_default__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(() => $dialog.dialog('close')));\n        }\n\n        if ($button.prop('type') === 'submit' && $button[0].form) {\n          classes += ' button_type_submit';\n        }\n\n        return {\n          text: $button.text(),\n          'data-text-while-loading': $button.data('textWhileLoading'),\n          click: () => $button.click(),\n          class: classes,\n          id\n        };\n      }); // put the primary button(s) on the far right\n\n      buttons = underscore__WEBPACK_IMPORTED_MODULE_1___default.a.sortBy(buttons, button => button.class.match(/btn-primary/) ? 1 : 0);\n      $dialog.dialog('option', 'buttons', buttons);\n    }\n  });\n};\n\n//# sourceURL=webpack:///./ui/shared/util/jquery/fixDialogButtons.js?");

/***/ }),

/***/ "BrAc":
/*!**********************************!*\
  !*** ./ui/shared/axios/index.js ***!
  \**********************************/
/*! exports provided: AxiosPromise, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"vDqi\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"AxiosPromise\", function() { return axios__WEBPACK_IMPORTED_MODULE_0__[\"AxiosPromise\"]; });\n\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n // Add CSRF stuffs to make Canvas happy when we are making requests with axios\n\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.xsrfCookieName = '_csrf_token';\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.xsrfHeaderName = 'X-CSRF-Token'; // Handle stringified IDs for JSON responses\n\nconst originalDefaults = axios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.headers.common.Accept;\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.headers.common.Accept = 'application/json+canvas-string-ids, ' + originalDefaults; // Rails checks this header to decide if a request is an xhr request\n\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n/* harmony default export */ __webpack_exports__[\"default\"] = (axios__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n//# sourceURL=webpack:///./ui/shared/axios/index.js?");

/***/ }),

/***/ "CNAO":
/*!*********************************************************************************************!*\
  !*** ./frontend_build/i18n.js?context_modulesFileSelectBox!./ui/shims/dummyI18nResource.js ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('context_modulesFileSelectBox'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?context_modulesFileSelectBox");

/***/ }),

/***/ "Cm+D":
/*!**************************************************************************!*\
  !*** ./frontend_build/i18n.js?mimeClass!./ui/shims/dummyI18nResource.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('mimeClass'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?mimeClass");

/***/ }),

/***/ "JOjB":
/*!******************************************!*\
  !*** ./ui/shared/util/TextHelper.coffee ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_lib_text_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!lib.text_helper */ \"4C5l\");\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! html-escape */ \"gI0r\");\nvar AUTO_LINKIFY_PLACEHOLDER, AUTO_LINKIFY_REGEX, th;\n\n\n\n\n\n\n\nAUTO_LINKIFY_PLACEHOLDER = \"LINK-PLACEHOLDER\";\n\nAUTO_LINKIFY_REGEX = /\\b((?:https?:\\/\\/|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))|(LINK-PLACEHOLDER)/gi;\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (th = {\n  quoteClump: function(lines) {\n    return \"<div class='quoted_text_holder'> <a href='#' class='show_quoted_text_link'>\" + (Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_lib_text_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t(\"quoted_text_toggle\", \"show quoted text\"))) + \"</a> <div class='quoted_text' style='display: none;'> \" + (jquery__WEBPACK_IMPORTED_MODULE_0___default.a.raw(lines.join(\"\\n\"))) + \" </div> </div>\";\n  },\n  formatMessage: function(message) {\n    var j, len, line, links, placeholderBlocks, processedLines, quoteBlock, ref;\n    links = [];\n    placeholderBlocks = [];\n    message = message.replace(AUTO_LINKIFY_REGEX, function(match, i) {\n      var link;\n      placeholderBlocks.push(match === AUTO_LINKIFY_PLACEHOLDER ? AUTO_LINKIFY_PLACEHOLDER : (link = match, !(link.slice(0, 7) === 'http://' || link.slice(0, 8) === 'https://') ? link = \"http://\" + link : void 0, links.push(link), \"<a href='\" + (Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(link)) + \"'>\" + (Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(match)) + \"</a>\"));\n      return AUTO_LINKIFY_PLACEHOLDER;\n    });\n    message = Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(message);\n    message = message.replace(new RegExp(AUTO_LINKIFY_PLACEHOLDER, 'g'), function(match, i) {\n      return placeholderBlocks.shift();\n    });\n    message = message.replace(/\\n/g, '<br />\\n');\n    processedLines = [];\n    quoteBlock = [];\n    ref = message.split(\"\\n\");\n    for (j = 0, len = ref.length; j < len; j++) {\n      line = ref[j];\n      if (line.match(/^(&gt;|>)/)) {\n        quoteBlock.push(line);\n      } else {\n        if (quoteBlock.length) {\n          processedLines.push(th.quoteClump(quoteBlock));\n        }\n        quoteBlock = [];\n        processedLines.push(line);\n      }\n    }\n    if (quoteBlock.length) {\n      processedLines.push(th.quoteClump(quoteBlock));\n    }\n    return message = processedLines.join(\"\\n\");\n  },\n  delimit: function(number) {\n    var abs, integer, mod, result, sign;\n    if (isNaN(number)) {\n      return String(number);\n    }\n    sign = number < 0 ? '-' : '';\n    abs = Math.abs(number);\n    if (abs === 2e308) {\n      return String(number);\n    }\n    integer = Math.floor(abs);\n    result = abs === integer ? '' : String(abs).replace(/^\\d+\\./, '.');\n    while (integer >= 1000) {\n      mod = String(integer).replace(/\\d+(\\d\\d\\d)$/, ',$1');\n      integer = Math.floor(integer / 1000);\n      result = mod + result;\n    }\n    return sign + String(integer) + result;\n  },\n  truncateText: function(string, options) {\n    var ellipsis, max, pos, ref, truncateAt, wordSeparator;\n    if (options == null) {\n      options = {};\n    }\n    max = (ref = options.max) != null ? ref : 30;\n    ellipsis = i18n_lib_text_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('ellipsis', '...');\n    wordSeparator = i18n_lib_text_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].t('word_separator', ' ');\n    string = (string != null ? string : \"\").replace(/\\s+/g, wordSeparator).trim();\n    if (!string || string.length <= max) {\n      return string;\n    }\n    truncateAt = 0;\n    while (true) {\n      pos = string.indexOf(wordSeparator, truncateAt + 1);\n      if (pos < 0 || pos > max - ellipsis.length) {\n        break;\n      }\n      truncateAt = pos;\n    }\n    truncateAt || (truncateAt = max - ellipsis.length);\n    return string.substring(0, truncateAt) + ellipsis;\n  },\n  plainText: function(message) {\n    return message.replace(/(<([^>]+)>)/ig, '');\n  }\n});\n\n\n//# sourceURL=webpack:///./ui/shared/util/TextHelper.coffee?");

/***/ }),

/***/ "MX6o":
/*!****************************************************!*\
  !*** ./ui/features/select_content_dialog/index.js ***!
  \****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_select_content_dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/select-content-dialog */ \"lnkA\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n//# sourceURL=webpack:///./ui/features/select_content_dialog/index.js?");

/***/ }),

/***/ "P6Tl":
/*!***********************************************************************!*\
  !*** ./ui/shared/deep-linking/processors/processSingleContentItem.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return processSingleContentItem; });\n/* harmony import */ var _ContentItemProcessor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ContentItemProcessor */ \"hK1/\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nfunction processSingleContentItem(event) {\n  const processor = _ContentItemProcessor__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fromEvent(event, processHandler);\n\n  if (processor) {\n    return processor.process();\n  }\n}\n\nasync function processHandler() {\n  if (this.contentItems.length > 0) {\n    return this.contentItems[0];\n  }\n}\n\n//# sourceURL=webpack:///./ui/shared/deep-linking/processors/processSingleContentItem.js?");

/***/ }),

/***/ "SdaB":
/*!**************************************************!*\
  !*** ./ui/shared/services/findLinkForService.js ***!
  \**************************************************/
/*! exports provided: getUserServices, findLinkForService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUserServices\", function() { return getUserServices; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"findLinkForService\", function() { return findLinkForService; });\n/* harmony import */ var i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!findLinkForService */ \"hIXJ\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _canvas_util_TextHelper_coffee__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/util/TextHelper.coffee */ \"JOjB\");\n/* harmony import */ var _canvas_jquery_jquery_ajaxJSON__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/jquery/jquery.ajaxJSON */ \"dhbk\");\n/* harmony import */ var _canvas_forms_jquery_jquery_instructure_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/forms/jquery/jquery.instructure_forms */ \"Dhso\");\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nfunction getUserServices(service_types, success, error) {\n  if (!jquery__WEBPACK_IMPORTED_MODULE_1___default.a.isArray(service_types)) {\n    service_types = [service_types];\n  }\n\n  const url = `/services?service_types=${service_types.join(',')}`;\n  jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(url, 'GET', {}, data => {\n    if (success) {\n      success(data);\n    }\n  }, data => {\n    if (error) {\n      error(data);\n    }\n  });\n}\nlet lastLookup; // used to keep track of diigo requests\n\nfunction findLinkForService(service_type, callback) {\n  let $dialog = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#instructure_bookmark_search');\n\n  if (!$dialog.length) {\n    $dialog = jquery__WEBPACK_IMPORTED_MODULE_1___default()(\"<div id='instructure_bookmark_search'/>\");\n    $dialog.append(`${\"<form id='bookmark_search_form' style='margin-bottom: 5px;'>\" + \"<img src='/images/blank.png'/>&nbsp;&nbsp;\" + \"<input type='text' class='query' style='width: 230px;'/>\" + \"<button class='btn search_button' type='submit'>\"}${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.search', 'Search'))}</button></form>`);\n    $dialog.append(\"<div class='results' style='max-height: 200px; overflow: auto;'/>\");\n    $dialog.find('form').submit(event => {\n      event.preventDefault();\n      event.stopPropagation();\n      const now = new Date();\n\n      if (service_type == 'diigo' && lastLookup && now - lastLookup < 15000) {\n        // let the user know we have to take things slow because of Diigo\n        setTimeout(() => {\n          $dialog.find('form').submit();\n        }, 15000 - (now - lastLookup));\n        $dialog.find('.results').empty().append(Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('status.diigo_search_throttling', 'Diigo limits users to one search every ten seconds.  Please wait...')));\n        return;\n      }\n\n      $dialog.find('.results').empty().append(Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('status.searching', 'Searching...')));\n      lastLookup = new Date();\n      const query = $dialog.find('.query').val();\n      const url = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.replaceTags($dialog.data('reference_url'), 'query', query);\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(url, 'GET', {}, data => {\n        $dialog.find('.results').empty();\n\n        if (!data.length) {\n          $dialog.find('.results').append(Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('no_results_found', 'No Results Found')));\n        }\n\n        for (const idx in data) {\n          data[idx].short_title = data[idx].title;\n\n          if (data[idx].title == data[idx].description) {\n            data[idx].short_title = _canvas_util_TextHelper_coffee__WEBPACK_IMPORTED_MODULE_3__[\"default\"].truncateText(data[idx].description, {\n              max: 30\n            });\n          }\n\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()(\"<div class='bookmark'/>\").appendTo($dialog.find('.results')).append(jquery__WEBPACK_IMPORTED_MODULE_1___default()('<a class=\"bookmark_link\" style=\"font-weight: bold;\"/>').attr({\n            href: data[idx].url,\n            title: data[idx].title\n          }).text(data[idx].short_title)).append(jquery__WEBPACK_IMPORTED_MODULE_1___default()(\"<div style='margin: 5px 10px; font-size: 0.8em;'/>\").text(data[idx].description || i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('no_description', 'No description')));\n        }\n      }, () => {\n        $dialog.find('.results').empty().append(Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('errors.search_failed', 'Search failed, please try again.')));\n      });\n    });\n    $dialog.delegate('.bookmark_link', 'click', function (event) {\n      event.preventDefault();\n      const url = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).attr('href');\n      const title = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).attr('title') || jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).text();\n      $dialog.dialog('close');\n      callback({\n        url,\n        title\n      });\n    });\n  }\n\n  $dialog.find('.search_button').text(service_type == 'delicious' ? i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.search_by_tag', 'Search by Tag') : i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.search', 'Search'));\n  $dialog.find('form img').attr('src', `/images/${service_type}_small_icon.png`);\n  let url = '/search/bookmarks?q=%7B%7B+query+%7D%7D&service_type=%7B%7B+service_type+%7D%7D';\n  url = jquery__WEBPACK_IMPORTED_MODULE_1___default.a.replaceTags(url, 'service_type', service_type);\n  $dialog.data('reference_url', url);\n  $dialog.find('.results').empty().end().find('.query').val('');\n  $dialog.dialog({\n    title: i18n_findLinkForService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('titles.bookmark_search', 'Bookmark Search: %{service_name}', {\n      service_name: jquery__WEBPACK_IMPORTED_MODULE_1___default.a.titleize(service_type)\n    }),\n\n    open() {\n      $dialog.find('input:visible:first').focus().select();\n    },\n\n    width: 400\n  });\n}\n\n//# sourceURL=webpack:///./ui/shared/services/findLinkForService.js?");

/***/ }),

/***/ "TvTI":
/*!****************************************!*\
  !*** ./ui/shared/util/templateData.js ***!
  \****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_helpers */ \"8JEM\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n/* replaceTags */\n// Fills the selected object(s) with data values as specified.  Plaintext values should be specified in the\n//  data: data used to fill template.\n//  id: set the id attribute of the template object\n//  textValues: a list of strings, which values should be plaintext\n//  htmlValues: a list of strings, which values should be html\n//  hrefValues: List of string.  Searches for all anchor tags in the template\n//    and globally replaces \"{{ value }}\" with data[value].  Useful for adding\n//    new elements asynchronously, when you don't know what their URL will be\n//    until they're created.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData = function (options) {\n  if (this.length && options) {\n    if (options.iterator) {\n      //  todo: replace .andSelf with .addBack when JQuery is upgraded.\n      this.find('*').andSelf().each(function () {\n        const $el = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n        jquery__WEBPACK_IMPORTED_MODULE_0___default.a.each(['name', 'id', 'class'], (i, attr) => {\n          if ($el.attr(attr)) {\n            $el.attr(attr, $el.attr(attr).replace(/-iterator-/, options.iterator));\n          }\n        });\n      });\n    }\n\n    if (options.id) {\n      this.attr('id', options.id);\n    }\n\n    let contentChange = false;\n\n    if (options.data) {\n      for (var item in options.data) {\n        if (options.except && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.except) != -1) {\n          continue;\n        }\n\n        if (options.data[item] && options.dataValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.dataValues) != -1) {\n          this.data(item, options.data[item].toString());\n        }\n\n        const $found_all = this.find('.' + item);\n        var avoid = options.avoid || '';\n        $found_all.each(function () {\n          const $found = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n\n          if ($found.length > 0 && $found.closest(avoid).length === 0) {\n            if (typeof options.data[item] === 'undefined' || options.data[item] === null) {\n              options.data[item] = '';\n            }\n\n            if (options.htmlValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.htmlValues) != -1) {\n              $found.html(jquery__WEBPACK_IMPORTED_MODULE_0___default.a.raw(options.data[item].toString()));\n\n              if ($found.hasClass('user_content')) {\n                contentChange = true;\n                $found.removeClass('enhanced');\n                $found.data('unenhanced_content_html', options.data[item].toString());\n              }\n            } else if ($found[0].tagName.toUpperCase() == 'INPUT') {\n              $found.val(options.data[item]);\n            } else {\n              try {\n                const str = options.data[item].toString();\n                $found.html(Object(html_escape__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(str));\n              } catch (e) {}\n            }\n          }\n        });\n      }\n    }\n\n    if (options.hrefValues && options.data) {\n      this.find('a,span[rel]').each(function () {\n        let $obj = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this),\n            oldHref,\n            oldRel,\n            oldName;\n\n        for (const i in options.hrefValues) {\n          if (!options.hrefValues.hasOwnProperty(i)) {\n            continue;\n          }\n\n          const name = options.hrefValues[i];\n\n          if (oldHref = $obj.attr('href')) {\n            const newHref = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldHref, name, encodeURIComponent(options.data[name]));\n            const orig = $obj.text() === $obj.html() ? $obj.text() : null;\n\n            if (oldHref !== newHref) {\n              $obj.attr('href', newHref);\n\n              if (orig) {\n                $obj.text(orig);\n              }\n            }\n          }\n\n          if (oldRel = $obj.attr('rel')) {\n            $obj.attr('rel', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldRel, name, options.data[name]));\n          }\n\n          if (oldName = $obj.attr('name')) {\n            $obj.attr('name', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldName, name, options.data[name]));\n          }\n        }\n      });\n    }\n\n    if (contentChange) {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).triggerHandler('user_content_change');\n    }\n  }\n\n  return this;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData.defaults = {\n  htmlValues: null,\n  hrefValues: null\n}; // Reverse version of fillTemplateData.  Lets you pull out the string versions of values held in divs, spans, etc.\n// Based on the usage of class names within an object to specify an object's sub-parts.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateData = function (options) {\n  if (!this.length || !options) {\n    return {};\n  }\n\n  var result = {},\n      item,\n      val;\n\n  if (options.textValues) {\n    const _this = this;\n\n    options.textValues.forEach(item => {\n      const $item = _this.find('.' + item.replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n\n      val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($item.text());\n\n      if ($item.html() === '&nbsp;') {\n        val = '';\n      }\n\n      if (val.length === 1 && val.charCodeAt(0) === 160) {\n        val = '';\n      }\n\n      result[item] = val;\n    });\n  }\n\n  if (options.dataValues) {\n    for (item in options.dataValues) {\n      var val = this.data(options.dataValues[item]);\n\n      if (val) {\n        result[options.dataValues[item]] = val;\n      }\n    }\n  }\n\n  if (options.htmlValues) {\n    for (item in options.htmlValues) {\n      const $elem = this.find('.' + options.htmlValues[item].replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n      val = null;\n\n      if ($elem.hasClass('user_content') && $elem.data('unenhanced_content_html')) {\n        val = $elem.data('unenhanced_content_html');\n      } else {\n        val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($elem.html());\n      }\n\n      result[options.htmlValues[item]] = val;\n    }\n  }\n\n  return result;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateValue = function (value, options) {\n  const opts = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, options, {\n    textValues: [value]\n  });\n  return this.getTemplateData(opts)[value];\n};\n\n//# sourceURL=webpack:///./ui/shared/util/templateData.js?");

/***/ }),

/***/ "VKJh":
/*!**************************************************************************!*\
  !*** ./ui/shared/deep-linking/processors/processMultipleContentItems.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return processMultipleContentItems; });\n/* harmony import */ var _ContentItemProcessor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ContentItemProcessor */ \"hK1/\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nfunction processMultipleContentItems(event) {\n  const processor = _ContentItemProcessor__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fromEvent(event, processHandler);\n\n  if (processor) {\n    return processor.process();\n  }\n}\n\nasync function processHandler() {\n  return this.contentItems;\n}\n\n//# sourceURL=webpack:///./ui/shared/deep-linking/processors/processMultipleContentItems.js?");

/***/ }),

/***/ "cZGe":
/*!***********************************************************!*\
  !*** ./ui/shared/select-content-dialog/select_content.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return _class; });\n/* harmony import */ var i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!select_content_dialog */ \"6jd9\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nclass _class {\n  static isContentMessage(placement, placements = {}) {\n    const message_type = placement && placement.message_type;\n    return this.contentPlacements.some(p => Object.keys(placements).includes(p)) || this.contentMessageTypes.includes(message_type);\n  }\n\n  static errorForUrlItem(item, expectedType = 'LtiLinkItem') {\n    if (item['@type'] !== expectedType) {\n      return i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Error: The tool returned an invalid content type \"%{contentType}\"', {\n        contentType: item['@type']\n      });\n    }\n\n    if (!item.url) {\n      return i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Error: The tool did not return a URL to Canvas');\n    }\n\n    return i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Error embedding content from tool');\n  }\n\n}\n_class.contentPlacements = ['resource_selection'];\n_class.contentMessageTypes = ['ContentItemSelectionRequest', 'LtiDeepLinkingRequest'];\n\n//# sourceURL=webpack:///./ui/shared/select-content-dialog/select_content.js?");

/***/ }),

/***/ "dDTa":
/*!*****************************************************!*\
  !*** ./ui/shared/external-apps/iframeAllowances.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst iframeAllowances = () => {\n  const allowances = ENV.LTI_LAUNCH_FRAME_ALLOWANCES || [];\n  return allowances.join('; ');\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (iframeAllowances);\n\n//# sourceURL=webpack:///./ui/shared/external-apps/iframeAllowances.js?");

/***/ }),

/***/ "hIXJ":
/*!***********************************************************************************!*\
  !*** ./frontend_build/i18n.js?findLinkForService!./ui/shims/dummyI18nResource.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('findLinkForService'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?findLinkForService");

/***/ }),

/***/ "kMru":
/*!*****************************************************************!*\
  !*** ./ui/shared/select-content-dialog/setDefaultToolValues.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return setDefaultToolValues; });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nfunction setDefaultToolValues(result, tool) {\n  jquery__WEBPACK_IMPORTED_MODULE_0___default()('#assignment_external_tool_tag_attributes_content_type').val(tool.definition_type);\n  jquery__WEBPACK_IMPORTED_MODULE_0___default()('#assignment_external_tool_tag_attributes_content_id').val(tool.definition_id);\n  jquery__WEBPACK_IMPORTED_MODULE_0___default()('#assignment_external_tool_tag_attributes_url').val(result.url);\n  window.postMessage({\n    messageType: 'defaultToolContentReady',\n    content: result\n  }, ENV.DEEP_LINKING_POST_MESSAGE_ORIGIN);\n}\n\n//# sourceURL=webpack:///./ui/shared/select-content-dialog/setDefaultToolValues.js?");

/***/ }),

/***/ "l1dm":
/*!***************************************************************!*\
  !*** ./ui/shared/select-content-dialog/stores/FolderStore.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ObjectStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ObjectStore */ \"x1QO\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nclass FolderStore extends _ObjectStore__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  /**\n   * contextAndId should be in the format 'context/id'\n   * Options is an object containing additional options for the store:\n   *    - perPage - indicates the number of records that should be pulled per\n   *                request.\n   */\n  constructor(contextAndId, options) {\n    const apiUrl = '/api/v1/' + contextAndId + '/folders';\n    super(apiUrl, options);\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FolderStore);\n\n//# sourceURL=webpack:///./ui/shared/select-content-dialog/stores/FolderStore.js?");

/***/ }),

/***/ "lBOK":
/*!*************************************************!*\
  !*** ./ui/shared/loading-image/jquery/index.js ***!
  \*************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n // Shows an ajax-loading image on the given object.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg = function (options) {\n  if (!this || this.length === 0) {\n    return this;\n  }\n\n  const dir = window.getComputedStyle(this[0]).direction || 'ltr';\n  const $obj = this.filter(':first');\n  let list;\n\n  if (options === 'hide' || options === 'remove') {\n    $obj.children('.loading_image').remove();\n    list = $obj.data('loading_images') || [];\n    list.forEach(item => {\n      if (item) {\n        item.remove();\n      }\n    });\n    $obj.data('loading_images', null);\n    this.css('margin-inline-end', '');\n    return this;\n  } else if (options === 'remove_once') {\n    $obj.children('.loading_image').remove();\n    list = $obj.data('loading_images') || [];\n    const img = list.pop();\n\n    if (img) {\n      img.remove();\n    }\n\n    $obj.data('loading_images', list);\n    return this;\n  } else if (options === 'register_image' && arguments.length === 3) {\n    jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files[arguments[1]] = arguments[2];\n    return this;\n  }\n\n  options = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.defaults, options);\n  let image = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files.normal;\n\n  if (options.image_size && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files[options.image_size]) {\n    image = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files[options.image_size];\n  }\n\n  if (options.paddingTop) {\n    options.vertical = options.paddingTop;\n  }\n\n  let paddingTop = 0;\n\n  if (options.vertical) {\n    if (options.vertical === 'top') {// nothing to do\n    } else if (options.vertical === 'bottom') {\n      paddingTop = $obj.outerHeight();\n    } else if (options.vertical === 'middle') {\n      paddingTop = $obj.outerHeight() / 2 - image.height / 2;\n    } else {\n      paddingTop = parseInt(options.vertical, 10); // eslint-disable-next-line no-restricted-globals\n\n      if (isNaN(paddingTop)) {\n        paddingTop = 0;\n      }\n    }\n  }\n\n  let paddingLeft = 0;\n\n  if (options.horizontal) {\n    if (options.horizontal === 'left') {// nothing to do\n    } else if (options.horizontal === 'right') {\n      paddingLeft = $obj.outerWidth() - image.width;\n    } else if (options.horizontal === 'right!') {\n      paddingLeft = dir === 'ltr' ? $obj.outerWidth() + 5 : -5 - (image.width || 16);\n      this.css({\n        'margin-inline-end': '16px'\n      });\n    } else if (options.horizontal === 'middle') {\n      paddingLeft = $obj.outerWidth() / 2 - image.width / 2;\n    } else {\n      paddingLeft = parseInt(options.horizontal, 10); // eslint-disable-next-line no-restricted-globals\n\n      if (isNaN(paddingLeft)) {\n        paddingLeft = 0;\n      }\n    }\n  }\n\n  const zIndex = $obj.zIndex() + 1;\n  const $imageHolder = jquery__WEBPACK_IMPORTED_MODULE_0___default()(document.createElement('div')).addClass('loading_image_holder');\n  const $image = jquery__WEBPACK_IMPORTED_MODULE_0___default()(document.createElement('img')).attr('src', image.url);\n  $imageHolder.append($image);\n  list = $obj.data('loading_images') || [];\n  list.push($imageHolder);\n  $obj.data('loading_images', list);\n\n  if (!$obj.css('position') || $obj.css('position') === 'static') {\n    const offset = $obj.offset();\n    let top = offset.top,\n        left = offset.left;\n\n    if (options.vertical) {\n      top += paddingTop;\n    }\n\n    if (options.horizontal) {\n      left += paddingLeft;\n    }\n\n    $imageHolder.css({\n      zIndex,\n      position: 'absolute',\n      top,\n      left\n    });\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($imageHolder);\n  } else {\n    $imageHolder.css({\n      zIndex,\n      position: 'absolute',\n      top: paddingTop,\n      left: paddingLeft\n    });\n    $obj.append($imageHolder);\n  }\n\n  return jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.defaults = {\n  paddingTop: 0,\n  image_size: 'normal',\n  vertical: 0,\n  horizontal: 0\n};\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg.image_files = {\n  normal: {\n    url: '/images/ajax-loader.gif',\n    width: 32,\n    height: 32\n  },\n  small: {\n    url: '/images/ajax-loader-small.gif',\n    width: 16,\n    height: 16\n  }\n};\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImage = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.loadingImg;\n\n//# sourceURL=webpack:///./ui/shared/loading-image/jquery/index.js?");

/***/ }),

/***/ "lnkA":
/*!*************************************************************************!*\
  !*** ./ui/shared/select-content-dialog/jquery/select_content_dialog.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"VTBJ\");\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\n/* harmony import */ var browser_sniffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! browser-sniffer */ \"ik22\");\n/* harmony import */ var i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!select_content_dialog */ \"6jd9\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _react_components_FileSelectBox__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../react/components/FileSelectBox */ \"7r6P\");\n/* harmony import */ var _canvas_files_react_components_UploadForm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @canvas/files/react/components/UploadForm */ \"7lHU\");\n/* harmony import */ var _canvas_files_react_components_CurrentUploads__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @canvas/files/react/components/CurrentUploads */ \"e2r+\");\n/* harmony import */ var _canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @canvas/util/splitAssetString */ \"s9Pr\");\n/* harmony import */ var _canvas_files_backbone_models_FilesystemObject_coffee__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @canvas/files/backbone/models/FilesystemObject.coffee */ \"QYKH\");\n/* harmony import */ var _canvas_files_react_modules_BaseUploader__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @canvas/files/react/modules/BaseUploader */ \"vavB\");\n/* harmony import */ var _canvas_files_react_modules_UploadQueue__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @canvas/files/react/modules/UploadQueue */ \"hlSq\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _canvas_upload_file__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @canvas/upload-file */ \"EyBU\");\n/* harmony import */ var _canvas_external_apps_iframeAllowances__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @canvas/external-apps/iframeAllowances */ \"dDTa\");\n/* harmony import */ var _select_content__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../select_content */ \"cZGe\");\n/* harmony import */ var _setDefaultToolValues__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../setDefaultToolValues */ \"kMru\");\n/* harmony import */ var _canvas_deep_linking_processors_processSingleContentItem__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @canvas/deep-linking/processors/processSingleContentItem */ \"P6Tl\");\n/* harmony import */ var _canvas_services_findLinkForService__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @canvas/services/findLinkForService */ \"SdaB\");\n/* harmony import */ var _canvas_datetime__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @canvas/datetime */ \"7AEQ\");\n/* harmony import */ var _canvas_jquery_jquery_ajaxJSON__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @canvas/jquery/jquery.ajaxJSON */ \"dhbk\");\n/* harmony import */ var _canvas_forms_jquery_jquery_instructure_forms__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @canvas/forms/jquery/jquery.instructure_forms */ \"Dhso\");\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\n/* harmony import */ var _canvas_util_jquery_fixDialogButtons__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @canvas/util/jquery/fixDialogButtons */ \"897F\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_helpers__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_helpers */ \"8JEM\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_plugins__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_plugins */ \"aq8L\");\n/* harmony import */ var _canvas_keycodes__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @canvas/keycodes */ \"qAtv\");\n/* harmony import */ var _canvas_loading_image__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @canvas/loading-image */ \"lBOK\");\n/* harmony import */ var _canvas_util_templateData__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @canvas/util/templateData */ \"TvTI\");\n/* harmony import */ var _canvas_deep_linking_processors_processMultipleContentItems__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @canvas/deep-linking/processors/processMultipleContentItems */ \"VKJh\");\n\n\n\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* datetime_field */\n\n\n\n/* formSubmit, ajaxJSONFiles, getFormData, errorBox */\n\n\n\n\n/* replaceTags */\n\n\n/* showIf */\n\n\n\n\n\nconst SelectContentDialog = {};\nlet fileSelectBox;\nlet upload_form;\n\nSelectContentDialog.deepLinkingListener = event => {\n  if (event.origin === ENV.DEEP_LINKING_POST_MESSAGE_ORIGIN && event.data && event.data.messageType === 'LtiDeepLinkingResponse') {\n    if (event.data.content_items.length > 1) {\n      Object(_canvas_deep_linking_processors_processMultipleContentItems__WEBPACK_IMPORTED_MODULE_32__[\"default\"])(event).then(result => {\n        const $dialog = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#resource_selection_dialog');\n        $dialog.off('dialogbeforeclose', SelectContentDialog.dialogCancelHandler);\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()(window).off('beforeunload', SelectContentDialog.beforeUnloadHandler);\n\n        if (result.every(item => item.type !== 'ltiResourceLink')) {\n          jquery__WEBPACK_IMPORTED_MODULE_4___default.a.flashError(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Selected content contains non-LTI links.'));\n          return;\n        }\n\n        if (event.data.reloadpage) {\n          window.location.reload();\n        }\n      }).catch(e => {\n        jquery__WEBPACK_IMPORTED_MODULE_4___default.a.flashError(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Error retrieving content')); // eslint-disable-next-line no-console\n\n        console.error(e);\n      }).finally(() => {\n        const $dialog = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#resource_selection_dialog');\n        $dialog.dialog('close');\n      });\n    } else if (event.data.content_items.length === 1) {\n      Object(_canvas_deep_linking_processors_processSingleContentItem__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(event).then(result => {\n        const $dialog = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#resource_selection_dialog');\n        $dialog.off('dialogbeforeclose', SelectContentDialog.dialogCancelHandler);\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()(window).off('beforeunload', SelectContentDialog.beforeUnloadHandler);\n\n        if (result.type !== 'ltiResourceLink') {\n          jquery__WEBPACK_IMPORTED_MODULE_4___default.a.flashError(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Selected content is not an LTI link.'));\n          return;\n        }\n\n        const tool = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#context_external_tools_select .tools .tool.selected').data('tool');\n        SelectContentDialog.handleContentItemResult(result, tool);\n      }).catch(e => {\n        jquery__WEBPACK_IMPORTED_MODULE_4___default.a.flashError(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Error retrieving content')); // eslint-disable-next-line no-console\n\n        console.error(e);\n      }).finally(() => {\n        const $dialog = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#resource_selection_dialog');\n        $dialog.dialog('close');\n      });\n    } else if (event.data.content_items.length === 0) {\n      const $selectContextContentDialog = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog');\n      const $resourceSelectionDialog = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#resource_selection_dialog');\n      $resourceSelectionDialog.off('dialogbeforeclose', SelectContentDialog.dialogCancelHandler);\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()(window).off('beforeunload', SelectContentDialog.beforeUnloadHandler);\n      $resourceSelectionDialog.dialog('close');\n      $selectContextContentDialog.dialog('close');\n    }\n  }\n};\n\nSelectContentDialog.attachDeepLinkingListner = function () {\n  window.addEventListener('message', this.deepLinkingListener);\n};\n\nSelectContentDialog.detachDeepLinkingListener = function () {\n  window.removeEventListener('message', this.deepLinkingListener);\n};\n\nSelectContentDialog.dialogCancelHandler = function (event) {\n  ;\n  [];\n  const response = confirm(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Are you sure you want to cancel? Changes you made may not be saved.'));\n\n  if (!response) {\n    event.preventDefault();\n  }\n};\n\nSelectContentDialog.beforeUnloadHandler = function (e) {\n  return e.returnValue = i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Changes you made may not be saved.');\n};\n\nSelectContentDialog.handleContentItemResult = function (result, tool) {\n  if (ENV.DEFAULT_ASSIGNMENT_TOOL_NAME && ENV.DEFAULT_ASSIGNMENT_TOOL_URL) {\n    Object(_setDefaultToolValues__WEBPACK_IMPORTED_MODULE_19__[\"default\"])(result, tool);\n  }\n\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_url').val(result.url);\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_title').val(result.title || tool.name);\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_custom_params').val(JSON.stringify(result.custom));\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#context_external_tools_select .domain_message').hide();\n};\n\nSelectContentDialog.Events = {\n  init() {\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#context_external_tools_select .tools').on('click', '.tool', this.onContextExternalToolSelect);\n  },\n\n  onContextExternalToolSelect(e, existingTool) {\n    e.preventDefault();\n    const $tool = existingTool || jquery__WEBPACK_IMPORTED_MODULE_4___default()(this);\n    const toolName = $tool.find('a').text();\n    SelectContentDialog.resetExternalToolFields();\n\n    if ($tool.hasClass('selected') && !$tool.hasClass('resource_selection')) {\n      $tool.removeClass('selected');\n      jquery__WEBPACK_IMPORTED_MODULE_4___default.a.screenReaderFlashMessage(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Unselected external tool %{tool}', {\n        tool: toolName\n      }));\n      return;\n    }\n\n    jquery__WEBPACK_IMPORTED_MODULE_4___default.a.screenReaderFlashMessage(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Selected external tool %{tool}', {\n      tool: toolName\n    }));\n    $tool.parents('.tools').find('.tool.selected').removeClass('selected');\n    $tool.addClass('selected');\n\n    if ($tool.hasClass('resource_selection')) {\n      const tool = $tool.data('tool');\n      const frameHeight = Math.max(Math.min(jquery__WEBPACK_IMPORTED_MODULE_4___default()(window).height() - 100, 550), 100);\n      const placement_type = tool.placements.resource_selection && 'resource_selection' || tool.placements.assignment_selection && 'assignment_selection' || tool.placements.link_selection && 'link_selection';\n      var placement = tool.placements[placement_type];\n      const width = placement.selection_width;\n      const height = placement.selection_height;\n      let $dialog = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#resource_selection_dialog');\n\n      if ($dialog.length == 0) {\n        $dialog = jquery__WEBPACK_IMPORTED_MODULE_4___default()('<div/>', {\n          id: 'resource_selection_dialog',\n          style: 'padding: 0; overflow-y: hidden;'\n        });\n        $dialog.append(`<div class=\"before_external_content_info_alert screenreader-only\" tabindex=\"0\">\n            <div class=\"ic-flash-info\">\n              <div class=\"ic-flash__icon\" aria-hidden=\"true\">\n                <i class=\"icon-info\"></i>\n              </div>\n              ${Object(html_escape__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('The following content is partner provided'))}\n            </div>\n          </div>`);\n        $dialog.append(jquery__WEBPACK_IMPORTED_MODULE_4___default()('<iframe/>', {\n          id: 'resource_selection_iframe',\n          style: `width: 800px; height: ${frameHeight}px; max-height: 100%; border: 0;`,\n          src: '/images/ajax-loader-medium-444.gif',\n          borderstyle: '0',\n          tabindex: '0',\n          allow: Object(_canvas_external_apps_iframeAllowances__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n          'data-lti-launch': 'true'\n        }));\n        $dialog.append(`<div class=\"after_external_content_info_alert screenreader-only\" tabindex=\"0\">\n            <div class=\"ic-flash-info\">\n              <div class=\"ic-flash__icon\" aria-hidden=\"true\">\n                <i class=\"icon-info\"></i>\n              </div>\n              ${Object(html_escape__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('The preceding content is partner provided'))}\n            </div>\n          </div>`);\n        const $external_content_info_alerts = $dialog.find('.before_external_content_info_alert, .after_external_content_info_alert');\n        const $iframe = $dialog.find('iframe');\n        $external_content_info_alerts.on('focus', function () {\n          const iframeWidth = $iframe.outerWidth(true);\n          const iframeHeight = $iframe.outerHeight(true);\n          $iframe.css('border', '2px solid #008EE2');\n          jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).removeClass('screenreader-only');\n          const alertHeight = jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).outerHeight(true);\n          $iframe.css('height', `${iframeHeight - alertHeight - 4}px`).css('width', `${iframeWidth - 4}px`);\n          $dialog.scrollLeft(0).scrollTop(0);\n        });\n        $external_content_info_alerts.on('blur', function () {\n          const iframeWidth = $iframe.outerWidth(true);\n          const iframeHeight = $iframe.outerHeight(true);\n          const alertHeight = jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).outerHeight(true);\n          $dialog.find('iframe').css('border', 'none');\n          jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).addClass('screenreader-only');\n          $iframe.css('height', `${iframeHeight + alertHeight}px`).css('width', `${iframeWidth}px`);\n          $dialog.scrollLeft(0).scrollTop(0);\n        });\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').append($dialog.hide());\n        $dialog.on('dialogbeforeclose', SelectContentDialog.dialogCancelHandler);\n        $dialog.dialog({\n          autoOpen: false,\n          width: 'auto',\n          resizable: true,\n\n          close() {\n            SelectContentDialog.detachDeepLinkingListener();\n            jquery__WEBPACK_IMPORTED_MODULE_4___default()(window).off('beforeunload', SelectContentDialog.beforeUnloadHandler);\n            $dialog.find('iframe').attr('src', '/images/ajax-loader-medium-444.gif');\n          },\n\n          open: () => {\n            SelectContentDialog.attachDeepLinkingListner();\n          },\n          title: i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('link_from_external_tool', 'Link Resource from External Tool')\n        }).bind('dialogresize', function () {\n          jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).find('iframe').add('.fix_for_resizing_over_iframe').height(jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).height()).width(jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).width());\n        }).bind('dialogresizestop', () => {\n          jquery__WEBPACK_IMPORTED_MODULE_4___default()('.fix_for_resizing_over_iframe').remove();\n        }).bind('dialogresizestart', function () {\n          jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).find('iframe').each(function () {\n            jquery__WEBPACK_IMPORTED_MODULE_4___default()('<div class=\"fix_for_resizing_over_iframe\" style=\"background: #fff;\"></div>').css({\n              width: this.offsetWidth + 'px',\n              height: this.offsetHeight + 'px',\n              position: 'absolute',\n              opacity: '0.001',\n              zIndex: 10000000\n            }).css(jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).offset()).appendTo('body');\n          });\n        }).bind('selection', event => {\n          const item = event.contentItems[0];\n\n          if (item['@type'] === 'LtiLinkItem' && item.url) {\n            SelectContentDialog.handleContentItemResult(item, tool);\n          } else {\n            alert(_select_content__WEBPACK_IMPORTED_MODULE_18__[\"default\"].errorForUrlItem(item));\n            SelectContentDialog.resetExternalToolFields();\n          }\n\n          jquery__WEBPACK_IMPORTED_MODULE_4___default()('#resource_selection_dialog iframe').attr('src', 'about:blank');\n          $dialog.off('dialogbeforeclose', SelectContentDialog.dialogCancelHandler);\n          jquery__WEBPACK_IMPORTED_MODULE_4___default()('#resource_selection_dialog').dialog('close');\n\n          if (item.placementAdvice.presentationDocumentTarget.toLowerCase() === 'window') {\n            document.querySelector('#external_tool_create_new_tab').checked = true;\n          }\n        });\n      }\n\n      $dialog.dialog('close').dialog('option', 'width', width || 800).dialog('option', 'height', height || frameHeight || 400).dialog('open');\n      $dialog.triggerHandler('dialogresize');\n      let url = jquery__WEBPACK_IMPORTED_MODULE_4___default.a.replaceTags(jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_content_resource_selection_url').attr('href'), 'id', tool.definition_id);\n      url = url + '?placement=' + placement_type + '&secure_params=' + jquery__WEBPACK_IMPORTED_MODULE_4___default()('#secure_params').val();\n\n      if (jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').data('context_module_id')) {\n        url += '&context_module_id=' + jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').data('context_module_id');\n      }\n\n      $dialog.find('iframe').attr({\n        src: url,\n        title: tool.name\n      });\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()(window).on('beforeunload', SelectContentDialog.beforeUnloadHandler);\n    } else {\n      const placements = $tool.data('tool').placements;\n      var placement = placements.assignment_selection || placements.link_selection;\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_url').val(placement.url || '');\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('#context_external_tools_select .domain_message').showIf($tool.data('tool').domain).find('.domain').text($tool.data('tool').domain);\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_title').val(placement.title);\n    }\n  }\n\n};\n\nSelectContentDialog.extractContextExternalToolItemData = function () {\n  const tool = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#context_external_tools_select .tools .tool.selected').data('tool');\n  let tool_type = 'context_external_tool';\n  let tool_id = 0;\n\n  if (tool) {\n    if (tool.definition_type == 'Lti::MessageHandler') {\n      tool_type = 'lti/message_handler';\n    }\n\n    tool_id = tool.definition_id;\n  }\n\n  return {\n    'item[type]': tool_type,\n    'item[id]': tool_id,\n    'item[new_tab]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_new_tab').attr('checked') ? '1' : '0',\n    'item[indent]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_indent').val(),\n    'item[url]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_url').val(),\n    'item[title]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_title').val(),\n    'item[custom_params]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_custom_params').val()\n  };\n};\n\nSelectContentDialog.resetExternalToolFields = function () {\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_url').val('');\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_title').val('');\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_custom_params').val('');\n};\n\njquery__WEBPACK_IMPORTED_MODULE_4___default()(document).ready(function () {\n  const external_services = null;\n  const $dialog = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog');\n\n  browser_sniffer__WEBPACK_IMPORTED_MODULE_2__[\"default\"].selectContentDialog = function (options) {\n    var options = options || {};\n    const for_modules = options.for_modules;\n    const select_button_text = options.select_button_text || i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('buttons.add_item', 'Add Item');\n    const holder_name = options.holder_name || 'module';\n    const dialog_title = options.dialog_title || i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('titles.add_item_to_module', 'Add Item to Module');\n    const allow_external_urls = for_modules;\n    $dialog.data('context_module_id', options.context_module_id);\n    $dialog.data('submitted_function', options.submit);\n    $dialog.find('.context_module_content').showIf(for_modules);\n    $dialog.find('.holder_name').text(holder_name);\n    $dialog.find('.add_item_button').text(select_button_text);\n    $dialog.find('.select_item_name').showIf(!options.no_name_input);\n\n    if (allow_external_urls && !external_services) {\n      const $services = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_services').empty();\n      Object(_canvas_services_findLinkForService__WEBPACK_IMPORTED_MODULE_21__[\"getUserServices\"])('BookmarkService', function (data) {\n        for (const idx in data) {\n          const service = data[idx].user_service;\n          const $service = jquery__WEBPACK_IMPORTED_MODULE_4___default()(\"<a href='#' class='bookmark_service no-hover'/>\");\n          $service.addClass(service.service);\n          $service.data('service', service);\n          $service.attr('title', i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('titles.find_links_using_service', 'Find links using %{service}', {\n            service: service.service\n          }));\n          const $img = jquery__WEBPACK_IMPORTED_MODULE_4___default()('<img/>');\n          $img.attr('src', '/images/' + service.service + '_small_icon.png');\n          $service.append($img);\n          $service.click(function (event) {\n            event.preventDefault();\n            Object(_canvas_services_findLinkForService__WEBPACK_IMPORTED_MODULE_21__[\"findLinkForService\"])(jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).data('service').service, data => {\n              jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_create_url').val(data.url);\n              jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_create_title').val(data.title);\n            });\n          });\n          $services.append($service);\n          $services.append('&nbsp;&nbsp;');\n        }\n      });\n    }\n\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog #external_urls_select :text').val('');\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog #context_module_sub_headers_select :text').val('');\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#add_module_item_select').change();\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .module_item_select').change();\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').dialog({\n      title: dialog_title,\n      width: options.width || 400,\n      height: options.height || 400,\n\n      close() {\n        var _upload_form;\n\n        if (options.close) {\n          options.close();\n        }\n\n        (_upload_form = upload_form) === null || _upload_form === void 0 ? void 0 : _upload_form.onClose();\n      }\n\n    }).fixDialogButtons();\n    const visibleModuleItemSelect = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .module_item_select:visible')[0];\n\n    if (visibleModuleItemSelect) {\n      if (visibleModuleItemSelect.selectedIndex != -1) {\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()('.add_item_button').removeClass('disabled').attr('aria-disabled', false);\n      } else {\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()('.add_item_button').addClass('disabled').attr('aria-disabled', true);\n      }\n    }\n\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').dialog('option', 'title', dialog_title);\n  };\n\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .cancel_button').click(() => {\n    $dialog.find('.alert').remove();\n    $dialog.dialog('close');\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog select, #select_context_content_dialog input[type=text], .module_item_select').keycodes('return', function (event) {\n    if (!jquery__WEBPACK_IMPORTED_MODULE_4___default()('.add_item_button').hasClass('disabled')) {\n      // button is enabled\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()(event.currentTarget).blur();\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).parents('.ui-dialog').find('.add_item_button').last().click();\n    }\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .add_item_button').click(function () {\n    const submit = function (item_data, close_dialog = true) {\n      const submitted = $dialog.data('submitted_function');\n\n      if (submitted && jquery__WEBPACK_IMPORTED_MODULE_4___default.a.isFunction(submitted)) {\n        submitted(item_data);\n      }\n\n      if (close_dialog) {\n        setTimeout(() => {\n          $dialog.dialog('close');\n          $dialog.find('.alert').remove();\n        }, 0);\n      }\n    };\n\n    const item_type = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#add_module_item_select').val();\n\n    if (item_type == 'external_url') {\n      var item_data = {\n        'item[type]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#add_module_item_select').val(),\n        'item[id]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .module_item_option:visible:first .module_item_select').val(),\n        'item[new_tab]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_url_create_new_tab').attr('checked') ? '1' : '0',\n        'item[indent]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_indent').val()\n      };\n      item_data['item[url]'] = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_create_url').val();\n      item_data['item[title]'] = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_create_title').val();\n\n      if (item_data['item[url]'] === '') {\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_create_url').errorBox(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('URL is required'));\n      } else if (item_data['item[title]'] === '') {\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_create_title').errorBox(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Page Name is required'));\n      } else {\n        submit(item_data);\n      }\n    } else if (item_type == 'context_external_tool') {\n      var item_data = SelectContentDialog.extractContextExternalToolItemData();\n      $dialog.find('.alert-error').remove();\n\n      if (item_data['item[url]'] === '') {\n        const $errorBox = jquery__WEBPACK_IMPORTED_MODULE_4___default()('<div />', {\n          class: 'alert alert-error',\n          role: 'alert'\n        }).css({\n          marginTop: 8\n        });\n        $errorBox.text(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('errors.external_tool_url', \"An external tool can't be saved without a URL.\"));\n        $dialog.prepend($errorBox);\n      } else if (item_data['item[title]'] === '') {\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()('#external_tool_create_title').errorBox(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Page Name is required'));\n      } else {\n        submit(item_data);\n      }\n    } else if (item_type == 'context_module_sub_header') {\n      var item_data = {\n        'item[type]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#add_module_item_select').val(),\n        'item[id]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .module_item_option:visible:first .module_item_select').val(),\n        'item[indent]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_indent').val()\n      };\n      item_data['item[title]'] = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#sub_header_title').val();\n      submit(item_data);\n    } else {\n      const $options = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .module_item_option:visible:first .module_item_select option:selected');\n      $options.each(function () {\n        const $option = jquery__WEBPACK_IMPORTED_MODULE_4___default()(this);\n        let item_id = $option.val();\n        let quiz_type;\n\n        if (item_type === 'quiz' && item_id !== 'new') {\n          ;\n\n          var _item_id$split = item_id.split('_');\n\n          var _item_id$split2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_item_id$split, 2);\n\n          quiz_type = _item_id$split2[0];\n          item_id = _item_id$split2[1];\n        }\n\n        if (item_type === 'quiz' && item_id === 'new') {\n          quiz_type = jquery__WEBPACK_IMPORTED_MODULE_4___default()('input[name=quiz_engine_selection]:checked').val();\n        }\n\n        const quiz_lti = quiz_type === 'assignment';\n        const item_data = {\n          'item[type]': quiz_type || item_type,\n          'item[id]': item_id,\n          'item[title]': $option.text(),\n          'item[indent]': jquery__WEBPACK_IMPORTED_MODULE_4___default()('#content_tag_indent').val(),\n          quiz_lti\n        };\n\n        if (item_data['item[id]'] == 'new') {\n          const $urls = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .module_item_option:visible:first .new .add_item_url');\n          const url = quiz_lti ? $urls.last().attr('href') : $urls.attr('href');\n          let data = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .module_item_option:visible:first').getFormData();\n\n          if (quiz_lti) {\n            data = {\n              'assignment[title]': data['quiz[title]'],\n              'assignment[assignment_group_id]': data['quiz[assignment_group_id]'],\n              quiz_lti: 1\n            };\n          }\n\n          const process_upload = function (udata, done = true) {\n            let obj; // discussion_topics will come from real api v1 and so wont be nested behind a `discussion_topic` or 'wiki_page' root object\n\n            if (item_data['item[type]'] === 'discussion_topic' || item_data['item[type]'] === 'wiki_page' || item_data['item[type]'] === 'attachment') {\n              obj = udata;\n            } else {\n              obj = udata[item_data['item[type]']]; // e.g. data['wiki_page'] for wiki pages\n            }\n\n            jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').loadingImage('remove');\n\n            if (item_data['item[type]'] === 'wiki_page') {\n              item_data['item[id]'] = obj.page_id;\n            } else {\n              item_data['item[id]'] = obj.id;\n            }\n\n            if (item_data['item[type]'] === 'attachment') {\n              // some browsers return a fake path in the file input value, so use the name returned by the server\n              item_data['item[title]'] = obj.display_name;\n            } else {\n              item_data['item[title]'] = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .module_item_option:visible:first .item_title').val();\n              item_data['item[title]'] = item_data['item[title]'] || obj.display_name;\n            }\n\n            const $option = jquery__WEBPACK_IMPORTED_MODULE_4___default()(document.createElement('option'));\n            const obj_id = item_type === 'quiz' ? `${quiz_type || 'quiz'}_${obj.id}` : obj.id;\n            $option.val(obj_id).text(item_data['item[title]']);\n            jquery__WEBPACK_IMPORTED_MODULE_4___default()('#' + item_type + 's_select').find('.module_item_select option:last').after($option);\n            submit(item_data, done);\n          };\n\n          if (item_data['item[type]'] == 'assignment') {\n            data['assignment[post_to_sis]'] = ENV.DEFAULT_POST_TO_SIS;\n          }\n\n          if (item_data['item[type]'] == 'attachment') {\n            _canvas_files_react_modules_BaseUploader__WEBPACK_IMPORTED_MODULE_12__[\"default\"].prototype.onUploadPosted = attachment => {\n              // if the uploaded file replaced and existing file that already has a module item, don't create a new item\n              const adding_to_module_id = $dialog.data().context_module_id;\n\n              if (!Object.keys(ENV.MODULE_FILE_DETAILS).find(fdkey => // there's module item with the id of the replaced file\n              ENV.MODULE_FILE_DETAILS[fdkey].content_id == attachment.replacingFileId && // eslint-disable-line eqeqeq\n              // and the module item is in the module we're working in\n              ENV.MODULE_FILE_DETAILS[fdkey].module_id == adding_to_module_id // eslint-disable-line eqeqeq\n              )) {\n                process_upload(attachment, false);\n              }\n\n              if (_canvas_files_react_modules_UploadQueue__WEBPACK_IMPORTED_MODULE_13__[\"default\"].length() === 0) {\n                renderFileUploadForm();\n                $dialog.find('.alert').remove();\n                $dialog.dialog('close');\n              }\n            };\n\n            _canvas_files_react_modules_BaseUploader__WEBPACK_IMPORTED_MODULE_12__[\"default\"].prototype.onUploadFailed = _err => {\n              jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').loadingImage('remove');\n              jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').errorBox(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('errors.failed_to_create_item', 'Failed to Create new Item'));\n              renderFileUploadForm();\n            }; // Unmount progress component to reset state\n\n\n            react_dom__WEBPACK_IMPORTED_MODULE_6___default.a.unmountComponentAtNode(jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_upload_progress')[0]);\n            _canvas_files_react_modules_UploadQueue__WEBPACK_IMPORTED_MODULE_13__[\"default\"].flush(); // if there was an error uploading earlier, the queue has stuff in it we no longer want.\n\n            upload_form.queueUploads();\n            fileSelectBox.setDirty();\n            renderCurrentUploads();\n          } else {\n            jquery__WEBPACK_IMPORTED_MODULE_4___default.a.ajaxJSON(url, 'POST', data, data => {\n              process_upload(data);\n            }, data => {\n              jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').loadingImage('remove');\n\n              if (data && data.errors && data.errors.title[0] && data.errors.title[0].message && data.errors.title[0].message === 'blank') {\n                jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').errorBox(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('errors.assignment_name_blank', 'Assignment name cannot be blank.'));\n                jquery__WEBPACK_IMPORTED_MODULE_4___default()('.item_title').focus();\n              } else {\n                jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').errorBox(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('errors.failed_to_create_item', 'Failed to Create new Item'));\n              }\n            });\n          }\n        } else {\n          submit(item_data);\n        }\n      });\n    }\n  });\n  const initEvents = SelectContentDialog.Events.init.bind(SelectContentDialog.Events)();\n  const $tool_template = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#context_external_tools_select .tools .tool:first').detach();\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#add_module_item_select').change(function () {\n    // Don't disable the form button for these options\n    const selectedOption = jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).val();\n    const doNotDisable = ['external_url', 'context_external_tool', 'context_module_sub_header'].includes(selectedOption);\n\n    if (doNotDisable) {\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('.add_item_button').removeClass('disabled').attr('aria-disabled', false);\n    } else {\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('.add_item_button').addClass('disabled').attr('aria-disabled', true);\n    }\n\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .module_item_option').hide();\n\n    if (jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).val() === 'attachment') {\n      fileSelectBox = react_dom__WEBPACK_IMPORTED_MODULE_6___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createFactory(_react_components_FileSelectBox__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({\n        contextString: ENV.context_asset_string\n      }), jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_item_select_file')[0]);\n      fileSelectBox.refresh();\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('#attachment_folder_id').on('change', update_foc);\n      renderFileUploadForm();\n\n      if (fileSelectBox.folderStore.getState().isLoading) {\n        fileSelectBox.folderStore.addChangeListener(() => {\n          renderFileUploadForm();\n        });\n      }\n\n      if (fileSelectBox.fileStore.getState().isLoading) {\n        fileSelectBox.fileStore.addChangeListener(() => {\n          renderFileUploadForm();\n        });\n      }\n    }\n\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#' + jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).val() + 's_select').show().find('.module_item_select').change();\n\n    if (jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).val() == 'context_external_tool') {\n      const $select = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#context_external_tools_select');\n\n      if (!$select.hasClass('loaded')) {\n        $select.find('.message').text('Loading...');\n        const url = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog .external_tools_url').attr('href');\n        jquery__WEBPACK_IMPORTED_MODULE_4___default.a.ajaxJSON(url, 'GET', {}, data => {\n          $select.find('.message').remove();\n          $select.addClass('loaded');\n          $select.find('.tools').empty();\n\n          for (const idx in data) {\n            const tool = data[idx];\n            const $tool = $tool_template.clone(true);\n            const placement = tool.placements.assignment_selection || tool.placements.link_selection;\n            $tool.toggleClass('resource_selection', _select_content__WEBPACK_IMPORTED_MODULE_18__[\"default\"].isContentMessage(placement, tool.placements));\n            $tool.fillTemplateData({\n              data: tool,\n              dataValues: ['definition_type', 'definition_id', 'domain', 'name', 'placements', 'description']\n            });\n            $tool.data('tool', tool);\n            $select.find('.tools').append($tool.show());\n          }\n        }, data => {\n          $select.find('.message').text(i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('errors.loading_failed', 'Loading Failed'));\n        });\n      }\n    }\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').on('change', '.module_item_select', function () {\n    const currentSelectItem = jquery__WEBPACK_IMPORTED_MODULE_4___default()(this)[0];\n\n    if (jquery__WEBPACK_IMPORTED_MODULE_4___default()('#add_module_item_select').val() === 'attachment') {\n      if (currentSelectItem) {\n        // selectedIndex==0 for [new files]\n        if (currentSelectItem.selectedIndex === 0) {\n          update_foc();\n        } else {\n          enable_disable_submit_button(currentSelectItem.selectedIndex > 0);\n        }\n      }\n    } else {\n      enable_disable_submit_button(jquery__WEBPACK_IMPORTED_MODULE_4___default()(currentSelectItem).is(':hidden') || currentSelectItem.selectedIndex > -1);\n    }\n\n    if (jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).val() == 'new') {\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).parents('.module_item_option').find('.new').show().focus().select();\n    } else {\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()(this).parents('.module_item_option').find('.new').hide();\n    }\n  });\n});\njquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_uploaded_data').on('change', function (event) {\n  var _event$target, _event$target$files;\n\n  enable_disable_submit_button(((_event$target = event.target) === null || _event$target === void 0 ? void 0 : (_event$target$files = _event$target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files.length) > 0);\n});\n\nfunction enable_disable_submit_button(enabled) {\n  if (enabled) {\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('.add_item_button').removeClass('disabled').attr('aria-disabled', false);\n  } else {\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('.add_item_button').addClass('disabled').attr('aria-disabled', true);\n  }\n}\n\nfunction update_foc() {\n  enable_disable_submit_button(jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_uploaded_data')[0].files.length);\n  renderFileUploadForm(); // Unmount progress component to reset state\n\n  react_dom__WEBPACK_IMPORTED_MODULE_6___default.a.unmountComponentAtNode(jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_upload_progress')[0]);\n}\n\nfunction handleUploadOnChange(current_uploader_count) {\n  if (current_uploader_count === 0) {\n    upload_form.reset(true);\n    renderFileUploadForm();\n    enable_disable_submit_button(false);\n  } else {\n    // toggle from the choose files button to current uploads\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_upload_form').hide();\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_upload_progress').show();\n  }\n}\n\nfunction getFileUploadFolder() {\n  const selectedFolder = document.getElementById('attachment_folder_id');\n  const folderId = selectedFolder.value;\n\n  const folder = Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, fileSelectBox.getFolderById(folderId));\n\n  if (folder) {\n    folder.files = (folder.files || []).map(f => new _canvas_files_backbone_models_FilesystemObject_coffee__WEBPACK_IMPORTED_MODULE_11__[\"default\"](f));\n  }\n\n  return folder;\n}\n\nconst renameFileMessage = nameToUse => {\n  return i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('A file named \"%{name}\" already exists in this folder. Do you want to replace the existing file?', {\n    name: nameToUse\n  });\n};\n\nconst lockFileMessage = nameToUse => {\n  return i18n_select_content_dialog__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('A locked file named \"%{name}\" already exists in this folder. Please enter a new name.', {\n    name: nameToUse\n  });\n};\n\nfunction renderFileUploadForm() {\n  const _splitAssetString = Object(_canvas_util_splitAssetString__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(ENV.context_asset_string, true),\n        _splitAssetString2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_splitAssetString, 2),\n        contextType = _splitAssetString2[0],\n        contextId = _splitAssetString2[1];\n\n  const folderProps = {\n    currentFolder: getFileUploadFolder(),\n    contextType,\n    contextId,\n    visible: true,\n    allowSkip: true,\n    inputId: 'module_attachment_uploaded_data',\n    inputName: 'attachment[uploaded_data]',\n    autoUpload: false,\n    disabled: fileSelectBox.isLoading(),\n    alwaysRename: false,\n    alwaysUploadZips: true,\n    onChange: update_foc,\n    onRenameFileMessage: renameFileMessage,\n    onLockFileMessage: lockFileMessage\n  }; // only show the choose files + folder form if [new files] is selected\n\n  if (jquery__WEBPACK_IMPORTED_MODULE_4___default()('#select_context_content_dialog').val() === 'new') {\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_upload_form').parents('.module_item_option').find('.new').show();\n    enable_disable_submit_button(jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_uploaded_data')[0].files.length);\n  } // toggle from current uploads to the choose files button\n\n\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_upload_form').show();\n  jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_upload_progress').hide();\n  upload_form = react_dom__WEBPACK_IMPORTED_MODULE_6___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_canvas_files_react_components_UploadForm__WEBPACK_IMPORTED_MODULE_8__[\"default\"], folderProps), jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_upload_form')[0]);\n}\n\nfunction renderCurrentUploads() {\n  react_dom__WEBPACK_IMPORTED_MODULE_6___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_canvas_files_react_components_CurrentUploads__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    onUploadChange: handleUploadOnChange\n  }), jquery__WEBPACK_IMPORTED_MODULE_4___default()('#module_attachment_upload_progress')[0]);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (SelectContentDialog);\n\n//# sourceURL=webpack:///./ui/shared/select-content-dialog/jquery/select_content_dialog.js?");

/***/ }),

/***/ "onq7":
/*!***************************************!*\
  !*** ./ui/shared/util/createStore.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"VTBJ\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\n\n\n/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Creates a data store with some initial state.\n *\n * ```js\n * var UserStore = createStore({loaded: false, users: []});\n *\n * UserStore.load = function() {\n *   $.getJSON('/users', function(users) {\n *     UserStore.setState({loaded: true, users});\n *   });\n * };\n * ```\n *\n * Then in a component:\n *\n * ```js\n * var UsersView = React.createClass({\n *   getInitialState () {\n *     return UserStore.getState();\n *   },\n *\n *   componentDidMount () {\n *     UserStore.addChangeListener(this.handleStoreChange);\n *     UserStore.load();\n *   },\n *\n *   handleStoreChange () {\n *     this.setState(UserStore.getState());\n *   }\n * });\n * ```\n */\n\nfunction createStore(initialState) {\n  const events = Object(_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default.a.Events);\n\n  let state = initialState || {};\n  return {\n    setState(newState) {\n      Object.assign(state, newState);\n      this.emitChange();\n    },\n\n    getState() {\n      return state;\n    },\n\n    clearState() {\n      state = {};\n      this.emitChange();\n    },\n\n    addChangeListener(listener) {\n      events.on('change', listener);\n    },\n\n    removeChangeListener(listener) {\n      events.off('change', listener);\n    },\n\n    emitChange() {\n      events.trigger('change');\n    }\n\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (createStore);\n\n//# sourceURL=webpack:///./ui/shared/util/createStore.js?");

/***/ }),

/***/ "plYi":
/*!**************************************!*\
  !*** ./ui/shared/util/natcompare.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n//\n// Copyright (C) 2014 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  strings(x, y) {\n    let locale = _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"default\"].locale || 'en-US';\n    const locale_map = {\n      zh_Hant: 'zh-Hant'\n    };\n    locale = locale_map[locale] || locale; // if you change these settings, also match the settings in best_unicode_collation_key\n    // and Canvas::ICU.collator\n\n    return x.localeCompare(y, locale, {\n      sensitivity: 'variant',\n      ignorePunctuation: false,\n      numeric: true\n    });\n  },\n\n  by(f) {\n    return (x, y) => this.strings(f(x), f(y));\n  },\n\n  byKey(key) {\n    return this.by(x => x[key]);\n  },\n\n  byGet(key) {\n    return this.by(x => x.get(key));\n  }\n\n});\n\n//# sourceURL=webpack:///./ui/shared/util/natcompare.js?");

/***/ }),

/***/ "scx4":
/*!*************************************!*\
  !*** ./ui/shared/mime/mimeClass.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return mimeClass; });\n/* harmony import */ var i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!mimeClass */ \"Cm+D\");\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n // this module works together with app/stylesheets/components/_MimeClassIcons.scss\n// so, given the mime-type of a file you can give it a css class name that corresponds to it.\n// eg: somefile.pdf would get the css class .mimeClass-pdf and a little icon with the acrobat logo in it.\n// if there is a file format that is common enough, go ahead and add an entry to one of these:\n// If you need to make a new class, make sure to also make an svg for it in public/images/mimeClassIcons/\n// and a class name in app/stylesheets/components/_MimeClassIcons.scss\n// (and app/stylesheets/components/deprecated/_fancy_links.scss if it is still being used)\n\nconst mimeClasses = {\n  audio: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Audio');\n    },\n\n    mimeTypes: ['audio/x-mpegurl', 'audio/x-pn-realaudio', 'audio/x-aiff', 'audio/3gpp', 'audio/mid', 'audio/x-wav', 'audio/basic', 'audio/mpeg']\n  },\n  code: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Source code');\n    },\n\n    mimeTypes: ['text/xml', 'text/css', 'text/x-yaml', 'application/xml', 'application/javascript', 'text/x-csharp']\n  },\n  doc: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Text document');\n    },\n\n    mimeTypes: ['application/x-docx', 'text/rtf', 'application/msword', 'application/rtf', 'application/vnd.oasis.opendocument.text', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document']\n  },\n  flash: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Flash');\n    },\n\n    mimeTypes: ['application/x-shockwave-flash']\n  },\n  html: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Web page');\n    },\n\n    mimeTypes: ['text/html', 'application/xhtml+xml']\n  },\n  image: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Image');\n    },\n\n    mimeTypes: ['image/png', 'image/x-psd', 'image/gif', 'image/pjpeg', 'image/jpeg']\n  },\n  ppt: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Presentation');\n    },\n\n    mimeTypes: ['application/vnd.openxmlformats-officedocument.presentationml.presentation', 'application/vnd.ms-powerpoint']\n  },\n  pdf: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('PDF');\n    },\n\n    mimeTypes: ['application/pdf']\n  },\n  text: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Plain text');\n    },\n\n    mimeTypes: ['text', 'text/plain']\n  },\n  video: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Video');\n    },\n\n    mimeTypes: ['video/mp4', 'video/x-ms-asf', 'video/x-msvideo', 'video/x-sgi-movie', 'video/mpeg', 'video/quicktime', 'video/x-la-asf', 'video/3gpp', 'video/webm', 'video/avi']\n  },\n  xls: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Spreadsheet');\n    },\n\n    mimeTypes: ['application/vnd.oasis.opendocument.spreadsheet', 'text/csv', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/vnd.ms-excel']\n  },\n  zip: {\n    get displayName() {\n      return i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Archive');\n    },\n\n    mimeTypes: ['application/x-rar-compressed', 'application/x-zip-compressed', 'application/zip', 'application/x-zip', 'application/x-rar']\n  }\n};\nfunction mimeClass(contentType) {\n  return mimeClass.mimeClasses[contentType] || 'file';\n}\n\nmimeClass.displayName = function (contentType) {\n  const found = mimeClasses[mimeClass(contentType)];\n  return found && found.displayName || i18n_mimeClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Unknown');\n};\n\nmimeClass.mimeClasses = {};\n\nfor (const cls in mimeClasses) {\n  const value = mimeClasses[cls];\n  value.mimeTypes.forEach(mimeType => mimeClass.mimeClasses[mimeType] = cls);\n}\n\n//# sourceURL=webpack:///./ui/shared/mime/mimeClass.js?");

/***/ }),

/***/ "uloQ":
/*!**********************************************!*\
  !*** ./ui/shared/alerts/react/FlashAlert.js ***!
  \**********************************************/
/*! exports provided: default, showFlashAlert, destroyContainer, showFlashError, showFlashSuccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FlashAlert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showFlashAlert\", function() { return showFlashAlert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"destroyContainer\", function() { return destroyContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showFlashError\", function() { return showFlashError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showFlashSuccess\", function() { return showFlashSuccess; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var i18n_ajaxflashalert__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18n!ajaxflashalert */ \"10eL\");\n/* harmony import */ var _instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-alerts */ \"spba\");\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _instructure_ui_motion__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-motion */ \"Nl9J\");\n/*\n * Copyright (C) 2017 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Flash alerts, especially for ajax error messages\n * Typical usage:\n * import {showFlashError} from './FlashAlert'\n * ...\n * axios.put(url, data).then((response) => {\n *     // do something with response\n *   }).catch(showFlashError(your_error_message))\n *\n * showFlashError() with no argument shows a generic message\n *\n * On error, will display an inst-ui Alert at the top of the page\n * with an error message and \"Details\" button. When the user clicks\n * the button, it shows error details extracted from the axios Error\n *\n * You could also import the lower level showFlashAlert function or\n * the FlashAlert component if you need more control\n *\n * showFlashAlert({ err, message, type }, onCloseCallback)\n *  err: error object\n *  message: user-facing message\n *  type: one of ['info', 'success', 'warning', 'error']\n *        default is 'info' unless an error object is passed in, else is 'error'\n */\n\n\n\n\n\n\n\n\n\nconst messageHolderId = 'flashalert_message_holder'; // specs fail if I reuse jquery's elements\n\nconst screenreaderMessageHolderId = 'flash_screenreader_holder';\nconst timeout = 10000; // An Alert with a message and \"Details\" button which surfaces\n// more info about the error when pressed.\n// Is displayed at the top of the document, and will close itself after a while\n\nclass FlashAlert extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  constructor(props) {\n    super(props);\n\n    this.showDetails = () => {\n      this.setState({\n        showDetails: true\n      });\n      clearTimeout(this.timerId);\n      this.timerId = setTimeout(() => this.closeAlert(), this.props.timeout);\n    };\n\n    this.closeAlert = () => {\n      this.setState({\n        isOpen: false\n      }, () => {\n        setTimeout(() => {\n          clearTimeout(this.timerId);\n          this.props.onClose();\n        }, 500);\n      });\n    };\n\n    this.state = {\n      showDetails: false,\n      isOpen: true\n    };\n    this.timerId = 0;\n  }\n\n  getLiveRegion() {\n    // return element where flash screenreader messages go.\n    // create if necessary\n    let liveRegion = document.getElementById(screenreaderMessageHolderId);\n\n    if (!liveRegion) {\n      liveRegion = document.createElement('div');\n      liveRegion.id = screenreaderMessageHolderId;\n      liveRegion.setAttribute('role', 'alert');\n      document.body.appendChild(liveRegion);\n    }\n\n    return liveRegion;\n  }\n\n  findDetailMessage() {\n    const err = this.props.error;\n    let a = err.message;\n    let b;\n\n    if (err.response) {\n      if (err.response.data) {\n        try {\n          if (Array.isArray(err.response.data.errors)) {\n            // probably a canvas api\n            a = err.response.data.errors[0].message;\n            b = err.message;\n          } else if (err.response.data.message) {\n            // probably a canvas api too\n            a = err.response.data.message;\n            b = err.message;\n          }\n        } catch (ignore) {\n          a = err.message;\n        }\n      }\n    }\n\n    return {\n      a,\n      b\n    };\n  }\n\n  renderDetailMessage() {\n    const _this$findDetailMessa = this.findDetailMessage(),\n          a = _this$findDetailMessa.a,\n          b = _this$findDetailMessa.b;\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], {\n      as: \"p\",\n      fontStyle: \"italic\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], null, a), b ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null) : null, b ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], null, b) : null);\n  }\n\n  render() {\n    let details = null;\n\n    if (this.props.error) {\n      if (this.state.showDetails) {\n        details = this.renderDetailMessage();\n      } else {\n        details = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__[\"PresentationContent\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_5__[\"Button\"], {\n          variant: \"link\",\n          onClick: this.showDetails\n        }, i18n_ajaxflashalert__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Details'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__[\"ScreenReaderContent\"], null, this.renderDetailMessage()));\n      }\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_motion__WEBPACK_IMPORTED_MODULE_8__[\"Transition\"], {\n      transitionOnMount: true,\n      in: this.state.isOpen,\n      type: \"fade\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_4__[\"Alert\"], {\n      variant: this.props.variant,\n      renderCloseButtonLabel: i18n_ajaxflashalert__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('Close'),\n      onDismiss: this.closeAlert,\n      margin: \"small auto\",\n      timeout: this.props.timeout,\n      liveRegion: this.getLiveRegion,\n      transition: \"fade\",\n      screenReaderOnly: this.props.screenReaderOnly\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", {\n      style: {\n        margin: '0 -5px'\n      }\n    }, this.props.message), details)));\n  }\n\n}\nFlashAlert.propTypes = {\n  onClose: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func.isRequired,\n  message: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,\n  error: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.instanceOf(Error),\n  variant: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOf(['info', 'success', 'warning', 'error']),\n  timeout: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number,\n  screenReaderOnly: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool\n};\nFlashAlert.defaultProps = {\n  error: null,\n  variant: 'info',\n  timeout,\n  screenReaderOnly: false\n};\nfunction showFlashAlert({\n  message,\n  err,\n  type = err ? 'error' : 'info',\n  srOnly = false\n}) {\n  function closeAlert(atNode) {\n    react_dom__WEBPACK_IMPORTED_MODULE_2___default.a.unmountComponentAtNode(atNode);\n    atNode.remove();\n  }\n\n  function getAlertContainer() {\n    let alertContainer = document.getElementById(messageHolderId);\n\n    if (!alertContainer) {\n      alertContainer = document.createElement('div');\n      alertContainer.classList.add('clickthrough-container');\n      alertContainer.id = messageHolderId;\n      alertContainer.setAttribute('style', 'position: fixed; top: 0; left: 0; width: 100%; z-index: 100000;');\n      document.body.appendChild(alertContainer);\n    }\n\n    return alertContainer;\n  }\n\n  function renderAlert(parent) {\n    react_dom__WEBPACK_IMPORTED_MODULE_2___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FlashAlert, {\n      message: message,\n      timeout: Number.isNaN(parseInt(ENV.flashAlertTimeout, 10)) ? timeout : ENV.flashAlertTimeout,\n      error: err,\n      variant: type,\n      onClose: closeAlert.bind(null, parent) // eslint-disable-line react/jsx-no-bind\n      ,\n      screenReaderOnly: srOnly\n    }), parent);\n  }\n\n  const div = document.createElement('div'); // div.setAttribute('class', styles.flashMessage)\n\n  div.setAttribute('style', 'max-width:50em;margin:1rem auto;');\n  div.setAttribute('class', 'flashalert-message');\n  getAlertContainer().appendChild(div);\n  renderAlert(div);\n}\nfunction destroyContainer() {\n  const container = document.getElementById(messageHolderId);\n  const liveRegion = document.getElementById(screenreaderMessageHolderId);\n  if (container) container.remove();\n  if (liveRegion) liveRegion.remove();\n}\nfunction showFlashError(message = i18n_ajaxflashalert__WEBPACK_IMPORTED_MODULE_3__[\"default\"].t('An error occurred making a network request')) {\n  return err => showFlashAlert({\n    message,\n    err,\n    type: 'error'\n  });\n}\nfunction showFlashSuccess(message) {\n  return () => showFlashAlert({\n    message,\n    type: 'success'\n  });\n}\n\n//# sourceURL=webpack:///./ui/shared/alerts/react/FlashAlert.js?");

/***/ }),

/***/ "x1QO":
/*!***************************************************************!*\
  !*** ./ui/shared/select-content-dialog/stores/ObjectStore.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _canvas_util_createStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/util/createStore */ \"onq7\");\n/* harmony import */ var link_header_parsing_parseLinkHeaderFromXHR__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! link-header-parsing/parseLinkHeaderFromXHR */ \"vhl9\");\n/* harmony import */ var _canvas_rails_flash_notifications__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/rails-flash-notifications */ \"r2Yr\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\nconst initialStoreState = {\n  links: {},\n  items: [],\n  isLoading: false,\n  hasLoaded: false,\n  hasMore: false\n};\n\nclass ObjectStore {\n  /**\n   * apiEndpoint should be the endpoint for this resource.\n   * Options is an object containing additional options for the store:\n   *    - perPage - indicates the number of records that should be pulled per\n   *                request.\n   *\n   * Other options will be to query parameters\n   */\n  constructor(apiEndpoint, options) {\n    // We clone the initialStoreState so it doesn't hang onto a bad reference.\n    this.store = Object(_canvas_util_createStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(underscore__WEBPACK_IMPORTED_MODULE_1___default.a.clone(initialStoreState));\n\n    if (options) {\n      options.per_page = options.perPage;\n      delete options.perPage;\n      apiEndpoint += '?' + jquery__WEBPACK_IMPORTED_MODULE_0___default.a.param(options);\n    }\n\n    this.apiEndpoint = apiEndpoint;\n  }\n  /**\n   * Fetches the resources.\n   * options is an optional object.  Currently this allows for the following:\n   *   - fetchAll: true - this will continually fetch all pages of the resource\n   */\n\n\n  fetch(options) {\n    const url = this.store.getState().links.next || this.apiEndpoint;\n    this.store.setState({\n      isLoading: true\n    });\n    jquery__WEBPACK_IMPORTED_MODULE_0___default.a.ajax({\n      url,\n      type: 'GET',\n      success: this._fetchSuccessHandler.bind(this, options),\n      error: this._fetchErrorHandler.bind(this)\n    });\n  }\n  /**\n   * Sets the store back to the initial state.\n   */\n\n\n  reset() {\n    // We clone the initialStoreState so it doesn't hang onto a bad reference.\n    this.store.setState(underscore__WEBPACK_IMPORTED_MODULE_1___default.a.clone(initialStoreState));\n  }\n  /**\n   * Returns the current state of the underlying store.\n   */\n\n\n  getState() {\n    return this.store.getState();\n  }\n  /**\n   * Adds a change listener\n   */\n\n\n  addChangeListener(callback) {\n    this.store.addChangeListener(callback);\n  }\n  /**\n   * Removes a change listener\n   */\n\n\n  removeChangeListener(callback) {\n    this.store.removeChangeListener(callback);\n  }\n\n  _fetchSuccessHandler(options, items, status, xhr) {\n    const links = Object(link_header_parsing_parseLinkHeaderFromXHR__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(xhr);\n    items = this.store.getState().items.concat(items);\n    this.store.setState({\n      links,\n      isLoading: false,\n      isLoaded: true,\n      items,\n      hasMore: !!links.next\n    });\n\n    if (options && options.fetchAll && !!links.next) {\n      this.fetch(options);\n    }\n  }\n\n  _fetchErrorHandler() {\n    this.store.setState({\n      items: [],\n      isLoading: false,\n      isLoaded: false,\n      hasMore: true\n    });\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ObjectStore);\n\n//# sourceURL=webpack:///./ui/shared/select-content-dialog/stores/ObjectStore.js?");

/***/ })

}]);