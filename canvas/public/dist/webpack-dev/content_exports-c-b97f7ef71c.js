(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([["content_exports"],{

/***/ "7hm3":
/*!******************************************!*\
  !*** ./packages/jqueryui/progressbar.js ***!
  \******************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core */ \"MIhX\");\n/* harmony import */ var _widget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget */ \"dJId\");\n/*!\n * jQuery UI Progressbar @VERSION\n *\n * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://jquery.org/license\n *\n * http://docs.jquery.com/UI/Progressbar\n *\n * Depends:\n *   jquery.ui.core.js\n *   jquery.ui.widget.js\n */\n\n\n\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.widget( \"ui.progressbar\", {\n\tversion: \"@VERSION\",\n\toptions: {\n\t\tvalue: 0,\n\t\tmax: 100\n\t},\n\n\tmin: 0,\n\n\t_create: function() {\n\t\tthis.element\n\t\t\t.addClass( \"ui-progressbar ui-widget ui-widget-content ui-corner-all\" )\n\t\t\t.attr({\n\t\t\t\trole: \"progressbar\",\n\t\t\t\t\"aria-valuemin\": this.min,\n\t\t\t\t\"aria-valuemax\": this.options.max,\n\t\t\t\t\"aria-valuenow\": this._value()\n\t\t\t});\n\n\t\tthis.valueDiv = jquery__WEBPACK_IMPORTED_MODULE_0___default()( \"<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>\" )\n\t\t\t.appendTo( this.element );\n\n\t\tthis.oldValue = this._value();\n\t\tthis._refreshValue();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass( \"ui-progressbar ui-widget ui-widget-content ui-corner-all\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-valuemin\" )\n\t\t\t.removeAttr( \"aria-valuemax\" )\n\t\t\t.removeAttr( \"aria-valuenow\" );\n\n\t\tthis.valueDiv.remove();\n\t},\n\n\tvalue: function( newValue ) {\n\t\tif ( newValue === undefined ) {\n\t\t\treturn this._value();\n\t\t}\n\n\t\tthis._setOption( \"value\", newValue );\n\t\treturn this;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"value\" ) {\n\t\t\tthis.options.value = value;\n\t\t\tthis._refreshValue();\n\t\t\tif ( this._value() === this.options.max ) {\n\t\t\t\tthis._trigger( \"complete\" );\n\t\t\t}\n\t\t}\n\n\t\tthis._super( key, value );\n\t},\n\n\t_value: function() {\n\t\tvar val = this.options.value;\n\t\t// normalize invalid value\n\t\tif ( typeof val !== \"number\" ) {\n\t\t\tval = 0;\n\t\t}\n\t\treturn Math.min( this.options.max, Math.max( this.min, val ) );\n\t},\n\n\t_percentage: function() {\n\t\treturn 100 * this._value() / this.options.max;\n\t},\n\n\t_refreshValue: function() {\n\t\tvar value = this.value(),\n\t\t\tpercentage = this._percentage();\n\n\t\tif ( this.oldValue !== value ) {\n\t\t\tthis.oldValue = value;\n\t\t\tthis._trigger( \"change\" );\n\t\t}\n\n\t\tthis.valueDiv\n\t\t\t.toggle( value > this.min )\n\t\t\t.toggleClass( \"ui-corner-right\", value === this.options.max )\n\t\t\t.width( percentage.toFixed(0) + \"%\" );\n\t\tthis.element.attr( \"aria-valuenow\", value );\n\t}\n});\n\n\n\n\n//# sourceURL=webpack:///./packages/jqueryui/progressbar.js?");

/***/ }),

/***/ "Kd9V":
/*!********************************************************************************!*\
  !*** ./frontend_build/i18n.js?content_exports!./ui/shims/dummyI18nResource.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('content_exports'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?content_exports");

/***/ }),

/***/ "LZ8C":
/*!**********************************************!*\
  !*** ./ui/features/content_exports/index.js ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _jquery_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jquery/index */ \"ike6\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n//# sourceURL=webpack:///./ui/features/content_exports/index.js?");

/***/ }),

/***/ "ike6":
/*!*****************************************************!*\
  !*** ./ui/features/content_exports/jquery/index.js ***!
  \*****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var i18n_content_exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18n!content_exports */ \"Kd9V\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _canvas_jquery_jquery_ajaxJSON__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/jquery/jquery.ajaxJSON */ \"dhbk\");\n/* harmony import */ var _canvas_forms_jquery_jquery_instructure_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/forms/jquery/jquery.instructure_forms */ \"Dhso\");\n/* harmony import */ var jqueryui_progressbar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jqueryui/progressbar */ \"7hm3\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n/* formSubmit */\n\n\njquery__WEBPACK_IMPORTED_MODULE_1___default()(document).ready(function (event) {\n  let state = 'nothing';\n  let current_id = null;\n  const $quiz_selection = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#quiz_selection'),\n        $exporter_form = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#exporter_form');\n\n  function startPoll() {\n    $exporter_form.html(Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_content_exports__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('messages.processing', 'Processing')) + \"<div style='font-size: 0.8em;'>\" + Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_content_exports__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('messages.this_may_take_a_bit', 'this may take a bit...')) + '</div>').attr('disabled', true);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.instruction').hide();\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.progress_bar_holder').slideDown();\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_progress').progressbar();\n    state = 'nothing';\n    let fakeTickCount = 0;\n\n    var tick = function () {\n      if (state == 'nothing') {\n        fakeTickCount++;\n        const progress = (jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_progress').progressbar('option', 'value') || 0) + 0.25;\n\n        if (fakeTickCount < 10) {\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_progress').progressbar('option', 'value', progress);\n        }\n\n        setTimeout(tick, 2000);\n      } else {\n        state = 'nothing';\n        fakeTickCount = 0;\n        setTimeout(tick, 10000);\n      }\n    };\n\n    var checkup = function () {\n      let lastProgress = null;\n      let waitTime = 1500;\n      jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(location.href + '/' + current_id, 'GET', {}, data => {\n        state = 'updating';\n        const content_export = data.content_export;\n        let progress = 0;\n\n        if (content_export) {\n          progress = Math.max(jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_progress').progressbar('option', 'value') || 0, content_export.progress);\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_progress').progressbar('option', 'value', progress);\n        }\n\n        if (content_export.workflow_state == 'exported') {\n          $exporter_form.hide();\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_progress').progressbar('option', 'value', 100);\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('.progress_message').text(i18n_content_exports__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('Your content has been exported.'));\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export_files').append('<p><a href=\"' + Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(content_export.download_url) + '\">' + Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(i18n_content_exports__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('New Export')) + '</a></p>');\n        } else if (content_export.workflow_state == 'failed') {\n          const code = 'content_export_' + content_export.id;\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('.progress_bar_holder').hide();\n          $exporter_form.hide();\n          const message = i18n_content_exports__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('errors.error', 'There was an error exporting your content.  Please notify your system administrator and give them the following export identifier: \"%{code}\"', {\n            code\n          });\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_messages .error_message').text(message);\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_messages').show();\n        } else {\n          if (progress == lastProgress) {\n            waitTime = Math.max(waitTime + 500, 30000);\n          } else {\n            waitTime = 1500;\n          }\n\n          lastProgress = progress;\n          setTimeout(checkup, 1500);\n        }\n      }, () => {\n        setTimeout(checkup, 3000);\n      });\n    };\n\n    setTimeout(checkup, 2000);\n    setTimeout(tick, 1000);\n  }\n\n  $exporter_form.formSubmit({\n    success(data) {\n      if (data && data.content_export) {\n        current_id = data.content_export.id;\n        startPoll();\n      } else {\n        // show error message\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_messages .error_message').text(data.error_message);\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('.export_messages').show();\n      }\n    },\n\n    error(data) {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).find('.submit_button').attr('disabled', false).text(i18n_content_exports__WEBPACK_IMPORTED_MODULE_0__[\"default\"].t('buttons.process', 'Process Data'));\n    }\n\n  });\n  $exporter_form.delegate('.copy_all', 'click', function () {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.quiz_item').prop('checked', jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).prop('checked'));\n  });\n  $exporter_form.delegate('.quiz_item', 'click', function () {\n    if (!jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).prop('checked')) {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('.copy_all').prop('checked', false);\n    }\n  });\n  $exporter_form.delegate('input[name=export_type]', 'click', function () {\n    if (jquery__WEBPACK_IMPORTED_MODULE_1___default()(this).val() === 'qti') {\n      $quiz_selection.show();\n    } else {\n      $quiz_selection.hide();\n    }\n  });\n\n  function check_if_exporting() {\n    // state = \"checking\";\n    if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#current_export_id').size()) {\n      // state = \"nothing\";\n      current_id = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#current_export_id').text();\n      startPoll();\n    }\n  }\n\n  check_if_exporting();\n});\n\n//# sourceURL=webpack:///./ui/features/content_exports/jquery/index.js?");

/***/ })

}]);