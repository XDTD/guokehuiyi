(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[154],{

/***/ "XRwO":
/*!***************************************************************!*\
  !*** ./ui/features/dashboard/backbone/views/DashboardView.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return DashboardView; });\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _canvas_rails_flash_notifications__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/rails-flash-notifications */ \"r2Yr\");\n/* harmony import */ var _canvas_jquery_jquery_disableWhileLoading__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/jquery/jquery.disableWhileLoading */ \"sXof\");\n/* harmony import */ var i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! i18n!dashboard */ \"oOHG\");\n/* harmony import */ var _jst_show_more_link_handlebars__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../jst/show_more_link.handlebars */ \"zOIg\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\nclass DashboardView extends _canvas_backbone__WEBPACK_IMPORTED_MODULE_0__[\"View\"] {\n  static initClass() {\n    this.prototype.el = document.body;\n    this.prototype.events = {\n      'click .stream_header': 'toggleDetails',\n      'click .stream_header .links a': 'stopPropagation',\n      'click .stream-details': 'handleDetailsClick',\n      'click .close_conference_link': 'closeConference',\n      'focus .todo-tooltip': 'handleTooltipFocus',\n      'beforeremove .stream-category': 'updateCategoryCounts' // ujsLinks event\n\n    };\n  }\n\n  initialize() {\n    super.initialize(...arguments); // setup all 'Show More' links to reflect currently being collapsed.\n\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.stream-category').each((idx, elm) => this.setShowMoreLink(jquery__WEBPACK_IMPORTED_MODULE_1___default()(elm)));\n  }\n\n  toggleDetails(event) {\n    const header = jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.currentTarget); // since toggling, isExpanded is the opposite of the current DOM state\n\n    const isExpanded = !(header.attr('aria-expanded') === 'true');\n    header.attr('aria-expanded', isExpanded);\n    const details = header.next('.details_container');\n    details.toggle(isExpanded); // if expanded, focus first link in detail area\n\n    if (isExpanded) {\n      details.find('a:first').focus();\n    } // Set the link contents. Second param for being currently expanded or collapsed\n\n\n    this.setShowMoreLink(header.closest('.stream-category'), isExpanded);\n  }\n\n  setShowMoreLink($category) {\n    if (!$category) return; // determine if currently expanded\n\n    const isExpanded = $category.find('.details_container').is(':visible'); // go up to stream-category to build the text to display\n\n    const categoryName = $category.data('category');\n    const count = parseInt($category.find('.count:first').text(), 10);\n    const assistiveText = this.getCategoryText(categoryName, count, !isExpanded);\n    const $link = $category.find('.toggle-details');\n    $link.html(Object(_jst_show_more_link_handlebars__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({\n      expanded: isExpanded,\n      assistiveText\n    }));\n  }\n\n  getCategoryText(category, count, forExpand) {\n    if (category === 'Announcement') {\n      if (forExpand) {\n        return i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__[\"default\"].t('announcements_expand', {\n          one: 'Expand %{count} announcement',\n          other: 'Expand %{count} announcements'\n        }, {\n          count\n        });\n      } else {\n        return i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__[\"default\"].t('announcements_collapse', {\n          one: 'Collapse %{count} announcement',\n          other: 'Collapse %{count} announcements'\n        }, {\n          count\n        });\n      }\n    } else if (category === 'Conversation') {\n      if (forExpand) {\n        return i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__[\"default\"].t('conversations_expand', {\n          one: 'Expand %{count} conversation message',\n          other: 'Expand %{count} conversation messages'\n        }, {\n          count\n        });\n      } else {\n        return i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__[\"default\"].t('conversations_collapse', {\n          one: 'Collapse %{count} conversation message',\n          other: 'Collapse %{count} conversation messages'\n        }, {\n          count\n        });\n      }\n    } else if (category === 'Assignment') {\n      if (forExpand) {\n        return i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__[\"default\"].t('assignments_expand', {\n          one: 'Expand %{count} assignment notification',\n          other: 'Expand %{count} assignment notifications'\n        }, {\n          count\n        });\n      } else {\n        return i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__[\"default\"].t('assignments_collapse', {\n          one: 'Collapse %{count} assignment notification',\n          other: 'Collapse %{count} assignment notifications'\n        }, {\n          count\n        });\n      }\n    } else if (category === 'DiscussionTopic') {\n      if (forExpand) {\n        return i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__[\"default\"].t('discussions_expand', {\n          one: 'Expand %{count} discussion',\n          other: 'Expand %{count} discussions'\n        }, {\n          count\n        });\n      } else {\n        return i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__[\"default\"].t('discussions_collapse', {\n          one: 'Collapse %{count} discussion',\n          other: 'Collapse %{count} discussions'\n        }, {\n          count\n        });\n      }\n    } else {\n      return '';\n    }\n  }\n\n  handleDetailsClick(event) {\n    const row = jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.target).closest('tr');\n    return row.find('a');\n  } // TODO: switch recent items to client rendering and skip all this\n  // ridiculous dom manip that is likely to just get worse\n\n\n  updateCategoryCounts(event) {\n    const parent = jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.target).closest('li[class^=stream-]');\n    const items = parent.find('tbody tr').filter(':visible');\n\n    if (items.length) {\n      parent.find('.count').text(items.length);\n    } else {\n      parent[0].remove();\n    }\n\n    return this.setShowMoreLink(jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.target).closest('.stream-category'));\n  }\n\n  handleTooltipFocus(event) {\n    // needed so that the screenreader will read target element before points possible on focus\n    setTimeout(() => jquery__WEBPACK_IMPORTED_MODULE_1___default.a.screenReaderFlashMessage(jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.target).find('.screenreader_points_possible').text()), 6000);\n  }\n\n  closeConference(e) {\n    e.preventDefault();\n    if (!confirm(i18n_dashboard__WEBPACK_IMPORTED_MODULE_4__[\"default\"].t('confirm.close', 'Are you sure you want to end this conference?\\n\\nYou will not be able to reopen it.'))) return;\n    const link = jquery__WEBPACK_IMPORTED_MODULE_1___default()(e.currentTarget);\n    return jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajaxJSON(link.attr('href'), 'POST', {}, data => link.parents('.ic-notification.conference').hide());\n  }\n\n}\nDashboardView.initClass();\n\n//# sourceURL=webpack:///./ui/features/dashboard/backbone/views/DashboardView.js?");

/***/ }),

/***/ "wU+L":
/*!*****************************************************************************************!*\
  !*** ./frontend_build/i18n.js?dashboard.show_more_link!./ui/shims/dummyI18nResource.js ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n/i18nObj */ \"HGxv\");\n/* harmony import */ var translations_core_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! translations/_core_en */ \"0sPK\");\n\n    \n    \n    \n\n    /* harmony default export */ __webpack_exports__[\"default\"] = (_canvas_i18n_i18nObj__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scoped('dashboard.show_more_link'));\n  \n\n//# sourceURL=webpack:///./ui/shims/dummyI18nResource.js?./frontend_build/i18n.js?dashboard.show_more_link");

/***/ }),

/***/ "zOIg":
/*!*************************************************************!*\
  !*** ./ui/features/dashboard/jst/show_more_link.handlebars ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! handlebars/runtime */ \"3O+N\");\n/* harmony import */ var handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(handlebars_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var i18n_dashboard_show_more_link__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18n!dashboard.show_more_link */ \"wU+L\");\n/* harmony import */ var _canvas_handlebars_helpers_index_coffee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/handlebars-helpers/index.coffee */ \"BGrI\");\n\n    \n    var Handlebars = handlebars_runtime__WEBPACK_IMPORTED_MODULE_0___default.a.default;\n    \n\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = '/home/td/workspace/canvas/ui/features/dashboard/jst/show-more-link';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n  <span aria-hidden=\\\"true\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"dashboard.show_more_link\")\n  },data:data},helper ? helper.call(depth0, \"show_less\", \"Show Less\", options) : helperMissing.call(depth0, \"t\", \"show_less\", \"Show Less\", options)))\n    + \" <i class=\\\"icon-mini-arrow-up\\\"></i></span>\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n  <span aria-hidden=\\\"true\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"dashboard.show_more_link\")\n  },data:data},helper ? helper.call(depth0, \"show_more\", \"Show More\", options) : helperMissing.call(depth0, \"t\", \"show_more\", \"Show More\", options)))\n    + \" <i class=\\\"icon-mini-arrow-down\\\"></i></span>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.expanded), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<span class='screenreader-only'>\";\n  if (helper = helpers.assistiveText) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.assistiveText); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  });\n    ;\n    ;\n    /* harmony default export */ __webpack_exports__[\"default\"] = (templates[name]);\n  \n\n//# sourceURL=webpack:///./ui/features/dashboard/jst/show_more_link.handlebars?");

/***/ })

}]);