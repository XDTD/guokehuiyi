<!DOCTYPE html>
<html>
  <head>
    <meta name="Content-Type" content="text/html;charset=UTF-8">
<meta charset="UTF-8">
<title><!--
 - Canvas LMS REST API Documentation</title>
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />
<link href="css/prettify.css" rel="stylesheet" type="text/css" media="screen" />
<script src="js/jquery.min.js" type="text/javascript"></script>
<script src="js/prettify.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
  // set up pretty-printing in static docs generated from .md files
  $('pre.code.bash').addClass('prettyprint language-bash');
  $('pre.code.html').addClass('prettyprint language-html');
  $('pre.code.xml').addClass('prettyprint language-xml');
  $('pre.code.json').addClass('prettyprint language-js');
  $('pre.code.javascript').addClass('prettyprint language-js');
  prettyPrint();
});
</script>

  </head>
  <body>

    <div id="header">
      <h1>
  <a href="index.html">Canvas LMS - REST API and Extensions Documentation</a>
</h1>
    </div>

    <div id="sidebar">
      <nav>
  <h2 class='first'>Basics</h2>
  <a href="file.graphql.html" class="">GraphQL</a>
  <a href="file.changelog.html" class="">API Change Log</a>
  <a href="file.object_ids.html" class="">SIS IDs</a>
  <a href="file.pagination.html" class="">Pagination</a>
  <a href="file.throttling.html" class="">Throttling</a>
  <a href="file.compound_documents.html" class="">Compound Documents</a>
  <a href="file.file_uploads.html" class="">File Uploads</a>
  <a href="file.endpoint_attributes.html" class="">API Endpoint Attributes</a>
  <a href="file.masquerading.html" class="">Masquerading</a>
  <h2>OAuth2</h2>
  <a href="file.oauth.html" class="">OAuth2 Overview</a>
  <a href="file.oauth_endpoints.html" class="">OAuth2 Endpoints</a>
  <a href="file.developer_keys.html" class="">Developer Keys</a>
  <h2>Resources</h2>
  <a  href="all_resources.html">All Resources Reference</a>
  
    
    <a class="" href="api_token_scopes.html">API Token Scopes</a>
  
    
    <a class="" href="account_notifications.html">Account Notifications</a>
  
    
    <a class="" href="account_reports.html">Account Reports</a>
  
    
    <a class="" href="accounts.html">Accounts</a>
  
    
    <a class="" href="accounts_(lti).html">Accounts (LTI)</a>
  
    
    <a class="" href="admins.html">Admins</a>
  
    
    <a class="" href="announcement_external_feeds.html">Announcement External Feeds</a>
  
    
    <a class="" href="announcements.html">Announcements</a>
  
    
    <a class="" href="appointment_groups.html">Appointment Groups</a>
  
    
    <a class="" href="assignment_extensions.html">Assignment Extensions</a>
  
    
    <a class="" href="assignment_groups.html">Assignment Groups</a>
  
    
    <a class="" href="assignments.html">Assignments</a>
  
    
    <a class="" href="authentication_providers.html">Authentication Providers</a>
  
    
    <a class="" href="authentications_log.html">Authentications Log</a>
  
    
    <a class="" href="blueprint_courses.html">Blueprint Courses</a>
  
    
    <a class="" href="bookmarks.html">Bookmarks</a>
  
    
    <a class="" href="brand_configs.html">Brand Configs</a>
  
    
    <a class="" href="calendar_events.html">Calendar Events</a>
  
    
    <a class="" href="collaborations.html">Collaborations</a>
  
    
    <a class="" href="comm_messages.html">CommMessages</a>
  
    
    <a class="" href="communication_channels.html">Communication Channels</a>
  
    
    <a class="" href="conferences.html">Conferences</a>
  
    
    <a class="" href="content_exports.html">Content Exports</a>
  
    
    <a class="" href="content_migrations.html">Content Migrations</a>
  
    
    <a class="" href="content_security_policy_settings.html">Content Security Policy Settings</a>
  
    
    <a class="" href="content_shares.html">Content Shares</a>
  
    
    <a class="" href="conversations.html">Conversations</a>
  
    
    <a class="" href="course_audit_log.html">Course Audit log</a>
  
    
    <a class="" href="course_quiz_extensions.html">Course Quiz Extensions</a>
  
    
    <a class="" href="courses.html">Courses</a>
  
    
    <a class="" href="custom_gradebook_columns.html">Custom Gradebook Columns</a>
  
    
    <a class="" href="discussion_topics.html">Discussion Topics</a>
  
    
    <a class="" href="enrollment_terms.html">Enrollment Terms</a>
  
    
    <a class="" href="enrollments.html">Enrollments</a>
  
    
    <a class="" href="error_reports.html">Error Reports</a>
  
    
    <a class="" href="external_tools.html">External Tools</a>
  
    
    <a class="" href="favorites.html">Favorites</a>
  
    
    <a class="" href="feature_flags.html">Feature Flags</a>
  
    
    <a class="" href="files.html">Files</a>
  
    
    <a class="" href="grade_change_log.html">Grade Change Log</a>
  
    
    <a class="" href="gradebook_history.html">Gradebook History</a>
  
    
    <a class="" href="grading_periods.html">Grading Periods</a>
  
    
    <a class="" href="grading_standards.html">Grading Standards</a>
  
    
    <a class="" href="group_categories.html">Group Categories</a>
  
    
    <a class="" href="groups.html">Groups</a>
  
    
    <a class="" href="history.html">History</a>
  
    
    <a class="" href="image_search.html">Image Search</a>
  
    
    <a class="" href="immersive_reader.html">Immersive Reader</a>
  
    
    <a class="" href="inst_access_tokens.html">InstAccess tokens</a>
  
    
    <a class="" href="jw_ts.html">JWTs</a>
  
    
    <a class="" href="late_policy.html">Late Policy</a>
  
    
    <a class="" href="line_items.html">Line Items</a>
  
    
    <a class="" href="live_assessments.html">LiveAssessments</a>
  
    
    <a class="" href="logins.html">Logins</a>
  
    
    <a class="" href="media_objects.html">Media Objects</a>
  
    
    <a class="" href="moderated_grading.html">Moderated Grading</a>
  
    
    <a class="" href="modules.html">Modules</a>
  
    
    <a class="" href="names_and_role.html">Names and Role</a>
  
    
    <a class="" href="notification_preferences.html">Notification Preferences</a>
  
    
    <a class="" href="originality_reports.html">Originality Reports</a>
  
    
    <a class="" href="outcome_groups.html">Outcome Groups</a>
  
    
    <a class="" href="outcome_imports.html">Outcome Imports</a>
  
    
    <a class="" href="outcome_results.html">Outcome Results</a>
  
    
    <a class="" href="outcomes.html">Outcomes</a>
  
    
    <a class="" href="pages.html">Pages</a>
  
    
    <a class="" href="peer_reviews.html">Peer Reviews</a>
  
    
    
    
    
    <a class="" href="planner.html">Planner</a>
  
    
    <a class="" href="poll_sessions.html">Poll Sessions</a>
  
    
    <a class="" href="poll_choices.html">PollChoices</a>
  
    
    <a class="" href="poll_submissions.html">PollSubmissions</a>
  
    
    <a class="" href="polls.html">Polls</a>
  
    
    <a class="" href="proficiency_ratings.html">Proficiency Ratings</a>
  
    
    <a class="" href="progress.html">Progress</a>
  
    
    <a class="" href="public_jwk.html">Public JWK</a>
  
    
    <a class="" href="quiz_assignment_overrides.html">Quiz Assignment Overrides</a>
  
    
    <a class="" href="quiz_extensions.html">Quiz Extensions</a>
  
    
    <a class="" href="quiz_ip_filters.html">Quiz IP Filters</a>
  
    
    <a class="" href="quiz_question_groups.html">Quiz Question Groups</a>
  
    
    <a class="" href="quiz_questions.html">Quiz Questions</a>
  
    
    <a class="" href="quiz_reports.html">Quiz Reports</a>
  
    
    <a class="" href="quiz_statistics.html">Quiz Statistics</a>
  
    
    <a class="" href="quiz_submission_events.html">Quiz Submission Events</a>
  
    
    <a class="" href="quiz_submission_files.html">Quiz Submission Files</a>
  
    
    <a class="" href="quiz_submission_questions.html">Quiz Submission Questions</a>
  
    
    <a class="" href="quiz_submission_user_list.html">Quiz Submission User List</a>
  
    
    <a class="" href="quiz_submissions.html">Quiz Submissions</a>
  
    
    <a class="" href="quizzes.html">Quizzes</a>
  
    
    <a class="" href="result.html">Result</a>
  
    
    <a class="" href="roles.html">Roles</a>
  
    
    <a class="" href="rubrics.html">Rubrics</a>
  
    
    <a class="" href="sis_import_errors.html">SIS Import Errors</a>
  
    
    <a class="" href="sis_imports.html">SIS Imports</a>
  
    
    <a class="" href="sis_integration.html">SIS Integration</a>
  
    
    <a class="" href="score.html">Score</a>
  
    
    <a class="" href="search.html">Search</a>
  
    
    <a class="" href="sections.html">Sections</a>
  
    
    <a class="" href="services.html">Services</a>
  
    
    <a class="" href="shared_brand_configs.html">Shared Brand Configs</a>
  
    
    <a class="" href="submission_comments.html">Submission Comments</a>
  
    
    <a class="" href="submissions.html">Submissions</a>
  
    
    <a class="" href="tabs.html">Tabs</a>
  
    
    <a class="" href="user_observees.html">User Observees</a>
  
    
    <a class="" href="users.html">Users</a>
  
    
    
    <a class="" href="e_pub_exports.html">ePub Exports</a>
  
  <h2>Outcomes</h2>
  <a href="file.outcomes_csv.html" class="">Outcomes CSV Format</a>
  <h2>Group Categories</h2>
  <a href="file.group_category_csv.html" class="">Group Categories CSV Format</a>
  <h2>SIS</h2>
  <a href="file.sis_csv.html" class="">SIS CSV Format</a>
  <h2>External Tools</h2>
  <td>
    <li><h4>LTI</h4>
      <a href="file.tools_intro.html" class="">Introduction</a>
      <a href="file.lti_dev_key_config.html" class="">Configuring</a>
      <a href="file.tools_variable_substitutions.html" class="">Variable Substitutions</a>
      <a href="file.content_item.html" class="">Deep Linking</a>
      <a href="file.assignment_tools.html" class="">Grading</a>
      <a href="file.provisioning.html" class="">Provisioning</a>
      <a href="file.lti_window_post_message.html" class="">window.PostMessage</a>
        <ul><h4>Placements</h4>
                <a href="file.navigation_tools.html" class="">Navigation</a>
                <a href="file.homework_submission_placement.html" class="">Homework Submission</a>
                <a href="file.editor_button_placement.html" class="">Editor Button</a>
                <a href="file.migration_selection_placement.html" class="">Migration Selection</a>
                <a href="file.link_selection_placement.html" class="">Link Selection (Modules)</a>
                <a href="file.assignment_selection_placement.html" class="">Assignment Selection</a>
                <a href="file.collaborations_placement.html" class="">Collaborations</a>
        </ul >
      <a href="file.xapi.html" class="">xAPI</a>
    </li >
    <li><h4>Plagiarism Detection Platform</h4>
      <a href="file.plagiarism_platform.html" class="">Overview</a>
      
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <a class="" href="plagiarism_detection_platform_assignments.html">Plagiarism Detection Platform Assignments</a>
      
        
        <a class="" href="plagiarism_detection_platform_users.html">Plagiarism Detection Platform Users</a>
      
        
        <a class="" href="plagiarism_detection_submissions.html">Plagiarism Detection Submissions</a>
      
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <a class="" href="webhooks_subscriptions_for_plagiarism_platform.html">Webhooks Subscriptions for Plagiarism Platform</a>
      
        
      <a href="file.jwt_access_tokens.html" class="">JWT Access Tokens</a>
    </li >
  </td>
  <h2>Data Services</h2>
  <td>
    <li>
      <h4>Live Events</h4>
      <ul>
        <h4>Overview</h4>
        <a href="file.data_service_introduction.html" class="">Introduction</a>
        <a href="file.data_service_setup.html" class="">Setup</a>
        <a href="file.data_service_canvas_event_metadata.html" class="">Metadata</a>
      </ul>

      <ul>
        <h4>Event Format</h4>
        <li>
          <h4>Canvas</h4>
          
            <a href="file.data_service_canvas_account.html" class="">Account</a>
          
            <a href="file.data_service_canvas_asset.html" class="">Asset</a>
          
            <a href="file.data_service_canvas_assignment.html" class="">Assignment</a>
          
            <a href="file.data_service_canvas_attachment.html" class="">Attachment</a>
          
            <a href="file.data_service_canvas_content.html" class="">Content</a>
          
            <a href="file.data_service_canvas_conversation.html" class="">Conversation</a>
          
            <a href="file.data_service_canvas_course.html" class="">Course</a>
          
            <a href="file.data_service_canvas_discussion.html" class="">Discussion</a>
          
            <a href="file.data_service_canvas_enrollment.html" class="">Enrollment</a>
          
            <a href="file.data_service_canvas_grade.html" class="">Grade</a>
          
            <a href="file.data_service_canvas_group.html" class="">Group</a>
          
            <a href="file.data_service_canvas_learning.html" class="">Learning</a>
          
            <a href="file.data_service_canvas_logged.html" class="">Logged</a>
          
            <a href="file.data_service_canvas_module.html" class="">Module</a>
          
            <a href="file.data_service_canvas_outcome.html" class="">Outcome</a>
          
            <a href="file.data_service_canvas_plagiarism.html" class="">Plagiarism</a>
          
            <a href="file.data_service_canvas_quiz.html" class="">Quiz</a>
          
            <a href="file.data_service_canvas_sis.html" class="">Sis</a>
          
            <a href="file.data_service_canvas_submission.html" class="">Submission</a>
          
            <a href="file.data_service_canvas_syllabus.html" class="">Syllabus</a>
          
            <a href="file.data_service_canvas_user.html" class="">User</a>
          
            <a href="file.data_service_canvas_wiki.html" class="">Wiki</a>
          
        </li>
        <li>
          <h4>Caliper IMS 1.1</h4>
          
            <a href="file.data_service_caliper_assessment.html" class="">Assessment</a>
          
            <a href="file.data_service_caliper_basic.html" class="">Basic</a>
          
            <a href="file.data_service_caliper_forum.html" class="">Forum</a>
          
            <a href="file.data_service_caliper_grading.html" class="">Grading</a>
          
            <a href="file.data_service_caliper_navigation_events.html" class="">Navigation Events</a>
          
            <a href="file.data_service_caliper_session.html" class="">Session</a>
          
        </li>
      </ul>
    </li>
  </td>
</nav>

    </div>

    <div id="content"><div id='filecontents'><!--
  DONT EDIT THIS FILE DIRECTLY
  Update:
    - doc/api/tools_variable_substitutions.head.md
    - lib/lti/variable_expander.rb

  then run `script/generate_lti_variable_substitution_markdown`
-->

<h1 id="lti-variable-substitutions">LTI Variable Substitutions</h1>

<p>Variable substitution (aka variable expansion) is where custom variables really start to
shine.  They provide a mechanism for tool providers to request that specific, contextual
information be sent across in the launch.  When the tool consumer processes the launch request,
it detects requested variable substitutions and sends the appropriate data where possible.
Adding variable substitutions is exactly the same as adding custom variables, except the values
are variables instead of constants.  This is denoted by prefixing the value with a $.  If the
tool consumer doesn&#39;t recognize, or can&#39;t substitute, the value it will just send the variable
as if it were are regular custom variable (i.e. the name of the substitution variable will be
sent rather than the value).</p>

<p>This allows Canvas to expose data as LTI launch parameters during the LTI launch rather than
requiring access to the Canvas API, which can be expensive for Canvas and the tool.  It allows
tool providers to be much more surgical when requesting user data, and it paves the way for us
to be more transparent to tool installers, by showing them exactly what data the LTI tool will
be given access to. Additionally, variable substitutions are generally simple to add to Canvas
relative to gaining API access.</p>

<p>There are currently over 80 substitutions available.  Many of the substitutions simply
give access to additional user and context information.  An LTI tool can request things
like SIS ids, names, an avatar image, and an email address.  Other variable substitutions
assist tools with accessibility (prefersHighContrast), course copy (previousCourseIds), and
masquerading users.  Additionally, when we don&#39;t provide enough information or customization
directly through LTI, tools can request everything they need to use the Canvas API for an even
richer experience.</p>

<p>Some substitutions may be used as &#39;enabled_capabilities&#39; for LTI2 tools. These substitutions have a
&#39;Launch Parameter&#39; label indicating the parameter name that will be sent in the tool launch if enabled.</p>

<p>For more information on variable substitution, see the <a href="https://www.imsglobal.org/specs/ltiv1p1p1/implementation-guide#toc-9">IMS LTI specification</a>.</p>

<h1 id="usage-configuration">Usage/Configuration</h1>

<p>Variable substitutions can be configured for a tool in 3 ways:</p>

<h2 id="via-ui">Via UI</h2>

<p>Custom fields can be <a href="https://community.canvaslms.com/t5/Admin-Guide/How-do-I-configure-a-manual-entry-external-app-for-an-account/ta-p/219">configured via UI</a> by editing the tool configuration and adding the
desired variable to the Custom Fields text box.</p>

<p>The following would add the domain as a launch parameter called custom_arbitrary_name:</p>

<pre class="code"><code class=""><span class='id identifier rubyid_arbitrary_name'>arbitrary_name</span><span class='op'>=</span><span class='gvar'>$Canvas</span><span class='period'>.</span><span class='id identifier rubyid_api'>api</span><span class='period'>.</span><span class='id identifier rubyid_domain'>domain</span>
</code></pre>

<h2 id="via-api">Via API</h2>

<p>Custom fields can also be <a href="/doc/api/external_tools.html#method.external_tools.create">configured via API</a>.</p>

<p>This would install a course-level tool with domain as a custom field:</p>

<pre class="code"><code class="">curl &#39;https://&lt;domain&gt;.instructure.com/api/v1/courses/&lt;course_id&gt;/external_tools&#39; \
  -X POST \
  -H &quot;Authorization: Bearer &lt;token&gt;;&quot; \
  -F &#39;name=LTI Example&#39; \
  -F &#39;consumer_key=some_key&#39; \
  -F &#39;shared_secret=some_secret&#39; \
  -F &#39;url=https://example.com/ims/lti&#39; \
  -F &#39;privacy_level=name_only&#39; \
  -F &#39;custom_fields[domain]=$Canvas.api.domain&#39;
</code></pre>

<h2 id="via-json-configuration-lti-1-3">Via JSON Configuration (LTI 1.3)</h2>

<p>JSON can be used to <a href="https://community.canvaslms.com/t5/Admin-Guide/How-do-I-configure-an-LTI-key-for-an-account/ta-p/140" target="_blank">configure an LTI 1.3 Developer Key</a>.</p>

<p>The following JSON would create a developer key with the a placement specfic custom field and a tool-level custom field:</p>

<pre class="code"><code class=""><span class='lbrace'>{</span>  
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>title</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Variable Expansion Tool</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>scopes</span><span class='label_end'>&quot;:</span><span class='lbracket'>[</span>  

   <span class='rbracket'>]</span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>extensions</span><span class='label_end'>&quot;:</span><span class='lbracket'>[</span>  
      <span class='lbrace'>{</span>  
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>domain</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>variableexpander.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tool_id</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>variable-expansion-example</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>platform</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>canvas.instructure.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>settings</span><span class='label_end'>&quot;:</span><span class='lbrace'>{</span>  
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Variation Expansion Tool Text</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>icon_url</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://some.icon.url</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>placements</span><span class='label_end'>&quot;:</span><span class='lbracket'>[</span>  
               <span class='lbrace'>{</span>  
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>User Navigation Placement</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>enabled</span><span class='label_end'>&quot;:</span><span class='kw'>true</span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>icon_url</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://static.thenounproject.com/png/131630-200.png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>placement</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_navigation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>message_type</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LtiResourceLinkRequest</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>target_link_uri</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://lti-ri.imsglobal.org/lti/tools/281/launches</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>canvas_icon_class</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>icon-lti</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>custom_fields</span><span class='label_end'>&quot;:</span><span class='lbrace'>{</span>  
                     <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$Canvas.user.id</span><span class='tstring_end'>&quot;</span></span>
                  <span class='rbrace'>}</span>
               <span class='rbrace'>}</span>
            <span class='rbracket'>]</span>
         <span class='rbrace'>}</span>
      <span class='rbrace'>}</span>
   <span class='rbracket'>]</span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>public_jwk</span><span class='label_end'>&quot;:</span><span class='lbrace'>{</span>  
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>kty</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RSA</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alg</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RS256</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AQAB</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>kid</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>8f796169-0ac4-48a3-a202-fa4f3d814fcd</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nZD7QWmIwj-3N_RZ1qJjX6CdibU87y2l02yMay4KunambalP9g0fU9yZLwLX9WYJINcXZDUf6QeZ-SSbblET-h8Q4OvfSQ7iuu0WqcvBGy8M0qoZ7I-NiChw8dyybMJHgpiP_AyxpCQnp3bQ6829kb3fopbb4cAkOilwVRBYPhRLboXma0cwcllJHPLvMp1oGa7Ad8osmmJhXhM9qdFFASg_OCQdPnYVzp8gOFeOGwlXfSFEgt5vgeU25E-ycUOREcnP7BnMUk7wpwYqlE537LWGOV5z_1Dqcqc9LmN-z4HmNV7b23QZW4_mzKIOY4IqjmnUGgLU9ycFj5YGDCts7Q</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>use</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sig</span><span class='tstring_end'>&quot;</span></span>
   <span class='rbrace'>}</span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>description</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.3 Test Tool</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>custom_fields</span><span class='label_end'>&quot;:</span><span class='lbrace'>{</span>  
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$Canvas.user.sisid</span><span class='tstring_end'>&quot;</span></span>
   <span class='rbrace'>}</span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>target_link_uri</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://your.target_link_uri</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>oidc_initiation_url</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://your.oidc_initiation_url</span><span class='tstring_end'>&quot;</span></span>
<span class='rbrace'>}</span>
</code></pre>

<h2 id="via-xml-configuration-lti-1-1">Via XML Configuration (LTI 1.1)</h2>

<p>Custom fields can also be <a href="/doc/api/file.tools_xml.html">configured via XML</a>.</p>

<p>This would create a tool in a course with custom fields, some of which are specific for a
particular placement:</p>

<pre class="code"><code class="">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
   &lt;cartridge_basiclti_link xmlns=&quot;http://www.imsglobal.org/xsd/imslticc_v1p0&quot;
       xmlns:blti = &quot;http://www.imsglobal.org/xsd/imsbasiclti_v1p0&quot;
       xmlns:lticm =&quot;http://www.imsglobal.org/xsd/imslticm_v1p0&quot;
       xmlns:lticp =&quot;http://www.imsglobal.org/xsd/imslticp_v1p0&quot;
       xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation = &quot;http://www.imsglobal.org/xsd/imslticc_v1p0 http://www.imsglobal.org/xsd/lti/ltiv1p0/imslticc_v1p0.xsd
       http://www.imsglobal.org/xsd/imsbasiclti_v1p0 http://www.imsglobal.org/xsd/lti/ltiv1p0/imsbasiclti_v1p0.xsd
       http://www.imsglobal.org/xsd/imslticm_v1p0 http://www.imsglobal.org/xsd/lti/ltiv1p0/imslticm_v1p0.xsd
       http://www.imsglobal.org/xsd/imslticp_v1p0 http://www.imsglobal.org/xsd/lti/ltiv1p0/imslticp_v1p0.xsd&quot;&gt;
     &lt;blti:title&gt;Wikipedia&lt;/blti:title&gt;
     &lt;blti:launch_url&gt;https://www.wikipedia.org/&lt;/blti:launch_url&gt;
     &lt;blti:custom&gt;
       &lt;lticm:property name=&quot;user_sis_id&quot;&gt;$Person.sourcedId&lt;/lticm:property&gt;
     &lt;/blti:custom&gt;
     &lt;blti:extensions platform=&quot;canvas.instructure.com&quot;&gt;
       &lt;lticm:property name=&quot;domain&quot;&gt;wikipedia.org&lt;/lticm:property&gt;
       &lt;lticm:options name=&quot;custom_fields&quot;&gt;
           &lt;lticm:property name=&quot;canvas_api_domain&quot;&gt;$Canvas.api.domain&lt;/lticm:property&gt;
           &lt;lticm:property name=&quot;canvas_user_id&quot;&gt;$Canvas.user.id&lt;/lticm:property&gt;
       &lt;/lticm:options&gt;
       &lt;lticm:options name=&quot;course_navigation&quot;&gt;
         &lt;lticm:property name=&quot;url&quot;&gt;https://en.wikipedia.org/wiki/Wikipedia:Unusual_articles#mediaviewer/File:Cow-on_pole,_with_antlers.jpeg&lt;/lticm:property&gt;
         &lt;lticm:property name=&quot;text&quot;&gt;Cow With Antlers&lt;/lticm:property&gt;
         &lt;lticm:options name=&quot;custom_fields&quot;&gt;
           &lt;lticm:property name=&quot;concluded_roles&quot;&gt;$Canvas.membership.concludedRoles&lt;/lticm:property&gt;
         &lt;/lticm:options&gt;
       &lt;/lticm:options&gt;
     &lt;/blti:extensions&gt;
   &lt;/cartridge_basiclti_link&gt;
</code></pre>

<h1 id="supported-substitutions">Supported Substitutions</h1>
</div></div>

    <script type="text/javascript">
  $('h2.api_method_name').each(function(i, el) {
    var subtopic = $(el).data('subtopic');
    var $a = $(el).find('a');
    if ($.trim($a[0].innerHTML) == '')
      return;
    var $row = $('table#quicklinks tr').filter(function() { return $(this).data('subtopic') == subtopic; });
    if ($row.length == 0) {
      $row = $('<tr/>').appendTo($('table#quicklinks'));
      $row.data('subtopic', subtopic);
      $('<th/>').append(subtopic).appendTo($row);
      $('<td/>').appendTo($row);
    }
    var link = $('<a/>').attr('href', '#'+$(el).attr('name')).append($.trim($a[0].innerHTML));
    $row.find('td').append(link);
  });
</script>
<div id="footer">
  &copy; Instructure, Inc. Generated on Thu Dec  2 17:25:06 2021<br>
  This documentation is generated directly from the Canvas LMS source code, available <a href="https://github.com/instructure/canvas-lms">on Github</a>.
</div>

  </body>
</html>
